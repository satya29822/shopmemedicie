!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t){e.exports=Handlebars},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<button type="button" class="btn btn-link pull-right close" data-dismiss="modal">\n    <span aria-hidden="true" class="fa fa-remove"></span><span class="sr-only">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Close",{name:"trans",hash:{},data:s}))+"</span>\n</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d="";return i=null!=(i=n.close||(null!=t?t.close:t))?i:c,r={name:"close",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.close||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'<div id="embed-modal">\n    <h4>'+u((n.trans||t&&t.trans||c).call(o,"Embed this Story",{name:"trans",hash:{},data:s}))+"</h4>\n    <h5>"+u((n.trans||t&&t.trans||c).call(o,"Preview",{name:"trans",hash:{},data:s}))+'</h5>\n    <iframe width="500" height="280" data-href="https://embed.wattpad.com/story/'+u("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:c)?i.call(o,{name:"id",hash:{},data:s}):i)+"?quote_text="+u("function"==typeof(i=null!=(i=n.quoteText||(null!=t?t.quoteText:t))?i:c)?i.call(o,{name:"quoteText",hash:{},data:s}):i)+'"\n            frameborder="0" allowfullscreen=""></iframe>\n    <div class="on-select embed-code">\n      <span id="embed-url">\n          &lt;iframe width="500" height="280" frameborder="0" allowfullscreen=""\n          src="https://embed.wattpad.com/story/'+u("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:c)?i.call(o,{name:"id",hash:{},data:s}):i)+'"\n          &gt;&lt;/iframe&gt;\n      </span>\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<form class="form-horizontal dropdown" role="form" name="search" action="/search/" action="GET" autocomplete="off">\n  <div class="loading-icon"></div>\n  <button type="submit">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-search",18,"wp-neutral-1",{name:"iconify",hash:{},data:s}))?l:"")+'\n  </button>\n  <input id="search-query" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"Search",{name:"trans",hash:{},data:s}))+'" name="q" type="text" role="search" spellcheck="false" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Search",{name:"trans",hash:{},data:s}))+'" value="'+c("function"==typeof(i=null!=(i=n.searchTerm||(null!=t?t.searchTerm:t))?i:o)?i.call(r,{name:"searchTerm",hash:{},data:s}):i)+'">\n  <input type="hidden" name="ref" value="1">\n  <div class="dropdown-menu items" aria-label="search-dropdown">\n      <ul aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Autocomplete",{name:"trans",hash:{},data:s}))+'" class="autocomplete-item-container"></ul>\n  </div>\n  <div class="triangle"></div>\n</form>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div class="dropdown-menu new-curation large" aria-labelledby="browse-dropdown">\n    <div class="col-xs-9 discover-categories">\n      <ul class="row">\n        <li class="title col-xs-12" aria-label="Browse Topics">'+o((n.trans||t&&t.trans||r).call(i,"Browse",{name:"trans",hash:{},data:s}))+"</li>\n"+(null!=(l=n.each.call(i,null!=t?t.browseTopics:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'      </ul>\n    </div>\n    <div class="col-xs-3 wattpad-picks">\n      <ul class="row" aria-label="Wattpad Picks">\n        <li class="title col-xs-12">'+o((n.trans||t&&t.trans||r).call(i,"Wattpad Picks",{name:"trans",hash:{},data:s}))+"</li>\n"+(null!=(l=n.each.call(i,null!=t?t.newCurationLists:t,{name:"each",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"      </ul>\n    </div>\n  </div>\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'          <li class="col-xs-4">\n              <a href="/stories/'+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+'" class="on-navigate on-topic">'+o("function"==typeof(l=null!=(l=n.topic||(null!=t?t.topic:t))?l:r)?l.call(i,{name:"topic",hash:{},data:s}):l)+"</a>\n          </li>\n"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <li class="col-xs-12">\n              <a href="/featured/'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'" class="on-navigate">'+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+"</a>\n            </li>\n"},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'  <div class="dropdown-menu large" aria-labelledby="browse-dropdown">\n    <div class="col-xs-3">\n      <ul class="bold" aria-label="Browse Topics">\n        <li>'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Browse",{name:"trans",hash:{},data:s}))+'</li>\n      </ul>\n    </div>\n\n    <div class="col-xs-9 discover-categories">\n      <ul class="row">\n'+(null!=(l=n.each.call(i,null!=t?t.browseTopics:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"      </ul>\n    </div>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div class="triangle"></div>\n\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.newCurationLists:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(6,s,0),data:s}))?l:"")},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <div class="collection">'+(null!=(l="function"==typeof(i=null!=(i=n.itemsContent||(null!=t?t.itemsContent:t))?i:o)?i.call(r,{name:"itemsContent",hash:{},data:s}):i)?l:"")+'</div>\n    <div class="show-more center-text'+(null!=(l=n.if.call(r,null!=t?t.hasMore:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(2,s,0),data:s}))?l:"")+'">\n        <button class="btn btn-link on-showmore" role="button" aria-controls="'+c("function"==typeof(i=null!=(i=n.containerId||(null!=t?t.containerId:t))?i:o)?i.call(r,{name:"containerId",hash:{},data:s}):i)+"\">\n          <span class='show-more-message'>\n              <span>"+c((n.trans||t&&t.trans||o).call(r,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n              <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n          </span>\n          <span class='loading-message hidden'>\n              "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||o).call(r,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n              <span> "+c((n.trans||t&&t.trans||o).call(r,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n          </span>\n        </button>\n    </div>\n"},2:function(e,t,n,a,s){return" hidden"},4:function(e,t,n,a,s){var l;return'  <div class="collection"><p>'+e.escapeExpression("function"==typeof(l=null!=(l=n.emptyMessage||(null!=t?t.emptyMessage:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"emptyMessage",hash:{},data:s}):l)+"</p></div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.count:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{};return'      <div class="story'+(null!=(l=n.if.call(r,null!=t?t.promoted:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+'" data-story-id="'+e.escapeExpression("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:n.helperMissing)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n'+(null!=(l=e.invokePartial(a["core.item_views.story_item"],t,{name:"core.item_views.story_item",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"      </div>\n"},3:function(e,t,n,a,s){return" story-item"},5:function(e,t,n,a,s){return" on-story-preview"},7:function(e,t,n,a,s){return'    <p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No stories available.",{name:"trans",hash:{},data:s}))+"</p>\n"},9:function(e,t,n,a,s){var l,i=e.escapeExpression;return'<a class="btn btn-link" href=\''+i(e.lambda(null!=(l=null!=t?t.filter:t)?l.link:l,t))+"'>\n  "+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"View More in %s",null!=(l=null!=t?t.filter:t)?l.name:l,{name:"trans",hash:{},data:s}))+"\n</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"<div class='collection'>\n"+(null!=(l=n.if.call(i,null!=t?t.hasStories:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+"</div>\n"+(null!=(l=n.if.call(i,null!=t?t.filter:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'<div id="preview-modal"></div>\n'},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="triangle"></div>\n<div class="dropdown-menu dropdown-menu-right add-to-library">\n    <ul class="lists-menu" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'"></ul>\n    <div class="inputs">\n        <label for="new-reading-list" class="sr-only">'+c((n.trans||t&&t.trans||o).call(r,"New Reading List",{name:"trans",hash:{},data:s}))+"</label>\n        "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-warning",12,"wp-errorbackground error-feedback",{name:"iconify",hash:{},data:s}))?l:"")+'\n        <input id="new-reading-list" type="text" class="form-control list-name list-error-placeholder"\n               placeholder="'+c((n.trans||t&&t.trans||o).call(r,"Add new reading list...",{name:"trans",hash:{},data:s}))+'">\n        <button class="btn btn-orange on-create-list" type="button" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",9,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n        </button>\n    </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" in-list"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'  <div class="status">\n    <span class="check '+(null!=(l=n.unless.call(i,null!=t?t.inList:t,{name:"unless",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'fa-stack fa-lg in-list">\n      '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-empty","auto","wp-base-2 fa-stack-2x",{name:"iconify",hash:{},data:s}))?l:"")+"\n      "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-check","auto","wp-base-2 fa-stack-1x",{name:"iconify",hash:{},data:s}))?l:"")+'\n    </span>\n    <span class="hidden spinner">\n      '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",18,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{color:"wp-base-2"},data:s}))?l:"")+"\n    </span>\n  </div>\n"},4:function(e,t,n,a,s){return"hidden "},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<li><a class="on-modify-list'+(null!=(l=n.if.call(r,null!=t?t.inList:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'" data-list-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n  '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,null!=t?t.auto:t,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n  <span class="reading-list-name">'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+"</span>\n"+(null!=(l=n.unless.call(r,null!=t?t.hideStatus:t,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"</a></li>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"StoryItem",null!=t?t.id:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t["current-user"]:t)?l.recommendedTags:l,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(9,s,0),data:s}))?l:""},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <div class="dropdown-menu new-curation logged-in large" aria-labelledby="discover-dropdown">\n      <div class="col-xs-9">\n        <ul class="bold" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Browse Stories",{name:"trans",hash:{},data:s}))+'" id="main-browse-navigate">\n          <li><a class="on-navigate" href="/stories">'+o((n.trans||t&&t.trans||r).call(i,"Browse",{name:"trans",hash:{},data:s}))+'</a></li>\n        </ul>\n\n        <div class="col-xs-9 discover-categories">\n          <ul class="row" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Categories",{name:"trans",hash:{},data:s}))+'">\n'+(null!=(l=n.each.call(i,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'          </ul>\n        </div>\n\n        <div class="col-xs-3">\n          <ul aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Trending Tags",{name:"trans",hash:{},data:s}))+'">\n'+(null!=(l=n.each.call(i,null!=(l=null!=t?t["current-user"]:t)?l.recommendedTags:l,{name:"each",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'          </ul>\n        </div>\n      </div>\n\n      <div class="col-xs-3 wattpad-picks">\n        <ul class="row" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Wattpad Picks",{name:"trans",hash:{},data:s}))+'">\n          <li class="title col-xs-12">'+o((n.trans||t&&t.trans||r).call(i,"Wattpad Picks",{name:"trans",hash:{},data:s}))+"</li>\n"+(null!=(l=n.each.call(i,null!=t?t.newCurationLists:t,{name:"each",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"        </ul>\n      </div>\n    </div>\n"},3:function(e,t,n,a,s){var l=e.escapeExpression;return'              <li class="col-xs-6">\n                <a class="on-navigate" href="/stories/'+l((n.slugify||t&&t.slugify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name_english:t,{name:"slugify",hash:{},data:s}))+'">'+l(e.lambda(null!=t?t.name:t,t))+"</a>\n              </li>\n"},5:function(e,t,n,a,s){var l=e.escapeExpression;return'              <li><a class="on-navigate" href="/tags/'+l(e.lambda(t,t))+'">'+l((n.styleHashtag||t&&t.styleHashtag||n.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"styleHashtag",hash:{},data:s}))+"</a></li>\n"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <li class="col-xs-12">\n              <a href="/featured/'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'" class="on-navigate">'+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+"</a>\n            </li>\n"},9:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <div class="dropdown-menu new-curation large" aria-labelledby="discover-dropdown">\n      <div class="col-xs-3">\n        <ul class="bold" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Browse Stories",{name:"trans",hash:{},data:s}))+'" id="main-browse-navigate">\n          <li><a class="on-navigate" href="/stories">'+o((n.trans||t&&t.trans||r).call(i,"Browse",{name:"trans",hash:{},data:s}))+'</a></li>\n        </ul>\n      </div>\n\n      <div class="col-xs-6 discover-categories">\n        <ul class="row" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Categories",{name:"trans",hash:{},data:s}))+'">\n'+(null!=(l=n.each.call(i,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+'        </ul>\n      </div>\n\n      <div class="col-xs-3 wattpad-picks">\n        <ul class="row" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Wattpad Picks",{name:"trans",hash:{},data:s}))+'">\n          <li class="title col-xs-12">'+o((n.trans||t&&t.trans||r).call(i,"Wattpad Picks",{name:"trans",hash:{},data:s}))+"</li>\n"+(null!=(l=n.each.call(i,null!=t?t.newCurationLists:t,{name:"each",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"        </ul>\n      </div>\n    </div>\n"},10:function(e,t,n,a,s){var l=e.escapeExpression;return'            <li class="col-xs-6">\n              <a class="on-navigate" href="/stories/'+l((n.slugify||t&&t.slugify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name_english:t,{name:"slugify",hash:{},data:s}))+'">'+l(e.lambda(null!=t?t.name:t,t))+"</a>\n            </li>\n"},12:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div class="dropdown-menu large" aria-labelledby="discover-dropdown">\n    <div class="col-xs-3">\n      <ul class="bold" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Browse Stories",{name:"trans",hash:{},data:s}))+'" id="main-browse-navigate">\n        <li><a class="on-navigate" href="/stories">'+o((n.trans||t&&t.trans||r).call(i,"Browse",{name:"trans",hash:{},data:s}))+'</a></li>\n      </ul>\n    </div>\n\n    <div class="col-xs-6 discover-categories">\n      <ul class="row" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Categories",{name:"trans",hash:{},data:s}))+'">\n'+(null!=(l=n.each.call(i,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"      </ul>\n    </div>\n\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t["current-user"]:t)?l.recommendedTags:l,{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:"")+"  </div>\n"},13:function(e,t,n,a,s){var l=e.escapeExpression;return'          <li class="col-xs-6">\n            <a class="on-navigate" href="/stories/'+l((n.slugify||t&&t.slugify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name_english:t,{name:"slugify",hash:{},data:s}))+'">'+l(e.lambda(null!=t?t.name:t,t))+"</a>\n          </li>\n"},15:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'      <div class="col-xs-3">\n        <ul aria-label="'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Trending Tags",{name:"trans",hash:{},data:s}))+'">\n'+(null!=(l=n.each.call(i,null!=(l=null!=t?t["current-user"]:t)?l.recommendedTags:l,{name:"each",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")+"        </ul>\n      </div>\n"},16:function(e,t,n,a,s){var l=e.escapeExpression;return'            <li><a class="on-navigate" href="/tags/'+l(e.lambda(t,t))+'">'+l((n.styleHashtag||t&&t.styleHashtag||n.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"styleHashtag",hash:{},data:s}))+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div class="triangle"></div>\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.newCurationLists:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(12,s,0),data:s}))?l:"")},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"The Watty Awards",{name:"trans",hash:{},data:s}))},3:function(e,t,n,a,s){return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Awards",{name:"trans",hash:{},data:s}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="triangle"></div>\n<div class="dropdown-menu large" aria-labelledby="community-dropdown">\n  <ul aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Forums",{name:"trans",hash:{},data:s}))+'">\n    <li><a href="https://www.wattpadwriters.com">'+o((n.trans||t&&t.trans||r).call(i,"Forums",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li>\n      <a href="/awards">\n        '+(null!=(l=(n.canTrans||t&&t.canTrans||r).call(i,"The Watty Awards",{name:"canTrans",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"\n      </a>\n    </li>\n  </ul>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'  <div class="button-group inline-block relative pull-right">\n    <button class="btn btn-grey dropdown-toggle" data-toggle="dropdown"\n            role="button" aria-controls="activity-more-options" aria-expanded="false" aria-label="more options">\n        '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(i,"fa-more",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n    </button>\n    <div class="triangle"></div>\n    <ul id="activity-more-options" class="dropdown-menu align-right">\n'+(null!=(l=n.if.call(i,null!=t?t.isValidMessage:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+"    </ul>\n  </div>\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'        <li>\n          <a class="on-report" role="button" href="#"\n            data-toggle="modal" data-action="reportMessage">\n            '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-flag",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Report Message",{name:"trans",hash:{},data:s}))+"\n          </a>\n        </li>\n"+(null!=(l=n.if.call(i,null!=t?t.canDelete:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'          <li>\n            <a class="on-delete" role="button" href="#" data-toggle="modal"\n              data-action="deleteMessage">\n              '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-trash",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Delete Message",{name:"trans",hash:{},data:s}))+"\n            </a>\n          </li>\n"},5:function(e,t,n,a,s){var l;return null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:""},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'          <li>\n            <a class="on-hide" role="button" href="#"\n              data-toggle="modal" data-action="deleteEvent">\n            '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove-alt",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Remove",{name:"trans",hash:{},data:s}))+"\n            </a>\n          </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{};return'<footer class="clearfix">\n'+(null!=(l=n.if.call(r,null!=t?t.hideMenu:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:"")+"\n  "+(null!=(l="function"==typeof(i=null!=(i=n.leftButton||(null!=t?t.leftButton:t))?i:n.helperMissing)?i.call(r,{name:"leftButton",hash:{},data:s}):i)?l:"")+"\n</footer>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.escapeExpression,r=e.lambda;return"      "+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"posted a message to",{name:"trans",hash:{},data:s}))+'\n      <a class="on-user"\n       data-username="'+i(r(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.to:l)?l.name:l,t))+'"\n       href="/user/'+i(r(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.to:l)?l.name:l,t))+'">\n       <strong>'+i(r(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.to:l)?l.name:l,t))+"</strong>\n      </a>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div class="warning">\n  '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-warning",14,"wp-lighterror",{name:"iconify",hash:{},data:s}))?l:"")+"<span>"+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"This comment may be offensive.",{name:"trans",hash:{},data:s}))+"</span>\n</div>\n"},5:function(e,t,n,a,s){var l,i,r=e.lambda,o=e.escapeExpression;return'  <div id="replies-'+o(r(null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.id:l,t))+"\"\n      class='replies-list collapse'\n      data-id=\""+o(r(null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.id:l,t))+'"\n      data-profile-owner="'+o("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"username",hash:{},data:s}):i)+'"\n      data-message-owner="'+o(r(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n  </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n  <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    <a class="on-user"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n     <strong>'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+"</strong>\n    </a>\n"+(null!=(l=n.if.call(o,null!=t?t.showTarget:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n\n"+(null!=(l=n.if.call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.isOffensive:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n<pre>"+(null!=(l=(n.linkify||t&&t.linkify||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.body:l,{name:"linkify",hash:{},data:s}))?l:"")+"</pre>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n"+(null!=(l=n.if.call(o,null!=t?t.isReply:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(5,s,0),data:s}))?l:"")+"\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" on-send-reply-event "},3:function(e,t,n,a,s){return" on-send-event "},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="panel-body beautify-url" data-story-id="'+c("function"==typeof(i=null!=(i=n.storyId||(null!=t?t.storyId:t))?i:o)?i.call(r,{name:"storyId",hash:{},data:s}):i)+'" data-originator="'+c("function"==typeof(i=null!=(i=n.originator||(null!=t?t.originator:t))?i:o)?i.call(r,{name:"originator",hash:{},data:s}):i)+'">\n    <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="panel story on-navigate '+(null!=(l=n.if.call(r,null!=t?t.isReply:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'">\n        <div class="cover cover-md pull-left">\n            <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,123,{name:"resizeCover",hash:{},data:s}))+'">\n        </div>\n        <div class="content">\n            <h4 class="h3">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h4>\n            <p>"+c((n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,400,{name:"simpleShorten",hash:{},data:s}))+"</p>\n        </div>\n    </a>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'        <li><a class="on-delete" role="button" href="#" data-toggle="modal" data-action="deleteMessage">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-trash",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Delete Message",{name:"trans",hash:{},data:s}))+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div class="button-group dropdown">\n    <button class="btn btn-text btn-options dropdown-toggle" data-toggle="dropdown">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-more",20,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n    <div class="triangle"></div>\n    <ul class="dropdown-menu align-right">\n      <li><a class="on-report" role="button" href="#" data-toggle="modal" data-action="reportMessage">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-flag",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Report Message",{name:"trans",hash:{},data:s}))+"</a></li>\n"+(null!=(l=n.if.call(i,null!=t?t.canDelete:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'    </ul>\n</div>\n\n<div class="message-report-modal">\n</div>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'<a class="cover '+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.coverSize:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+' empty-cover">\n    <div class="fixed-ratio fixed-ratio-cover">\n    </div>\n</a>\n'},2:function(e,t,n,a,s){var l;return e.escapeExpression("function"==typeof(l=null!=(l=n.coverSize||(null!=t?t.coverSize:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"coverSize",hash:{},data:s}):l)},4:function(e,t,n,a,s){return"cover-home"},6:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<a class="'+(null!=(l=n.if.call(r,null!=t?t.isRecentlyRead:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+"cover "+(null!=(l=n.if.call(r,null!=t?t.coverSize:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+'" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n    <div class="fixed-ratio fixed-ratio-cover">\n'+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.program(13,s,0),data:s}))?l:"")+"    </div>\n</a>\n"+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.program(31,s,0),data:s}))?l:"")},7:function(e,t,n,a,s){return"on-continue-reading "},9:function(e,t,n,a,s){return"on-story-preview "},11:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,142,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,92,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},15:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+c("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n        <div class="info">\n            <a class="title meta '+(null!=(l=n.if.call(r,null!=t?t.isRecentlyRead:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.program(18,s,0),data:s}))?l:"")+'" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+c((n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.title:t,null!=t?t.titleCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))+"</a>\n\n"+(null!=(l=n.if.call(r,null!=t?t.hideAuthor:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(20,s,0),data:s}))?l:"")+'        </div>\n\n        <div class="meta social-meta">\n            <span class="read-count"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||o).call(r,null!=t?t.readCount:t,999,{name:"greaterThan",hash:{},fn:e.program(25,s,0),inverse:e.noop,data:s}))?l:"")+">\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",15,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+'\n            </span>\n\n            <span class="vote-count"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||o).call(r,null!=t?t.voteCount:t,999,{name:"greaterThan",hash:{},fn:e.program(27,s,0),inverse:e.noop,data:s}))?l:"")+">\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",15,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+'\n            </span>\n\n            <span class="part-count"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||o).call(r,null!=t?t.numParts:t,999,{name:"greaterThan",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:"")+">\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-list",15,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.numParts:t,{name:"count",hash:{},data:s}))+"\n            </span>\n        </div>\n    </div>\n"},16:function(e,t,n,a,s){return"on-continue-reading"},18:function(e,t,n,a,s){return"on-story-preview"},20:function(e,t,n,a,s){var l;return'            <a class="username meta on-navigate" href="/user/'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+'">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.user:t)?l.fullname:l,{name:"if",hash:{},fn:e.program(21,s,0),inverse:e.program(23,s,0),data:s}))?l:"")+"            </a>\n"},21:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"by %s",(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.user:t)?l.fullname:l,14,!1,{name:"simpleShorten",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n"},23:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"by %s",(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.user:t)?l.name:l,14,!1,{name:"simpleShorten",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n"},25:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                  data-toggle="tooltip" data-placement="top" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Read","%s Reads",(n.format||t&&t.format||i).call(l,null!=t?t.readCount:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.readCount:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n                '},27:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                  data-toggle="tooltip" data-placement="top" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Vote","%s Votes",(n.format||t&&t.format||i).call(l,null!=t?t.voteCount:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.voteCount:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n                '},29:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                  data-toggle="tooltip" data-placement="top" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Part","%s Parts",(n.format||t&&t.format||i).call(l,null!=t?t.numParts:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.numParts:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n                '},31:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+c("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n        <div class="info">\n            <a class="title meta '+(null!=(l=n.if.call(r,null!=t?t.isRecentlyRead:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.program(18,s,0),data:s}))?l:"")+'" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.title:t,null!=t?t.titleCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</a>\n\n"+(null!=(l=n.if.call(r,null!=t?t.hideAuthor:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(32,s,0),data:s}))?l:"")+'        </div>\n\n        <div class="meta social-meta">\n            <span class="read-count"> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+' </span>\n            <span class="vote-count"> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+' </span>\n            <span class="part-count"> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-list",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.numParts:t,{name:"count",hash:{},data:s}))+" </span>\n        </div>\n    </div>\n"},32:function(e,t,n,a,s){var l;return'            <a class="username meta on-navigate" href="/user/'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+'">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.user:t)?l.fullname:l,{name:"if",hash:{},fn:e.program(33,s,0),inverse:e.program(35,s,0),data:s}))?l:"")+"            </a>\n"},33:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"by %s",(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.user:t)?l.fullname:l,13,!1,{name:"simpleShorten",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n"},35:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"by %s",(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.user:t)?l.name:l,13,!1,{name:"simpleShorten",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.empty:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+"\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},2:function(e,t,n,a,s){var l;return'      <div class="browse-story-item">\n'+(null!=(l=e.invokePartial(a["core.item_views.browse_story_item"],t,{name:"core.item_views.browse_story_item",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"      </div>\n"},4:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.writers:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(8,s,0),data:s}))?l:""},5:function(e,t,n,a,s){var l;return(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.writers:t,{name:"each",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},6:function(e,t,n,a,s){var l;return'      <div class="tag-module-writers">\n'+(null!=(l=e.invokePartial(a["core.item_views.tag_module_writers"],t,{name:"core.item_views.tag_module_writers",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"      </div>\n"},8:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.lists:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:""},9:function(e,t,n,a,s){var l;return(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.lists:t,{name:"each",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+"  "},10:function(e,t,n,a,s){var l;return'      <div class="tag-module-lists">\n'+(null!=(l=e.invokePartial(a["core.item_views.tag_module_lists"],t,{name:"core.item_views.tag_module_lists",hash:{isDesktop:!0},data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"      </div>\n"},12:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div class="show-more center-text hidden">\n    <button class="btn btn-grey on-showmore">\n    <span class=\'show-more-message\'>\n      <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n      <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n    </span>\n      <span class='loading-message hidden'>\n      "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n        <span>"+o((n.trans||t&&t.trans||r).call(i,"Loading...",{name:"trans",hash:{},data:s}))+'</span>\n    </span>\n    </button>\n  </div>\n\n  <div id="preview-modal"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<article id="browse-results-item-view">\n'+(null!=(l=n.if.call(i,null!=t?t.stories:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"</article>\n\n"+(null!=(l=n.if.call(i,null!=t?t.stories:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"LoginForm","login-form",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},3:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"SignupForm","signup-form",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},5:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=n.blockHelperMissing,d=e.escapeExpression,h='<header class="panel-heading">\n<h1>'+(null!=(l=(n.trans||t&&t.trans||c).call(o,"Lost your password?",{name:"trans",hash:{},data:s}))?l:"")+"</h1>\n<span> "+(null!=(l=(n.trans||t&&t.trans||c).call(o,"Type your username or email below and we'll send you instructions on how to reset it.",{name:"trans",hash:{},data:s}))?l:"")+'</span>\n</header>\n\n<div class="panel-body">\n  <small>'+(null!=(l=(n.trans||t&&t.trans||c).call(o,'Visit <a href="/support">Wattpad Support</a> for more information',{name:"trans",hash:{},data:s}))?l:"")+'</small>\n  <hr>\n  <form action="/forgot';return i=null!=(i=n.nextUrl||(null!=t?t.nextUrl:t))?i:c,r={name:"nextUrl",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.nextUrl||(l=u.call(t,l,r)),null!=l&&(h+=l),h+='" method="post">\n\n      <div class="form-group has-feedback" data-attr="forgotEmail">\n          <label class="control-label '+(null!=(l=(n.supportsPlaceholder||t&&t.supportsPlaceholder||c).call(o,null!=t?t.device:t,{name:"supportsPlaceholder",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'" for="forgot-email">'+d((n.trans||t&&t.trans||c).call(o,"Username or Email",{name:"trans",hash:{},data:s}))+'</label>\n          <input id="forgot-email" class="form-control input-lg enable" name="email" type="text" placeholder="'+d((n.trans||t&&t.trans||c).call(o,"Username or Email",{name:"trans",hash:{},data:s}))+'">\n          '+(null!=(l="function"==typeof(i=null!=(i=n.validationElements||(null!=t?t.validationElements:t))?i:c)?i.call(o,{name:"validationElements",hash:{},data:s}):i)?l:"")+"\n      </div>\n\n"+(null!=(l=n.if.call(o,null!=t?t.msg:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(o,null!=t?t.notice:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+'\n      <div class="row">\n          <div class="col-sm-7 col-lg-6">\n              <input type="submit" class="btn btn-lg btn-block btn-orange enable" value="'+d((n.trans||t&&t.trans||c).call(o,"Send instructions",{name:"trans",hash:{},data:s}))+'">\n          </div>\n          <div class="col-sm-5 col-lg-6">\n              <a class="btn btn-lg btn-block btn-grey" rel="nofollow" href="/login',i=null!=(i=n.nextUrl||(null!=t?t.nextUrl:t))?i:c,r={name:"nextUrl",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.nextUrl||(l=u.call(t,l,r)),null!=l&&(h+=l),h+'" data-form="login">'+d((n.trans||t&&t.trans||c).call(o,"Cancel",{name:"trans",hash:{},data:s}))+"</a>\n          </div>\n      </div>\n\n  </form>\n</div>\n"},6:function(e,t,n,a,s){return"?nextUrl="+e.escapeExpression(e.lambda(t,t))},8:function(e,t,n,a,s){return"sr-only"},10:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'      <div class="alert alert-danger" role="alert">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-warning",16,"wp-lighterror",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression("function"==typeof(i=null!=(i=n.msg||(null!=t?t.msg:t))?i:o)?i.call(r,{name:"msg",hash:{},data:s}):i)+"</div>\n"},12:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'        <div class="alert alert-info" role="alert">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression("function"==typeof(i=null!=(i=n.notice||(null!=t?t.notice:t))?i:o)?i.call(r,{name:"notice",hash:{},data:s}):i)+"</div>\n"},14:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="panel-body">\n  <small>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,'Visit <a href="/support">Wattpad Support</a> for more information',{name:"trans",hash:{},data:s}))?l:"")+'</small>\n  <hr>\n  <form action="/reset" method="post">\n      <input name="at" value="'+c("function"==typeof(i=null!=(i=n.authToken||(null!=t?t.authToken:t))?i:o)?i.call(r,{name:"authToken",hash:{},data:s}):i)+'" type="hidden" />\n\n      <div class="form-group has-feedback" data-attr="password">\n          <label class="control-label '+(null!=(l=(n.supportsPlaceholder||t&&t.supportsPlaceholder||o).call(r,null!=t?t.device:t,{name:"supportsPlaceholder",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'" for="reset-password">'+c((n.trans||t&&t.trans||o).call(r,"New password",{name:"trans",hash:{},data:s}))+'</label>\n          <input id="reset-password" class="form-control input-lg enable" name="password-new" type="password" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"New password",{name:"trans",hash:{},data:s}))+'">\n        '+(null!=(l="function"==typeof(i=null!=(i=n.validationElements||(null!=t?t.validationElements:t))?i:o)?i.call(r,{name:"validationElements",hash:{},data:s}):i)?l:"")+'\n      </div>\n\n      <div class="form-group has-feedback" data-attr="confirm">\n          <label class="control-label '+(null!=(l=(n.supportsPlaceholder||t&&t.supportsPlaceholder||o).call(r,null!=t?t.device:t,{name:"supportsPlaceholder",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'" for="reset-confirm">'+c((n.trans||t&&t.trans||o).call(r,"Confirm new password",{name:"trans",hash:{},data:s}))+'</label>\n          <input id="reset-confirm" class="form-control input-lg enable" name="password-conf" type="password" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"Confirm new password",{name:"trans",hash:{},data:s}))+'">\n        '+(null!=(l="function"==typeof(i=null!=(i=n.validationElements||(null!=t?t.validationElements:t))?i:o)?i.call(r,{name:"validationElements",hash:{},data:s}):i)?l:"")+"\n      </div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.msg:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(r,null!=t?t.notice:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+'\n      <div class="row">\n          <div class="col-sm-7 col-lg-6">\n              <input type="submit" class="btn btn-lg btn-block btn-orange enable" value="'+c((n.trans||t&&t.trans||o).call(r,"Reset password",{name:"trans",hash:{},data:s}))+'">\n          </div>\n\n          <div class="col-sm-5 col-lg-6">\n              <a class="btn btn-lg btn-block btn-grey on-login" rel="nofollow" href="/login" data-form="login">'+c((n.trans||t&&t.trans||o).call(r,"Cancel",{name:"trans",hash:{},data:s}))+"</a>\n          </div>\n      </div>\n\n  </form>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.login:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.signup:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.forgot:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n\n\n"+(null!=(l=n.if.call(i,null!=t?t.reset:t,{name:"if",hash:{},fn:e.program(14,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"btn-text"},3:function(e,t,n,a,s){return"btn-no-background"},5:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <li>\n      <a role="button" href="'+c("function"==typeof(i=null!=(i=n.deeplink||(null!=t?t.deeplink:t))?i:o)?i.call(r,{name:"deeplink",hash:{},data:s}):i)+'">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-link",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"Link to Comment",{name:"trans",hash:{},data:s}))+"</a>\n    </li>\n"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <li>\n      <a class="on-delete" role="button" href="#" data-toggle="modal" data-action="deleteComment">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-trash",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Delete Comment",{name:"trans",hash:{},data:s}))+"\n      </a>\n    </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div class="button-group inline-block relative pull-right">\n  <button class="btn '+(null!=(l=n.if.call(i,null!=t?t.isCommentNotification:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+' dropdown-toggle"\n          data-toggle="dropdown" aria-controls="comment-more-options" aria-expanded="false" aria-label="more options">\n    '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-more",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n  </button>\n  <div class="triangle"></div>\n  <ul class="dropdown-menu align-right">\n'+(null!=(l=n.unless.call(i,null!=t?t.isCommentNotification:t,{name:"unless",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'    <li>\n      <a class="on-report" role="button" href="#" data-toggle="modal" data-action="reportComment">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-flag",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Report Comment",{name:"trans",hash:{},data:s}))+"\n      </a>\n    </li>\n"+(null!=(l=n.if.call(i,null!=t?t.canDelete:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'  </ul>\n</div>\n\n<div class="comment-report-modal">\n</div>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'<article class="notification aggregate follower panel unread">\n    <div class="count">0</div>\n    <div class="content">\n        <div class="heading">'+r((n.trans||t&&t.trans||i).call(l,"You have no new notifications",{name:"trans",hash:{},data:s}))+"</div>\n        <p>"+r((n.trans||t&&t.trans||i).call(l,"Updates about what is happening to you and your stories will be shown here",{name:"trans",hash:{},data:s}))+"</p>\n    </div>\n</article>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="user-badge" data-toggle="tooltip" data-placement="right" title="'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Wattpad Staff",{name:"trans",hash:{},data:s}))?l:"")+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"staff",null!=t?t.badgeSize:t,"wp-base-1","",'viewBox="0 0 20 20"',{name:"iconify",hash:{},data:s}))?l:"")+"\n    </div>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="user-badge" data-toggle="tooltip" data-placement="right" title="'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Verified",{name:"trans",hash:{},data:s}))?l:"")+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"verified",null!=t?t.badgeSize:t,"wp-base-1","",'viewBox="0 0 20 20"',{name:"iconify",hash:{},data:s}))?l:"")+"\n    </div>\n"},5:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="user-badge" data-toggle="tooltip" data-placement="right" title="'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Wattpad Star",{name:"trans",hash:{},data:s}))?l:"")+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"star",null!=t?t.badgeSize:t,"wp-base-1","",'viewBox="0 0 20 20"',{name:"iconify",hash:{},data:s}))?l:"")+"\n    </div>\n"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="user-badge" data-toggle="tooltip" data-placement="right" title="'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Wattpad Ambassador",{name:"trans",hash:{},data:s}))?l:"")+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"ambassador",null!=t?t.badgeSize:t,"wp-base-1","",'viewBox="0 0 20 20"',{name:"iconify",hash:{},data:s}))?l:"")+"\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.staff:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.verified:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.star:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.ambassador:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'    <div class="action-wrapper icon-wrapper">\n        <a href="'+e.escapeExpression("function"==typeof(i=null!=(i=n.reportLink||(null!=t?t.reportLink:t))?i:o)?i.call(r,{name:"reportLink",hash:{},data:s}):i)+'" target="_blank" class="on-report-image">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-flag",20,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n        "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",20,"wp-neutral-5","on-dismiss",{name:"iconify",hash:{},data:s}))?l:"")+"\n    </div>\n"},3:function(e,t,n,a,s){return"on-dismiss"},5:function(e,t,n,a,s){var l;return'    <div class="background-wrapper icon-wrapper">\n        <div class="social-wrapper" id="media-share">\n'+(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.mediaShare:t,{name:"each",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"        </div>\n    </div>\n"},6:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n                    "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,18,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"\n                </a> \n"},7:function(e,t,n,a,s){return' social-share" target="_blank'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'<div id="picture-viewer" class="modal fade" role="dialog" data-keyboard="true" tabindex=\'-1\'>\n'+(null!=(l=n.if.call(r,null!=t?t.isTouchDevice:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'    <div class="vertical-align-helper '+(null!=(l=n.unless.call(r,null!=t?t.isTouchDevice:t,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-body">\n                <a href="'+e.escapeExpression("function"==typeof(i=null!=(i=n.reportLink||(null!=t?t.reportLink:t))?i:o)?i.call(r,{name:"reportLink",hash:{},data:s}):i)+'" target="_blank" class="on-report-image">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-flag",20,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",20,"wp-neutral-3","on-dismiss",{name:"iconify",hash:{},data:s}))?l:"")+"\n                  "+(null!=(l="function"==typeof(i=null!=(i=n.contents||(null!=t?t.contents:t))?i:o)?i.call(r,{name:"contents",hash:{},data:s}):i)?l:"")+"\n                </div>\n            </div>\n        </div>\n    </div>\n"+(null!=(l=n.if.call(r,null!=t?t.isTouchDevice:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" class="listsModal modal fade" aria-hidden="true" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <header class="modal-header">\n        <div class="pull-right close" data-dismiss="modal">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove-alt",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        </div>\n        <h3 class="modal-title text-center">'+c((n.trans||t&&t.trans||o).call(r,"Add to Another Reading List",{name:"trans",hash:{},data:s}))+' </h3>\n      </header>\n\n      <div class="modal-body">\n        <ul id="add-to-list" class="lists-menu list-unstyled" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'"></ul>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n'},useData:!0})},function(e,t,n){n(24),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(160),n(161),n(162),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(181),n(182),n(189),n(191),n(193),n(194),n(196),n(197),n(201),n(203),n(205),n(207),n(209),n(211),n(212),n(214),n(216),n(218),n(220),n(222),n(224),n(226),n(228),n(229),n(230),n(231),n(233),n(245),n(265),n(267),n(268),n(269),n(270),n(272),n(273),n(275),n(277),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(288),n(290),n(293),n(294),n(297),n(300),n(302),n(303),n(304),n(305),n(306),n(308),n(310),n(312),n(316),n(320),n(322),n(323),n(325),n(326),n(328),n(330),n(332),n(334),n(336),n(348),n(350),n(352),n(355),n(357),n(358),n(361),n(363),n(365),n(367),n(369),n(371),n(373),n(375),n(377),n(378),n(380),n(385),n(387),n(390),n(391),n(397),n(398),n(400),n(401),n(403),n(405),n(406),n(408),n(410),n(413),n(415),n(417),n(419),n(422),n(425),n(427),n(429),n(431),n(433),n(435),n(437),n(439),n(440),n(442),n(445),n(458),n(462),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(479),n(484),n(486),n(488),n(490),n(492),n(494),n(496),n(498),n(501),n(503),n(505),n(506),n(507),n(510),n(511),n(512),n(513),n(514),n(516),n(518),n(522),n(523),n(525),n(529),n(531),n(533),n(535),n(536),n(538),n(541),n(543),n(547),n(549),n(550),n(551),n(552),n(555),n(556),n(557),n(558),n(559),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(575),n(577),n(579),n(580),n(581),n(582),n(584),n(585),n(586),n(588),n(589),n(590),n(591),n(592),n(594),n(595),n(596),n(597),n(598),n(599),n(600),e.exports=n(601)},function(e,t,n){"use strict";var a=o(n(25)),s=o(n(26)),l=o(n(27)),i=o(n(28)),r=o(n(29));function o(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,o){e.wattpad=o||{};var c=e.wattpad.utils||(e.wattpad.utils={});c.isBrandSafe=function(e){return n.get(e,"isBrandSafe")},t.registerHelper("isBrandSafe",c.isBrandSafe),c.advertisement=function(e){var t,a,s,l,i,r,u,d,h,p,m,f,g,v,w=e.hash.unit?e.hash.unit.toLowerCase():void 0,y=e.hash.experience?e.hash.experience.toLowerCase():void 0,b=e.hash.timestamp||Date.now(),x=e.hash.lazy||!1,C=e.hash.adzerk||!1,k=(e.hash.refresh,e.hash.platform||c.getDeviceType(e),n.get(e.hash.language,"id")||e.hash.language||o.utils.currentUser().get("language")),_=c.currentUser().toJSON(),S=e.hash.storyGroup,M=e.hash.tryHb||!1,T=e.hash.totalViewCount||!1,E=e.hash.sticky||!1,P=e.hash.stickyStart||"",I=e.hash.stickyEnd||"",$=(e.hash.parentClass||"")+(E?" sticky-ad":""),U=e.hash.adText||"",L=e.hash.adTextClass||"center-text small text-uppercase light hidden-lg hidden-md",D=e.hash.minViewportWidth,R=_.premium||!1,A=!1,F="",N={billboard:{width:970,height:250},leaderboard:{width:728,height:90},leaderboard_mobile:{width:320,height:50},mediumrect:{width:300,height:250},skyscraper:{width:160,height:600},smallrect:{width:300,height:100},rightrail_top:[{width:300,height:250},{width:300,height:600}],rightrail_mid:[{width:300,height:250},{width:300,height:600}],rightrail_mid_sticky:{width:300,height:250},rightrail_bottom:[{width:300,height:250},{width:300,height:600}],rightrail_comments:{width:300,height:250},mediumrect_loggedout:{width:300,height:250},mediumrect_top:{width:300,height:250},mediumrect_mid:{width:300,height:250},mediumrect_bottom:{width:300,height:250},mediumrect_top_mweb:{width:300,height:250},mediumrect_bottom_mobile:{width:300,height:250},mobilebanner_top_mobile:[{width:320,height:100},{width:320,height:50},{width:300,height:50}],banner_mweb:[{width:320,height:100},{width:320,height:50},{width:300,height:50}],outstream_video:[{width:1,height:1}],storylanding_top:{width:300,height:250},storylanding_bottom:{width:728,height:90},storylanding_bottom_mweb:{width:320,height:50},readingshort_bottom:{width:728,height:90},readingshort_bottom_loggedout:{width:720,height:90},readinglong_bottom:{width:728,height:90},readingshort_bottom_mweb:{width:320,height:50},readingshort_bottom_loggedout_mweb:{width:320,height:50},readinglong_bottom_loggedout:{width:720,height:90},readinglong_bottom_mweb:{width:320,height:50},readinglong_bottom_loggedout_mweb:{width:320,height:50},readinglong_mid:[{width:300,height:250},{width:300,height:600}],readinglong_mid_mweb:[{height:300,width:250},{height:320,width:50}],readinglong_mid_loggedout_mweb:[{width:300,height:250},{width:320,height:50}],readinglong_mid_loggedout:[{width:300,height:600},{width:300,height:250}],readingshort_top:{width:300,height:250},readingshort_top_loggedout:{width:300,height:250},readinglong_top:[{width:300,height:250},{width:300,height:600}],readinglong_top_loggedout:[{width:300,height:250},{width:300,height:600}],readingshort_comments:{width:300,height:250},readingshort_comments_loggedout:{width:300,height:250},readinglong_comments:{width:300,height:250},readinglong_comments_loggedout:{width:300,height:250},readinglong_top_loggedout_mweb:{width:320,height:50},readinglong_top_mweb:{width:320,height:50},readingshort_top_loggedout_mweb:{width:320,height:50},readingshort_top_mweb:{width:320,height:50}},z={generic:{units:["leaderboard","leaderboard_mobile","mediumrect","skyscraper","smallrect"]},reading:{units:["leaderboard","leaderboard_mobile","mediumrect","skyscraper","rightrail_top","rightrail_mid","rightrail_bottom","rightrail_comments","mediumrect_top","mediumrect_mid","mediumrect_bottom","mediumrect_top_mweb","mediumrect_bottom_mobile","mediumrect_loggedout","mobilebanner_top_mobile","banner_mweb","rightrail_mid_sticky","outstream_video","readingshort_bottom","readingshort_bottom_loggedout","readinglong_bottom","readinglong_bottom_loggedout","readingshort_bottom_mweb","readingshort_bottom_loggedout_mweb","readinglong_bottom_loggedout","readinglong_bottom_mweb","readinglong_bottom_loggedout_mweb","readinglong_mid_loggedout_mweb","readinglong_mid","readinglong_mid_loggedout","readinglong_top","readinglong_top_loggedout","readingshort_top","readingshort_top_loggedout","readingshort_comments","readinglong_comments","readingshort_comments_loggedout","readinglong_comments_loggedout","readinglong_mid_mweb","readinglong_top_mweb","readingshort_top_mweb","readinglong_top_loggedout_mweb","readingshort_top_loggedout_mweb"]},storylanding:{units:["storylanding_bottom","storylanding_bottom_mweb","storylanding_top"]},myworks:{units:["mediumrect_top"]}},B=z[y]?z[y].units:void 0,O=[1,2,3,4],H=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17,18,19,21,22,23,24];if(S&&(s=n.get(S,"isAdExempt"),t=n.get(S,"rating"),l=n.get(S,"category")||n.first(n.get(S,"categories")),k=n.get(S,"language.id")||n.get(S,"language"),d=n.get(S,"id"),h=c.isBrandSafe(S),p=c.isMatureStory(S),m=M,u=n.get(S,"parts",[]),A=n.any(u,function(e){return e.paywalled}),"reading"===y&&(r=e.data.root,a=n.get(r,"rating"),i=n.get(r,"rank"),n.get(r,"isMicroPart"),n.get(r,"isAdExempt"))),R||s||A)return"";if(w&&N[w]&&y&&n(B).includes(w)){f=c.sprintf("%s_%s-%s",[y,w,b]);var V="";if(Array.isArray(N[w])?(g=n.max(N[w],"width").width,v=n.max(N[w],"height").height,n.map(N[w],function(e){return c.sprintf("[%s, %s]",[e.width,e.height])}).join(", "),V=c.sprintf(' style="width:%spx;height:auto"',[g])):(g=N[w].width,v=N[w].height,c.sprintf("%s, %s",[g,v]),V=c.sprintf(' style="width:%spx;height:%spx"',[g,v])),"outstream_video"===w&&h&&!p){var W={};if(t&&n(O).includes(t)&&(W.storyRating=t),l&&n(H).includes(l)&&(W.category=l),k&&(W.language=k),_&&_.gender){var q=c.getGenderTargeting(_),j=c.getAgeTargeting(_);W.KV3=q+"-"+j}F=c.sprintf('<div id="%s" class="advertisement %s" data-targeting=\'%s\'></div>',[f,w,JSON.stringify(W)])}else F=C?m?function(){if(h&&!p){var e="",n=c.sprintf("%s-%s",[w,b]),s=c.getAdzerkUnit(w),r=c.getHeaderBiddingInlineStyle(s.sizes),o=c.getAdzerkTargeting({partRating:a,storyRating:t,category:l,totalViewCount:T,language:k,rankingStatus:i,storyId:d},_),u=c.sprintf("window.wattpad.utils.loadHbAd({placements: {'%s': {siteId: 1025452,networkId: 9660, zoneId: %s, adTypes: %s,htSlotName: '%s', targeting: %s}}});",[n,s.zone,JSON.stringify(s.sizes),w,JSON.stringify(o)]);if(e=x?c.sprintf('<div id="%s" class="advertisement lazyAd %s"%s data-ad-placement="%s" data-adzerk-zone="%s" data-ad-types=\'%s\' data-ht-slot-name="%s" data-targeting=\'%s\' data-hb="true"></div>',[n,w,r,n,s.zone,JSON.stringify(s.sizes),w,JSON.stringify(o)]):c.sprintf('<div id="%s" class="advertisement" %s><script>%s<\/script></div>',[n,r,u]),$){var m=U?c.sprintf('<h4 class="%s">%s</h4>',[L,U]):"";e=E?c.sprintf('<div class="%s" data-start-selector="%s" data-end-selector="%s">%s%s</div>',[$,P,I,m,e]):c.sprintf('<div class="%s">%s%s</div>',[$,m,e])}return e}return""}():function(){var e,s,r,o,u,m={},g="",v={mediumrect:"5",mediumrect_top:"5",mediumrect_mid:"5",mediumrect_bottom:"5",mediumrect_top_mweb:"5",mediumrect_bottom_mobile:"5",mediumrect_loggedout:"5",rightrail_top:"[ 5, 43 ]",rightrail_mid:"5",rightrail_mid_sticky:"5",rightrail_bottom:"5",rightrail_comments:"5",leaderboard:"4",leaderboard_mobile:"23",mobilebanner_top_mobile:"23",banner_mweb:"23"};if(!(e=v[w]?v[w]:null))return"";if(h&&!p)s="181437";else{if("myworks"!==y)return"";s="183796"}if(a&&(m.partRating=a),t&&(m.storyRating=t),l){if(!n(H).includes(l))return"";m.category=l}T&&(m.totalViewCount=c.getViewCountTargeting(T)),k&&(m.language=k),i&&(u=i>0&&i<=100?"0to100":"100plus",m.rankingStatus=u);if(_&&_.gender&&(m.KV1=c.getGenderTargeting(_),m.KV2=c.getAgeTargeting(_)),d&&(m.storyId=d),D&&(g="if ( window.innerWidth < "+D+" ) { return false; }"),o=c.sprintf('/* Unit: %s Zone: %s SizeID: %s */ if (window.ados_add_placement) { ados_add_placement(9660, 421790, "%s", %s).setZone(%s).setProperties(%s);ados_setConsent({gdpr: true});ados_load(); }',[w,s,e,f,e,s,JSON.stringify(m)]),r=x?c.sprintf('<div id="%s" class="advertisement lazyAd %s"%s data-ad-code=\'%s\'></div>',[f,w,V,o]):c.sprintf('<div id="%s" class="advertisement %s"'+V+'><script type="text/javascript">var ados = ados || {};ados.run = ados.run || [];ados.run.push( function() {'+g+"%s});<\/script></div>",[f,w,o]),$){var b=U?c.sprintf('<h4 class="%s">%s</h4>',[L,U]):"";r=E?c.sprintf('<div class="%s" data-start-selector="%s" data-end-selector="%s">%s%s</div>',[$,P,I,b,r]):c.sprintf('<div class="%s">%s%s</div>',[$,b,r])}return r}():""}return F},t.registerHelper("advertisement",function(e){return new t.SafeString(c.advertisement(e))}),c.advertisementAtIndex=function(e){var t=e.hash.index,n=e.data.index;return e&&n>0&&n===t?c.advertisement(e):""},t.registerHelper("advertisementAtIndex",function(e){return new t.SafeString(c.advertisementAtIndex(e))});c.advertisementAtEveryIndex=function(e){var t=c.getDeviceType(e),n=e.data.index;return e&&n>0&&function(e,t){return"mobile"===t?2===e||e%11==2&&2!==e:5===e||e%24==5&&5!==e}(n,t)?c.advertisement(e):""},t.registerHelper("advertisementAtEveryIndex",function(e){return new t.SafeString(c.advertisementAtEveryIndex(e))}),c.trans=function(t){var n=[];if(arguments.length>1&&(n=Array.prototype.slice.call(arguments,1,arguments.length)),1===parseInt(app.get("language"),10))return e.vsprintf(t,n);var a=app.get("translatedLanguage");return a&&a.jed?e.vsprintf(a.jed.gettext(t),n):e.vsprintf(t,n)},c.trans.map=function(e){return c.trans(e)},t.registerHelper("trans",function(e){var t=arguments;return arguments.length>1&&n.isObject(arguments[arguments.length-1])&&(t=Array.prototype.slice.call(arguments,0,arguments.length-1)),c.trans.apply(this,t)}),t.registerHelper("canTrans",function(e,t){var n=app.get("translatedLanguage");return 1===parseInt(app.get("language"),10)||n&&n.jed&&n.jed.options.locale_data.messages[e]?t.fn(this):t.inverse(this)}),c.ifequal=function(e,t,a){return n.isEqual(e,t)?a.fn(this):a.inverse(this)},t.registerHelper("ifequal",c.ifequal),c.isCurrentUser=function(e,t){return e===c.currentUser().get("username")?t.fn(this):t.inverse(this)},t.registerHelper("isCurrentUser",c.isCurrentUser),c.getCurrentUserAttr=function(e,t){return c.currentUser().get(e)||""},t.registerHelper("getCurrentUserAttr",c.getCurrentUserAttr),c.getSelectedPremiumTheme=function(){return parseInt(c.getCookie("premium-theme")||5)},t.registerHelper("getSelectedPremiumTheme",c.getSelectedPremiumTheme),c.setPremiumTheme=function(e){$("body").removeClass(function(e,t){return(t.match(/(^|\s)theme-\S+/g)||[]).join(" ")}).addClass("theme-"+e),c.setCookie("premium-theme",e)},t.registerHelper("isPremiumEligible",function(e){return c.getCurrentUserAttr("premium")||o.testGroups.WATTPAD_PREMIUM_MESSAGING?e.fn(this):e.inverse(this)}),c.isLoggedIn=function(e){var t=c.currentUser().get("username");return void 0!==t&&null!==t?e.fn(this):e.inverse(this)},t.registerHelper("isLoggedIn",c.isLoggedIn),c.isAmbassador=function(e){return c.currentUser().get("ambassador")?e.fn(this):e.inverse(this)},t.registerHelper("isAmbassador",c.isAmbassador),c.isAdmin=function(e){return c.currentUser().get("isSysAdmin")?e.fn(this):e.inverse(this)},t.registerHelper("isAdmin",c.isAdmin),c.isWattpad=function(e,t){return"wattpad"===(e=e||"").toLowerCase()?t.fn(this):t.inverse(this)},t.registerHelper("isWattpad",c.isWattpad),c.isDevice=function(e,t){e=e||"";var n=app.get("device");return"desktop"===e&&n.is.desktop?t.fn(this):"tablet"===e&&n.is.tablet?t.fn(this):"mobile"===e&&n.is.mobile?t.fn(this):t.inverse(this)},t.registerHelper("isDevice",c.isDevice),c.getDeviceType=function(e){var t=app.get("device");return t&&t.is.mobile?"mobile":t&&t.is.tablet?"tablet":t&&t.is.desktop?"desktop":void 0},t.registerHelper("getDeviceType",function(e){return new t.SafeString(c.getDeviceType(e))}),c.count=function(e){return-1==e?"-":e&&n.isNumber(e)?e>=99999999?Math.floor(e/1e6)+"M":e>=1e6?Math.floor(e/1e5)/10+"M":e>=99999?Math.floor(e/1e3)+"K":e>=1e3?Math.floor(e/100)/10+"K":e:0},t.registerHelper("count",c.count),t.registerHelper("numberedLoop",function(e,t){for(var n=e.length,a="",s=0;s<n;s++)e[s].position=s+1,e[s].oddOrEven=e[s].position%2?"odd":"even",a+=t.fn(e[s]);return a}),c.resize=function(e,t,a,s,l){var i=a,r=!!l&&l[0];return e&&t&&"string"==typeof t&&s&&isFinite(String(a))?(c.pixelRatio(2.5)?(a*=3,r=!!l&&l[2],r=l?l[1]:l):c.pixelRatio(1.5)&&(a*=2,r=!!l&&l[1]),(i=n.find(e,function(e){return e+(!1!==r?Math.floor(e/r):0)>=a},this))||(i=n.reduce(e,function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e})),t.replace(s,"$1"+i+"$3$4")):""},c.resizeAvatar=function(t,n){return"string"==typeof t&&t.length>0?c.resize(e.wattpad.avatarSizes,t,n,/(^.*\/useravatar\/[\w\-_]+\.)([0-9]{1,3})(\.?[0-9]*\.)(png|jpg|jpeg|gif)$/,[24,17]):""},t.registerHelper("resizeAvatar",c.resizeAvatar),c.resizeCover=function(t,n){return c.resize(e.wattpad.coverSizes,t,n,/(^.*\/c?cover\/[0-9]+\-)([0-9]{1,3})(\-*[\w]+\.)(png|jpg|jpeg|gif)$/,[20,14])},t.registerHelper("resizeCover",c.resizeCover),c.resizeCoverAsBackground=function(t,n){n&&isFinite(n)||(n=640);return c.resize(e.wattpad.backgroundSizes,t,n,/(^.*\/cover\/[0-9]+\-)([0-9]{1,3})(\-[\w]+\.)(png|jpg|jpeg|gif)$/,!1).replace("cover","bcover")},t.registerHelper("resizeCoverAsBackground",c.resizeCoverAsBackground),c.profileBackground=function(e,t){t&&isFinite(t)||(t=320),e=e.replace(/(\d+\.)(png|jpg|jpeg|gif)$/,".$1$2");return c.resize([320,360,640,1920],e,t,/(^.*\/userbg\/[\w\-_]+\.)()(\.?[0-9]*\.)(png|jpg|jpeg|gif)$/,!1).replace("userbg","userbgs")},t.registerHelper("profileBackground",c.profileBackground),c.resizeLogo=function(t,n){return c.resize(e.wattpad.logoSizes,t,n,/(^.*\/img\/mobile-web\/wattpad_logo_|.*\/img\/mobile-web\/white_wattpad_logo_)([0-9]{3})(\.)(png)$/,!1)},t.registerHelper("resizeLogo",c.resizeLogo),c.resizeAuthLogo=function(e){return c.pixelRatio()>1?e.replace(/(^.*\/img\/homepages\/logo_Wattpad)(\.)(png)$/,"$1@2x$2$3"):e},t.registerHelper("resizeAuthLogo",c.resizeAuthLogo),c.getStoryRating=function(e){var t=["",c.trans("Mature")];return e<4?t[0]:t[1]},t.registerHelper("getStoryRating",c.getStoryRating),c.slugify=function(e,t){return e?(e=(e=(e=e.replace(t?/[^\-a-zA-Z0-9\s]+/gi:/[^\-a-zA-Z0-9,&\s]+/gi,"")).replace(/\s+/gi,"-")).replace(/-+/gi,"-")).trim().toLowerCase():null},t.registerHelper("slugify",function(e){if(n.isFunction(c[e])){var t=Array.prototype.slice.call(arguments,1);e=c[e].apply(this,t)}return c.slugify(e)}),c.iconify=function(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("fa"!==e.split("-")[0]){if(i.default[e])return"<svg\n          "+s+'\n          width="'+t+'"\n          height="'+t+'"\n          viewBox="0 0 24 24"\n          fill="none"\n          stroke="'+r.default[n]+'"\n          stroke-width="2"\n          aria-hidden="true"\n          stroke-linecap="round"\n          stroke-linejoin="round"\n          '+(a?' class="'+a+'"':"")+"\n        >\n          "+i.default[e]+"\n        </svg>";throw"Icon "+e+" doesn't exist"}if(!("string"!=typeof e||e.trim().length<=0)){t="number"==typeof t&&t>0?t:"auto",n="string"==typeof n?n:"wp-neutral-2",a="string"==typeof a?a:"";var l;return c.modernizr("fontface")?'<span class="'+("fa "+e+" fa-"+n+" "+a)+'" aria-hidden="true" style="font-size:'+t+'px;"></span>':(l="/img/icons/"+n+"/"+e.substr(3)+".png",'<img class="'+("fa "+e+" fallback "+a)+'" style="height:'+t+'px !important; width:auto !important;" src="'+l+'" />')}},t.registerHelper("iconify",c.iconify),c.iconifySpin=function(e,t,n,a){if(!("string"!=typeof e||e.trim().length<=0)){t="number"==typeof t&&t>0?t:"auto",n||(n=new c.Device);var s=a.hash.color||"wp-neutral-2",l=a.hash.className||"",i=a.hash.fallback||e;return n.isOperaMini()?'<img class="'+("fa "+e+" fallback "+l)+'" style="height:'+t+'px !important; width:auto !important;" src="/img/icons/spin/'+i+'.gif" />':'<span class="'+("fa "+e+" fa-spin fa-"+s+" "+l)+'" aria-hidden="true" style="font-size:'+t+'px;"></span>'}},t.registerHelper("iconifySpin",c.iconifySpin),c.validationElements=function(e){var t;e=isNaN(e)?24:e;return t=c.iconify("fa-check",e,"wp-success","form-control-feedback validation on-valid"),t+=c.iconify("fa-warning",e,"wp-error-1","form-control-feedback validation on-invalid")},t.registerHelper("validationElements",c.validationElements),t.registerHelper("querystring",function(){return e.location.search}),t.registerHelper("linkify",function(e,t){return c.linkify(e,t)}),c.simpleShorten=function(e,t,n,a){var s;return a=a||{},e?((s=(s=e.replace(/(<([^>]+)>)/gi,"")).replace(/^\s*\n/gm,"")).length>t&&(s=s.substr(0,t-1).replace(/[\.,\- \/!&?]+$/,"")+"..."),!0===n?c.linkify(s,a):s):""},t.registerHelper("simpleShorten",c.simpleShorten),t.registerHelper("shorten",function(e,t,a,s){var l,i,r={short:$('<div class="short-length">'),full:null},o=0,u=0,d=a,h=!0,p=function(e){var t=e.match(/(<a href[^>]*>)/i)[0].length+4;h&&(d=a,h=!1),d+=t,u-=t};if("boolean"==typeof(s=s||!1)&&s){for(l=e=c.linkify(e,{sanitization:"none"});u<a&&d<=e.length;)u=d,n.each(e.substr(0,d).match(/(<a href[^<]*<\/a>)/gi),p),h=!0;a+=o=d-a,t+=o}return e&&e.length>0&&(e.length<t?r.short.html("<pre>"+e+"</pre>"):(r.full=$('<div class="full-length hide">'),r.full.html("<pre>"+e+"</pre>"),e=e.substr(0,a),"boolean"==typeof s&&s&&(e.lastIndexOf("<a href")>e.lastIndexOf("</a>")?e+=l.substr(a,l.substr(a,l.length).indexOf("</a>")+5):e.lastIndexOf("<")>e.length-6&&(e=e.substr(0,e.lastIndexOf("<")))),(i=e.replace(/(\.|<\/a>|!|\?)(?=[^?!.>]*$)([\s\S]*)$/,"$1")).length>t?r.short.html("<pre>"+e+"</pre>"):i=e.replace(/( )(?=[^ ]*$)(.*)$/,"$1"),r.short.html("<pre>"+i+"</pre>"))),$("<div>").append(r.short).append(r.full).html()}),c.replace=function(e,t,n){return e=(e+"").toString(),t&&n?e.replace(t,n):e},t.registerHelper("replace",c.replace),c.formatDate=function(e,t){return e?("string"!=typeof t&&(t="YYYY-MM-DD"),moment(e).format(t)):"-"},t.registerHelper("formatDate",c.formatDate),c.fromNow=function(e,t){var n=moment(e),a="MMM DD, YYYY hh:mmA";if(moment().diff(e,"hours")<24||t.hash.fuzzyTime&&moment().diff(e,"days")<7){var s=t.hash.dropSuffix||!1;return n.fromNow(s)}return t.hash.fuzzyTime?a=moment().isSame(e,"year")?"MMM DD":"MMM DD, YYYY":t.hash.fullDate&&(a="MMMM D, YYYY"),n.format(a)},t.registerHelper("fromNow",c.fromNow),c.calendar=function(e,t){var n=moment(e);return moment().diff(n,"days")>6?n.format("llll"):n.calendar()},t.registerHelper("calendar",c.calendar),c.greaterThan=function(e,t,n){return e>t?n.fn(this):n.inverse(this)},t.registerHelper("greaterThan",c.greaterThan),c.lastNumberGreaterThan=function(e,t,n){return e%10>=t?n.fn(this):n.inverse(this)},t.registerHelper("lastNumberGreaterThan",c.lastNumberGreaterThan),c.reportCommentLink=function(e,t){return"/help/report?author="+encodeURIComponent(e)+"&comment="+encodeURIComponent(t)},t.registerHelper("reportCommentLink",c.reportCommentLink),t.registerHelper("connectCover",function(e,n,a,s,l){return new t.SafeString('<img src="'+c.resizeCover(e,a)+'" alt="'+c.sanitizeHTML(n)+'" height="'+a+'" class="'+s+'" />')}),t.registerHelper("connectImage",function(e,n,a){return new t.SafeString('<img src="/img/'+e+'" alt="'+n+'" class="'+a.hash.klass+'" id="'+a.hash.id+'" height="'+a.hash.height+'" width="'+a.hash.width+'" />')}),t.registerHelper("connectAvatar",function(e,n,a,s){var l=c.resizeAvatar(e,a);return new t.SafeString('<img src="'+l+'" width="'+a+'" height="'+a+'" />')}),c.hasContent=function(e,t){if(e.length>0)return $(e).text().trim().length>0?t.fn(this):t.inverse(this)},t.registerHelper("hasContent",c.hasContent),c.conditionalClass=function(e,t,n){return e?t:n||""},t.registerHelper("conditionalClass",c.conditionalClass),c.supportsPlaceholder=function(e,t){return c.isOperaMini?t.inverse(this):t.fn(this)},t.registerHelper("supportsPlaceholder",c.supportsPlaceholder),t.registerHelper("select",function(e,t,n){return n&&n===e?'<option value="'+e+'"selected="selected">'+(t||e)+"</option>":'<option value="'+e+'">'+(t||e)+"</option>"}),c.isCookieSet=function(e,t){return c.getCookie(e)?t.fn(this):t.inverse(this)},t.registerHelper("formatStoryUrl",function(e,t){return c.formatStoryUrl(e)}),t.registerHelper("getCopyright",function(e,t){return c.getCopyright(e)}),t.registerHelper("getCopyrightIcon",function(e,t){return c.getCopyrightIcon(e)}),t.registerHelper("isCookieSet",c.isCookieSet),t.registerHelper("urlEncode",function(e,t){return c.urlEncode(e)}),t.registerHelper("urlEncodeWithSpace",function(e,t){return c.urlEncodeWithSpace(e)}),t.registerHelper("ngettext",function(e,t,n,a){return c.ngettext(e,t,n)}),t.registerHelper("npgettext",function(e,t,n,a,s){return c.npgettext(e,t,n,a)}),c.isExperimentVariation=function(){var t,n,a=Array.prototype.slice.call(arguments),s=a[a.length-1],l=a.slice(1,-1),i=a[0];return a.length>=3&&(t=e.app.experiments.get(i))&&(t.selected(),n=t.current===t.original?"original":t.current,-1!==l.indexOf(n))?s.fn(this):s.inverse(this)},t.registerHelper("isExperimentVariation",c.isExperimentVariation),c.getExperimentVariation=function(t,n){var a=e.app.experiments.get(t);return a&&a.selected(),a&&a.current!==a.original?a.current:"original"},t.registerHelper("getExperimentVariation",c.getExperimentVariation),c.addProtocolToUrl=function(e){return e?-1==e.search(/^http[s]?\:\/\//)&&-1==e.search(/^\/\//)?"http://"+e:e:""},t.registerHelper("addProtocolToUrl",c.addProtocolToUrl),c.charsToWords=function(e){var t=parseInt(app.get("language"),10);return 8===t||9===t||10===t||12===t?e:Math.ceil(e/6)},t.registerHelper("charsToWords",c.charsToWords),c.wordCount=function(e){var t=parseInt(app.get("language"),10);return e=e.replace(/(<([^>]+)>)/gi,""),8===t||9===t||10===t||12===t?e.length:e.length>0?n.filter(e.split(/\s+/),function(e){return e.match(/\S+\s*/)}).length:0},t.registerHelper("wordCount",c.wordCount),c.calcPercentRead=function(e,t){var a=e.length,s=n.findIndex(e,{id:t.partId})/a+1/a*parseFloat(t.position);return s=s<0?0:s,Math.round(1e4*s)/100},t.registerHelper("calcPercentRead",c.calcPercentRead),c.rtlLanguage=function(e){switch(e){case 16:case 17:case 31:case 48:return!0;default:return!1}},t.registerHelper("rtlLanguage",c.rtlLanguage),c.preFormat=function(e,t){return!0===t?e.replace(/\n/g,""):e.replace(/\n/g,"<br />")},t.registerHelper("preFormat",c.preFormat),c.socialSharingAttributes=function(e){var n='href="'+this.href+'" ';return n+='data-share-channel="'+this.name+'" ',"share_readinglist"===this.content||t.Utils.isEmpty(this.urlTemplate)||(n+='data-share-url="'+c.urlEncode(this.urlTemplate)+'" ',n+='data-url="'+c.urlEncode(this.url)+'" ',n+='data-share-text="'+c.urlEncode(this.text)+'" ',n+='data-share-content="'+c.urlEncode(this.content)+'" '),new t.SafeString(n)},t.registerHelper("socialSharingAttributes",c.socialSharingAttributes),c.styleHashtag=function(e,n){var a="#"+e;if("#lgbt"==a){for(var s=new Array("rgb(228,3,3)","rgb(255,140,0)","rgb(0,128,38)","rgb(0,77,255)","rgb(117,7,135)"),l="",i=0;i<s.length;++i)l+='<span style="color: '+s[i]+'">'+a[i]+"</span>";a=l}return new t.SafeString(a)},t.registerHelper("styleHashtag",c.styleHashtag),c.linkifyDesc=function(e){return function(e,t){return n.each(t,function(t,n){e=e.replace(new RegExp(n,"ig"),t)}),e}(e,{amazon:'<a href="http://w.tt/2gb2o8X" target="_blank">Amazon</a>',"always red":'<a href="http://w.tt/2l2noR9" target="_blank">Always Red</a>'})},t.registerHelper("linkifyDesc",c.linkifyDesc),t.registerHelper("insertAdUnit",function(e,t){var n=$("<div>").append(e);return n.find("p").each(function(e,n){if(0!==e&&e%6==0){var a=c.advertisement(t);$(n).append(a)}}),n.html()}),c.publishedPartsInStory=function(e){return(e.parts||[]).filter(function(e){return!e.draft})},t.registerHelper("parseEmbeddedMedia",function(e,t){var i=$("<div>"+e+"</div>");return t=t||480,i.find("[data-video-source=youtube]").each(function(e,t){var n=$(t),a=$((0,l.default)({videoId:n.data("videoId")})).html();n.html(a)}),i.find("[data-video-source=vimeo]").each(function(e,t){var n=$(t),a=$('<iframe width="764" height="430" src="//player.vimeo.com/video/'+n.data("videoId")+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');n.html(a)}),i.find("[data-video-source=vine]").each(function(e,t){var n=$(t),a=$('<iframe width="764" height="430" src="//vine.co/v/'+n.data("videoId")+'/embed/simple" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe><script src="https://platform.vine.co/static/scripts/embed.js"><\/script>');n.html(a)}),i.find("[data-video-source=wattpad]").each(function(e,t){var n=$(t),a=$((0,s.default)({origWidth:n.data("original-width"),origHeight:n.data("original-height"),previewImageSrc:n.data("preview-image"),videoId:n.data("video-id"),videoSrc:"//v.wattpad.com/"+n.data("video-id")+"/hd.mp4"})).html();n.html(a)}),i.find("[data-image-layout=one-horizontal]").each(function(e,s){var l=$(s),i=n.last(n.filter(l.prev("p").text().split("."),function(e){return""!==e}))||{length:0},r=n.first(n.filter(l.next("p").text().split("."),function(e){return""!==e}))||{length:0};if(l.children("img")&&1===l.children("img").length){var c=l.children("img"),u=app.get("device").isDesktop()?650:210;if(c.data("original-width")>u){var d=c.data("original-height")/c.data("original-width")*100;l.addClass("fixed-ratio").css({"padding-bottom":d+"%"})}else c[0].setAttribute("width",c.data("original-width")),c[0].setAttribute("height",c.data("original-height"));c.attr("src",c.attr("src")+"?s=fit&w="+t+"&h="+t),(i.length||r.length)&&c.attr("alt",n.trunc(i.length>r.length?i:r,250));var h=[{image:c[0],src:c[0].getAttribute("src")+"?s=fit&w="+t+"&h="+t}],p=$((0,a.default)({id:l.data("p-id"),images:h,testGroups:o.testGroups}));l.replaceWith(p)}}),i.html()}),c.sanitizeHTML=function(e){return e&&"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e},t.registerHelper("sanitize",c.sanitizeHTML),c.sanitizeHTMLExceptQuotes=function(e){return e&&"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},t.registerHelper("sanitizeExceptQuotes",c.sanitizeHTMLExceptQuotes),c.unsanitizeHTML=function(e){return e&&"string"==typeof e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'):e},t.registerHelper("unsanitize",c.unsanitizeHTML),t.registerHelper("sprintf",function(){return e.sprintf.apply(null,arguments)}),t.registerHelper("reactComponent",function(a,s,l){e.activeReactComponents=e.activeReactComponents||[],u();var i,r=l.hash.model||this;r instanceof Monaco.Model||r instanceof Monaco.Collection||(r=n.isArray(r)?new Monaco.Collection(r):new Monaco.Model(r));var o="component-"+a+"-"+s+"-"+e.location.pathname,c=n.findWhere(e.activeReactComponents,{id:o});return c?(i=c.view,c.view.model.clear({silent:!0}),c.view.model.set(r.toJSON())):((i=new app.views.ReactComponentWrapper(a,s,{model:r},l)).render(),e.activeReactComponents.push({id:i.containerId,view:i})),new t.SafeString(i.container[0].outerHTML)});var u=function(){if(e.observer||(e.observer=new MutationObserver(d)),0===e.activeReactComponents.length){e.observer.observe(document.body,{subtree:!0,childList:!0})}},d=function(t){n.forEach(t,h),e.activeReactComponents.length<=0&&e.observer.disconnect()},h=function(t,a,s){if("childList"===t.type&&t.removedNodes.length>=1){var l=$(t.removedNodes[0]).find(".component-wrapper");n.forEach(l,function(t){var a=t.getAttribute("id");n.remove(e.activeReactComponents,function(e){return e.id===a&&(e.view.remove(),!0)})})}};t.registerHelper("shouldShowReadingAd",function(e,t){return(e-1)%2==0&&e!==t}),t.registerHelper("ternary",function(e,t,a){return n.isFunction(e)&&(e=e.call(this)),e?t:a}),t.registerHelper("isTestGroup",function(e){return!!o.testGroups[e]}),t.registerHelper("generateDropdownOptions",function(e,n){var a,s,l="",i=parseInt(n),r=moment(),o=moment().subtract(100,"years");switch(e){case"day":a=1,s=31,l+='<option value="" disabled selected>Day</option>';break;case"month":a=0,s=11,l+='<option value="" disabled selected>Month</option>';break;case"year":a=o.year(),s=r.year(),l+='<option value="" disabled selected>Year</option>'}if("year"===e)for(var c=s;c>a;c--)l+=t.helpers.select(c,c,i);else for(c=a;c<=s;c++){var u="month"===e?9:10,d="month"===e?c+1:c,h="month"===e?moment().month(c).format("MMMM"):c;d=c<u?"0"+d:""+d,l+=t.helpers.select(d,h,n)}return l})}(window,Handlebars,_,window.wattpad)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"      "+(null!=(l=e.lambda(null!=(l=null!=t?t.image:t)?l.outerHTML:l,t))?l:"")+"\n"},3:function(e,t,n,a,s){var l;return"      <span class='banned-overlay hidden'>\n        "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-image-warning",24,"wp-neutral-5","banned-warning",{name:"iconify",hash:{},data:s}))?l:"")+"\n      </span>\n"},5:function(e,t,n,a,s){return'      <span class="banned-messaging hide"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<figure contenteditable="false">\n  <p data-p-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-media-type="image" data-image-layout="one-horizontal">\n'+(null!=(l=n.each.call(r,null!=t?t.images:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(r,null!=(l=null!=t?t.testGroups:t)?l.STORY_IMAGE_MOD:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'    <span contenteditable=\'false\' class="on-remove-image">\n      <span class="play fa-stack fa-lg">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-circle-filled","auto","wp-neutral-1 fa-stack-2x",{name:"iconify",hash:{},data:s}))?l:"")+"\n        "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",18,"wp-neutral-5 fa-stack-1x",{name:"iconify",hash:{},data:s}))?l:"")+"\n      </span>\n    </span>\n"+(null!=(l=n.if.call(r,null!=(l=null!=t?t.testGroups:t)?l.STORY_IMAGE_MOD:l,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'  </p>\n  <figcaption contenteditable="false">\n    '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-warning",24,"wp-error-1",{name:"iconify",hash:{},data:s}))?l:"")+"\n    "+c((n.trans||t&&t.trans||o).call(r,"Oops! This image does not follow our content guidelines. To continue publishing, please remove it or upload a different image.",{name:"trans",hash:{},data:s}))+"\n  </figcaption>\n</figure>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c="function",u=e.escapeExpression;return'<p data-media-type="video" data-video-source="wattpad" data-original-width="'+u(typeof(i=null!=(i=n.origWidth||(null!=t?t.origWidth:t))?i:o)===c?i.call(r,{name:"origWidth",hash:{},data:s}):i)+'" data-original-height="'+u(typeof(i=null!=(i=n.origHeight||(null!=t?t.origHeight:t))?i:o)===c?i.call(r,{name:"origHeight",hash:{},data:s}):i)+'"data-preview-image="'+u(typeof(i=null!=(i=n.previewImageSrc||(null!=t?t.previewImageSrc:t))?i:o)===c?i.call(r,{name:"previewImageSrc",hash:{},data:s}):i)+'" data-video-id="'+u(typeof(i=null!=(i=n.videoId||(null!=t?t.videoId:t))?i:o)===c?i.call(r,{name:"videoId",hash:{},data:s}):i)+'">\n  <video poster="'+u(typeof(i=null!=(i=n.previewImageSrc||(null!=t?t.previewImageSrc:t))?i:o)===c?i.call(r,{name:"previewImageSrc",hash:{},data:s}):i)+'" autoplay autostart muted loop controls>\n    <source src="'+u(typeof(i=null!=(i=n.videoSrc||(null!=t?t.videoSrc:t))?i:o)===c?i.call(r,{name:"videoSrc",hash:{},data:s}):i)+'" type="video/mp4">\n    '+u((n.trans||t&&t.trans||o).call(r,"There should be a GIF or video here. Update the app now to see it",{name:"trans",hash:{},data:s}))+'\n  </video>\n  <span class="place-holder">&nbsp;</span>\n  <span contenteditable=\'false\' class="on-remove-image">\n    <span class="play fa-stack fa-lg">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-circle-filled","auto","wp-neutral-1 fa-stack-2x",{name:"iconify",hash:{},data:s}))?l:"")+"\n      "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",18,"wp-neutral-5 fa-stack-1x",{name:"iconify",hash:{},data:s}))?l:"")+"\n    </span>\n  </span>\n</p>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<p data-media-type="image">\n  <span contenteditable=\'false\' class="on-remove-image">\n    <span class="play fa-stack fa-lg">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-circle-filled","auto","wp-neutral-1 fa-stack-2x",{name:"iconify",hash:{},data:s}))?l:"")+"\n      "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove","auto","wp-neutral-5 fa-stack-1x",{name:"iconify",hash:{},data:s}))?l:"")+'\n    </span>\n  </span>\n  <iframe data-video-id="'+c("function"==typeof(i=null!=(i=n.videoId||(null!=t?t.videoId:t))?i:o)?i.call(r,{name:"videoId",hash:{},data:s}):i)+'" width="764" height="330" src="//www.youtube-nocookie.com/embed/'+c("function"==typeof(i=null!=(i=n.videoId||(null!=t?t.videoId:t))?i:o)?i.call(r,{name:"videoId",hash:{},data:s}):i)+'?rel=0&showinfo=0&enablejsapi=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n</p>\n'},useData:!0})},function(e,t,n){"use strict";e.exports={home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',library:'<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g class="nav-library" transform="translate(3.000000, 3.000000)" fill="#6F6F6F"><path d="M17.4,0 C17.9522847,-1.01453063e-16 18.4,0.44771525 18.4,1 L18.4,17 C18.4,17.5522847 17.9522847,18 17.4,18 L17,18 C16.4477153,18 16,17.5522847 16,17 L16,1 C16,0.44771525 16.4477153,1.01453063e-16 17,0 L17.4,0 Z M12.4,0 C12.9522847,-1.01453063e-16 13.4,0.44771525 13.4,1 L13.4,17 C13.4,17.5522847 12.9522847,18 12.4,18 L12,18 C11.4477153,18 11,17.5522847 11,17 L11,1 C11,0.44771525 11.4477153,1.01453063e-16 12,0 L12.4,0 Z M6.33618624,0.254903754 L6.72255657,0.358431372 C7.25602267,0.501373184 7.57260516,1.04971014 7.42966335,1.58317624 L3.28855863,17.0379895 C3.14561682,17.5714556 2.59727986,17.8880381 2.06381376,17.7450962 L1.67744343,17.6415686 C1.14397733,17.4986268 0.827394836,16.9502899 0.970336648,16.4168238 L5.11144137,0.962010536 C5.25438318,0.428544432 5.80272014,0.111961943 6.33618624,0.254903754 Z" id="Combined-Shape"></path></g></g>',create:'<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g class="nav-create" transform="translate(2.000000, 2.000000)" stroke="#6F6F6F" stroke-width="2"><g id="edit-2" stroke-linecap="round" stroke-linejoin="round"><path d="M15,1 C15.7145312,0.285468802 16.7559831,0.00641259763 17.7320508,0.267949159 C18.7081186,0.52948572 19.4705143,1.29188142 19.7320508,2.26794918 C19.9935874,3.24401693 19.7145312,4.28546882 19,5 L5.5,18.5 L0,20 L1.5,14.5 L15,1 Z" id="Path"></path></g><path d="M2.5,14.5 L5.5,17.5" id="Line-3" stroke-linecap="square"></path></g></g>',notifications:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',profile:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',chevDown:'<polyline points="6 9 12 15 18 9"></polyline>',chevUp:'<polyline points="18 15 12 9 6 15"></polyline>',chevLeft:'<polyline points="15 18 9 12 15 6"></polyline>',chevRight:'<polyline points="9 18 15 12 9 6"></polyline>',close:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',closeCircle:"",search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',add:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',remove:'<line x1="5" y1="12" x2="19" y2="12"></line>',more:'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',follow:'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',following:'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',dropdownCaret:"",arrowCircleRight:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',arrowCircleLeft:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',arrowLeft:'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',arrowRight:'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',refresh:"",circle:"",report:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',history:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',drag:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',share:'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',comment:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',edit:'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',mute:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',unmute:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',success:'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',filter:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',attach:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',textFormat:"",picture:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',hideKeyboard:"",link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',brightnessUp:"",brightnessDown:"",reply:"",embed:"",camera:"",lock:"",unlock:"",timeout:"",readingList:"",underline:"",bold:"",italic:"",textAlignRight:"",textAlignCenter:"",textAlignLeft:"",commentMeta:'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',views:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',votes:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',parts:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line>',notifDedicate:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',notifStoryUpdate:'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',notifFeedMessage:"",warning:"","warning-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',info:"",copyright:"",publicDomain:"",creativeCommons:"",location:"",stats:"",staff:' <g id="Staff---Wireframes" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n  <g id="Artboard" transform="translate(-1147.000000, -227.000000)">\n      <g id="ic_badge_verified" transform="translate(1147.000000, 227.000000)">\n          <path d="M19.64,8.645 L18.419,6.513 L17.774,4.142 C17.521,3.209 16.792,2.48 15.859,2.226 L13.487,1.581 L11.355,0.36 C10.935,0.12 10.467,0 10,0 C9.533,0 9.065,0.12 8.646,0.36 L6.513,1.581 L4.141,2.226 C3.208,2.48 2.48,3.208 2.226,4.141 L1.581,6.513 L0.36,8.646 C-0.12,9.485 -0.12,10.515 0.36,11.355 L1.581,13.487 L2.226,15.86 C2.48,16.792 3.209,17.521 4.142,17.774 L6.513,18.419 L8.645,19.64 C9.065,19.88 9.533,20 10,20 C10.467,20 10.935,19.88 11.355,19.64 L13.487,18.419 L15.859,17.774 C16.792,17.521 17.521,16.792 17.774,15.859 L18.419,13.487 L19.64,11.355 C20.12,10.515 20.12,9.485 19.64,8.645 L19.64,8.645 Z" id="Path" fill="#FFFFFF"></path>\n          <path d="M19.64,8.645 L18.419,6.513 L17.774,4.142 C17.521,3.209 16.792,2.48 15.859,2.226 L13.487,1.581 L11.355,0.36 C10.935,0.12 10.467,0 10,0 C9.533,0 9.065,0.12 8.646,0.36 L6.513,1.581 L4.141,2.226 C3.208,2.48 2.48,3.208 2.226,4.141 L1.581,6.513 L0.36,8.646 C-0.12,9.485 -0.12,10.515 0.36,11.355 L1.581,13.487 L2.226,15.86 C2.48,16.792 3.209,17.521 4.142,17.774 L6.513,18.419 L8.645,19.64 C9.065,19.88 9.533,20 10,20 C10.467,20 10.935,19.88 11.355,19.64 L13.487,18.419 L15.859,17.774 C16.792,17.521 17.521,16.792 17.774,15.859 L18.419,13.487 L19.64,11.355 C20.12,10.515 20.12,9.485 19.64,8.645 L19.64,8.645 Z" id="Verified-Account" fill="#FF6122"></path>\n      </g>\n      <path d="M1154.11212,241.7 C1155.77292,241.7 1156.00632,239.785105 1157.14045,238.07578 C1157.09856,238.686857 1157.13746,239.227533 1157.26314,239.599248 C1157.75689,241.066395 1159.45659,241.179036 1160.22864,239.689361 C1161.31788,237.588608 1161.62909,237.092989 1162.72731,235.580785 C1163.45148,234.581097 1162.61061,233.936228 1161.63807,234.400872 C1161.13834,234.640234 1160.32739,235.234414 1159.31595,236.498808 C1159.4925,235.538545 1159.44462,233.910884 1157.97235,234.003813 C1157.19432,234.051685 1156.18587,234.879595 1154.80935,237.00006 C1154.92307,235.808883 1154.96795,234.964076 1154.41735,234.521961 C1154.0403,234.21783 1153.15155,234.102373 1152.6189,234.752874 C1152.08325,235.409008 1151.95757,236.687481 1152.01144,238.03354 C1152.11617,240.852377 1153.17549,241.7 1154.11212,241.7 Z" id="Logo-path" fill="#FFFFFF"></path>\n  </g>\n</g>',ambassador:'<g id="Amb-badge" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n  <g id="Badges" transform="translate(-35.000000, -206.000000)">\n      <g id="ic_badge_verified" transform="translate(35.000000, 206.000000)">\n          <path d="M19.64,8.645 L18.419,6.513 L17.774,4.142 C17.521,3.209 16.792,2.48 15.859,2.226 L13.487,1.581 L11.355,0.36 C10.935,0.12 10.467,0 10,0 C9.533,0 9.065,0.12 8.646,0.36 L6.513,1.581 L4.141,2.226 C3.208,2.48 2.48,3.208 2.226,4.141 L1.581,6.513 L0.36,8.646 C-0.12,9.485 -0.12,10.515 0.36,11.355 L1.581,13.487 L2.226,15.86 C2.48,16.792 3.209,17.521 4.142,17.774 L6.513,18.419 L8.645,19.64 C9.065,19.88 9.533,20 10,20 C10.467,20 10.935,19.88 11.355,19.64 L13.487,18.419 L15.859,17.774 C16.792,17.521 17.521,16.792 17.774,15.859 L18.419,13.487 L19.64,11.355 C20.12,10.515 20.12,9.485 19.64,8.645 L19.64,8.645 Z" id="Path" fill="#FFFFFF"></path>\n          <path d="M19.64,8.645 L18.419,6.513 L17.774,4.142 C17.521,3.209 16.792,2.48 15.859,2.226 L13.487,1.581 L11.355,0.36 C10.935,0.12 10.467,0 10,0 C9.533,0 9.065,0.12 8.646,0.36 L6.513,1.581 L4.141,2.226 C3.208,2.48 2.48,3.208 2.226,4.141 L1.581,6.513 L0.36,8.646 C-0.12,9.485 -0.12,10.515 0.36,11.355 L1.581,13.487 L2.226,15.86 C2.48,16.792 3.209,17.521 4.142,17.774 L6.513,18.419 L8.645,19.64 C9.065,19.88 9.533,20 10,20 C10.467,20 10.935,19.88 11.355,19.64 L13.487,18.419 L15.859,17.774 C16.792,17.521 17.521,16.792 17.774,15.859 L18.419,13.487 L19.64,11.355 C20.12,10.515 20.12,9.485 19.64,8.645 L19.64,8.645 Z" id="Verified-Account" fill="#FF6122"></path>\n          <g id="Group-3" transform="translate(5.000000, 6.000000)" fill="#FFFFFF">\n              <path d="M9.78065737,1.78094955 C9.35444338,0.694861133 8.31740847,-0.012577196 7.16968296,0.000169440589 C6.33637761,0.00279374812 5.5446272,0.373570912 5,1.01615136 C4.45500506,0.373570912 3.66362239,0.00279374812 2.83031704,0.000169440589 C1.68295927,-0.012577196 0.645924361,0.694861133 0.219342627,1.78094955 C-0.225626252,2.85466623 0.0192905027,4.09671349 0.837150656,4.91137353 L4.73890256,8.88907394 C4.88195454,9.03641006 5.11473578,9.03678496 5.25889098,8.89132335 L5.26109744,8.88907394 L9.16284934,4.91137353 C9.9807095,4.09671349 10.2256263,2.85466623 9.78065737,1.78094955" id="Fill-1"></path>\n          </g>\n      </g>\n  </g>\n</g>',verified:'<g id="Verifier---Wireframes" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n  <g id="Artboard" transform="translate(-1147.000000, -299.000000)">\n      <path d="M1165.419,305.513 L1164.774,303.142 C1164.521,302.209 1163.792,301.48 1162.859,301.226 L1160.487,300.581 L1158.355,299.36 C1157.935,299.12 1157.467,299 1157,299 C1156.533,299 1156.065,299.12 1155.646,299.36 L1153.513,300.581 L1151.141,301.226 C1150.208,301.48 1149.48,302.208 1149.226,303.141 L1148.581,305.513 L1147.36,307.646 C1146.88,308.485 1146.88,309.515 1147.36,310.355 L1148.581,312.487 L1149.226,314.86 C1149.48,315.792 1150.209,316.521 1151.142,316.774 L1153.513,317.419 L1155.645,318.64 C1156.065,318.88 1156.533,319 1157,319 C1157.467,319 1157.935,318.88 1158.355,318.64 L1160.487,317.419 L1162.859,316.774 C1163.792,316.521 1164.521,315.792 1164.774,314.859 L1165.419,312.487 L1166.64,310.355 C1167.12,309.515 1167.12,308.485 1166.64,307.645 L1165.419,305.513 Z" id="Path" fill="#FFFFFF"></path>\n      <path d="M1166.64,307.645 L1165.419,305.513 L1164.774,303.142 C1164.521,302.209 1163.792,301.48 1162.859,301.226 L1160.487,300.581 L1158.355,299.36 C1157.935,299.12 1157.467,299 1157,299 C1156.533,299 1156.065,299.12 1155.646,299.36 L1153.513,300.581 L1151.141,301.226 C1150.208,301.48 1149.48,302.208 1149.226,303.141 L1148.581,305.513 L1147.36,307.646 C1146.88,308.485 1146.88,309.515 1147.36,310.355 L1148.581,312.487 L1149.226,314.86 C1149.48,315.792 1150.209,316.521 1151.142,316.774 L1153.513,317.419 L1155.645,318.64 C1156.065,318.88 1156.533,319 1157,319 C1157.467,319 1157.935,318.88 1158.355,318.64 L1160.487,317.419 L1162.859,316.774 C1163.792,316.521 1164.521,315.792 1164.774,314.859 L1165.419,312.487 L1166.64,310.355 C1167.12,309.515 1167.12,308.485 1166.64,307.645 L1166.64,307.645 Z" id="Verified-Account" fill="#FF6122"></path>\n      <path d="M1156.36061,312.705984 C1156.00858,313.098005 1155.43225,313.098005 1155.08022,312.705984 L1152.26402,309.569809 C1151.91199,309.177788 1151.91199,308.536863 1152.26402,308.144841 C1152.61604,307.75282 1153.19238,307.75282 1153.5444,308.144841 L1155.72042,310.568087 L1160.4564,305.294016 C1160.80842,304.901995 1161.38396,304.901995 1161.73598,305.294016 C1162.08801,305.686038 1162.08801,306.326963 1161.73598,306.718984 L1156.36061,312.705984 Z" id="Path" fill="#FFFFFF"></path>\n  </g>\n</g>',star:'<g id="Stars---Wireframes" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n  <g id="Artboard" transform="translate(-1147.000000, -336.000000)">\n      <path d="M1166.64,344.645 L1165.419,342.513 L1164.774,340.142 C1164.521,339.209 1163.792,338.48 1162.859,338.226 L1160.487,337.581 L1158.355,336.36 C1157.935,336.12 1157.467,336 1157,336 C1156.533,336 1156.065,336.12 1155.646,336.36 L1153.513,337.581 L1151.141,338.226 C1150.208,338.48 1149.48,339.208 1149.226,340.141 L1148.581,342.513 L1147.36,344.646 C1146.88,345.485 1146.88,346.515 1147.36,347.355 L1148.581,349.487 L1149.226,351.86 C1149.48,352.792 1150.209,353.521 1151.142,353.774 L1153.513,354.419 L1155.645,355.64 C1156.065,355.88 1156.533,356 1157,356 C1157.467,356 1157.935,355.88 1158.355,355.64 L1160.487,354.419 L1162.859,353.774 C1163.792,353.521 1164.521,352.792 1164.774,351.859 L1165.419,349.487 L1166.64,347.355 C1167.12,346.515 1167.12,345.485 1166.64,344.645 L1166.64,344.645 Z" id="Path" fill="#FF6122"></path>\n      <path d="M1158.545,344.292 L1157.42218,341.899553 C1157.18902,341.402744 1156.81055,341.403664 1156.57782,341.899553 L1155.455,344.292 L1152.98082,344.669751 C1152.43913,344.752455 1152.30655,345.133713 1152.69639,345.533299 L1154.5,347.382 L1154.07122,350.011366 C1153.98218,350.557373 1154.30135,350.783681 1154.7872,350.515124 L1157,349.292 L1159.2128,350.515124 C1159.69726,350.782914 1160.01765,350.556362 1159.92878,350.011366 L1159.5,347.382 L1161.30361,345.533299 C1161.68822,345.139079 1161.54832,344.750539 1161.01918,344.669751 L1158.545,344.292 Z" id="Path" fill="#FFFFFF"></path>\n  </g>\n</g>',sponsored:"",storyrank:"",promoted:'<g fill="none" fill-rule="evenodd">\n  <path fill="#FF6122" fill-rule="nonzero" d="M14.73 6.484l-.916-1.6-.483-1.778a2.044 2.044 0 0 0-1.437-1.436l-1.779-.484L8.516.27a2.048 2.048 0 0 0-2.032 0l-1.6.916-1.778.484c-.7.19-1.246.736-1.436 1.436l-.484 1.779-.916 1.6c-.36.629-.36 1.401 0 2.031l.916 1.6.484 1.779c.19.699.737 1.246 1.437 1.436l1.778.483 1.599.916a2.048 2.048 0 0 0 2.032 0l1.6-.916 1.778-.483c.7-.19 1.247-.737 1.437-1.437l.483-1.779.916-1.599c.36-.63.36-1.402 0-2.032z"/>\n  <g stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">\n      <path d="M7.5 10.5V5.25M4.875 7.875L7.5 5.25l2.625 2.625"/>\n  </g>\n</g>',twitter:"",facebook:"","facebook-login":"",pinterest:"",tumblr:"",googlePlus:"",email:""}},function(e,t,n){"use strict";e.exports={"wp-base-1":"#ff6122","wp-base-1-light":"#ff7b3c","wp-base-1-dark":"#e64809","wp-base-2":"#00b2b2","wp-base-2-light":"#1acccc","wp-base-2-dark":"#009999","wp-neutral-1":"#222222","wp-neutral-2":"#6f6f6f","wp-neutral-3":"#eeeeee","wp-neutral-4":"#fafafa","wp-neutral-5":"#ffffff","wp-error-1":"#ff3f12","wp-warning-01":"#ffc922","facebook-1":"#3b5998","twitter-1":"#55acee","pinterest-1":"#bd081c","tumblr-1":"#35465c","google-1":"#db4437","google-2":"#1e6cd6","wp-ambassador-profile":"#df6400","wp-lightteal":"#c3d8dc","wp-lighterteal":"#eaf0f4","wp-lighterror":"#faada1","wp-errorbackground":"#ff6d55","wp-focus-blue":"#00a0d9","wp-button-red":"#e94a2c","wp-button-green":"#01b05a","wp-wattys-tag":"#322864"}},function(e,t,n){"use strict";!function(){var e=window.wp=window.wp||{};window.FBStatus=new function(e){this.loggedIn=!1,this.permissions=[],this.accessToken=""},window.fbAsyncInit=function(){function t(e,t,n){var a=e.split(",");!FBStatus.loggedIn||function(e){return e.reduce(function(e,t){return e||!!FBStatus.permissions[t]},!1)}(a)?(t.scope=a,FB.login(function(e){return function(t){return!!t.authResponse&&(FBStatus.accessToken=t.authResponse.accessToken,e())}}(n),t)):n()}FB.init({appId:e.app_id,cookie:!0,xfbml:!0,version:"v2.4"}),e.facebook_reprompt_permission=function(e,n){t(e,{auth_type:"rerequest"},n)},e.facebook_prompt_permission=function(e,n){t(e,{},n)},e.facebook_share_dialog=function(t,n,a,s){FB.ui({method:"share_open_graph",action_type:e.facebook_app_name+":read",action_properties:JSON.stringify({story:{"og:url":t,"og:title":n,"og:description":a,"og:image":s}})})}}}()},function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n){var l=(n=n||(e.wattpad={})).utils||(n.utils={});l.bootstrapReactRoot=function(){var t=e.app.components.ReactRoot,n=e.app.components.withRedux(t,e.store);ReactDOM.render(React.createElement(n),document.getElementById("react-client-root"))},l.getWrapParams=function(e){return Array.prototype.slice.call(e,1)},l.isToday=function(e){var t=moment();return t.isSame(e,"day")&&t.isSame(e,"month")&&t.isSame(e,"year")},l.pastePlainText=function(t){var n;if(t.preventDefault(),(t.originalEvent||t).clipboardData)n=(t.originalEvent||t).clipboardData.getData("text/plain"),document.execCommand("insertText",!1,n);else if(e.clipboardData){n=e.clipboardData.getData("Text"),(document.selection||document.getSelection()).createRange().pasteHTML(n)}return n},l.pixelRatio=function(t){var n=e.devicePixelRatio;if(!t)return n||(this.pixelRatio(3)?3:this.pixelRatio(2)?2:this.pixelRatio(1.5)?1.5:this.pixelRatio(1)?1:0);if(n&&n>0)return n>=t;var a=e.matchMedia||e.msMatchMedia;return!!a&&(!!a(t="only all and (min--moz-device-pixel-ratio:"+t+")").matches||!!a(t.replace("-moz-","")).matches)},l.getUserAgent=function(t){return t>0?e.navigator.userAgent.substr(0,t):e.navigator.userAgent},l.getCookie=function(t){var n=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(e.document.cookie);return n&&n.length>0?e.decodeURIComponent(n[1]):null},l.setCookie=function(n,a,s,l){var i,r="";0!==s&&(s=s&&t.isNumber(s)?s:365,(i=new Date).setTime(i.getTime()+24*s*60*60*1e3),r+="; expires="+i.toGMTString());var o=n+"="+(a=e.encodeURIComponent(a))+r+"; path=/;";if(l){var c=e.document.domain.split(".");o+=" domain="+(c="."+c[c.length-2]+"."+c[c.length-1])+";"}return e.document.cookie=o,o},l.destroyCookie=function(t){e.document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},l.supportPushState=function(){return!(!e.history||!e.history.pushState)},l.serializeObject=function(e){var t={};return $.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},l.modernizr=function(t){var n,a;if(!e.Modernizr)return!1;if(l.isOperaMini&&"input.placeholder"===t)return!1;if(l.isLTIE10Mobile&&"fontface"===t)return!1;for(n=e.Modernizr,t=t.split("."),a=0;a<t.length;a++)n=n[t[a]];return n},l.supportsTransition=function(){var t=(e.document.body||e.document.documentElement).style;return void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition},l.transitionEndStrings="webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend",l.scrollIntoView=function(t){var n;t&&(t=(n=$(t))[0],n.length&&(l.isOperaMini||l.isAndroidStockBrowser(2,!0)||!t.scrollIntoView?e.scrollTo(0,n.offset().top+10):t.scrollIntoView(!0)))},l.isOperaMini=Boolean(e.navigator.userAgent.match(/(Opera Mini)/)),l.isLTIE10Mobile=Boolean(e.navigator.userAgent.match(/(MSIE 9.+ IEMobile)/))||Boolean(e.navigator.userAgent.match(/(MSIE 8.+ IEMobile)/))||Boolean(e.navigator.userAgent.match(/(MSIE 7.+ IEMobile)/)),l.chromeAndroidVer=function(){var t=/Chrome\/([0-9.]+)\ Mobile/.exec(e.navigator.userAgent);return t?parseInt(t[1]):0},l.isAndroid=function(t,n){var a=0;return t&&"number"==typeof t?!!Boolean(e.navigator.userAgent.match(/(Android)/))&&(!!(a=e.navigator.userAgent.match(/Android (.)/))&&(a=parseInt(a[1],10),n?a===t:a>=t)):Boolean(e.navigator.userAgent.match(/(Android)/))},l.format=function(e,t,n){var a="\\d(?=(\\d{"+(n||3)+"})+"+(t>0?"\\.":"$")+")";return e.toFixed(Math.max(0,~~t)).replace(new RegExp(a,"g"),"$&,")},Handlebars.registerHelper("format",l.format),l.isAndroidStockBrowser=function(t,n){return!!l.isAndroid(t,n)&&parseFloat(e.navigator.userAgent.match(/AppleWebKit\/([\d.]+)/)[1])<535},l.openOnDesktop=function(t){t=t&&t.location?t:e;var n=l.getDesktopUrl(t);t.document.cookie="mw-no=true; path=/",t.location.href===n?t.location.reload():t.location.href=n},l.getDesktopUrl=function(t){return(t=t&&t.location?t:e).location.href.replace(/\/paragraph\/[\w]+/,"")},l.hideAddressBar=function(){n.utils.isOperaMini&&l.scrollToTop(),e.setTimeout(function(){e.scrollY<5&&l.scrollToTop()},0)},l.scrollToTop=function(){e.document.body.scrollTop||e.document.documentElement.scrollTop;var t=e.scrollTo;t&&t(0,0)},l.currentUser=function(){var e=app.get("currentUser");return e||(e=new app.models.User(n.user),app.set("currentUser",e,!1)),e},l.urlEncode=function(e){e=(e+"").toString();var t="";try{t=encodeURIComponent(e).replace(/!/g,"%21")}catch(n){e="..."==e.substr(-3)?e.substr(0,e.length-4)+"...":e.substr(0,e.length-1),t=encodeURIComponent(e).replace(/!/g,"%21")}return t.replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},l.urlEncodeWithSpace=function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},l.urlDecode=function(e){return e=(e+"").toString(),decodeURIComponent(e.replace(/%21/g,"!").replace(/%27/g,"'").replace(/%28/g,"(").replace(/%29/g,")").replace(/%2A/g,"*").replace(/\+/g," "))},l.getMentions=function(e){return e.match(/((?![\/\.\#])(?:^|\W))@([\S\-]+)/gi)},l.linkify=function(e,t){var a=/((?![\/\.\#])(?:^|\W))@([\S\-]+)/gi,s=/(http(s)?:\/\/[^\s]+)/gi,l=/(?:^|\W)#([^\s\?\/]+)/gi,i='$1<a class="on-user-mention" href="/user/$2">@$2</a>',r='<a href="$1" rel="nofollow" target="_blank">$1</a>',o=' <a href="/tags/$1" class="on-navigate">#$1</a>';switch((t=t||{}).hash&&t.hash.sanitization&&(t.sanitization=t.hash.sanitization),t.sanitization=t.sanitization||"sanitize",t.doTags=!1!==t.doTags,t.doUrl=!1!==t.doUrl&&"unsanitize"!==t.sanitization,t.doMention=!1!==t.doMention,t.sanitization){case"sanitize":e=n.utils.sanitizeHTML(e);break;case"unsanitize":e=n.utils.unsanitizeHTML(e)}return t.doMention&&(e=e.replace(a,i)),t.doUrl&&(e=e.replace(s,r)),t.doTags&&(e=e.replace(l,o)),e},l.findMediaInText=function(e){var n,a,s=[],l="i";return e.text&&(e.placeholder=void 0!==e.placeholder&&""+e.placeholder,e.firstOnly=!!e.firstOnly,e.firstOnly||(l+="g"),t.each({image:/(?:https?:)?\/\/(?:[\w\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpg|gif|png)/},function(t){n=new RegExp(t.source,l),(a=e.text.match(n))&&(e.placeholder&&(e.text=e.text.replace(n,e.placeholder)),s=s.concat(a))})),{text:e.text,media:s}},l.stopEvent=function(e){var t=e&&e.hasOwnProperty("gesture")?e.gesture.srcEvent:e,n=!!t&&(t.metaKey||t.ctrlKey);e&&!n&&(e.preventDefault(),e.stopPropagation(),e.hasOwnProperty("gesture")&&(e.gesture.preventDefault(),e.gesture.stopPropagation(),e.gesture.stopDetect()))},l.supportLocalstorage=function(){var t=e.app,n="wattpad.com.test";try{return e.localStorage.setItem(n,n),e.localStorage.removeItem(n),!0}catch(n){if(DOMException&&n&&DOMException.QUOTA_EXCEEDED_ERR&&n.code&&n.code===DOMException.QUOTA_EXCEEDED_ERR)return void 0!==t&&"undefined"!==t.local&&t.local.clear(),!0;e.wpLog.exception(n,"localstorage-not-supported")}return!1},l.redirectToCSR=function(e,t){t=t||{},app.router.navigate(e,t)},l.redirectToServer=function(e){$("body").hasClass("js-app-off")||(e?l._redirectToServer(e):l._reloadFromServer())},l._redirectToServer=function(t){e.location.href=t},l._reloadFromServer=function(){e.location.reload()},l.goBackInHistory=function(){e.history.go(-1)},l.getWindowSearch=function(){return e.location.search},l.reloadWithQuery=function(t){e.location="//"+e.location.hostname+e.location.pathname+t+e.location.hash},l.cacheBust=function(e,n,a,s){var l=[];return e=Array.isArray(e)?e:[e],n=Array.isArray(n)?n:[n],t.forEach(e,function(e,i){var r,o;(o=(r=s?new app.models[e](n[i]):new app.collections[e]([],n[i]))instanceof app.collections.IncrementalFetch?Promise.resolve(r.fetchNextSet({localOnly:!0})):Promise.resolve(r.fetch({localOnly:!0}))).then(function(){a&&!r.get(a)||app.local._clearItem(t.result(r,"resource"))}),l.push(o)}),Promise.all(l)},l.showBuyCoinsModal=function(t,n,a,s){e.app.components.showBuyCoinsModal({isDesktop:app.get("device").isDesktop(),appLink:s,trackCoinsEvents:function(s,l){var i=e.store.getState().wallet;e.te.push("event","coins","packages",s,l,{page:t,storyid:n,partid:a,starting_balance:i.amount})}})},l.shouldSeePaidOnboarding=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=t.get(e,"wattpad.testGroups.PAID_ONBOARDING")||!1,l=parseInt(n.utils.getCookie("seen-paid-onboard"))||!1;return s&&!l&&a},l.showPaidOnboardingAfterDelay=function(){$("body").addClass("js-app-off");var t=e.location.pathname;setTimeout(function(){$("body").removeClass("js-app-off"),e.location.pathname!==t||e.app.components.showPaidOnboardingModal({premium:n.utils.currentUser().get("premium")})},1500)},l.getAppUrl=function(e){e=e||"mobileweb";var t=app.get("device");return t&&t.is.ios?"https://itunes.apple.com/app/free-books-wattpad-ebook-reader/id306310789":t&&t.is.android?"https://play.google.com/store/apps/details?id=wp.wattpad&referrer=utm_source%3Dwattpad%26utm_medium%3D"+e:t&&t.is.kindle?"https://www.amazon.com/Unlimited-Stories-Wattpad-Free-Reader/dp/B004K56MNU":t&&t.is.windows?"https://www.microsoft.com/store/apps/9nblggh6gm17":"/getmobile"},l.getAllAppUrls=function(e){return{ios:"https://itunes.apple.com/app/free-books-wattpad-ebook-reader/id306310789",android:"https://play.google.com/store/apps/details?id=wp.wattpad&referrer=utm_source%3Dwattpad%26utm_medium%3D"+(e=e||"mobileweb"),kindle:"https://www.amazon.com/Unlimited-Stories-Wattpad-Free-Reader/dp/B004K56MNU",windows:"https://www.microsoft.com/store/apps/9nblggh6gm17",fallback:"/getmobile"}},l.openPopup=function(t,n,a,s){var l=void 0!==e.screenLeft?e.screenLeft:screen.left,i=void 0!==e.screenTop?e.screenTop:screen.top,r=(e.innerWidth?e.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-a/2+l,o=(e.innerHeight?e.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-s/2+i,c=e.open(t,n,"scrollbars=yes, width="+a+", height="+s+", top="+o+", left="+r);return e.focus&&c.focus(),c},l.sortByColumns=function(e,t){for(var n=[],a=0,s=0,l=0,i=0,r=e.length%t;n.length<e.length;){for(;a<e.length&&(n.push(e[a]),a+=Math.ceil(e.length/t)-s,l++,r&&l>=r&&(s=1),!(n.length>=e.length)););l=0,s=0,a=++i}return n},l.sprintf=function(e,t){var n="";if(0===t.length)return e;for(var a=e.split("%s"),s=0;s<a.length;s++)n+=a[s]+(null!==t[s]&&void 0!==t[s]?t[s].toString():"");return n},l.extractUriFromUrl=function(e){return e.replace(/^((https?:)?\/\/)?[a-z-.]*[a-z-](:\d+)?(?=\/)/i,"")},l.formatStoryUrl=function(e){return l.extractUriFromUrl(e)},l.getCopyright=function(e){var t="";switch(e){case 0:t=l.trans("Not Specified");break;case 1:t=l.trans("All Rights Reserved");break;case 2:t=l.trans("Public Domain");break;case 3:t=l.trans("Creative Commons (CC) Attribution");break;case 4:t=l.trans("(CC) Attrib. NonCommercial");break;case 5:t=l.trans("(CC) Attrib. NonComm. NoDerivs");break;case 6:t=l.trans("(CC) Attrib. NonComm. ShareAlike");break;case 7:t=l.trans("(CC) Attribution-ShareAlike");break;case 8:t=l.trans("(CC) Attribution-NoDerivs")}return t},l.getCopyrightIcon=function(e){var t=null;switch(e){case 0:break;case 1:t="fa-copyright";break;case 2:t="fa-public-domain";break;case 3:case 4:case 5:case 6:case 7:case 8:t="fa-creative-commons"}return t},l.addSource=function(e,t,n,a,s){var l=(e.indexOf("?")>0?"&":"?")+"utm_source="+t,i=e+l;n&&(i+="&utm_medium="+n),a&&(i+="&utm_content="+a),s&&(i+="&wp_page="+s);var r=e.indexOf("#");return r>0&&(i=e.substr(0,e.indexOf("#")+1)+l+"#"+r),i},l.setTitle=function(t,a){void 0===a&&(a=!0);var s=0,l=t?t+(a?" - Wattpad":""):"Wattpad";n.utils.currentUser().get("inbox")&&(s=n.utils.currentUser().get("inbox").unread),app.get("device").is.desktop&&s>0&&(l="("+s+") "+l),e.document.title!==l&&(e.document.title=n.utils.unsanitizeHTML(l))},l.getNextUrl=function(e,t){var n,a=function(e){return"string"==typeof e&&!/(\/|%2F)(getmobile|login|signup)\/?[^\/\s]*/i.test(e)};return e=a(e)?e:"",t=(a(t)?t:"")||"/home",(n=e||l.getParam("nextUrl")||l.getParam("nexturl"))&&"string"==typeof n&&a(n)?encodeURIComponent(n):encodeURIComponent(t)},l.getParam=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e.location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},l.npgettext=function(e,t,n,a){var s=app.get("translatedLanguage");return a=parseInt(a,10),s&&s.jed?s.jed.npgettext(e,t,n,a):function(e,t,n){return 1===n?e:t}(t,n,a)},l.ngettext=function(e,t,n){return l.npgettext(void 0,e,t,n)},l.toPascalCase=function(e){var t=e.toLowerCase().replace(/[\W_]+(\w)/g,function(e,t){return t.toUpperCase()});return t.charAt(0).toUpperCase()+t.slice(1)},l.experimentSelected=function(t){t&&t.current&&e.te.push("event","experiment","variation",null,"select",{experiment:t.options.experimentKey,variation:t.variationLoki?t.variationLoki:"unknown"})},l.isHttp=function(){return"http:"===e.location.protocol},l.pushEvent=function(t,n){t&&"object"===(void 0===t?"undefined":s(t))&&e.dataLayer&&(t.event=n||"ga-event",e.dataLayer.push(t))},l.getAppLink=function(e,n){var a=app.get("device"),s=!t.includes(["library","homepage"],e);if(void 0===e||s&&void 0===n||!a.is.ios&&!a.is.android&&!a.is.windows)return null;switch(e){case"homepage":return"wattpad://discover";case"story-landing":return n instanceof app.models.StoryModel?a.is.ios?"wattpad:///read?groupid="+n.get("id"):"wattpad://story/"+n.get("id"):null;case"story-reading":return n instanceof app.models.StoryPartModel?a.is.ios?"wattpad:///read?groupid="+n.get("group").id+"&partid="+n.get("id"):"wattpad://story/"+n.get("group").id+"/part/"+n.get("id"):null;case"user-profile":return n instanceof app.models.User?a.is.ios?"wattpad:///profile?username="+n.get("username"):"wattpad://user/"+n.get("username"):null;case"library":return a.is.android?"wattpad://library":null}return a.is.ios?"iOS":a.is.android?"android":a.is.windows?"windows":null},l.harm=function(e){var a=[],s=e.replace(/:|#/g," ").split(" ");return t.forEach(n.harm,function(e){t.intersection(s,t.map(e.words,l.trans.map)).length&&a.push(l.sprintf(e.message[0],t.rest(e.message)))}),!!a.length&&a},l.appOn=function(){return!$("body").hasClass("js-app-off")},l.categorySubtitle=function(e){switch(e.id){case 1:return l.trans("Ride the emotional rollercoaster of young adulthood with these free coming-of-age stories on love, friendship, high school drama, popularity and awkward teen moments.");case 2:return l.trans("Immerse yourself with the best poems online about love, life, and the human experience.");case 3:return l.trans("Enter the realm of magic, dragons, princesses, elves, and faraway kingdoms, where a series of most unexpected events come to life.");case 4:return l.trans("Discover free love stories for any passion or persuasion. Book a date with your favorite author and read everything from sweet young romance to steamy new adult.");case 5:return l.trans("Travel to the interstellar worlds of science fiction. Discover free books about space odysseys, time travel, dystopian futures, alien planets, and post-apocalyptic universes.");case 6:return l.trans("From Supernatural to Harry Potter, One Direction to Percy Jackson, read the best fanfiction from whatever fandom you are in.");case 7:return l.trans("From tongue-in-cheek satire to literary comedy, enjoy these funny stories for adults and teens.");case 8:return l.trans("Welcome to the world of mystery, crime, and intrigue. Investigate psychological thrillers, blood boiling murders, and detective stories.");case 9:return l.trans("Feeling brave? Prepare for a scare with these creepy tales of eerie encounters, urban legends, and the unknown.");case 10:return l.trans("Immerse yourself in must read classic novels and literature that have stood the test of time.");case 11:return l.trans("Go on an epic journey with these free adventure books. Travel to the realm of heroes, villains, pirates, and other fairy folk.");case 12:return l.trans("Beware: ghosts, zombies, demons, clairvoyants, and ghouls. Read these free paranormal stories at your own risk.");case 13:return l.trans("Embark on a spiritual journey with stories that nourish the soul. Find your answers through self-reflection, healing, and spirituality.");case 14:return l.trans("Looking for danger, risk, and excitement? Find your hero in the best action books for teens and adults from your favorite authors.");case 16:return l.trans("Read fascinating biographies, intimate memoirs, real stories of personal growth, and other non-fiction books.");case 17:return l.trans("On the go? Read these slice-of-life short stories that span across genres.");case 18:return l.trans("Sink your teeth into these vampire books about century-old love, coven drama, and paranormal transformation.");case 19:return l.trans("Read stories that defy definition. Whether you are looking for things to do when you are bored, top 10 lists, guides, rants, diary entries, or contests, find your fix here.");case 21:return l.trans("Get your fix of contemporary fiction. Experience a new perspective with the best free fiction from your next favorite author.");case 22:return l.trans("From alpha to omega, find your one true mate with these free werewolf books that will make you howl.");case 23:return l.trans("Fall back in time with fictional period pieces, war stories, and tales of vikings, kings and queens that capture the essence of history.");case 24:return l.trans("Discover your next favorite chicklit author with these tales of dating, drama, and disasters. Book your next experience in classic trials of modern womanhood.")}},l.isYouTubeUrl=function(e){return 0===e.indexOf("http://youtu.be/")||0===e.indexOf("https://youtu.be/")||0===e.indexOf("http://www.youtube.com/watch?v=")||0===e.indexOf("https://www.youtube.com/watch?v=")},l.extractYouTubeId=function(e){var t=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);return t&&11==t[1].length?t[1]:""},l.connectAsset=function(e){return n.mediaServer&&(e=n.mediaServer+e),e},l.resizeImages=function(e,t){var n=app.get("device");t=t||n.isDesktop()&&650||210;e.each(function(e,n){var a=$(n).children("img");if(a.data("original-width")>t){var s=a.data("original-height")/a.data("original-width")*100;$(n).addClass("fixed-ratio").css({"padding-bottom":s+"%"})}else a.attr("width",a.data("original-width")),a.attr("height",a.data("original-height")),$(n).removeClass("fixed-ratio").css({"padding-bottom":""})})},l.isOnScreen=function(t,n){if(n=n||1,!t.length)return!1;if(!t.is(":visible"))return!1;var a=$(e).scrollTop(),s=a+$(e).height(),l=t.offset().top,i=l+t.height(),r=t.height()*n;return i<=s&&l>=a||l<=a&&i>a&&i-a>=r||i>=s&&l<s&&s-l>=r},l.generateBranchLink=function(t,n,a){var s={source:a.source,fields:"url",uuid:l.getCookie("wp_id"),url:t,shorten:1,post:0,shouldFallback:!1};return a.desktopRedirect&&(s.desktopRedirect=!0),n&&(s.deeplink=n,s.medium=a.medium,s.content=a.content,s.page=a.page,a.campaign&&(s.campaign=a.campaign),e._utms.originator&&(s.ref_ori=e._utms.originator)),$.get("/v4/link",s)},l.qsReplace=function(e,t,n){if("string"!=typeof e||"string"!=typeof t||e.indexOf(t+"=")<0)return e;var a=new RegExp(t+"=[^&]*");return e.replace(a,t+"="+(void 0===n||null===n?"":n))},l.eligibleForDirectSoldAds=function(){return t.includes(JSON.parse(n.directAdCountries),n.userCountryCode)},l.isMatureStory=function(e){return!e||e.rating>=4},l.getGenderTargeting=function(e){var t;if(!e||!e.gender)return"Ke28";switch(e.gender){case"Male":case"He":t="IU10";break;case"Female":case"She":t="Bu44";break;default:t="Ke28"}return t},l.getViewCountTargeting=function(e){var t;switch(e){case e>=0&&e<100:t="0to100";break;case e>=100&&e<1e3:t="100to1000";break;case e>=1e3&&e<1e4:case e>=1e4&&e<1e5:t="1000to10000";break;case e>=1e5:t="100000plus"}return t},l.cacheBustPaidMetadata=function(t,n){return e.store.dispatch(e.app.components.actions.cacheBustPaidContentMetadata(t,n))},l.revertPaidContentAccess=function(e,t){var n=l.getCurrentUserAttr("username");if(!n)throw new Error("User must be logged in to revert access");var a="";return t&&(a="/part/"+t),Promise.resolve($.ajax({type:"DELETE",url:"/v5/users/"+n+"/story/"+e+a+"/access"})).then(function(){l.cacheBustPaidMetadata(e,[t])})},l.buyPaidContent=function(e,t,a){var s=l.getCurrentUserAttr("username");if(!s)throw new Error("User must be logged in to buy a part");var i="";return a&&(i="/part/"+a),Promise.resolve($.post("/v5/users/"+s+"/story/"+t+i+"/access?currency="+e)).then(function(e){if(!!e.code)throw e;return e}).catch(function(e){var t;try{if(3005!==e.code)throw"Unknown error code";t=n.utils.trans("Sorry, there weren't enough funds in your wallet to make this purchase.")}catch(e){t=n.utils.trans("Something went wrong, please try again. Don't worry, you won't be charged twice!")}throw t})},l.fetchPaidContentStoryMetadata=function(e,t){var n=t.join(",");return Promise.resolve($.ajax({type:"GET",url:"/v5/story/"+e+"/paid-content/metadata",data:{parts:n}})).catch(function(e){return console.error("Couldn't fetch story metadata",e),{}})},l.markBlockedParts=function(e,t){return t.map(function(t){var n=e.parts[t.id];return n?a({},t,{isBlocked:n.paywalled&&!n.has_access,paywalled:n.paywalled}):t})},l.isPaidPreview=function(e){var n=t.any(e,function(e){return e.paywalled&&!e.isBlocked});return t.any(e,function(e){return e.paywalled})&&!n},l.numPartsBetweenCurrentAndPaywall=function(e,n){if(n.isBlocked)return-1;var a=t.findIndex(e,{id:n.id}),s=e.slice(a+1);return t.findIndex(s,function(e){return e.isBlocked})},l.getIndexForPartId=function(e,n){var a=n.parts;return t.findIndex(a,function(t){return t.id===e})},l.getAgeTargeting=function(e){return!e||!e.age||e.age<15?"13HW":e.age>=15&&e.age<=17?"59ss":e.age>=18&&e.age<=24?"09Pv":e.age>=25&&e.age<=34?"68OK":e.age>=35&&e.age<=40?"71aa":e.age>=41&&e.age<=45?"76PT":e.age>=46&&e.age<=49?"74xS":e.age>=50&&e.age<=54?"68zo":e.age>=55&&e.age<=59?"33es":e.age>=60&&e.age<=64?"84Vv":e.age>=65?"29kM":"13HW"},l.getCategoryTargeting=function(e){if(t([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17,18,19,21,22,23,24]).includes(e))return e},l.getRankingTargeting=function(e){return e>0&&e<=100?"0to100":"100plus"},l.getAdzerkUnit=function(e){var t=n.adzerkHeaderBiddingUnitMap[e];return t||{zone:0,sizes:{0:[0,0]}}},l.loadHbAd=function(a){e.ados=e.ados||{},e.ados.run=e.ados.run||[];var s=a.placements;if(!s)return"";function i(a,s,i){var r=s.networkId,o=s.siteId,c=s.zoneId,u=s.targeting?s.targeting:{},d=function(e){for(var t=Object.keys(e.adTypes),n=0;n<t.length;n++)t[n]=parseInt(t[n]);return t}(s),h=i?function(e){for(var t=e,n=null,a=0;a<t.length;a++)t[a].price>((n||{}).price||0)&&(n=t[a]);return n}(i):null,p=h?function(e,t){var n={advertisers:{}},a=e.price/100;return n.advertisers[t]={ecpm:a},n}(h,370943):{},m=h?function(e){var n={};return n.partnerId=e.partnerId?e.partnerId:null,n.ixWidth=e.size?e.size[0].toString():"1",n.ixHeight=e.size?e.size[1].toString():"1","RubiconHtb"===n.partnerId&&e.targeting.rpfl_7941&&(n.rubiconSizeId=e.targeting.rpfl_7941[0].slice(0,e.targeting.rpfl_7941[0].indexOf("_"))),t.merge(n,e.targeting)}(h):{},f=t.merge(u,m),g=h?function(e){switch(e.category){case 0:return"genre-uncategorized";case 1:return"genre-teen-fiction";case 2:return"genre-poetry";case 3:return"genre-fantasy";case 4:return"genre-romance";case 5:return"genre-science-fiction";case 6:return"genre-fanfiction";case 7:return"genre-humor";case 8:return"genre-mystery-thriller";case 9:return"genre-horror";case 10:return"genre-classics";case 11:return"genre-adventure";case 12:return"genre-paranormal";case 13:return"genre-spiritual";case 14:return"genre-action";case 16:return"genre-non-fiction";case 17:return"genre-short-stories";case 18:return"genre-vampire";case 19:return"genre-random";case 21:return"genre-general-fiction";case 22:return"genre-werewolf";case 23:return"genre-historical-fiction";case 24:return"genre-chick-lit";default:return""}}(u):"";return n.testGroups.ADS_DATADOG_METRICS&&l.sendDataDogMetric({isAdRequest:!0,adRequested:!0}),function(){var t=t||{};t.run=t.run||[],t.run.push(void(e.ados_add_placement&&(ados_add_placement(r,o,a,d).setZone(c).setProperties(f).setOverrides(p),ados_setConsent({gdpr:!0}),ados_setKeywords(g),ados_load())))}}function r(e,t,n){var a=e,s=t,l=n;return function(e){return e&&e.slot&&e.slot[l]?i(a,s,e.slot[l])():i(a,s)()}}for(var o in s){var c=s[o],u=c.htSlotName,d=r(o,c,u);e.headertag&&e.headertag.retrieveDemand?e.headertag.retrieveDemand([{htSlotName:u}],d):d()}},l.getAdzerkTargeting=function(e,t){var n=e,a=t,s={};if(n.partRating&&(s.partRating=n.partRating),n.storyRating&&(s.storyRating=n.storyRating),n.category){var i=l.getCategoryTargeting(n.category);i&&(s.category=i)}return n.totalViewCount&&(s.totalViewCount=l.getViewCountTargeting(n.totalViewCount)),n.language&&(s.language=n.language),n.rankingStatus&&(s.rankingStatus=l.getRankingTargeting(n.rankingStatus)),n.storyId&&(s.storyId=n.storyId),a&&a.gender&&(s.KV1=l.getGenderTargeting(a),s.KV2=l.getAgeTargeting(a)),s},l.getHeaderBiddingInlineStyle=function(e){var n=Object.keys(e);if(n.length>1){var a=0;return t.forIn(e,function(e,t){e[0]>a&&(a=e[0])}),'style="width:'+a+'px;height:auto;"'}return'style="width:'+e[n[0]][0]+"px;height:"+e[n[0]][1]+'px;"'},l.showToast=function(e,t){new app.views.ErrorToast({message:e},t).render()},l.sendDataDogMetric=function(e,t){var n=e||{},a=t||null;$.post("/v4/metrics",n,a)},l.validatePrefilledTagText=function(e){var t=n.utils.sanitizeHTMLExceptQuotes(e.split(" ")[0]);return(t=t.replace(/<(br|p|div)(\s*)>/gi,"\n").replace(/(<([^>]+)>)/gi,"").substring(0,128)).length<2?null:t}}(window,window._,window.wattpad)},function(e,t,n){"use strict";!function(e,t,n,a){e.wattpad=n||{};var s=(e.wattpad.utils||(e.wattpad.utils={})).Device=function(e){return void 0==e&&(e=navigator.userAgent),this.ua=e.toLowerCase(),this.is={mobile:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|windows phone|xda|xiino/i.test(this.ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(this.ua.substr(0,4)),iPhone:Boolean(this.ua.match(/iphone/)),iPod:Boolean(this.ua.match(/ipod/)),iPad:Boolean(this.ua.match(/ipad/)),android:Boolean(this.ua.match(/android/)),androidTablet:Boolean(this.ua.match(/android/)&&!this.ua.match(/mobile/)),googleweblight:Boolean(this.ua.match(/googleweblight/)),kindle:Boolean(this.ua.match(/(kindle)/)),windows:Boolean(this.ua.match(/windows phone/)),blackBerry:Boolean(this.ua.match(/blackberry/)),playBook:Boolean(this.ua.match(/playbook/)),palmDevice:Boolean(this.ua.match(/(palmos|palmsource| pre\/)/)),smartMobileHints:Boolean(this.ua.match(/(smartphone|iemobile)/)),tabletPC:Boolean(this.ua.match(/tablet pc/)),ie:Boolean(this.ua.match(/msie/)||this.ua.match(/trident/i)),ie9:Boolean(this.ua.match(/msie 9./)),ie8:Boolean(this.ua.match(/msie 8./)),ie7:Boolean(this.ua.match(/msie 7./)),ie6:Boolean(this.ua.match(/msie 6./)),opera:Boolean(this.ua.match(/opera/)),chrome:Boolean(this.ua.match(/chrome/)),facebookCrawler:Boolean(this.ua.match(/facebookexternalhit/)),twitterCrawler:Boolean(this.ua.match(/twitterbot/)),appleCrawler:Boolean(this.ua.match(/applebot/)),pinterestCrawler:Boolean(this.ua.match(/pinterest/)),googlePlusCrawler:Boolean(this.ua.match(/\+\/web\/snippet/)),otherCrawler:Boolean(this.ua.match(/googlebot/))||Boolean(this.ua.match(/yahoo/))||Boolean(this.ua.match(/yandex/))||Boolean(this.ua.match(/drupal/))||Boolean(this.ua.match(/bot/))||Boolean(this.ua.match(/nutch/))||Boolean(this.ua.match(/crawl/))||Boolean(this.ua.match(/spider/))||Boolean(this.ua.match(/search/))||Boolean(this.ua.match(/index/))||Boolean(this.ua.match(/rss/))||Boolean(this.ua.match(/simplepie/))||Boolean(this.ua.match(/tracker/))||Boolean(this.ua.match(/teoma/))||Boolean(this.ua.match(/wazzup/))||Boolean(this.ua.match(/finder/))},this.is.ios=this.is.iPhone||this.is.iPod||this.is.iPad,this.is.smartphone=this.isSmartPhoneLike(),this.is.touch=this.isTouchDevice(),this.is.desktop=this.isDesktop(),this.is.tablet=this.isTablet(),this};s.prototype.isSmartPhoneLike=function(){return(this.is.iPhone||this.is.iPod||this.is.android&&this.is.mobile||this.is.windows||this.is.blackBerry||this.is.palmDevice||this.is.smartMobileHints)&&!this.isTablet()},s.prototype.isTablet=function(){return(this.is.iPad||this.is.tabletPC||this.is.playBook||this.is.androidTablet||this.is.kindle)&&!this.isOperaMini()},s.prototype.isTouchDevice=function(){return this.isTablet()||this.isSmartPhoneLike()},s.prototype.isDesktop=function(){return!this.isTouchDevice()},s.prototype.isOperaMini=function(){return Boolean(this.ua.match(/opera mini/))||Boolean(this.ua.match(/opera mobi/))||Boolean(this.ua.match(/opera tablet/))},s.prototype.isCrawler=function(){return this.is.facebookCrawler||this.is.twitterCrawler||this.is.pinterestCrawler||this.is.otherCrawler||this.is.appleCrawler||this.is.googlePlusCrawler},s.prototype.isWebView=function(){return this.is.ios&&!Boolean(this.ua.match(/safari/))||this.is.android&&Boolean(this.ua.match(/version\//))},s.prototype.androidVersion=function(){var e=null;return this.is.android&&2==(e=/android (\d+(?:\.\d+)+)/gi.exec(this.ua)).length?e[1]:e}}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n){var a=function e(n,a){if(this.layout=a||e.Layouts.Default,this.stories=t.clone(n,!0),this.panelGroup=[],n.length){if(this.layout===e.Layouts.Default){var s=parseInt(this.stories[0].id,10)%100;this.stories.length>9?this.layout=s>49?e.Layouts.FourUpOutside:e.Layouts.FourUpInside:this.stories.length>6?this.layout=s>74?e.Layouts.FourUpPanel4:s>49?e.Layouts.FourUpPanel3:s>24?e.Layouts.FourUpPanel2:e.Layouts.FourUpPanel1:this.layout=e.Layouts.FourUpNone}this.generateGroup()}};a.Layouts={Default:1,FourUpNone:2,FourUpInside:3,FourUpOutside:4,FourUpPanel1:5,FourUpPanel2:6,FourUpPanel3:7,FourUpPanel4:8},a.prototype.generateGroup=function(){switch(this.layout){case a.Layouts.FourUpInside:this.buildPanel({panels:1}),this.buildPanel({panels:2,stories:4}),this.buildPanel({panels:1});break;case a.Layouts.FourUpOutside:this.buildPanel({panels:1,stories:4}),this.buildPanel({panels:2}),this.buildPanel({panels:1,stories:4});break;case a.Layouts.FourUpPanel1:this.buildPanel({panels:1,stories:4}),this.buildPanel({panels:3});break;case a.Layouts.FourUpPanel2:this.buildPanel({panels:1}),this.buildPanel({panels:1,stories:4}),this.buildPanel({panels:2});break;case a.Layouts.FourUpPanel3:this.buildPanel({panels:2}),this.buildPanel({panels:1,stories:4}),this.buildPanel({panels:1});break;case a.Layouts.FourUpPanel4:this.buildPanel({panels:3}),this.buildPanel({panels:1,stories:4});break;case a.Layouts.FourUpNone:this.buildPanel({panels:4})}},a.prototype.buildPanel=function(e){e=t.defaults(e,{panels:1,stories:1});for(var n=0;n<e.panels&&this.stories.length>e.stories-1;n++)this.panelGroup.push({class:"grid-"+e.stories,stories:this.stories.splice(0,e.stories)})},a.linkifyTitle=function(e,n){var a=e;return a&&n?(t.forOwn(n,function(e){if(e.text){var t=new RegExp("("+e.text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")(?!</a>)");a=a.replace(t,'<a href="'+e.link+'" class="on-navigate">$1</a>')}}),new Handlebars.SafeString(a)):a},n.PanelBuilder=a}(window,_,wattpad.utils)},function(e,t,n){"use strict";window.mobileApp=window.mobileApp||{},window.mobileApp.instantiate=function(e,t,n,a){e.app=new a.Application("mobile-web",{prefetched:e.prefetched,cachePolicy:"X-WPApp-Cache-Control"})},window.mobileApp.instantiate(window,window._,window.Backbone,window.Monaco)},function(e,t,n){"use strict";window.mobileApp=window.mobileApp||{},window.mobileApp.framework=function(e,t,n,a,s,l,i){var r=(l=l||(e.wattpad={})).utils||(l.utils={});i.frameworkFilters=i.frameworkFilters||{},i.frameworkFilters.beforeAjax=function(e,t){var n="en";try{n=i.get("supported-languages").get(i.get("language")).get("code")}catch(e){}if(t.setRequestHeader("Accept-Language",n),t.setRequestHeader("Authorization",i.get("api-key-web")),e)return e.apply(this,r.getWrapParams(arguments))},i.frameworkFilters.fetch=function(e){var t=arguments[1]||{};return t.beforeSend=n.wrap(t.beforeSend,i.frameworkFilters.beforeAjax),e.call(this,t)},i.router.on("route",function(n){var a=t("body");a.removeClass(function(e,t){return(t.match(/\broute-\S+/g)||[]).join(" ")}),a.addClass("route-"+n),e.GSLoader&&e.GSLoader.reset()}),s.Router.prototype.__extractParameters=s.Router.prototype._extractParameters,s.Router.prototype._extractParameters=function(e,t){var a,l=t.lastIndexOf("#"),i=s.history.getHash(),r={};return l>=0&&(t=t.slice(0,t.lastIndexOf("#"))),a=this.__extractParameters(e,t),n.isString(i)&&i.length>2&&(r=s.history.getQueryParameters("?"+i),n.size(r)>0&&(n.isObject(a[a.length-1])?a[a.length-1]=n.extend(a[a.length-1],r):a[a.length]=r)),a};var o=s.history.start;s.history.start=function(t){return t=t||{},e.history&&e.history.pushState||(t.pushState=!1,t.hashChange=!1),o.call(this,t)};var c=s.Experiment.prototype.controller,u=s.Experiment.prototype.view,d=s.Experiment.prototype.template;if(s.Experiment.prototype.controller=function(){return this.selected(),c.apply(this,arguments)},s.Experiment.prototype.view=function(){return this.selected(),u.apply(this,arguments)},s.Experiment.prototype.template=function(e){return this.selected(),d.apply(this,arguments)},s.Experiment.prototype.split=function(){var e;this.groups&&!n.isEmpty(this.groups)&&(e=Object.keys(this.groups)[0]),e&&(this.current="original"===e||"unknown"===e||"active"!==this.options.status&&"finished"!==this.options.status?this.original:e,this.variationLoki=e),this.selectedFlag={}},s.Experiment.prototype.selected=function(){var t=e.location.pathname;"active"!==this.options.status||this.selectedFlag[t]||(l.utils.experimentSelected(this),this.selectedFlag[t]=!0)},s.Experiment.prototype._normalizeGroup=function(){return[]},s.Experiment.prototype.optout=function(){throw new Error("Loki experiments don't support opt out from an experiment yet")},s.Model.prototype.lookup=s.Collection.prototype.lookup=function(t){var n=this;return t=t||{},new e.Promise(function(e,a){var s=t.success;t.success=function(){s&&s.apply(n,arguments),e(n)};var l=t.error;t.error=function(){l&&l.apply(n,arguments),a.apply(n,arguments)},n.fetch(t)})},"https://www.wattpad.io"===e.wattpad.apiDomain){s.Application.prototype.add=function(e,t){if(!t.prototype||!t.prototype.namespace)throw new Error("Monaco :: missing required object property 'namespace'");if(this[t.prototype.namespace][e])throw new Error("Monaco :: "+e+" have already been defined in "+this.name+"."+t.prototype.namespace);t.prototype._app=this,t.prototype.MonacoComponentName=e,t.prototype.MonacoComponentType=t.prototype.namespace,t.prototype.MonacoComponentParents=function e(t,n){if(t&&t.__proto__&&t.__proto__.MonacoComponentName){var a=n.concat(t.__proto__.MonacoComponentName);return e(t.__proto__,a)}return n}(t.prototype,[]),this[t.prototype.namespace][e]=t}}},window.mobileApp.framework(window,$,_,Backbone,Monaco,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s,l){l&&(e.wattpad=s||{},e.wattpad.utils=e.wattpad.utils||(e.wattpad.utils={}),void 0===l.router.addFilter&&e.wpLog.info("missing-router-method",{instanceofBackbone:l.router instanceof n.Router,instanceofMonaco:l.router instanceof Monaco.Router,typeofFilter:a(l.router.filter),typeof_filters:a(l.router._filters),typeofAddFilter:a(e.Monaco.Router.prototype.addFilter)}),l.router.addFilter("getCategories",function(e,n){if(l.get("categories")&&l.get("categories").resource==="system.categories."+l.get("language"))return e.apply(this,n);var a=new l.collections.Categories,s=this;Promise.resolve(a.fetch()).catch(function(i){var r=l.get("retry:categories")||0,o=t.result(i,"status");return[0,404,408,500,502,503,504].indexOf(o)>=0&&r<2?(l.set("retry:categories",r+1),l.router._filters.getCategories.call(s,e,n)):(l.set("retry:categories",0),l.set("categories",a),!1)}).then(function(t){return e.apply(s,n)})}),l.router.addFilter("requireLogin",function(t,n){return s.utils.currentUser().authenticated()?t.apply(this,n):(l.router.navigate("/login?nexturl="+encodeURIComponent(e.location.href),{trigger:!0,replace:!0}),!1)}),l.router.addFilter("getTranslations",function(e,t){if(void 0===l.get("translatedLanguage")){var n={domain:"messages",locale_data:{messages:s.translation}},a=new l.collections.TranslatedLanguage({},{translations:n});a.fetch(),l.set("translatedLanguage",a)}return e.apply(this,t)}))}(window,_,Backbone,wattpad,window.app||("undefined"!=typeof app?app:null))},function(e,t,n){"use strict";!function(e,t){t.router.add({":others":["error-404",{regexp:{others:/.*/}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:error-404",s.router.filter(["getTranslations"],function(t,l){if(n("body").hasClass("js-app-off"))if("user"===t){var i=new s.views.DummyReactView({component:"UserError404",componentId:"userError-404"});s.transitionTo(i,{hasHeader:!0,hasFooter:!0})}else if("story"===t){i=new s.views.DummyReactView({component:"StoryError404",componentId:"story-error-404"});s.transitionTo(i,{hasHeader:!0,hasFooter:!0})}else{var r=new s.collections.BrowseTopics;Promise.resolve(r.fetch()).then(function(){var e=new s.views.Error404({type:t,modelId:l,browseTopics:r});s.transitionTo(e,{hasHeader:!0,hasFooter:!0})})}else a.utils.redirectToServer(e.location.href)}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("BaseTransition",t.Transition.extend({_canonicalURL:function(e){var n=t.history.fragment||"",s=n.toLowerCase();void 0!==e.username&&""!==e.username&&(s=s.replace(e.username.toLowerCase(),e.username)),n!==s&&a.router.navigate(s,{trigger:!1,replace:!0})},_hideAddressBar:function(){n.utils.hideAddressBar()},_pageView:function(){n.utils.pushEvent({},"virtualPageview"),void 0!==e._FskRefresh&&e._FskRefresh()},injectDOM:function(t,n,s,l){var i=$(s);!t&&i.children().length>0?(n.setElement(i.children(0)[0]),$("body").removeClass("js-app-off"),e.BOOMR?(e.BOOMR.page_ready(),e.BOOMR.addVar("tag","CSR")):document.addEventListener&&document.addEventListener("onBoomerangLoaded",function(e){e.detail.BOOMR.page_ready(),e.detail.BOOMR.addVar("tag","CSR")}),a.router.on("route",function(t){e.BOOMR&&a.set("transition_timer",e.BOOMR.requestStart())}),a.trigger("app:client-bound",{app:a,view:n})):(l&&i.empty(),i.append(n.$el))}}))}(window,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Language",n.Model.extend())}(window,_,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Languages",n.Collection.extend({model:s.models.Language,initialize:function(){this.on("sync",function(){s.set("supported-languages",this)})},url:"/api/v3/internal/languages",resource:"supported-languages",cacheLocal:!0,expireLocal:1440}))}(window,_,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("TranslatedLanguage",n.Collection.extend({initialize:function(t,n){var s=this;this.locale=a.utils.getCookie("locale")||navigator.language||"en_US";var l=(n=n||{}).translations||{};this.jed=new e.Jed(l),this.on("sync",function(){s.jed=new e.Jed(s.toJSON()[0])})},fetch:function(){var e=s.local._getKey("strings-"),a=s.local._getKey(this.resource());t.forOwn(localStorage,function(t,n){0===n.indexOf(e)&&n!==a&&localStorage.removeItem(n)}),n.Collection.prototype.fetch.apply(this,arguments)},url:function(){return a.apiDomain+"/v4/strings/"+this.locale},resource:function(){return"strings-"+a.languagePackage},cacheLocal:!0,expireLocal:1440}))}(window,_,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Categories",n.Collection.extend({resource:function(){return"system.categories."+s.get("language")},url:function(){return"/api/v3/categories"},initialize:function(){this.on("sync",function(){s.set("categories",this)})},comparator:function(e,t){return e.get("name")>t.get("name")?1:e.get("name")<t.get("name")?-1:0},parse:function(e){var s="",l="",i="";return t.each(e,function(e){switch(e.id){case 1:s=a.utils.trans("Read about the ins, outs, ups, and downs of the teenage experience. These free books and stories offer the best in teen fiction covering topics like gay and lesbian romance, high school, popularity and young love."),l="teen_fiction.jpg",i="bg_teen_fiction.png";break;case 2:s=a.utils.trans("Delve into powerful feelings on love, life, romance, teen life, and everything in between. Read the best free poems online, and find your next inspiration."),l="poetry.jpg",i="bg_poetry.png";break;case 3:s=a.utils.trans("So you're into stories about magic, unicorns, dragons, thieves, elves and kingdoms? We have you covered. Read fantasy stories anywhere, anytime on Wattpad."),l="fantasy.jpg",i="bg_fantasy.png";break;case 4:s=a.utils.trans("Free books and love stories for any passion or persuasion; from sweet contemporary romance to steamy new adult, young love, sexy romance, to great historical novels. Find the greatest love stories from passionate authors who know about love."),l="romance.jpg",i="bg_romance.png";break;case 5:s=a.utils.trans("Get lost in the speculative Science Fiction stories of the future: dystopian novels, space odysseys, post-apocalyptic worlds from the great authors and writers of today. We have the best in free books and stories online by authors who love to write alien, fantasy, space time travel, and short sci fi."),l="science_fiction.jpg",i="bg_science_fiction.png";break;case 6:s=a.utils.trans("From Supernatural to Harry Potter, One Direction to Percy Jackson, and more. We have the best fic for whatever fandom you're into. Discover your next fanfiction on the site or on your phone with Wattpad."),l="fanfic.jpg",i="bg_fanfiction.png";break;case 7:s=a.utils.trans("Funny stories to keep you cackling. We have the best comedy stories online for adults and teens, whether you like satire, tongue-in-cheek critique, or witty social commentary. "),l="humor.jpg",i="bg_humor.png";break;case 8:s=a.utils.trans("Short mystery stories and thrillers exploring murder and crime investigations, detective work, and uncovering the answers to a problem or mystery. We have the best free mystery and thriller stories online for teens and adults."),l="mystery_thriller.jpg",i="bg_mystery_thriller.png";break;case 9:l="horror.jpg",i="bg_horror.png";break;case 10:s=a.utils.trans("Read your favorite classic novels, stories, and books anywhere. Classic literature are must read stories written over 100 years ago that stand the test of time and are still loved today."),l="classics.jpg",i="bg_classics.png";break;case 11:s=a.utils.trans("Risk, danger and excitement will fuel your next adventure on Wattpad. Find your quest and get ready for the journey of a lifetime with the best free adventure books and stories online about worldly travel, pirates, heroes, villains, challenges, and more."),l="adventure.jpg",i="bg_adventure.png";break;case 12:s=a.utils.trans("Read the best free paranormal romance stories and series with strong female leads, vampires, and werewolf drama. These stories are way beyond the normal."),l="paranormal.jpg",i="bg_paranormal.png";break;case 13:s=a.utils.trans("Read powerful spiritual stories about women and healing. These free online stories are spiritual but not necessarily religious, playing on existential themes that make us question who we are and why we’re here."),l="spiritual.jpg",i="bg_spiritual.png";break;case 14:s=a.utils.trans("If you love action; adventure, excitement and risk await you. Find your heroes and villains in the best action books and stories for teens and young adults online from author around the world."),l="action.jpg",i="bg_action.png";break;case 16:s=a.utils.trans("Read non-fiction stories by the best original authors on topics ranging from personal growth to exciting memoirs."),l="non_fiction.jpg",i="bg_non_fiction.png";break;case 17:s=a.utils.trans("Get lost in short stories about love, life, friendship, and bullying. Our short stories can be funny, sad, or dramatic. They all share a slice of life that everyone can relate to."),l="short_story.jpg",i="bg_short_story.png";break;case 18:s=a.utils.trans("Read the best in free vampire stories about vampires and romance, chasers, brothers, werewolf vs vampire, gay and lesbian, and more."),l="vampire.jpg",i="bg_vampire.png";break;case 19:s=a.utils.trans("Read stories that defy definition. When you’re looking for things to do when you’re bored, top 10 lists, guides, rants, diary entries, contests and stories, you will find your fix on Wattpad Random and never be bored again."),l="random.jpg",i="bg_random.png";break;case 21:s=a.utils.trans("Get your contemporary fiction fix with the best free fiction books and stories written by authors from around the world."),l="general_fiction.jpg",i="bg_general_fiction.png";break;case 22:s=a.utils.trans("Read free fanfiction and werewolf fiction online by the best authors. These exciting werewolf reads cover stories about true transformation, gay and lesbian themes, scary, creepy, romance, vampires, and more."),l="werewolf.jpg",i="bg_werewolf.png";break;case 23:s=a.utils.trans("Short stories and free books by exciting authors in historical fiction. Discover the best stories about war, the vikings and fictional period pieces that capture the essence of history recounting the world as it once was."),l="historical_fiction.jpg",i="bg_historical_fiction.png";break;case 24:s=a.utils.trans("From classic British chick lit to dating drama disasters, discover your next favorite chicklit author online or on your phone with Wattpad. We have tons of free stories for you to read wherever you go."),l="chicklit.jpg",i="bg_chicklit.png"}e.tagline=s,e.banner=l,e.bg_image=i}),n.Collection.prototype.parse.apply(this,arguments)},cacheLocal:!0,expireLocal:720}))}(window,_,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("GenerateFields",Monaco.Mixin.create({fetch:function(e,n){if(e=e||{},t.result(this,"url").indexOf("fields")>-1)return n(e);if(t.isArray(this.fields)&&0===this.fields.length)return n(e);if(!(e=this.getFieldsString(e)).data||!e.data.fields)throw new Error("Fields were not specified for API call:"+t.result(this,"url"));return n(e)},getFieldsString:function(e,t){return e=e||{},!this.fields||e.data&&e.data.fields||(e.data=e.data||{},e.data.fields=this.generateFieldsString(this.fields)),t(e),e},generateFieldsString:function(e,n){var a=this,s="";if("string"==typeof e)return e;if(t.isArray(e))s+=t.map(e,function(e){return a.generateFieldsString(e)}).join(",");else{var l=[];t.forIn(e,function(e,t){l.push(t+"("+a.generateFieldsString(e)+")")}),s+=l.join(",")}return n(s),s}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("CollectionParsing",Monaco.Mixin.create({parse:function(e,t){return this.arrayKey?(this.total=e.total,this.nextUrl=e.nextUrl,t(e),e[this.arrayKey]):e},revertParse:function(e){var t={};return this.arrayKey?(t.total=this.total,t[this.arrayKey]=this.toJSON(),e(t),t):this.toJSON()}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ApiV2",Monaco.Mixin.create({save:function(e,n,a){if((n=n||{}).url)return a(e,n);if(!(this.v2CreateUrl||this.v2UpdateUrl||this.v2DeleteUrl||this.v2Url))throw new Error("No v2 API Urls were found on this object. "+t.result(this,"resource"));return this.get("id")&&"new"!==this.get("id")?(n.url=t.result(this,"v2UpdateUrl")||t.result(this,"v2Url")||t.result(this,"url"),this.set("req_type","edit")):(n.url=t.result(this,"v2CreateUrl")||t.result(this,"v2Url")||t.result(this,"url"),this.set("req_type","new")),n.data=this.toJSON(),n.emulateJSON=!0,n.type="POST",a(e,n)},destroy:function(e,n){if((e=e||{}).url)return n(e);if(!(this.v2CreateUrl||this.v2UpdateUrl||this.v2DeleteUrl||this.v2Url))throw new Error("No v2 API Urls were found on this object. "+t.result(this,"resource"));return e.url=t.result(this,"v2DeleteUrl")||t.result(this,"v2Url")||t.result(this,"url"),e.data=this.toJSON(),e.emulateJSON=!0,e.type="POST",n(e)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ApiV2Patch",Monaco.Mixin.create({save:function(e,n,a){return(n=n||{}).data=t.pick(n.data||{},this.v2Fields),a(e,n)},destroy:function(e,n){return e.data=t.pick(e.data||{},this.v2Fields),n(e)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s,l){l.add("ValidationModel",Monaco.Mixin.create({regex:{email:/^[a-zA-Z0-9_\.\'\+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-\.]+$/,az09:/^[a-z0-9_-]+$/i,phone:/^\+?\d{8,16}$/,hasLetter:/[a-z]/i,hasNumber:/\d/,isNumber:/^\d+$/},validate:function(e,n,s){var l,i={},r={},o={};if((n=n||{}).ignore&&(o=n.ignore),n.validation&&n.validation.ignore&&(o=n.validation.ignore),!this.validationRules)return null;switch(void 0===e?"undefined":a(e)){case"string":e=[e];break;case"undefined":e=this.attributes}return t.isArray(e)&&(l=e,e={},t.each(l,function(t){e[t]=this.get(t)},this)),t.forOwn(e,function(e,n){this.validationRules[n]&&(t.each(this.validationRules[n],function(a){if(!t.includes([].concat(o[n]),a.func)&&a)if(a.async)r[n]||(r[n]={value:e,rules:[]}),r[n].rules.push(a);else if(!this[a.func](e,a))return this.trigger("attr:invalid",n,a.msg),i[n]=a.msg,!1},this),i[n]||r[n]||this.trigger("attr:valid",n))},this),t.keys(r).length&&this.validateAsync(r),s(),t.keys(i).length?i:null},validateAsync:function(e,n){t.forOwn(e,function(e,n){var a=[],l=!0,i=this;t.each(e.rules,function(t){var r=this[t.func](e.value,t).catch(function(a){var r=t.msg?t.msg:a.responseJSON.message||null,o=a.responseJSON.error_code||0;e.value===i.get(n)&&(o>=1e3&&o<1100&&a.responseJSON.message?i.trigger("attr:invalid",n,r):i.trigger("attr:warning",n,s.trans("An error occurred during validation."))),l=!1});a.push(r)},this),Promise.all(a).then(function(){e.value===i.get(n)&&l&&i.trigger("attr:valid",n)})},this),n()},isRequired:function(e,n,a){return a(),!t.isEmpty(e)},isEmail:function(e,t,n){return n(),null!==e.match(this.regex.email)},isAlphaNumeric:function(e,t,n){return n(),null!==e.match(this.regex.az09)},isMatch:function(e,t,n){return n(),e===this.get(t.matchesKey)},hasNumber:function(e,t,n){return n(),null!==e.match(this.regex.hasNumber)},hasLetter:function(e,t,n){return n(),null!==e.match(this.regex.hasLetter)},minLength:function(e,t,n){return n(),e.length>=t.length},maxLength:function(e,t,n){return n(),e.length<=t.length},isNumber:function(e,t,n){return n(),null!==e.match(this.regex.isNumber)},minValue:function(e,t,n){return n(),!e||e&&("string"==typeof e?parseInt(e,10):e)>=t.min},isEq:function(e,t,n){return n(),e===t.val},isNotEq:function(e,t,n){return n(),!this.isEq(e,t)},isWattysEligible:function(e,a,s){s();var l=this.get("parts"),i=parseInt(this.get("language"),10),r=new Date(1533168e6),o=this.get("category1");if(!o){if(!this.get("categoryObject"))return!1;o=this.get("categoryObject").id}var c=2===parseInt(o,10)?1e3:1e4,u=0;return t.each(l,function(e){e.draft||e.deleted||new Date(e.createDate)>r&&(u+=e.wordCount)}),n.utils.currentUser().get("is_staff")||u>=c&&[1,2,3,4,5,6,13,23,18,20,22].indexOf(i)>-1}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("SignupModel",Monaco.Mixin.create({defaults:{username:null,email:null,password:null,month:null,day:null,year:null},validationRules:{email:[{func:"isRequired",msg:a.trans("Email is required.")},{func:"isEmail",msg:a.trans("That is not a valid email address.")},{func:"uniqueEmail",async:!0}],forgotEmail:[{func:"isRequired",msg:a.trans("Email is required.")},{func:"isEmail",msg:a.trans("That is not a valid email address.")}],username:[{func:"isRequired",msg:a.trans("Username is required.")},{func:"isAlphaNumeric",msg:a.trans("Your username may only contain letters and numbers.")},{func:"hasLetter",msg:a.trans("Your username must contain at least one letter.")},{func:"minLength",length:6,msg:a.trans("Your username must be at 6-20 characters long.")},{func:"maxLength",length:20,msg:a.trans("Your username must be at 6-20 characters long.")},{func:"uniqueUsername",async:!0,msg:a.trans("The username you have requested is already in use. Please try another name.")}],password:[{func:"isRequired",msg:a.trans("Password is required.")},{func:"minLength",length:6,msg:a.trans("Your password must be at least 6 characters long.")},{func:"maxLength",length:20,msg:a.trans("Your password may be no longer than 20 characters.")}],month:[{func:"isRequired",msg:"Month is required."},{func:"isNotAKid",msg:"You must be 13 or older to use Wattpad"},{func:"isValidFullDate",msg:"The date provided is invalid."}],day:[{func:"isRequired",msg:"Day is required."},{func:"isNotAKid",msg:"You must be 13 or older to use Wattpad"},{func:"isValidFullDate",msg:"The date provided is invalid."}],year:[{func:"isRequired",msg:"Year is required."},{func:"isNotAKid",msg:"You must be 13 or older to use Wattpad"},{func:"isValidFullDate",msg:"The date provided is invalid."}]},isValidFullDate:function(e,t){var n=this.changed.day?e:this.get("day"),a=this.changed.month?e:this.get("month"),s=this.changed.year?e:this.get("year");return null===n||null===a||null===s||!!moment(a+"-"+n+"-"+s,"MM-DD-YYYY",!0).isValid()},isNotAKid:function(e,t){var n,a=this.changed.day?e:this.get("day"),s=this.changed.month?e:this.get("month"),l=this.changed.year?e:this.get("year"),i=moment();return null===l||(n=null===a||null===s?moment(l,"YYYY"):moment(s+"-"+a+"-"+l,"MM-DD-YYYY"),!(i.diff(n,"years")<13))},uniqueEmail:function(e,t,n){return n(),Promise.resolve($.ajax("/api/v3/users/validate",{data:{email:e}}))},uniqueUsername:function(e,t,n){return n(),Promise.resolve($.ajax("/api/v3/users/validate",{data:{username:e}}))}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("GetAppValRules",Monaco.Mixin.create({defaults:{getApp:null},validationRules:{getApp:[{func:"isRequired",msg:a.trans("Please enter a valid SMS number.")}]}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("GetMobileValRules",Monaco.Mixin.create({defaults:{getMobile:null},validationRules:{getMobile:[{func:"isRequired",msg:a.trans("Please enter a valid SMS number or email address.")},{func:"isPhoneOrEmail",msg:a.trans("Please enter a valid SMS number or email address.")}]},isPhoneOrEmail:function(e,t,n){return n(),!!(null!==e.match(this.regex.email))||null!==e.replace(/\s|\.|\-|\(|\)/g,"").match(this.regex.phone)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("BeautifyURL",Monaco.Mixin.create({getBeautifyUrlSettings:function(e,t){t(e);var a=e.body.split(/\s+/).filter(function(e){return e.match(n.siteRoot+"/story")})[0],s=e.body.split(/\s+/).filter(function(e){return e.match("http://my.w.tt/")})[0];return a?{url:"/api/v3/stories/"+a.match(/[0-9]+/)}:!!s&&{url:"https://api.branch.io/v1/url?url="+s+"&branch_key="+n.branchKey,xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){"Authorization"!=e&&t.call(this,e,n)},e}}},parseMetadata:function(e,t){t(e);var n={cover:e.cover||e.data.$og_image_url,description:e.description||e.data.$og_description,url:e.url||e.data.$fallback_url,title:e.title||e.data.$og_title,storyId:e.id||e.data.$canonical_identifier.match(/[0-9]+/)[0],profileOwner:this.get("ownername")||this.get("username"),isReply:this.get("isReply")};return this.set("beautifyUrlMetadata",n),n},getMetadataForBeautifyUrl:function(e,t){return t(e),Promise.resolve($.get(e)).then(this.parseMetadata.bind(this))}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){var l,i;s.add("InfiniteScroll",Monaco.Mixin.create({initialize:function(e,t){if(e=e||{},this.paused=!1,!this instanceof s.views.IncrementalList)throw Error("Mixin can only be applied to IncrementalList views");this.removed=!1,t(e),e.postpone&&(this.paused=!0),this.collection&&this.collection.hasMore&&!e.manualRegistration&&this.registerForScrolling()},registerForScrolling:function(){i.addDelegate(this.cid,this.onFrameRequest,this)},deregisterFromScrolling:function(){i.removeDelegate(this.cid)},onFrameRequest:function(e){this.collection&&this.collection.hasMore&&this.collection.hasMore()&&!1===this.removed?this.checkDistance():this.deregisterFromScrolling(),e()},setButtonState:function(e){e(),this.paused=!1},checkDistance:t.throttle(function(){var t=this.$(".on-showmore"),n=e.innerHeight||e.screen.height;!this.paused&&this.collection&&this.collection.hasMore&&this.collection.hasMore()&&t&&t.length>0&&1.5*n>t.offset().top-e.scrollY&&(this.paused=!0,this.performLoad())},500),performLoad:function(e){this.onShowMore(),e()},setPaused:function(e,n){t.isBoolean(e)&&(this.paused=e)},remove:function(e){this.removed=!0,e()}})),(l=function(){this.delegates={},this.trigger.bind&&(this.trigger=this.trigger.bind(this))}).prototype.addDelegate=function(n,a,s){var l=t.keys(this.delegates).length,i=this;this.delegates[n]=a.bind(s),l<1&&(e.requestAnimationFrame?i.trigger():$(e).on("scroll.screen_animation_frame_delegate_fallback",function(){i.trigger()}))},l.prototype.removeDelegate=function(e){delete this.delegates[e]},l.prototype.trigger=function(){t.forOwn(this.delegates,function(e){e()}),this.cleanup()},l.prototype.cleanup=function(){t.keys(this.delegates).length>0?e.requestAnimationFrame&&e.requestAnimationFrame(this.trigger):e.requestAnimationFrame||$(e).off("scroll.screen_animation_frame_delegate_fallback")},i=new l,e.wattpad.RequestAnimationFrameDelegator=l,e.wattpad.RequestAnimationFrameDelegator.instance=i}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("ErrorHandler",Monaco.Mixin.create({seenErrors:{},delegateEvents:function(e,n){n(e),this.errorHandlerMixinDisabled||(this.model&&this.model instanceof Monaco.Model&&this.attachErrorHandlers(this.model),this.collection&&this.collection instanceof Monaco.Collection&&this.attachErrorHandlers(this.collection),t.bindAll(this,"handlePromiseUnexpected","handlePromiseExpected"))},handleError:function(e,n,a){var l={};n&&(l.type=n.type?n.type:"default"),t.each(e,function(e,t){l.delay=t,new s.views.ErrorToast(e,l).render()}),a()},attachErrorHandlers:function(e,t){this.listenTo(e,"sync",this.handleUnexpected),this.listenTo(e,"error",this.handleExpected),t()},detachErrorHandlers:function(e,t){this.stopListening(e,"sync",this.handleUnexpected),this.stopListening(e,"error",this.handleExpected),t()},handleUnexpected:function(e,n,a,s){var l=[],i={};if(!1===n.success||n.error_count>0){var r=$.now()/1e3;if(this.seenErrors[e]){if(!(r-this.seenErrors[e]>1))return this.seenErrors[e]=r,s();this.seenErrors[e]=r}else this.seenErrors[e]=r;1===n.error_count?(i.message=n.error||t.first(t.values(n.errors)),l.push(i)):t.each(n.errors,function(e){i.message=e,l.push(t.clone(i))}),this.handleError(l,a,s)}s()},handleExpected:function(e,t,n,a){var s=$.now()/1e3;if(this.seenErrors[e]){if(!(s-this.seenErrors[e]>1))return this.seenErrors[e]=s,a();this.seenErrors[e]=s}else this.seenErrors[e]=s;var l=[],i={};t.responseJSON&&(i=t.responseJSON),l.push(i),this.handleError(l,n,a),a()},handlePromiseUnexpected:function(e,t,n){this.handleUnexpected({},e,t,n),n()},handlePromiseExpected:function(e,t,n){this.handleExpected({},e,t,n),n()},iCanHazErrors:function(){this.errorHandlerMixinDisabled=!0,this.model&&this.model instanceof Monaco.Model&&this.detachErrorHandlers(this.model),this.collection&&this.collection instanceof Monaco.Collection&&this.detachErrorHandlers(this.collection)}}))}(window,_,wattpad,wattpad.utils,window.app),window.app.callErrors=function(e,t){app.mixins.ErrorHandler.prototype.constructor.mixinFunctions.handleError(e,t,function(){})}},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("ReadingAds",Monaco.Mixin.create({initialize:function(e,t){t(e)},loadNextPage:function(e,t){var a=this.model.get("group");s.get("device").is.desktop&&!a.isAdExempt&&(a.showAdUnit=this.shouldShowDesktopAd(e,this.model.get("pages"))),s.get("device").is.tablet&&!a.isAdExempt&&(a.showAdUnit=this.shouldShowTabletAd(e,this.model.get("pages"))),s.get("device").is.mobile&&!a.isAdExempt&&(a.showAdUnit=this.shouldShowMobileAd(e,this.model.get("pages"))),a.USReader="US"===n.userCountryCode,this.model.set("group",a),t(e)},shouldShowDesktopAd:function(e,t,n){return!(t<5||$(".sticky-ad").length)&&(t>=5&&t<12&&e+2===t||(t>=12&&e>0&&e%5==1&&e!==t||(n(),!1)))},shouldShowTabletAd:function(e,t,n){return e>0&&e%15==1||(n(),!1)},shouldShowMobileAd:function(e,t,n){return 2===e&&t>=3||(n(),!1)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("LazyAds",Monaco.Mixin.create({render:function(n){var a=this,s=n();return t.delay(function(){a.loadLazyAds(function(){}),$(e).on("scroll.screen_"+a.cid,t.throttle(a.loadLazyAds.bind(a),200))},200),s},remove:function(t){$(e).off("scroll.screen_"+this.cid),t()},loadLazyAds:function(t){var n=this;$.each($(".lazyAd").not(".loaded"),function(t,a){var s=$(a).parent().data("mediaquery")||$(a).closest("[data-mediaquery]").data("mediaquery"),l=a.getAttribute("data-hb");if(!s||!l&&e.matchMedia(s).matches||l){var i=a.getBoundingClientRect();i.top>=0&&i.left>=0&&i.top<=2*(e.innerHeight||document.documentElement.clientHeight)&&i.left<=(e.innerWidth||document.documentElement.clientWidth)&&(a.classList.add("loaded"),l?n.lazyLoadHeaderBiddingAd(a):n.lazyLoadAdzerkAd(a))}!s||e.matchMedia(s).matches||l||$(a).parent().addClass("hidden")}),t()},lazyLoadAdzerkAd:function(t,n){var a=$(t).data("ad-code"),s=new Function(a),l=e.ados||{};l.run=l.run||[],l.run.push(s),n(t)},lazyLoadGoogleAd:function(t,n){googletag.cmd.push(function(){googletag.pubads().refresh([e.adSlots[$(t).attr("id")]])}),n(t)},lazyLoadHeaderBiddingAd:function(t,n){var a={},s=$(t),l=s.data("ad-placement"),i=s.data("adzerk-zone"),r=s.data("ad-types"),o=s.data("ht-slot-name"),c=s.data("targeting");a.placements={},a.placements[l]={siteId:1025452,networkId:9660,zoneId:i,adTypes:r,htSlotName:o,targeting:c},e.wattpad.utils.loadHbAd(a),n(t)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("StickyAds",Monaco.Mixin.create({render:function(t){var n=t();return $(e).on("scroll.screen_"+this.cid,this.handleStickyAds.bind(this)),n},remove:function(t){$(e).off("scroll.screen_"+this.cid),t()},handleStickyAds:function(t){$.each($(".sticky-ad"),function(t,n){var a=$(n).data("start-selector"),s=$(n).data("end-selector"),l=n.getBoundingClientRect(),i=l.bottom-l.top,r=(e.innerHeight||document.documentElement.clientHeight)/2,o=a&&$(a).length?$(a)[0].getBoundingClientRect().top:document.body.getBoundingClientRect().top,c=s&&$(s).length?$(s)[0].getBoundingClientRect().bottom:document.body.getBoundingClientRect().bottom;o>=r-i/2?$(n).css({position:"absolute",top:"0"}):r>o&&r<c-i/2?$(n).css({position:"fixed",top:r-i/2+"px"}):$(n).css({position:"absolute",top:c-o-i+"px"})}),t()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Highlighter",Monaco.Mixin.create({events:{"mouseup .highlighter":"onShowMenu"},selection:{},onShowMenu:function(n,a){var s=this;t.delay(function(){var t=e.getSelection();t.toString().length>0?(s.selection=t,s.renderTooltip(a)):void 0!==s.tooltip&&(s.tooltip.remove(),delete s.tooltip)},200),a(n)},renderTooltip:function(e){var t,n,a,l,i,r;if(n=(t=this.selection.getRangeAt(0)).getBoundingClientRect(),(r=t.toString()).length<=500){var o=this.model.get("group").id,c=this.model.get("url");this.tooltip=new s.views.HighlightTooltip({quoteString:r,storyId:o,url:c}),this.tooltip.render(),i=$(".part-content")[0].getBoundingClientRect(),l=n.top-i.top-57,a=(n.left+n.right)/2-(i.left+46),$(".highlight-tooltip").css({top:l,left:a,opacity:1})}e()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("BaseModel",Monaco.Model.extend({cacheLocal:!0,sync:function(e,n,a){return t.get(n.__proto__,"bypassBrowserCache")&&(a.cache=!1),Monaco.Model.prototype.sync.apply(this,arguments)}})),a.mixin(a.models.BaseModel,"GenerateFields","ErrorHandler")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s){s.add("Base",Monaco.Model.extend({_loaded:null,_dependencies:null,initialize:function(){this._loaded=$.Deferred(),this.on("sync",this._setResolved,this),this.on("error",this._setRejected,this),this.init&&this.init.apply(this,arguments),this._setResource(),this._bindEvents()},_setResource:function(){var e=this;this.resource&&this.get(this.idAttribute)&&(this.collection||(this.collection=new Monaco.Collection,this.collection.cacheLocal=!0),this.collection.resource=this.collection.resource||function(){return"function"==typeof e.resource?e.resource():e.resource})},_bindEvents:function(){var e=this;this.events&&"object"===a(this.events)&&t.forEach(this.events,function(t,n){e.on(n,e[t])})},_setResolved:function(){this._loaded.resolve(this)},_setRejected:function(){this._loaded.reject(this)},_loadCheck:function(){return!0},dependsOn:function(e,t){var n=this;this._dependencies=this._dependencies||[],this._dependencies.push(e),t&&(e.get(t)?this._resolveDepenencyProperty(e,t):this.listenTo(e,"change:"+t,function(){n._resolveDepenencyProperty(e,t)}))},_resolveDepenencyProperty:function(e,t){this.set(this.idAttribute,e.get(t))},generateFields:function(e){return e=e||{},!this.fields||e.data&&e.data.fields||(e.data=e.data||{},e.data.fields=this._recursiveFields(this.fields)),e},_recursiveFields:function(e){var n=this,a="";if("string"==typeof e)return e;if(Array.isArray(e))a+=t.map(e,function(e){return n._recursiveFields(e)}).join(",");else{var s=[];t.forIn(e,function(e,t){s.push(t+"("+n._recursiveFields(e)+")")}),a+=s.join(",")}return a},loaded:function(e){var n=this;return e=this.generateFields(e),this._loadCheck()?"pending"===this._loaded.state()&&(this._dependencies?$.when.apply($,t.map(this._dependencies,function(e){return e.loaded()})).done(function(){n._setResource(),n.fetch(e)}):(n._setResource(),this.fetch(e))):this._loaded.reject(),this._loaded}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("User",a.models.Base.extend({defaults:{username:null,avatar:null},fields:["username","name","description","avatar","backgroundUrl","createDate","location","following","followingRequest","numFollowing","follower","followerRequest","numFollowers","numLists","numStoriesPublished","votesReceived","facebook","twitter","website","smashwords","highlight_colour","html_enabled","verified","ambassador","wattpad_squad","is_staff",{programs:["wattpad_stars"]},"isPrivate","isMuted","externalId"],authenticate:function(e,t){return $.ajax({url:"/api/v3/sessions",type:"POST",data:{username:e,password:t}})},authenticated:function(){return!!this.get("username")},getMaxNumParts:function(){return this.get("max_parts")},_resolveDepenencyProperty:function(e,t){this.set(this.idAttribute,e.get(t).name)},isStaff:function(){return this.get("is_staff")},isWattpadStar:function(){return this.get("programs")&&this.get("programs").wattpad_stars},_followers:null,followers:function(e){return this._followers||(this._followers=new a.collections.Followers),e?this._followers.get(e):this._followers},_following:null,following:function(e){return this._following||(this._following=new a.collections.Following(null,{user:this})),e?this._following.get(e):this._following},_library:null,library:function(e){return this._library||(this._library=new a.collections.Library(null,{user:this})),e?this._library.get(e):this._library},_works:null,works:function(e){return this._works||(this._works=new a.collections.Works(null,{user:this})),e?this._works.get(e):this._works},urlRoot:"/api/v3/users/",resource:function(){return"user."+this.get("username")},idAttribute:"username",determineFollowStatus:function(){var e=this;return Promise.resolve($.get("/api/v3/users/"+this.get("username"),{fields:"following"})).then(function(t){e.set("following",t.following)})},acceptFollowRequest:function(){var e=n.utils.currentUser(),t=this;return Promise.resolve($.ajax({url:"/api/v3/users/"+e.get("username")+"/followers/"+this.get("username"),type:"POST"})).then(function(n){return e._clearFollowerCache(),t._clearFollowingCache(),n})},ignoreFollowRequest:function(){var e=n.utils.currentUser(),t=this;return Promise.resolve($.ajax({url:"/api/v3/users/"+e.get("username")+"/followers/"+this.get("username")+"/requests",type:"PUT"})).then(function(n){return e._clearFollowerCache(),t._clearFollowingCache(),n})},deleteFollower:function(){var e=n.utils.currentUser(),t=this;return Promise.resolve($.ajax({url:"/api/v3/users/"+e.get("username")+"/followers/"+this.get("username"),type:"DELETE"})).then(function(n){return e._clearFollowerCache(),t._clearFollowingCache(),n})},acceptLatestTermsOfService:function(){var e=n.utils.currentUser(),t=this;return t.set("has_seen_latest_tos_notice",!0),Promise.resolve($.ajax({url:"/api/v3/users/"+e.get("username"),method:"PUT",data:{has_accepted_latest_tos:!0}})).then(function(e){return t.set("has_accepted_latest_tos",e.has_accepted_latest_tos),e.has_accepted_latest_tos}).catch(function(e){return console.error(e),!1})},_clearFollowerCache:function(){var e=this.get("username");a.local.clear("user."+e),a.local.clear("user."+e+".follow-requests"),a.local.clear("user."+e+".profile.followers")},_clearFollowingCache:function(){var e=this.get("username");a.local.clear("user."+e),a.local.clear("user."+e+".following"),a.local.clear("user."+e+".profile.following")}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("UserModel",a.models.BaseModel.extend({idAttribute:"username",fields:["id,username,avatar,inbox"],urlRoot:"/api/v3/users/",resource:function(){return"user."+this.get("username")}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Authlogin",Monaco.Model.extend({defaults:{user:null,password:null},validationRules:{user:[{func:"isRequired",msg:a.trans("Username/Email is required.")},{func:"isUsernameOrEmail",minLength:6,maxLength:20,msg:a.trans("You have not entered a valid email or username.")}],password:[{func:"isRequired",msg:a.trans("Password is required.")},{func:"minLength",length:6,msg:a.trans("Passwords must be 6-20 characters long.")},{func:"maxLength",length:20,msg:a.trans("Passwords must be 6-20 characters long.")}]},isUsernameOrEmail:function(e,t){var n,a,s;return!!(null!==e.match(this.regex.email))||(a=null!==e.match(this.regex.az09),s=null!==e.match(this.regex.hasLetter),n=e.length>=t.minLength&&e.length<=t.maxLength,!!(a&&s&&n))}})),s.mixin(s.models.Authlogin,"ValidationModel","GetAppValRules")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Authsignup",Monaco.Model.extend({})),s.mixin(s.models.Authsignup,"ValidationModel","SignupModel","GetAppValRules")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Authforgot",Monaco.Model.extend({defaults:{email:null},validationRules:{email:[{func:"isRequired",msg:a.trans("This field is required.")}]}})),s.mixin(s.models.Authforgot,"ValidationModel","GetAppValRules")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Authreset",Monaco.Model.extend({defaults:{confirm:null,password:null},validationRules:{password:[{func:"isRequired",msg:a.trans("Password is required.")},{func:"minLength",length:6,msg:a.trans("Your password must be at least 6 characters long.")},{func:"maxLength",length:20,msg:a.trans("Your password may be no longer than 20 characters.")}],confirm:[{func:"isRequired",msg:a.trans("Please confirm your password.")},{func:"isMatch",matchesKey:"password",msg:a.trans("Passwords must match.")}]}})),s.mixin(s.models.Authreset,"ValidationModel","GetAppValRules")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("Signup",Monaco.Model.extend({})),s.mixin(s.models.Signup,"ValidationModel","SignupModel")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("StoryText",Monaco.Model.extend({parse:function(e){return{text:e,paragraphs:this.filterHTML(e).reduce(function(e,t){var n=t.getAttribute("data-p-id");return t.getAttribute("data-media-type")?e[n]=t.outerHTML:e[n]=t.innerHTML.trim(),e},{})}},fetch:function(e){var t=this;return(e=e||{}).dataType="html",Promise.resolve(Monaco.Model.prototype.fetch.call(this,e)).catch(function(n){return e.reject?Promise.reject():t.refreshToken()})},filterHTML:function(e){return t.filter(s.parseHTML(e),function(e){return 3!==e.nodeType})},getParagraphById:function(e){return this.get("paragraphs")[e]},url:function(){return this.get("url")},refreshToken:function(){var e=this;return this.get("token")?Promise.resolve(s.get(this.get("token"))).catch(function(){return Promise.reject()}).then(function(t){return e.set("url",e.url().replace(/\?.*/,"?"+t.token)),Promise.resolve(e.fetch({reject:!0}))}):Promise.reject()}}))}(window,_,wattpad,window.app,jQuery)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("StoryModel",a.models.BaseModel.extend({defaults:{cover:"",title:"",description:""},fields:["id","title","voteCount","readCount","commentCount","description","url","firstPublishedPart","cover","language","isAdExempt",{user:["name","username","avatar","description","location","highlight_colour","backgroundUrl","numLists","numStoriesPublished","numFollowing","numFollowers","twitter"]},"completed","isPaywalled","numParts","lastPublishedPart",{parts:["id","title","length","url","deleted","draft"]},"tags","categories","rating","rankings","tagRankings","language","copyright","sourceLink","firstPartId","deleted","draft"],cacheLocal:!0,urlRoot:"/api/v3/stories/",resource:function(){return"story.read."+parseInt(this.get("id"),10)+".metadata"},fetch:function(e){e=e||{};var s=a.models.BaseModel.prototype.fetch.call(this,e);if(!0===s||!s)return Promise.resolve(s);t.bindAll(this,"fetchPromotionStatus","buildAdRequestData","parsePromotionStatus","parseStorySafetyLevel");var l=Promise.resolve($.get("/v5/stories/"+this.get("id")+"/classification/safety")).then(this.parseStorySafetyLevel).catch(function(){}),i=Promise.resolve([]);return n.utils.eligibleForDirectSoldAds()&&!n.utils.currentUser().get("premium")&&(i=Promise.resolve(this.fetchPromotionStatus()).then(this.parsePromotionStatus).catch(function(){})),Promise.all([s,i,l]).then(function(e){return e[0]}).catch(function(e){return result[0]})},fetchPromotionStatus:function(){var e=this.buildAdRequestData();return Promise.resolve($.ajax({type:"POST",url:"https://adz.wattpad.com/api/v2",dataType:"json",contentType:"text/plain",data:JSON.stringify(e),xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){"Authorization"!=e&&t.call(this,e,n)},e}}))},buildAdRequestData:function(){var e=a.get("supported-languages").find({id:parseInt(a.get("language"),10)}).get("nameEnglish"),t=n.utils.currentUser().get("externalId")||"";return{placements:[{divName:"azk70876",networkId:9660,siteId:421790,adTypes:[318],zoneIds:this.get("zoneIds"),properties:{userLanguage:e,storyId:this.get("id")},user:{key:t},time:"123455",keywords:[this.get("id")]}]}},parsePromotionStatus:function(e){return t.get(e,"decisions.azk70876")&&(this.set("sponsorName",t.get(e,"decisions.azk70876.contents[0].data.customData.sponsorName")),this.set("promoted",!0),this.set("clickUrl",t.get(e,"decisions.azk70876.clickUrl")),this.set("impressionUrl",t.get(e,"decisions.azk70876.impressionUrl")),this.set("thirdParty",t.get(e,"decisions.azk70876.contents[0].data.customData.thirdParty"))),this},parseStorySafetyLevel:function(e){return 1===t.get(e,"safe_for")&&this.set("isBrandSafe",!0),this},parse:function(e){if(e.categories&&e.categories.length>1&&(e.categories=[e.categories[0]||e.categories[1]],a.get("categories"))){var s=a.get("categories").get(e.categories[0]);s&&(e.categoryObject=s.toJSON())}e.language&&(e.language=e.language?e.language.id||e.language:this.get("language")||1);var l=e.rankings?e.rankings:[],i=null;return l.length>0&&t.each(l,function(e){e.rank>i&&(i=e.rank)}),e.rank=i,e.promoted&&(e.sponsor&&(e.sponsorName=e.sponsor.name?e.sponsor.name:e.user.name),e.contest&&(e.contest.ctaLabel=e.contest.ctaLabel||n.utils.trans("SUBMIT NOW"))),e},syncPosition:function(e){var t=this;e?$.post("/apiv2/syncreadingposition",{story_id:this.get("firstPartId"),position:e,wp_token:n.utils.getCookie("token")}):$.get("/apiv2/syncreadingposition",{story_id:this.get("firstPartId"),wp_token:n.utils.getCookie("token")}).done(function(e){t.trigger("reading-position-available",e)})}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StoryLabelsModel",a.models.BaseModel.extend({fields:["characters","target_audience"],idAttribute:"storyId",urlRoot:"/v5/stories",resource:function(){return"story."+this.get("id")+".labels"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("StoryPartModel",a.models.BaseModel.extend({fields:["id","title","url","modifyDate","length","wordCount","videoId","photoUrl","commentCount","voteCount","readCount","voted","private","pages","text_url","rating","deleted","draft","isAdExempt",{group:["id","title","cover","url",{user:["username","name","avatar","twitter","authorMessage"]},"categories","isAdExempt","deleted","draft","rating","language","description","tags","completed","isPaywalled",{parts:["title","url","id","deleted","draft","rating"]},"rankings"]},{dedication:["name","url"]},{source:["url","label"]}],cacheLocal:!0,bypassBrowserCache:!0,urlRoot:"/v4/parts/",defaults:{private:!1},resource:function(){return"part."+parseInt(this.get("id"),10)+".metadata"},fetch:function(e){e=e||{};return Promise.resolve(a.models.BaseModel.prototype.fetch.call(this,e)).then(function(e){return!0!==e&&e?Promise.all([function(e){var n=t.get(e,"group.id");return n?Promise.resolve($.ajax({type:"GET",url:"/v5/stories/"+n+"/classification/safety"})).then(function(n){return 1===t.get(n,"safe_for")&&t.extend(e.group,{isBrandSafe:!0}),e}):e}(e)]).then(function(){return e}):e})},parse:function(e){e.group.categories&&e.group.categories.length>1&&(e.group.categories=[e.group.categories[0]||e.group.categories[1]]),t.each(e.group.parts,function(t){t.id===e.id&&(t.active=!0)});var n=e.group.rankings?e.group.rankings:[],a=null;return n.length>0&&t.each(n,function(e){e.rank>a&&(a=e.rank)}),e.rank=a,e},syncPosition:function(e){var t=this;e?$.post("/apiv2/syncreadingposition",{story_id:t.get("id"),position:e,wp_token:n.utils.getCookie("token")}):$.get("/apiv2/syncreadingposition",{story_id:t.get("id"),wp_token:n.utils.getCookie("token")}).done(function(e){var n=e.position||0;t.trigger("reading-position-available",t.get("id")===e.part?n:0)})},getCommentCountByParagraph:function(){var e=this,t=$.ajax({type:"GET",url:"/v4/parts/"+this.get("id")+"/paragraphs"});return Promise.resolve(t).then(function(t){return e.set({paragraphs:t.paragraphs}),{paragraphs:t.paragraphs}})},getPage:function(e){if(!this.loadedPages){this.loadedPages={};var t=a.local._getLocalData(this.resource()).resp,s=t.pageNumber;if(t.storyText){var l=n.utils.unsanitizeHTML(t.storyText);this.loadedPages[s]=new a.models.StoryText({url:i,token:this.get("text_url").refresh_token}),this.loadedPages[s].set("text",l),this.loadedPages[s].set("paragraphs",this.loadedPages[s].parse(l).paragraphs)}}if(e>this.get("pages"))return Promise.resolve();if(this.loadedPages[e])return Promise.resolve(this.loadedPages[e]);var i="";i=this.get("text_url").text.indexOf("/apiv2/")>-1?this.get("text_url").text.replace(/(page=)([0-9]*)/i,"$1"+e):this.get("text_url").text.replace(/([0-9]+-[0-9a-z]+)(\?.*)/i,"$1-"+e+"$2");var r=this.loadedPages[e]=new a.models.StoryText({url:i,token:this.get("text_url").refresh_token}),o=this;return Promise.resolve(r.fetch()).then(function(){return r},function(){o.handlePromiseExpected("")})},vote:function(){var e=this.get("voted"),t=$.ajax({url:"/api/v3/stories/"+this.get("group").id+"/parts/"+this.get("id")+"/votes",type:e?"DELETE":"POST"}),n=this;return Promise.resolve(t).then(function(t){return n.set({voteCount:t.votes,voted:!e}),t})}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StoryPartCreateModel",a.models.BaseModel.extend({defaults:{title:"Untitled Part 1",text:"<p><br></p>",copyright:1,flag1:0,groupid:0,req_type:"new",id:"new",cover_url:"",error_count:0,errors:[],story_url:"",skip_title:0},fields:["id","title","category1","category2","language","title","text","flag1","groupid","author","private","deleted","text_hash"],v2CreateUrl:"/apiv2/newstory",v2DeleteUrl:"/apiv2/deletestory",v2UpdateUrl:"/apiv2/editstory",urlRoot:"/api/v3/story_parts/",initialize:function(){this.listenTo(this,"change:text",this.saveLocalText)},resource:function(){return"part."+parseInt(this.get("id"),10)+".metadata"},parse:function(e){return this.set("last_text_hash",e.text_hash),a.models.BaseModel.prototype.parse.apply(this,arguments)},save:function(e,t){var n=this;return this.failedSaveCount=this.failedSaveCount||0,n.trigger("partModel:save-online"),this.saveXhr&&this.saveXhr.abort(),this.saveXhr=a.models.BaseModel.prototype.save.apply(this,arguments),this.saveXhr.done(function(e){n.saveXhr=null,n.failedSaveCount=0,n.saveOnline||(n.trigger("partModel:save-online"),n.saveOnline=!0,n.failedSaveCount=0)}),this.saveXhr.fail(function(e){"abort"===e.statusText&&n.unset("last_text_hash"),n.failedSaveCount++,n.failedSaveCount>=4&&(n.saveOnline=!1,n.trigger("partModel:save-offline"))}),this.saveXhr},publish:function(){return this.set({publish:1,part_id:this.get("id"),draft:0}),this.save()},unpublish:function(){return this.save({publish:0,part_id:this.get("id"),draft:1},{url:this.url()})},saveLocalText:function(){try{e.localStorage.setItem(parseInt(this.get("groupid"),10)+"."+parseInt(this.get("id"),10)+".storyText",this.get("text"),!0)}catch(e){a.trigger("works:storytext-localsave-failed",this)}}})),a.mixin(a.models.StoryPartCreateModel,"ApiV2")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StoryPartLabelsModel",a.models.BaseModel.extend({fields:["id","time_setting"],idAttribute:"partId",urlRoot:"/v5/parts",resource:function(){return"part."+this.get("id")+".labels"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StoryGroup",a.models.Base.extend({events:{"change:parts":"initializeParts","change:categories":"initializeCategories"},slug:function(){return this.get("id")+"-"+n.utils.slugify(this.get("title"),!0)},initializeParts:function(){var e,n=this,s=null;this._parts=[],t.each(this.get("parts"),function(l){n._dependencies&&(s=t.find(n._dependencies,function(e){return e instanceof a.models.Story&&e.get("id")===l.id}))?n._parts.push(s):((e=new a.models.Story(l))._group=n,n._parts.push(e))})},initializeCategories:function(){var e=this.get("categories"),n=a.get("categories"),s=this;this._categories=[],n&&t.each(e,function(e){var t=n.get(e);t&&s._categories.push(t.get("name"))})},_author:null,author:function(){return null===this._author&&(this._author=new a.models.User,this._author.dependsOn(this,"user")),this._author},_parts:null,parts:function(e){return this._parts||(this._parts=[]),void 0!==e?this._parts[e]:this._parts},_categories:null,categories:function(e){return this._categories&&0!==this._categories.length||this.initializeCategories(),void 0!==e?this._categories[e]:this._categories},_comments:null,comments:function(){},resource:function(){return"group."+this.get("id")+".metadata"},urlRoot:"/api/v3/stories"}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("ReadingList",a.models.BaseModel.extend({defaults:{id:null,name:null,numStories:0,cover:0,tags:[],featured:!1},fields:["id","name",{user:["name","avatar","following"]},"numStories","sampleCovers","cover","tags","featured"],url:function(){return"/api/v3/lists/"+(this.get("id")?this.get("id"):"")},validationRules:{name:[{func:"minLength",length:1,msg:s.trans("Your reading list must have a title.")}]},resource:function(){return"reading-list."+this.get("id")},stories:function(e){if(!this._stories){var n={listId:this.get("id")};t.isNumber(e)&&t.extend(n,{limit:e}),this._stories=new a.collections.ReadingListStories(this.get("stories"),n),this._stories.on({removedStory:function(e){this.trigger("list:removed",this.get("id"),e.get("id"))},addedStory:function(e){this.trigger("list:added",this.get("id"),e.get("id"))}},this)}return this._stories}})),a.mixin(a.models.ReadingList,"ValidationModel")}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("UserEvent",a.models.Base.extend({defaults:{id:null,type:null,createDate:null,data:null},validTypes:["follow","vote","comment","inline_comment","library","upload","message","placeholder","dedicate","newMessage"],isValid:function(){var e=this.get("type");return t.contains(this.validTypes,e)},createCommentDeeplinkUrl:function(e){return e.data.comment.parentId?e.data.story.part.url+"/comment/"+e.data.comment.parentId+"/replies/"+e.data.comment.id:e.data.story.part.url+"/comment/"+e.data.comment.id},parse:function(e,n){if("comment"!==e.type&&"inline_comment"!==e.type||t.get(e,"data.comment.deeplink_url")||(e.data.comment.deeplink_url=this.createCommentDeeplinkUrl(e)),"message"===e.type){var s=e.id;t.extend(e,e.data.message),e.id=s,e.username=e.username||e.to.name,e.latestReplies=e.latestReplies||[]}return e.children&&(e.group=[],e.group.push({id:e.id,type:e.type,createDate:e.createDate,data:e.data})),a.models.Base.prototype.parse(e,n)}})),a.mixin(a.models.UserEvent,"BeautifyURL")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("UserInvite",a.models.Base.extend({defaults:{id:null,emails:null,content:null},v2Url:"/apiv2/userinvites"})),a.mixin(a.models.UserInvite,"ApiV2")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("PublicMessage",a.models.UserEvent.extend({fields:["id","type","createDate","data"],validTypes:["follow","vote","comment","inline_comment","library","upload","message","dedicate","newMessage"],initialize:function(e){if("string"!=typeof(e=e||{}).username||""===e.username.trim())throw new Error("PublicMessage: username cannot be null");a.models.UserEvent.prototype.initialize.apply(this,arguments)},url:function(){return"/api/v3/users/"+this.get("username")+"/activity/"+this.get("id")},resource:function(){return"user."+this.get("username")+".activity."+this.get("id")},idAttribute:"createDate"}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("PinnedMessage",a.models.PublicMessage.extend({fields:["id","body","createDate","from","numReplies","isReply","latestReplies","isOffensive"],url:function(){return"/v4/users/"+this.get("username")+"/messages/latest/"},resource:function(){return"user."+this.get("username")+".latest.activity."},idAttribute:"createDate"})),a.mixin(a.models.PinnedMessage,"GenerateFields")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("NotificationEvent",a.models.UserEvent.extend({defaults:{id:null,type:null,createDate:null,data:null,isRead:!1,children:[],group_url:""},validTypes:["follow","follower_approved","vote","comment","inline_comment","library","message","dedicate","forum_post","upload","friend_join"]}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("StoryCreateModel",a.models.StoryModel.extend({defaults:{cover:"",title:"",description:"",skip_title:0,tags:[]},fields:["id","title","voteCount","readCount","commentCount","description","url","user","cover","cover_timestamp","completed","numParts","lastPublishedPart",{parts:["id","title","url","draft","modifyDate","createDate","length","videoId","photoUrl","user","pages","text_url","rating","voted","private","flag1","dedication","voteCount","readCount","commentCount","source","deleted","text_hash","hasBannedImages","wordCount"]},"tags","categories","rating","ratingLocked","mature","language","copyright","deleted"],v2Fields:["id","title","description","language","copyright","textids","complete","category1","dedication","human_rating","transaction_key","skip_title"],v2CreateUrl:"/apiv2/newstorygroup",v2UpdateUrl:"/apiv2/editstorygroup",v2DeleteUrl:"/apiv2/deletestorygroup",parse:function(e){return e.parts&&(e.textids=t.pluck(e.parts,"id").join(",")),e.published=!1,t.each(e.parts,function(t){t.stats=!!(t.readCount||t.voteCount||t.commentCount),t.flag1=t.private?1:0,t.source=t.source?t.source.url:"",e.published=e.published||!t.draft}),a.models.StoryModel.prototype.parse.call(this,e)},initialize:function(e){this.validationRules={description:[{func:"maxLength",length:2e3,msg:s.trans("Your description may be no longer than 2000 characters.")}],title:[{func:"maxLength",length:80,msg:s.trans("Your title may be no longer than 80 characters.")},{func:"isRequired",msg:s.trans("Please enter a title for your story.")},{func:"isNotEq",val:s.trans("Untitled Story"),msg:s.trans("Please enter a title for your story.")}],tags:[{func:"isWattysEligible",msg:s.trans("Sorry! This story isn't eligible for the 2019 Wattys")+". "+s.trans("Stories must have a minimum of 5 chapters published since August 2nd, 2018, or be marked as 'Complete' with all chapters having been published since August 2nd, 2018. There’s still time before the August 1st, 2019 entry deadline!")}]}},resource:function(){return"story."+parseInt(this.get("id"),10)+".metadata"},expireLocal:1})),a.mixin(a.models.StoryModel,"ApiV2Patch","ApiV2","ValidationModel")}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Message",a.models.BaseModel.extend({defaults:{id:null,createDate:null,from:null,isReply:!1,parentId:null,body:null,broadcast:!1},cacheLocal:!1,initialize:function(e){if("string"!=typeof(e=e||{}).ownername||""===e.ownername.trim())throw new Error("Message: ownername cannot be null");a.models.BaseModel.prototype.initialize.apply(this,arguments)},url:function(){return"/v4/users/"+this.get("ownername")+"/messages"},sync:function(e,t,n){return n=n||{},"delete"===e&&(n.url=this.url()+"/"+t.get("id")),a.models.BaseModel.prototype.sync.apply(this,arguments)}})),a.mixin(a.models.Message,"BeautifyURL")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("SupportTicket",a.models.BaseModel.extend({cacheLocal:!1,urlRoot:"/v4/support/tickets",defaults:{name:null,email:null,comment:"",ticket_form_id:null,username:null,custom_fields:[]},fields:["comment","ticket_form_id","custom_fields"],initialize:function(e){n.utils.currentUser().authenticated()||(this.validationRules={name:[{func:"isRequired",msg:s.trans("Name is required.")},{func:"hasLetter",msg:s.trans("Please enter your name or Wattpad username.")}],email:[{func:"isRequired",msg:s.trans("Email is required.")},{func:"isEmail",msg:s.trans("Invalid email.")}]})},setCustomField:function(e,n){var a,s,l;l={id:e,value:n},a=this.get("custom_fields"),(s=t.findIndex(a,{id:e}))<0?a.push(l):a[s]=l},setRequester:function(){this.has("name")&&this.has("email")&&(this.set("requester",{name:this.get("name"),email:this.get("email")}),this.unset("name"),this.unset("email"))}})),a.mixin(a.models.SupportTicket,"ValidationModel")}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("GetMobile",Monaco.Model.extend({})),s.mixin(s.models.GetMobile,"ValidationModel","GetMobileValRules")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverModule",a.models.Base.extend({defaults:{id:null,type:null,createDate:null,data:null},validTypes:["listCurated","storiesRecentlyRead","storiesRecommended","storiesRecommendedExplore","storiesRecommendedRNN","storiesRecommendedInfluential","storiesRecentlyUpdated","storiesSupported","storiesTop","storiesByFollowedHub","storiesByPromotedUser","tagTop","tagRecommended","storiesByRecentVote","hubTop","listsByFollowedHub","storiesRecentlyVotedByFollowedHubs","hubsFollowedByFollowedHub","listTrending","listPromoted","hubTrending","tagTrending","storiesBySearchResults","emergentStories"],promotedModules:["storiesByPromotedUser","listPromoted","promotedStoriesRecommended"],isValid:function(){var e=this.get("type");return t.contains(this.validTypes,e)},parse:function(e){return n.utils.currentUser().get("premium")&&t(this.promotedModules).includes(e.type)?void 0:e}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("TagModuleItem",a.models.Base.extend({defaults:{id:null,type:null,createDate:null,data:null},validTypes:["hotStoriesForTag","newStoriesForTag","relatedWritersForTag","relatedReadingListsForTag","relatedTagsForTag","risingStoriesForTag"],isValid:function(){var e=this.get("type");return t.contains(this.validTypes,e)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("PromotedStoryModel",s.models.BaseModel.extend({cacheLocal:!1,initialize:function(e){e=e||{},this.storyId=e.storyId||"",this.zoneIds=e.zoneIds||[155799],this.descCharLimit=e.descCharLimit||170,this.baseStoryCategory=e.baseStoryCategory,t.bindAll(this,"checkforPromotedStory","fetchPromotedStory","parse")},fetch:function(){var e=this;return!a.eligibleForDirectSoldAds()||n.utils.currentUser().get("premium")?Promise.resolve():Promise.resolve(e.checkforPromotedStory()).then(e.fetchPromotedStory).then(e.parse).catch(function(){e.storyModel=null})},parse:function(e){return e&&(e.promoted=!0,e.description&&(e.description=a.sanitizeHTML(e.description)),e.descCharLimit=this.descCharLimit,this.promotedCover&&this.promotedCover.length&&(e.cover=this.promotedCover),e.sponsorName=this.sponsor?this.sponsor.name:e.user.name),e},checkforPromotedStory:function(){var e=this.buildAdRequestData();return Promise.resolve($.ajax({type:"POST",url:"https://adz.wattpad.com/api/v2",dataType:"json",contentType:"text/plain",data:JSON.stringify(e),xhr:function(){var e=jQuery.ajaxSettings.xhr(),t=e.setRequestHeader;return e.setRequestHeader=function(e,n){"Authorization"!=e&&t.call(this,e,n)},e}}))},buildAdRequestData:function(){var e=s.get("supported-languages").find({id:parseInt(s.get("language"),10)}).get("nameEnglish"),t=n.utils.currentUser().get("externalId")||"",a="";return this.baseStoryCategory&&(a=s.get("categories").find({id:this.baseStoryCategory}).get("name_english")),{placements:[{divName:"azk70876",networkId:9660,siteId:421790,adTypes:[318],zoneIds:this.zoneIds,properties:{userLanguage:e,storyCategory:[a],storyId:this.storyId},user:{key:t},time:"123455",keywords:[a]}]}},fetchPromotedStory:function(e){return this.storyModel=this.parsePromotedStory(e),!!this.storyModel?this.storyModel.fetch():Promise.resolve(null)},parsePromotedStory:function(e){if(t.get(e,"decisions.azk70876.contents[0].data.customData.story.id")){var n=e.decisions.azk70876.contents[0].data.customData;return this.promotedCover=n.story.cover,this.sponsor=n.story.sponsor,this.clickUrls=[e.decisions.azk70876.clickUrl],this.impressionUrls=[e.decisions.azk70876.impressionUrl],n.thirdParty&&(n.thirdParty.clickUrls&&(this.clickUrls=this.clickUrls.concat(n.thirdParty.clickUrls)),n.thirdParty.impressionUrls&&(this.impressionUrls=this.impressionUrls.concat(n.thirdParty.impressionUrls))),new s.models.StoryModel({id:n.story.id})}return null}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("BaseCollection",Monaco.Collection.extend({resource:"resource-not-set",cacheLocal:!0})),a.mixin(a.collections.BaseCollection,"GenerateFields","CollectionParsing")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("IncrementalFetch",a.collections.BaseCollection.extend({constructor:function(e,n){if(n=n||{},this.arrayKey=n.arrayKey||this.arrayKey,this.fields=n.fields||this.fields,this.limit=n.limit||this.limit||10,this.offset=e&&e.length?e.length:0,this.total=null,"string"!=typeof this.arrayKey)throw new Error("IncrementalFetch: this.arrayKey { String } must be specified ( necessary for API request ).");if(!t.isArray(this.fields))throw new Error("IncrementalFetch: this.fields { Array } must be specified ( necessary for API request ).");this.on("reset",this.onReset,this),this.on("sync",this.onSync,this),a.collections.BaseCollection.prototype.constructor.apply(this,arguments)},resource:"incremental.list.unknown",revertParse:function(){var e=a.collections.BaseCollection.prototype.revertParse.apply(this,arguments);return this.revertParseExtras(e),e},revertParseExtras:function(e){},fetchNextSet:function(e){return null===this.total||this.total>this.offset?((e=e||{}).data=t.extend({offset:this.offset,limit:this.limit},e.data||{}),e=t.extend({fresh:null!==this.total,remove:!1},e),this.fetch(e)):$.Deferred().reject().promise()},onSync:function(){this.updateOffset.apply(this,arguments),this.trigger("fetchNext:done")},updateOffset:function(){this.offset=this.models.length},hasMore:function(){return this.offset<this.total},onReset:function(){this.total=null,this.offset=0}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("IncrementalFetchNextUrl",a.collections.IncrementalFetch.extend({constructor:function(e,t){t=t||{},this.turnOffPagination=t.turnOffPagination||!1,this.nextUrl=null,a.collections.IncrementalFetch.prototype.constructor.apply(this,arguments)},fetchNextSet:function(e){return null===this.nextUrl&&((e=e||{}).data=t.extend({offset:this.offset,limit:this.limit},e.data||{})),e=t.extend({fresh:null!==this.total,remove:!1},e),this.fetch(e)},url:function(){return this.nextUrl?this.updateWpToken(this.nextUrl):this.defaultUrl()},hasMore:function(){return!this.turnOffPagination&&void 0!==this.nextUrl},onReset:function(){this.total=null,this.nextUrl=null,this.offset=0},revertParse:function(){var e=a.collections.IncrementalFetch.prototype.revertParse.apply(this);return e.nextUrl=this.nextUrl,e},updateWpToken:function(e){var t=encodeURIComponent(n.utils.getCookie("token")),a=/(wp_token=)([\w:%]*)/g,s=a.exec(e);return s&&s[2]!==t?e.replace(a,"wp_token="+t):e}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StoryGroup",a.collections.IncrementalFetch.extend({model:a.models.StoryModel,arrayKey:"stories",fields:[{stories:["title","voteCount","readCount","commentCount","cover","tags","rating","url","id","description","categories","user","lastPublishedPart",{parts:""}]},"total","nextUrl"],resource:"storygroup.collection"}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("StoryStats",Monaco.Collection.extend({arrayKey:"analytics",cacheLocal:!0,resource:function(){return"storystats."+this.id+"."+this.statType},initialize:function(e,t){this.id=t.id,this.statType=t.statType},url:function(){var e="/v4/stories/"+this.id+"/"+this.statType;return"activities"===this.statType&&(e+="?interval=30"),e},errors:{fetchError:a.trans("We seem to have had some issues getting your story's analytics. Please try again"),1097:a.trans("I'm sorry, I can't do that for you ")+a.currentUser().get("username")+a.trans(". Your story must be published before you can view Writer Analytics."),1016:a.trans("I'm sorry, I can't do that for you ")+a.currentUser().get("username")+a.trans(". You may only view Writer Analytics for your own stories."),1018:a.trans("I'm sorry, I can't do that for you ")+a.currentUser().get("username")+a.trans(". You must be logged in to view Writer Analytics."),1017:a.trans("Our apologies, the story you requested was not found.")}})),s.mixin(s.collections.StoryStats,"CollectionParsing")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Works",a.collections.IncrementalFetchNextUrl.extend({initialize:function(e,t){if(!(t=t||{}).username)throw new Error("Works Collection - Missing parameter username");t.nextUrl&&(this.nextUrl=t.nextUrl),this.username=t.username,this.published=t.published||!1,a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)},model:a.models.StoryCreateModel,arrayKey:"stories",fields:[{stories:["id","title","voteCount","readCount","commentCount","categories","description","cover","completed","numParts","lastPublishedPart","url","tags","language","user",{parts:["draft","title","id","modifyDate","hasBannedImages"]}]},"total","nextUrl"],defaultUrl:function(){return this.published?this.urlPublished():"/api/v3/users/"+this.username+"/stories"},urlPublished:function(){return"/v4/users/"+this.username+"/stories/published"},resource:function(){return"user."+this.username+".works"+(this.published?".published":"")},cacheLocal:!0}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s){s.add("Base",Monaco.Collection.extend({_loaded:null,_dependencies:null,initialize:function(){this._loaded=$.Deferred(),this.on("sync",this._setResolved,this),this.on("error",this._setRejected,this),this.init&&this.init.apply(this,arguments),this._bindEvents()},_bindEvents:function(){var e=this;this.events&&"object"===a(this.events)&&t.forEach(this.events,function(t,n){e.on(n,e[t])})},resource:function(){throw new Error("resource must be implemented to use localCache")},_setResolved:function(){this._loaded.resolve(this)},_setRejected:function(){this._loaded.reject(this)},dependsOn:function(e,t){this._dependencies=this._dependencies||[],this._dependencies.push(e)},generateFields:function(e){return e=e||{},!this.fields||e.data&&e.data.fields||(e.data=e.data||{},e.data.fields=this._recursiveFields(this.fields)),e},_recursiveFields:function(e){var n=this,a="";if("string"==typeof e)return e;if(Array.isArray(e))a+=t.map(e,function(e){return n._recursiveFields(e)}).join(",");else{var s=[];t.forIn(e,function(e,t){s.push(t+"("+n._recursiveFields(e)+")")}),a+=s.join(",")}return a},loaded:function(e){var n=this;return e=this.generateFields(e),!this.url||"function"==typeof this.url&&!this.url()?this._loaded.resolve():"pending"===this._loaded.state()&&(this._dependencies?$.when.apply($,t.map(this._dependencies,function(e){return e.loaded()})).done(function(){n.fetch(e)}):this.fetch(e)),this._loaded},lookup:function(e){var t=this.get(e),n=$.Deferred();return t?n.resolve(t):((t=new this.model({id:e})).collection=this,this.add(t),t.loaded().done(function(e){n.resolve(e)})),n.promise()},ghost:function(e){var t=new this.model({id:e});return t.collection=this,this.add(t),t}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("User",a.collections.Base.extend({resource:"users.collection",model:a.models.User}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Library",a.collections.Base.extend({eventsOn:!1,init:function(e,t){var n=this;(t=t||{}).user?this._user=t.user:(this._loaded.reject(),this._user=new a.models.User),this.on("request",function(){this.eventsOn&&(n.off("add",n.saveItem),n.off("remove",n.deleteItem),this.eventsOn=!1)}),this.on("sync",function(){this.eventsOn||(this.eventsOn=!0,n.on("add",n.saveItem,n),n.on("remove",n.deleteItem,n))})},saveItem:function(t){var n=this;if(this.url()){$.post(this.url(),{stories:t.get("id")}).done(function(){n.trigger("added",t)}).fail(function(e){n.trigger("error-adding",e)});var a=e.te.getPage();e.te.push("event","app","library","story","add",{storyid:t.get("id"),page:a}),"story_details"===a&&e.te.push("event","story_details","story","library","add",{storyid:t.get("id")})}},deleteItem:function(t){var n=this;this.url()&&($.ajax({url:this.url(!0)+"/"+t.get("id"),type:"DELETE"}).done(function(){n.trigger("removed",t.get("id"))}).fail(function(e){n.trigger("error-removing",e)}),e.te.push("event","wattpad","story","library","remove",{storyid:t.get("id")}))},_user:null,user:function(){return this._user},resource:function(){return this.user().authenticated()?"user."+this.user().get("username")+".library":null},url:function(e){return this.user().authenticated()?"/api/v3/users/"+this.user().get("username")+"/library"+(e?"":"?fields=stories(id)"):null},parse:function(e){return e.stories}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Followers",a.collections.Base.extend({}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s){s.add("Following",s.collections.Base.extend({model:s.models.User,init:function(e,t){t=t||{},this._user=t.user},_user:null,user:function(){return this._user},resource:function(){return"user."+this.user().get("username")+".following"},url:function(){return"/api/v3/users/"+this.user().get("username")+"/following"},_clearCache:function(e,t){s.local.clear("user."+e),s.local.clear("user."+e+".following"),s.local.clear("user."+e+".profile.following"),s.local.clear("user."+t),s.local.clear("user."+t+".profile.followers")},follow:function(e){var t=this;return"string"==typeof e?this._doFollowRequest(e).done(function(){t._clearCache(t.user().get("username"),e)}):"object"===(void 0===e?"undefined":a(e))&&e instanceof s.models.User?this._doFollowRequest(e.get("username")).done(function(){t._clearCache(t.user().get("username"),e.get("username"))}):$.Deferred().reject().promise()},_doFollowRequest:function(e){return $.post(this.url()+"?users="+e)},unfollow:function(e){var t=this;return"string"==typeof e?this._doUnFollowRequest(e).done(function(){t._clearCache(t.user().get("username"),e)}):"object"===(void 0===e?"undefined":a(e))&&e instanceof s.models.User?this._doUnFollowRequest(e.get("username")).done(function(){t._clearCache(t.user().get("username"),e.get("username"))}):$.Deferred().reject().promise()},_doUnFollowRequest:function(e){return $.ajax(this.url()+"/"+e,{type:"DELETE"})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Stories",a.collections.Base.extend({resource:"stories.collection"}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("SimilarStories",a.collections.BaseCollection.extend({baseStoryId:null,model:a.models.StoryModel,fields:["id","title","voteCount","readCount","createDate","lastPublishedPart",{user:["name","avatar"]},"cover","url","numParts","isPaywalled"],resource:function(){return"group."+this.baseStoryId+".similar"},cacheLocal:!1,initialize:function(e,t){t=t||{},this.baseStoryId=t.storyId,this.limit=t.limit||3,this.baseStory=t.baseStory||{},t.showDescription&&this.fields.push("description")},fetch:function(e){return(e=e||{}).data=t.extend({limit:this.limit},e.data||{}),a.collections.BaseCollection.prototype.fetch.call(this,e)},url:function(){return"/api/v3/stories/"+this.baseStoryId+"/recommended"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("NewMessageReplies",a.collections.IncrementalFetch.extend({model:a.models.Message,cacheLocal:!1,arrayKey:"replies",fields:[{replies:["id","body","createDate","from","isReply","parentId","isOffensive","eventId"]},"message","nextUrl"],nextUrl:null,initialize:function(e,t){t=t||{},this.parentId=t.parentId,this.messageOwnerName=t.messageOwnerName,this.on("add remove",function(){a.local._clearItem(this.resource())}),a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments)},_prepareModel:function(e,t){return e.ownername||(e.ownername=this.messageOwnerName||e.from.name),a.collections.IncrementalFetch.prototype._prepareModel.apply(this,arguments)},parse:function(e){return!0===e.hasOwnProperty("nextUrl")&&""!==e.nextUrl?this.nextUrl=e.nextUrl:this.nextUrl=!1,!0===e.hasOwnProperty("message")&&(this.parentMessage=new a.models.Message({id:e.message.id,body:e.message.body,createDate:e.message.createDate,from:e.message.from,isReply:e.message.isReply,parentId:e.message.parentId,ownername:e.message.from.name})),a.collections.IncrementalFetch.prototype.parse.apply(this,arguments)},revertParseExtras:function(e){e.nextUrl=this.nextUrl},fetchNextSet:function(e){return null===this.nextUrl?this.fetch(t.extend({data:{limit:this.limit,fields:this.getFieldsString().data.fields,direction:1,omitParentReply:1,replyId:e.replyId||null},fresh:!0,remove:!1},e||{})):!1!==this.nextUrl?this.fetch(t.extend({fresh:!0,remove:!1},e||{})):$.Deferred().reject().promise()},comparator:function(e){return moment(e.get("createDate")).unix()},hasMore:function(){return!1!==this.nextUrl},url:function(){return"string"!=typeof this.nextUrl?"/v4/messages/"+this.parentId:this.nextUrl},resource:function(){return"user.messages."+this.parentId+".replies"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("RecommendedStories",a.collections.IncrementalFetchNextUrl.extend({model:a.models.StoryModel,arrayKey:"stories",username:null,cacheLocal:!0,cacheExpire:5,nextUrl:null,fields:[{stories:["title","voteCount","readCount","commentCount","cover","tags","rating","url","id","description","categories","firstPartId","numParts",{user:["name","avatar"]}]},"total","nextUrl"],initialize:function(e,t){if(!(t=t||{}).username)throw new Error("Recommended Collection: options.username cannot be null");this.username=t.username,a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)},parse:function(e){return!0===e.hasOwnProperty("nextUrl")&&""!==e.nextUrl?this.nextUrl=e.nextUrl:this.nextUrl=!1,a.collections.IncrementalFetchNextUrl.prototype.parse.apply(this,arguments)},revertParseExtras:function(e){e.nextUrl=this.nextUrl},removeAndDismiss:function(t){var n=t.get("id"),a=this,s=Promise.resolve();e.te.push("event","recommended","stories",null,"dismiss",{dismissed_storyid:n}),this.length<5&&(s=Promise.resolve(this.fetchNextSet())),s.then(function(){a.remove(t),a.trigger("update")})},resource:function(){return this.username+".recommended-stories"},defaultUrl:function(){return"/api/v3/users/"+this.username+"/recommended"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ReadingListStories",a.collections.IncrementalFetchNextUrl.extend({model:a.models.StoryModel,arrayKey:"stories",listId:null,eventsOn:!1,limit:30,fields:["id","name",{stories:["id","title","cover","description","url","voteCount","readCount","numParts","completed","tags","mature",{user:["name","avatar"]}]},"total","nextUrl"],constructor:function(e,t){a.collections.IncrementalFetchNextUrl.prototype.constructor.apply(this,arguments)},initialize:function(e,t){if(!(t=t||{}).listId)throw new Error("ReadingListStories: listId cannot be null");this.listId=t.listId,t.nextUrl&&(this.nextUrl=t.nextUrl),a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)},defaultUrl:function(){return"/api/v3/lists/"+this.listId+"/stories"},resource:function(){return"reading-list."+this.listId+".stories"},remove:function(e,n){var s=this,l=arguments;n=n||{};var i=!t.isArray(e);e=i?[e]:t.clone(e);var r=t.pluck(e,"id").join(",");return Promise.resolve($.ajax({url:this.defaultUrl()+"/"+encodeURIComponent(r),type:"DELETE"})).then(function(){a.collections.StoryGroup.prototype.remove.apply(s,l),a.local.clear(s.resource()),s.offset-=e.length,s.total-=e.length,s.nextUrl=null,t.each(e,function(e){s.trigger("removedStory",e)}),"function"==typeof n.success&&n.success()}).catch(function(){"function"==typeof n.error&&n.error()}),i?e[0]:e},add:function(e,n){var s=this,l=arguments;n=n||{};var i=!t.isArray(e);e=i?[e]:t.clone(e);var r=t.pluck(e,"id").join(",");return Promise.resolve($.ajax({url:this.url(),data:{stories:r},type:"POST"})).then(function(){a.collections.StoryGroup.prototype.add.apply(s,l),a.local.clear(s.resource()),t.each(e,function(e){s.trigger("addedStory",e)}),"function"==typeof n.success&&n.success()}).catch(function(){"function"==typeof n.error&&n.error()}),i?e[0]:e}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("OnboardingListStories",a.collections.IncrementalFetchNextUrl.extend({model:a.models.StoryModel,arrayKey:"stories",listId:null,eventsOn:!1,fields:["id","name",{stories:["id","title","cover","voteCount","readCount","categories"]},"total","nextUrl"],initialize:function(e,t){if(!(t=t||{}).listId)throw new Error("ReadingListStories: listId cannot be null");this.listId=t.listId,t.nextUrl&&(this.nextUrl=t.nextUrl),a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)},defaultUrl:function(){return"/api/v3/lists/"+this.listId+"/stories"},resource:function(){return"onboarding-list."+this.listId+".stories"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("OnboardingStories",a.collections.IncrementalFetchNextUrl.extend({model:a.models.StoryModel,arrayKey:"stories",fields:[{stories:["id","title","url","cover","voteCount","readCount","numParts","categories","description",{user:["name","fullname","avatar"]}]},"total","nextUrl"],resource:function(){return"stories.onboarding"},defaultUrl:function(){return"/api/v3/stories?filter=onboarding"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("RecommendedUsers",a.collections.IncrementalFetch.extend({model:a.models.User,arrayKey:"users",fields:[{users:["username","name","avatar","following","backgroundUrl","numStoriesPublished","numFollowers","highlight_colour","recommendationHint"]}],username:null,cacheLocal:!0,cacheExpire:5,initialize:function(e,t){if(!(t=t||{}).username)throw new Error("RecommendedUsers Collection: options.username cannot be null");this.username=t.username,a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments)},parse:function(e){var t=a.collections.IncrementalFetch.prototype.parse.apply(this,arguments);return this.total=t.length,t},removeAndDismiss:function(t){var n=t.get("username"),a=this;e.te.push("event","recommended","users",null,"dismiss",{dismissed_username:n}),$.post(this.url()+"/"+n+"/dismiss").done(function(){a.remove(t),a.trigger("update")})},resource:function(){return this.username+".recommended-users"},url:function(){return"/api/v3/users/"+this.username+"/recommended/users"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("NewsFeed",a.collections.IncrementalFetch.extend({model:a.models.UserEvent,cacheLocal:!0,cacheExpire:5,username:null,arrayKey:"feed",more:null,fields:[{feed:["id","type","createDate","data","children","group_url"]},"total","has_more"],_prepareModel:function(e,n){return this.extractUser(e),"comment"!==e.type&&"inline_comment"!==e.type||t.get(e,"data.comment.deeplink_url")||(e.data.comment.parentId?e.data.comment.deeplink_url=e.data.story.part.url+"/comment/"+e.data.comment.parentId+"/replies/"+e.data.comment.id:e.data.comment.deeplink_url=e.data.story.part.url+"/comment/"+e.data.comment.id),a.collections.IncrementalFetch.prototype._prepareModel.apply(this,arguments)},extractUser:function(e){switch(e.type){case"comment":case"inline_comment":e.data.user=e.data.comment.user;break;case"follow":e.data.user=e.data.follower;break;case"library":e.data.user=e.data.list.user;break;case"message":e.data.user=e.data.message.from;break;case"update":case"upload":e.data.user=e.data.story.user;break;case"vote":e.data.user=e.data.voter}},parse:function(e){return this.more=e.has_more,a.collections.IncrementalFetch.prototype.parse.apply(this,arguments)},revertParseExtras:function(e){e.has_more=this.more},hasMore:function(){return null===this.more||this.more},fetchNextSet:function(e){return null===this.more?this.fetch(t.extend({data:{limit:this.limit},fresh:!1,remove:!1},e||{})):this.more?this.fetch(t.extend({data:{limit:this.limit,newest_id:this.models.length>0?this.min(function(e){return e.get("id")}).get("id"):-1},fresh:!0,remove:!1},e||{})):$.Deferred().reject().promise()},url:function(){return"/api/v3/users/"+n.utils.currentUser().get("username")+"/feed"},resource:function(){return"user."+n.utils.currentUser().get("username")+".news-feed"},updateOffset:function(e,n,a){var s=this;t.each(n.feed,function(e){s.offset+=1,e.children&&(s.offset+=e.children.length)})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Autocomplete",Monaco.Collection.extend({cacheLocal:!1,url:function(){return"/v4/autocomplete/query?term="+this.searchTerm},resource:function(){return"search.autocomplete."+this.searchTerm},initialize:function(e,t){t=t||{},this.searchTerm=t.searchTerm||""},parse:function(e){var n=[];return t.each(e,function(e,t){n.push({itemId:t,term:e})}),n}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StorySearch",a.collections.IncrementalFetchNextUrl.extend({model:a.models.StoryGroup,arrayKey:"stories",expireLocal:5,fields:[{stories:["title","voteCount","readCount","commentCount","cover","tags","rating","url","id","description","categories",{user:["name"]}]},"total","nextUrl"],initialize:function(e,t){t=t||{},this.searchTerm=t.searchTerm,this.filterComplete=t.filterComplete||!1,a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments),this.parentFetchNextSet=a.collections.IncrementalFetchNextUrl.prototype.fetchNextSet},fetchNextSet:function(){return""!==this.searchTerm?a.collections.IncrementalFetchNextUrl.prototype.fetchNextSet.apply(this,arguments):$.Deferred().resolve().promise()},resource:function(){return"search-results.story.query-"+this.searchTerm+this.completeFilter()},completeFilter:function(){return this.filterComplete?"&filter=complete":""},defaultUrl:function(){return"/api/v3/stories/?query="+encodeURIComponent(this.searchTerm)+this.completeFilter()}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Notifications",a.collections.IncrementalFetchNextUrl.extend({model:a.models.NotificationEvent,username:null,arrayKey:"feed",more:null,hasUnread:!1,useLocalCache:!0,fields:[{feed:["id","type","createDate","data","isRead","children","group_url"]},"nextUrl"],initialize:function(e,t){if("string"!=typeof(t=t||{}).username||""===t.username.trim())throw new Error("Notifications: options.username cannot be null");this.username=t.username,void 0!==t.useLocalCache&&null!==t.useLocalCache&&(this.useLocalCache=t.useLocalCache),this.on("sync",this.checkUnreads,this),a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)},checkUnreads:function(e,t,n){$.ajax({url:this.defaultUrl(),type:"PUT",data:{username:this.username,read:1}}),$("#notifications-menu-badge, .notification-badge").css("display","none")},defaultUrl:function(){return"/api/v3/users/"+this.username+"/notifications"},resource:function(){return this.useLocalCache?"user."+this.username+".notifications":null}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("RecentlyRead",a.collections.BaseCollection.extend({model:a.models.StoryGroup,arrayKey:"stories",fields:[{stories:["id","title","readingPosition","cover","url",{user:["name"]},{parts:["id","url"]}]}],initialize:function(e,t){if(!(t=t||{}).username)throw new Error("Recently Read Collection: options.username cannot be null");this.username=t.username,a.collections.BaseCollection.prototype.initialize.apply(this,arguments)},resource:function(){return"user."+this.username+".recently-read"},url:function(){return"/v4/users/"+this.username+"/recent_reads"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Discover",a.collections.BaseCollection.extend({fields:["listType,url,elements,subtitle,id,title"],url:"/v4/discover/",initialize:function(e){e=e||{},this.user=e.user||n.utils.currentUser()},resource:function(){return"user."+(this.user.get("username")||"anonymous")+".discover"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("TagModules",a.collections.IncrementalFetch.extend({model:a.models.TagModuleItem,arrayKey:"modules",fields:[{modules:["type","data"]}],typeByPathName:{hot:"hotStoriesForTag",rising:"risingStoriesForTag",new:"newStoriesForTag",writers:"relatedWritersForTag",lists:"relatedReadingListsForTag"},initialize:function(e,t){if(!(t=t||{}).tags)throw new Error("A tag module collection needs a tag(s) to be passed in");this.tags=t.tags,this.user=t.user||n.utils.currentUser(),a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments)},resource:function(){return"user."+(this.user.get("username")||"anonymous")+"."+this.tags+".tag-modules"},parse:function(e){return a.collections.IncrementalFetch.prototype.parse.call(this,e)},url:function(){return n.utils.currentUser().authenticated(),"/v5/discover/tags?tags="+encodeURIComponent(this.tags)+"&language="+a.get("language")},getTypeByUrlPath:function(e){return this.typeByPathName[e]}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ActivityMessages",a.collections.IncrementalFetchNextUrl.extend({model:a.models.PublicMessage,cacheLocal:!0,cacheExpire:5,arrayKey:"messages",username:null,fields:[{messages:["id","body","createDate","from","numReplies","isReply","latestReplies","isOffensive","replies"]},"total","nextUrl"],initialize:function(e,t){if("string"!=typeof(t=t||{}).username||""===t.username.trim())throw new Error("An Activity Feed collection requires a username string to be passed to the options hash on init");a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments),this.username=t.username,this.on("remove",function(){a.local._clearItem(this.resource())})},parse:function(e){return t.forOwn(e[this.arrayKey],function(e){e.type=e.type||"newMessage"}),a.collections.IncrementalFetchNextUrl.prototype.parse.apply(this,arguments)},_prepareModel:function(e,t){return e.username||(e.username=this.username),a.collections.IncrementalFetch.prototype._prepareModel.apply(this,arguments)},defaultUrl:function(){return"/v4/users/"+this.username+"/messages"},resource:function(){return"user."+this.username+".profile.messages"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ReadingLists",a.collections.IncrementalFetchNextUrl.extend({model:a.models.ReadingList,arrayKey:"lists",fields:[{lists:["id","name",{user:["name"]},"numStories","cover","sample_covers","tags","featured","isPaywalled"]},"total","nextUrl"],initialize:function(e,t){if("string"!=typeof(t=t||{}).username||""===t.username.trim())throw new Error("A ReadingLists collection requires a username string to be passed to the options hash on init");this.username=t.username,t.getStories&&(this.fields[0].lists.push({stories:["id"]}),this.getStories=!0),this.nonEmpty=!!t.nonEmpty,this.on("sync",function(e){a.local.clear(this.resource())},this),a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments)},defaultUrl:function(){return"/api/v3/users/"+this.username+"/lists"+(this.nonEmpty?"?non_empty=1":"")},resource:function(){return"user."+this.username+".profile.reading-lists"+(this.getStories?".withStories":"")+(this.nonEmpty?".non-empty":"")}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ProfileFollowers",a.collections.IncrementalFetchNextUrl.extend({cacheExpire:5,cacheLocal:!0,arrayKey:"users",model:a.models.User,username:null,usernameErr:"A ProfileFollowers collection requires a username string to be passed to the options hash on init",fields:[{users:["username","name","avatar","following","numStoriesPublished","numLists","numFollowers","numFollowing","location","description","backgroundUrl","highlight_colour"]},"total","nextUrl"],defaultUrl:function(){return"/api/v3/users/"+this.username+"/followers"},resource:function(){return"user."+this.username+".profile.followers"},initialize:function(e,t){if("string"!=typeof(t=t||{}).username||""===t.username.trim())throw new Error(this.usernameErr);this.username=t.username,a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ProfileFollowing",a.collections.IncrementalFetchNextUrl.extend({model:a.models.User,cacheExpire:1,cacheLocal:!0,arrayKey:"users",username:null,fields:[{users:["username","name","avatar","following","location","description","backgroundUrl","highlight_colour","numStoriesPublished","numLists","numFollowers","numFollowing","votesReceived"]},"total","nextUrl"],defaultUrl:function(){return"/api/v3/users/"+this.username+"/following"},resource:function(){return"user."+this.username+".profile.following"},initialize:function(e,t){if("string"!=typeof(t=t||{}).username||""===t.username.trim())throw new Error("A ProfileFollowing collection requires a username string to be passed to the options hash on init");this.username=t.username,a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ProfileWorks",a.collections.StoryGroup.extend({fields:[{stories:["title","lastPublishedPart","voteCount","readCount","commentCount","cover","tags","url","id","description","categories","completed","mature","rating","rankings","tagRankings","numParts","firstPartId","parts"]},"total","nextUrl","numPublished","numDrafts"],url:function(){return n.utils.currentUser().get("username")===this.username?"/v4/users/"+this.username+"/stories/all":"/v4/users/"+this.username+"/stories/published"},parse:function(e){return this.numPublished=e.numPublished,this.numDrafts=e.numDrafts,a.collections.StoryGroup.prototype.parse.apply(this,arguments)},revertParse:function(){var e=a.collections.StoryGroup.prototype.revertParse.apply(this,arguments);return e.numPublished=this.numPublished,e.numDrafts=this.numDrafts,e},resource:function(){return n.utils.currentUser().get("username")===this.username?"user."+this.username+".profile.works.all":"user."+this.username+".profile.works"},initialize:function(e,t){if("string"!=typeof(t=t||{}).username||""===t.username.trim())throw new Error("A ProfileWorks collection requires a username string to be passed to the options hash on init");this.username=t.username,a.collections.StoryGroup.prototype.initialize.apply(this,arguments)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("FollowRequests",a.collections.ProfileFollowers.extend({cacheLocal:!1,usernameErr:"FollowRequests collection requires a username string to be passed to the options hash on init",fields:[{users:["username","avatar"]},"total","nextUrl"],url:function(){return"/api/v3/users/"+this.username+"/followers/requests"},resource:function(){return"user."+this.username+".follow-requests"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StoryInLists",Monaco.Model.extend({initialize:function(e){if(!e.storyId)throw new Error("StoryInLists - Missing parameter storyId");this.storyId=e.storyId},url:function(){return"/v4/stories/collections?storyIds="+this.storyId},arrayKey:"collections",parse:function(e){return e[this.arrayKey]}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("CommentModel",a.models.BaseModel.extend({cacheLocal:!1,fields:[],initialize:function(e,t){t=t||{},e=e||{},this.isDeepLink=t.isDeepLink||!1,this.isDeeplinkedReply=t.isDeeplinkedReply||!1,this.commentIdToHighlight=t.commentIdToHighlight,a.models.BaseModel.prototype.initialize.apply(this,arguments)},url:function(){return this.isDeepLink&&this.get("parentId")?"/v4/comments/"+this.get("parentId").toString().split("#").join("_")+"/replies/"+this.get("id"):"/v4/comments/"+this.get("id")},_replies:null,replies:function(){return this._replies||(this._replies=new a.collections.CommentReplies([],{paragraphId:this.get("paragraphId")||null,partId:this.get("partId"),parentId:this.get("id"),isReply:!0,storyAuthor:this.get("storyAuthor")})),this._replies},destroyAndUpdateMarker:function(){var e=this.get("paragraphId");Promise.resolve(this.destroy()).then(function(){a.trigger("app:story:inlinecomment",e)})},sync:function(e,t,n){var s=this;if((n=n||{}).error=function(e,t,n){return s.handlePromiseExpected(e)},t.get("paragraphId")&&!t.get("isReply"))n.url="create"===e?"/v4/parts/"+t.get("partId")+"/paragraphs/"+t.get("paragraphId")+"/comments":"/v4/comments/"+t.get("id");else if(t.get("parentId"))if("create"===e){var l=t.get("parentId").toString().split("#").join("_");l.match(/[0-9_]+/)&&(n.url="/v4/comments/"+l)}else n.url="/v4/comments/"+t.get("id");return a.models.BaseModel.prototype.sync.apply(this,arguments)}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("RecentComments",a.collections.IncrementalFetch.extend({model:a.models.CommentModel,arrayKey:"comments",fields:[{comments:["id","body","createDate","isOffensive","parent_id",{author:["name","avatar"]}]},"total","nextUrl"],storyId:null,url:function(){return"/v4/stories/"+this.storyId+"/recent_comments"},resource:function(){return"story."+this.storyId+".recent-comments"},initialize:function(e,t){if(a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments),void 0===(t=t||{}).storyId||""===t.storyId.toString().trim())throw new Error("A RecentComments collection requires a storyId to be passed to the options hash on init");this.storyId=t.storyId}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("InlineComments",a.collections.IncrementalFetchNextUrl.extend({model:a.models.CommentModel,arrayKey:"comments",fields:[{comments:["body","createDate","startPosition","endPosition","id","isOffensive","isReply","numReplies","paragraphId","parentId","partId","deeplink",{author:["avatar","name"]}]},"total"],cacheLocal:!1,cacheExpire:5,defaultUrl:function(){return"/v4/parts/"+this.partId+"/paragraphs/"+this.paragraphId+"/comments"},initialize:function(e,n){if(a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments),n=n||{},this.pageText=t.find(n.storyPart.loadedPages,function(e){return e.getParagraphById(n.paragraphId)}),!this.pageText)throw new Error("The selected paragraph ID for this story does not exist.");this.partId=n.storyPart.get("id"),this.commentId=n.commentId,this.paragraphId=n.paragraphId,this.paragraphText=this.pageText.getParagraphById(n.paragraphId),this.storyAuthor=n.storyPart.get("group").user.username,this.startPosition=0,this.endPosition=this.paragraphText.length,n.paragraphId&&this.on("sync",function(){a.trigger("app:story:inlinecomment",n.paragraphId)},this)},hasMore:function(){return(1!==this.models.length||!this.models[0].isDeepLink)&&a.collections.IncrementalFetchNextUrl.prototype.hasMore.apply(this,arguments)},_prepareModel:function(e,t){return!e.storyAuthor&&this.storyAuthor&&(e.storyAuthor=this.storyAuthor),a.collections.IncrementalFetch.prototype._prepareModel.apply(this,arguments)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("FeaturedStories",a.collections.IncrementalFetchNextUrl.extend({category:null,model:a.models.StoryModel,arrayKey:"stories",fields:[{stories:["id","title","voteCount","readCount","commentCount","tags",{user:["name","avatar"]},"description","cover","completed","rating","mature","url","numParts","modifyDate","categories","firstPartId"]},"total","nextUrl"],resource:function(){return"stories.featured"},defaultUrl:function(){return"/api/v3/stories?filter=featured"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("BrowseStories",a.collections.IncrementalFetchNextUrl.extend({category:null,model:a.models.StoryModel,arrayKey:"stories",fields:[{stories:["id","title","voteCount","readCount","commentCount","tags","rankings",{user:["name","avatar"]},"description","cover","completed","rating","mature","url","numParts","modifyDate","firstPartId"]},"total","tags","nextUrl"],initialize:function(e,t){if(!(t=t||{}).category&&!t.tag)throw new Error("BrowseStories - Need to pass in a category");this.filter=t.filter||"hot",this.category=t.category,this.nextUrl=this.nextUrl||t.nextUrl||null,a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)},parse:function(e){return this.tags=e.tags,a.collections.IncrementalFetchNextUrl.prototype.parse.apply(this,arguments)},revertParse:function(){var e=a.collections.IncrementalFetchNextUrl.prototype.revertParse.apply(this,arguments);return e.tags=this.tags,e},resource:function(){return"stories.category."+n.utils.slugify(this.category.get("name_english"))+"."+this.filter},defaultUrl:function(){return"rising"===this.filter&&(this.filter="undiscovered"),"/api/v3/stories?filter="+this.filter+"&category="+this.category.get("id")}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("BrowseTagStories",a.collections.IncrementalFetchNextUrl.extend({tags:null,model:a.models.StoryModel,arrayKey:"stories",fields:[{stories:["id","title","voteCount","readCount","commentCount","tags",{user:["name","username","avatar"]},"description","cover","completed","rating","mature","url","numParts","modifyDate","categories","firstPartId"]},"total","nextUrl"],initialize:function(e,t){if(!(t=t||{}).category&&!t.tags)throw new Error("BrowseTagStories - Need to pass in a tag(s)");this.filter=t.filter||"hot",this.tags=t.tags,this.nextUrl=this.nextUrl||t.nextUrl||null,"rising"===this.filter&&(this.filter="new",this.variation="reading_time"),a.collections.IncrementalFetchNextUrl.prototype.initialize.apply(this,arguments)},resource:function(){return"stories.tag."+this.tags+"."+this.filter},url:function(){return this.nextUrl?"hot"===this.filter?this.nextUrl+"&wp_token="+n.utils.getCookie("token"):this.nextUrl:this.defaultUrl()},defaultUrl:function(){var e=this.tags.split(",").map(function(e){return"%23"+e}).join("+");return"hot"===this.filter?"/v5/hotlist?tags="+this.tags:this.variation?"/v4/stories?filter="+this.filter+"&query="+e+"&variation="+this.variation:"/v4/stories?filter="+this.filter+"&query="+e}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("StoryPartComments",a.collections.IncrementalFetchNextUrl.extend({model:a.models.CommentModel,arrayKey:"comments",cacheLocal:!0,cacheExpire:5,fields:[{comments:["id","body","createDate","isOffensive","parentId","numReplies",{author:["name","avatar"]}]},"total"],partId:null,defaultUrl:function(){return"/v4/parts/"+this.partId+"/comments"},resource:function(){return"part."+this.partId+".comments"},parse:function(e){return e=a.collections.IncrementalFetchNextUrl.prototype.parse.apply(this,arguments),this.initialParse&&this.nextUrl&&(this.initialParse=!1,this.nextUrl=this.nextUrl.replace("limit="+this.limit,"limit="+this.normalLimit),this.limit=this.normalLimit),e},initialize:function(e,t){if(a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments),void 0===(t=t||{}).partId||""===t.partId.toString().trim())throw new Error("A StoryPartComments collection requires a partId to be passed to the options hash on init");this.partId=t.partId,this.storyAuthor=t.storyAuthor||"",this.limit=t.limit,t.initialLimit&&(this.normalLimit=this.limit,this.limit=t.initialLimit,this.initialParse=!0)},_prepareModel:function(e,t){return!e.storyAuthor&&this.storyAuthor&&(e.storyAuthor=this.storyAuthor),a.collections.IncrementalFetch.prototype._prepareModel.apply(this,arguments)},hasMore:function(){return(1!==this.models.length||!this.models[0].isDeepLink)&&a.collections.IncrementalFetchNextUrl.prototype.hasMore.apply(this,arguments)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("CommentReplies",a.collections.IncrementalFetchNextUrl.extend({model:a.models.CommentModel,arrayKey:"replies",cacheLocal:!0,cacheExpire:5,fields:[{replies:["id","body","partId","createDate","isOffensive","isReply","parentId",{author:["name","avatar"]}]},"total"],parentId:null,defaultUrl:function(){return"/v4/comments/"+this.parentId+"/replies"},resource:function(){return"comments."+this.parentId+".replies"},initialize:function(e,t){if(a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments),void 0===(t=t||{}).parentId||""===t.parentId.toString().trim())throw new Error("A CommentReplies collection requires a parentId to be passed to the options hash on init");this.limit=t.limit||10,this.parentId=t.parentId,this.storyAuthor=t.storyAuthor,this.partId=t.partId,this.isReply=t.isReply||!0,this.paragraphId=t.paragraphId,t.paragraphId&&this.on("sync",function(){a.trigger("app:story:inlinecomment",t.paragraphId)},this)},_prepareModel:function(e,t){return!e.storyAuthor&&this.storyAuthor&&(e.storyAuthor=this.storyAuthor),e.attributes?e.attributes.paragraphId=this.paragraphId:e.paragraphId=this.paragraphId,a.collections.IncrementalFetch.prototype._prepareModel.apply(this,arguments)}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("NodeStorySearch",a.collections.StorySearch.extend({model:a.models.StoryModel,arrayKey:"stories",cacheLocal:!1,fields:[{stories:["id","title","voteCount","readCount","commentCount","description","mature","completed","cover","url","numParts","isPaywalled",{user:["name"]},{lastPublishedPart:["createDate"]},"promoted",{sponsor:["name","avatar"]},"tags",{tracking:["clickUrl","impressionUrl",{thirdParty:["impressionUrls","clickUrls"]}]},{contest:["endDate","ctaLabel","ctaURL"]}]},"total","tags","nextUrl"],initialize:function(e,t){t=t||{},this.searchTerm=t.searchTerm,this.limit=t.limit,this.promotedStories=[]},resource:function(){return"search.stories.results."+this.searchTerm.trim()+"."+(this.complete?"true":"false")+"."+(this.mature?"true":"false")},parse:function(e){var n=this;this.tags=new Monaco.Collection(e.tags),this.tags._app=a,e.stories&&e.stories.length&&"number"!=typeof e.stories[0].parts&&t.each(e.stories,function(e){e.category=null;var a=t.find(e.categories,function(e){return e>0});a&&(a=t.findWhere(n.categories.toJSON(),{id:a}),e.category=a?a.name:null),e.promoted&&n.promotedStories.push(e)}),this.limit=3===this.limit?10:this.limit},getPromotedStories:function(){return this.promotedStories},revertParse:function(e){e.tags=this.tags.toJSON()},defaultUrl:function(){return"/v4/search/stories/?query="+encodeURIComponent(this.searchTerm.trim())+this.addFilter("complete")+this.addFilter("mature")+this.addFilter("hot")+this.addFilter("age")+this.addFilter("length")+this.addFilter("category")+"&limit="+this.limit},toJSON:function(){var e=a.collections.StorySearch.prototype.toJSON.apply(this,arguments),t=a.get("categories").find({id:this.category});return e.filters={complete:this.complete,mature:this.mature,age:this.age,category:t?t.get("name"):void 0},e},addFilter:function(e){switch(e){case"complete":if(this.complete)return"&filter=complete";break;case"mature":if(this.mature)return"&mature=true";break;case"age":if(this.age)return"&updateYoungerThan="+this.age;break;case"length":e="";return this.minParts&&(e="&minParts="+this.minParts),this.maxParts&&(e=e+"&maxParts="+this.maxParts),e;case"hot":if(this.hot)return"&hot=1";break;case"category":if(this.category)return"&category="+this.category}return""},setFilter:function(e,t){if(this[e]=t,"mature"===e){var a=t?1:0;n.utils.setCookie("msf",a,365,!0)}else"age"===e?t>0?this.age=t:delete this.age:"length"===e&&("1-10"===t?(this.minParts=1,this.maxParts=10):"10-20"===t?(this.minParts=10,this.maxParts=20):"20-50"===t?(this.minParts=20,this.maxParts=50):">50"===t?(this.minParts=50,delete this.maxParts):(delete this.maxParts,delete this.minParts))}})),a.mixin(a.collections.NodeStorySearch,"CollectionParsing")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("NodeUserSearch",a.collections.IncrementalFetchNextUrl.extend({model:a.models.UserModel,expires:5,arrayKey:"users",fields:["username","name","avatar","description","numFollowers","numStoriesPublished","badges"],initialize:function(e,t){t=t||{},this.searchTerm=t.searchTerm,this.limit=t.limit||3,this.offset=0},url:function(){return"/v4/search/users/?query="+encodeURIComponent(this.searchTerm.trim())+"&limit="+this.limit+"&offset="+this.offset},resource:function(){return"search.users.results."+this.searchTerm.trim()},parse:function(e){return this.offset=this.offset+this.limit,e.length<this.limit?this.nextUrl=void 0:this.nextUrl=this.url(),e}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("NodeLibrary",a.collections.IncrementalFetchNextUrl.extend({model:a.models.StoryModel,arrayKey:"stories",fields:[{stories:["id","title","cover","voteCount","readCount","readingPosition","url",{parts:["id","url"]},{user:["name","avatar"]},{lastPublishedPart:["createDate"]}]},"total","nextUrl"],libraryType:"current-reads",initialize:function(e,t){t=t||{},this.user=t.user||n.utils.currentUser(),a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments)},resource:function(){return"user."+this.user.get("username")+".library.new"},defaultUrl:function(){return"/api/v3/users/"+this.user.get("username")+"/library"},addStory:function(e){var n,a=this;return e=t.isArray(e)?e:[e],n=t.map(e,function(e){return e.get("id")}),Promise.resolve($.post(this.defaultUrl()+"/"+n.join(","))).then(function(e){return t.each(e.results.success,a.reportAdd),e.results})},reportAdd:function(t){e.te.push("event","app","library","story","add",{storyid:t,page:e.te.getPage()})},removeStory:function(e,n){var a;return e=t.isArray(e)?e:[e],a=t.map(e,function(e){return e.get("id")}),Promise.resolve($.ajax({url:this.defaultUrl()+"/"+a.join(),type:"DELETE",data:n?{unarchive:1}:null})).then(function(e){return!e||!e.results||e.results}).catch(function(e){return!(!e||!e.results)&&e.results})},reportRemove:function(t){e.te.push("event","wattpad","story","library","remove",{storyid:t})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Archive",a.collections.NodeLibrary.extend({resource:function(){return"user."+this.user.get("username")+".archive.new"},defaultUrl:function(){return"/api/v3/users/"+this.user.get("username")+"/archive"},libraryType:"archive",reportAdd:function(t){e.te.push("event","wattpad","story","archive","add",{storyid:t})},reportRemove:function(t){e.te.push("event","wattpad","story","archive","remove",{storyid:t})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverCollection",a.collections.IncrementalFetch.extend({model:a.models.StoryModel,arrayKey:"stories",fields:[{stories:["id","title","description","cover","voteCount","readCount","readingPosition","numParts","tags","categories","modifyDate","url","firstPartId",{user:["name","avatar"]}]},"total","nexturl"],initialize:function(e,t){t=t||{},this.user=t.user||n.utils.currentUser(),this.url=t.url||this.url,this.layout=t.layout||n.utils.PanelBuilder.Layouts.Default,this.cacheKey=t.cache,a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments)},resource:function(){if(!this.cacheKey)throw new Error("Discover :: Collection :: Please set the Resource");return"user."+(this.user.get("username")||"anonymous")+".discover."+this.cacheKey},url:function(){throw new Error("Discover :: Collection :: Please set the URL")},getPanelGroup:function(){return new n.utils.PanelBuilder(this.toJSON(),this.layout).panelGroup}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverListsCollection",a.collections.IncrementalFetch.extend({model:a.models.ReadingList,arrayKey:"lists",fields:[{lists:["id","name","sample_covers",{user:["name","avatar"]}]},"total","nexturl"],initialize:function(e,t){t=t||{},this.user=t.user||n.utils.currentUser(),this.url=t.url||this.url,this.layout=t.layout||n.utils.PanelBuilder.Layouts.Default,this.cacheKey=t.cache,a.collections.IncrementalFetch.prototype.initialize.apply(this,arguments)},resource:function(){if(!this.cacheKey)throw new Error("Discover :: Lists :: Collection :: Please set the Resource");return"user."+(this.user.get("username")||"anonymous")+".discover."+this.cacheKey},url:function(){throw new Error("Discover :: Lists :: Collection :: Please set the URL")}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("FacebookFriends",a.collections.BaseCollection.extend({arrayKey:"users",model:a.models.User,fields:["total",{users:["name","avatar","username","following","isPrivate","numFollowers","numFollowing","backgroundUrl","highlight_colour","numStoriesPublished"]}],initialize:function(){this.username=n.utils.currentUser().get("username"),a.collections.BaseCollection.prototype.initialize.apply(this,arguments)},url:function(){return"/v4/users/"+this.username+"/facebook_friends"},resource:function(){return"v4."+this.username+".fbfriends"},cacheLocal:!0}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Base",Monaco.View.extend({constructor:function(e){this.events=this.events||{};var t={};t["tap .on-navigate"]="onNavigate",t["click .on-navigate"]="stopEvent",_.each(this.events,function(e,n){n.match(/tap(\s)+\.on-navigate/)&&delete t["tap .on-navigate"],n.match(/click(\s)+\.on-navigate/)&&delete t["click .on-navigate"]}),this.events=_.defaults(this.events,t),Monaco.View.prototype.constructor.apply(this,arguments)},initialize:function(){_.bindAll(this,"render","afterRender"),this.render=_.wrap(this.render,function(e){return e(),this.afterRender(),this})},render:function(){return this},afterRender:function(){if(a.get("transition_timer")&&!a.get("transition_after_render")){var e=this;a.set("transition_after_render",$(document).ajaxStop(function(){$(this).unbind("ajaxStop"),e.endTransitionTimer()}))}},endTransitionTimer:function(){a.get("transition_timer").loaded(),a.set("transition_after_render",null),a.set("transition_timer",null)},onNavigate:function(e){var s=$(e.currentTarget).attr("href").replace(/[^\/]*\/\/[^\/]*/,""),l=!(!e||!e.gesture)&&(e.gesture.srcEvent.metaKey||e.gesture.srcEvent.ctrlKey),i=$(e.currentTarget)[0].className.match(/(navtest-create-.+)/);t.utils.currentUser().authenticated()&&i&&n.pushEvent({category:"myworks-nav",action:"click",label:i[0]}),l||(a.router.navigate(s,{trigger:!0}),$(".modal-backdrop").hide())},stopEvent:function(e){t.utils.stopEvent(e)},getDeepLinkPage:function(){return"homepage"},getDeepLink:function(){return n.getAppLink(this.getDeepLinkPage(),this.model||{})}})),a.mixin(a.views.Base,"ErrorHandler")}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("RecommendedSearches",Monaco.Collection.extend({resource:"recommendedSearchTerms",url:"/api/v3/search/recommended",initialize:function(e,t){this.currentPosition=0,this.fetch()},parse:function(e){return e.search_terms},getNextTerm:function(){var e="";return this.length>0&&(e=this.at(this.currentPosition++).keys().toString(),this.currentPosition>=this.length&&(this.currentPosition=0)),e},getListOfSearchTerms:function(){return t.map(this.toJSON(),function(e){return Object.keys(e)[0]})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DefaultTransition",a.transitions.BaseTransition.extend({start:function(t,s,l){if((l=l||{hasHeader:!0,hasFooter:!0}).hideAnnouncements=l.hideAnnouncements||!1,t?this._pageView():(l.hasHeader&&this.setupHeader(),this.setupFooter(),this.setupAnnouncements()),t&&l.pageTitle&&l.pageTitle.length>0&&n.utils.setTitle(l.pageTitle),void 0===l.emptyContainer||l.emptyContainer||$("#app-container").empty(),$("body").hasClass("modal-open")){var i=this;$(".modal.in").one("hidden.bs.modal",function(){i.changeViews(t,s,l)}),$(".modal.in").modal("hide")}else this.changeViews(t,s,l);0===$("#header").length&&l.hasHeader&&this.setupHeader(),l.hasHeader?this.showHeader(s):void 0!==l.hasHeader&&this.hideHeader(),l.hasFooter?this.showFooter():void 0!==l.hasFooter&&this.hideFooter();var r=$("#announcements-container .writers-portal-announcement").length&&"/myworks"!==e.location.pathname;$("#header").find("#search-query").val(""),l.hideAnnouncements||r||$("#announcements-container .wattcon").length&&"/myworks"!==e.location.pathname?$("#announcements-container").addClass("hide"):$("#announcements-container").removeClass("hide"),n.utils.hideAddressBar(),this.scrollTo(e,t);var o=s instanceof a.views.Authentication||s instanceof a.views.Landing,c=parseInt(n.utils.getCookie("fs__exp"));!n.user&&c>4&&c<10&&!o&&this.showForcedSignupModal();var u=n.utils.currentUser();return!1!==u.get("has_accepted_latest_tos")||u.get("has_seen_latest_tos_notice")||this.showUpdatedPolicyNoticeModal(),s},changeViews:function(e,t,n){e&&t.el===e.el?(e.remove(),t.render(n)):e?(t.render(n),e.remove()):(n.isSSR=!0,t.render(n)),this.injectDOM(e,t,"#app-container"),void 0!==n.viewChangedCallback&&n.viewChangedCallback()},setupHeader:function(){0===$("#header-container").length&&$("#app-container").parent().prepend('<div id="header-container"></div>');var e=$("#header-container"),t=$("#header"),n=new a.views.Header;if(0===t.length){var s=n.render().$el;e.html(s),_.delay(function(){s.hammer&&_.isFunction(s.hammer)&&s.hammer({behavior:{userSelect:!0}})})}else n.setElement(e);a.set("header-obj",n)},showHeader:function(e){var t=$("#header"),n=$("#header-container");t.removeClass("hidden").css("display","table"),n.removeClass("hidden").css("display","table"),a.trigger("navbar:search:enable")},hideHeader:function(){var e=$("#header"),t=$("#header-container");e.addClass("hidden"),t.addClass("hidden")},setupFooter:function(){var e=$("#footer-container");0===$("#footer").length?e.append((new a.views.Footer).render().$el):(new a.views.Footer).setElement(e.children()[0])},showFooter:function(){$("#footer").show()},hideFooter:function(){$("#footer").hide()},setupAnnouncements:function(){$("#announcements").children().length>0&&_.each($("#announcements").children(),function(e){var t,n=$(e);n.hasClass("announcement")&&((t=n.hasClass("verify-email")?new a.views.VerifyEmail:n.hasClass("email-verified-success")?new a.views.EmailVerifiedSuccess:n.hasClass("survey")?new a.views.Survey:n.hasClass("beta")?new a.views.BetaProgram:n.hasClass("transition-group")?new a.views.TransitionGroup:n.hasClass("spielbergo")?new a.views.SpielbergoAnnouncment:new a.views.Announcement).setElement(e),a.set("announcement",t))})},scrollTo:function(e,t){t&&(t.shouldNotScrollToTop?t.shouldNotScrollToTop=void 0:e.scrollTo(0,0))},showForcedSignupModal:function(){var e=new a.views.SignUpPrompt({model:new a.models.Authsignup,title:n.utils.trans("Join Wattpad"),formType:"navbar_modal",form:"signup",forcedSignup:!0});$("#generic-modal .modal-body").html(e.render().$el),$("#generic-modal").find(".modal-dialog").addClass("signup-modal-wrapper"),$("#generic-modal").find(".modal-body").addClass("forced-signup-modal"),$("#generic-modal").modal({backdrop:"static",keyboard:!1}),$("#generic-modal").one("shown.bs.modal",function(){$(this).find("[autofocus]").focus()})},showUpdatedPolicyNoticeModal:function(){new a.views.UpdatedPolicyNotice({model:n.utils.currentUser(),title:"Updating our Terms",body:"We’re updating our Terms of Service and Privacy Policy, effective May 25th, 2018. By continuing to use Wattpad after May 25th, you’re agreeing to these new <a href='/terms' target='_blank'>Terms</a> and <a href='/privacy' target='_blank'>Privacy Policy</a>."}).showModal()}}))}(window,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ModalTransition",a.transitions.DefaultTransition.extend({start:function(t,a,s){return s=s||{hasHeader:!0,hasFooter:!0},t&&s.pageTitle&&s.pageTitle.length>0&&n.utils.setTitle(s.pageTitle),void 0===s.emptyContainer||s.emptyContainer||$("#app-container").empty(),this.changeViews(t,a,s),t?this._pageView():(s.hasHeader&&this.setupHeader(),this.setupFooter(),this.setupAnnouncements()),s.hasHeader?this.showHeader():void 0!==s.hasHeader&&this.hideHeader(),s.hasFooter?this.showFooter():void 0!==s.hasFooter&&this.hideFooter(),$("#header").find("#search-query").val(""),n.utils.hideAddressBar(),this.scrollTo(e,t),a}}))}(window,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("FadeTransition",a.transitions.DefaultTransition.extend({start:function(t,a,s){var l=!1,i=this;return void 0===(s=s||{hasHeader:!0}).emptyContainer||s.emptyContainer||$("#app-container").empty(),t&&a.el===t.el?(t.remove(),a.render(s)):t?(a.render(s),l=!0):a.render(s),this.injectDOM(t,a,"#app-container"),t||(a.$el.addClass("fade-transition-done"),s.hasHeader&&this.setupHeader(),this.setupFooter()),n.utils.supportsTransition()||(l=!1),l?a.delayedRender?this.listenTo(a,"render",function(){i.doTransition(t,a)}):this.doTransition(t,a):(t&&t.remove(),a.$el.addClass("fade-transition-done"),a.$el.children().first().css("height","auto")),n.utils.hideAddressBar(),this.scrollTo(e,t),a},doTransition:function(e,t){var n=t.$el.children().first().height(),a=e.$el.height();a>n?t.$el.children().first().height(a):e.$el.height(n),t.$el.addClass("fade-transition").children().first().on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){e.remove(),t.$el.addClass("fade-transition-done"),t.$el.children().first().css("height","auto")})}}))}(window,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("OverlayTransition",a.transitions.BaseTransition.extend({start:function(e,t,n){if($("body").hasClass("modal-open")){var a=this;$(".modal.in").one("hidden.bs.modal",function(){a.changeViews(e,t,n)}),$(".modal.in").modal("hide")}else this.changeViews(e,t,n);return t},changeViews:function(e,t,n){e.from?e.from&&e.from===t&&(e.remove(),t.$el.show()):(t.render(n),t.from=e,e.$el.hide(),this.injectDOM(e,t,"#app-container"))}}))}(window,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({"user/:username(/)(:section)(/)":["userProfile",{regexp:{username:/[\w\-]+/,section:/about|following|followers|conversations/}}]}),t.router.add({"user/:username/admin":["userProfile",{regexp:{username:/[\w\-]+/}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({":page(/)":["authentication",{regexp:{page:/(login|signup|reset|forgot)?/}}]}),t.router.add({"fb-auth(/)":["oauth-auth",{}],"oauth-auth(/)":["oauth-auth",{}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({"start/2(/)":["onboardingStep2",{}]}),t.router.add({"start/writerjourney(/)*path":["onboardingWriterJourney",{}]}),t.router.add({"start(/)":["onboardingStep1",{}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({"story/:storyid(-:slug)(/)(:section)(/)":["storyLanding",{regexp:{storyid:/[^\/\?#-]+/,slug:/[^\/\?#]*/,section:/parts/}}]}),t.router.add({"story/:storyid(-:slug)/rankings(/)":["storyRanking",{regexp:{storyid:/[^\/\?#-]+/,slug:/[^\/\?#]*/}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({notifications:["notifications",{}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.add({newsfeed:["home_landing",{}]})}(window,window.wattpad,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({"search(/:terms)":["search",{regexp:{terms:/[^\?]+/}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({"stories/:tag(/:filter)":["browse-tag",{regexp:{tag:/[^\s\?\/]+/,filter:/explore|featured|hot|rising|new|writers|lists/}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({library:["library-current-reads"]}),t.router.add({archive:["library-archive"]}),t.router.add({"list(/:list)":["library-reading-lists",{regexp:{list:/[0-9]*/}}]}),t.router.add({"list/:list(-:slug)":["library-reading-lists",{regexp:{list:/[0-9]*/,slug:/[^\/\?#]*/}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({stories:["discover",{}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({getmobile:["getmobile"]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({":partid(-:slug)(/page/:pagenum)(/comment/:commentid)(/replies/:replyid)":["storyReading",{regexp:{partid:/[0-9]+/,slug:/[^\/\?#]*/,pagenum:/[0-9]+/,commentid:/[0-9a-f_]+/i,replyid:/[0-9a-f_]+/i}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("AutocompleteDedication",Monaco.Collection.extend({initialize:function(e){e=e||{},this.userType=e.userType||"users"},resource:function(){return"autocomplete:"+this.userType+(this.searchTerm?":"+this.searchTerm:"")},url:function(){return"/apiv2/dedicate?type="+this.userType+"&term="+this.searchTerm},parse:function(e){return t.map(e,function(e){return{label:e}})},cacheLocal:!1}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("AutocompleteFollowing",Monaco.Collection.extend({resource:function(){return"autocomplete:following:"+(this.searchTerm?":"+this.searchTerm:"")},url:function(){return"/api/v3/autocomplete/following?term="+this.searchTerm},parse:function(e){return t.map(e,function(e){return{label:e.label}})},cacheLocal:!1}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("AutocompleteTag",Monaco.Collection.extend({resource:function(){return"autocomplete:tag"+(this.searchTerm?":"+this.searchTerm:"")},url:function(){return"/api/v3/autocomplete/tag?term="+this.searchTerm},parse:function(e){return t.map(e,function(e){return{label:e}})},cacheLocal:!1}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Home",a.collections.IncrementalFetchNextUrl.extend({model:a.models.DiscoverModule,arrayKey:"modules",fields:[{modules:["type","data"]},"nextUrl"],defaultUrl:function(){return"/v4/home?wp_token="+n.utils.getCookie("token")},resource:function(){return"v4.home"}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(159));!function(e,t,n,s){s.add("AutocompleteResults",Monaco.View.extend({className:"autocomplete-results",template:a.default,enabled:!0,events:function(){var e={"tap li":"onTapOption","click li":"stopEvent","mouseover li":"onHoverOption"};return e},initialize:function(e){e=e||{},this.boundField=e.boundField,this.targetSelector=e.boundField.selector,this.searchType=e.searchType||"mixed",this.title=e.title||null,this.selectedItem=null,this.anchoredResults=this.collection.length?this.collection.toJSON():[],this.searchResults=this.anchoredResults.length?this.collection.toJSON():null,t.bindAll(this,"onSearchKeyDown","onSearchInput"),$("body").on("keydown",this.targetSelector,this.onSearchKeyDown),$("body").on("input",this.targetSelector,this.onSearchInput)},render:function(){if(this.collection.length){var e={items:this.collection.toJSON(),title:this.title};this.$el.html(this.template(e)),this.showResults()}else this.hideResults();return this},callSearchAPI:t.debounce(function(e){var n=this;this.collection.searchTerm=e,Promise.resolve(this.collection.fetch()).then(function(){n.cleanup(),t.each(n.anchoredResults,function(e){n.collection.add(e,{at:0})}),n.collection.length&&(n.searchResults=n.collection.toJSON(),n.searchResults&&""!==$(n.targetSelector).val()&&(n.render(),n.showResults()))})},200),showResults:function(){this.$el.show()},hideResults:function(){this.$el.empty(),this.cleanup()},cleanup:function(){this.selectedItem=null,this.searchResults=this.anchoredResults.length?this.anchoredResults:null},selectPrev:function(){if(null===this.selectedItem)return this.selectedIndex=this.collection.length-1,this.selectedItem=this.collection.at(this.selectedIndex),void this.highlightSelected();this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.collection.length-1),this.selectedItem=this.collection.at(this.selectedIndex),this.highlightSelected()},selectNext:function(){if(null===this.selectedItem)return this.selectedIndex=0,this.selectedItem=this.collection.at(this.selectedIndex),void this.highlightSelected();this.selectedIndex++,this.selectedIndex>=this.collection.length&&(this.selectedIndex=0),this.selectedItem=this.collection.at(this.selectedIndex),this.highlightSelected()},highlightSelected:function(){this.selectedItem&&(this.$("li").removeClass("selected"),this.$("li:not(.title)").eq(this.selectedIndex).addClass("selected"),this.boundField.val(this.selectedItem.toJSON().label))},loadSelection:function(){this.selectedItem&&(this.boundField.val(this.selectedItem.toJSON().label),this.hideResults())},onHoverOption:function(e){this.selectedItem=this.collection.findWhere({label:$(e.currentTarget).text()}),this.selectedIndex=this.collection.indexOf(this.selectedItem),this.highlightSelected()},onTapOption:function(e){this.selectedItem=this.collection.findWhere({label:$(e.currentTarget).text()}),this.selectedIndex=this.collection.indexOf(this.selectedItem),this.loadSelection()},onSearchKeyDown:function(e){if((13===e.which&&this.selectedItem||38===e.which||40===e.which)&&n.utils.stopEvent(e),27!==e.which){if(this.searchResults&&!(this.searchResults.length<1))switch(e.which){case 38:this.selectPrev();break;case 40:this.selectNext();break;case 13:case 9:this.loadSelection()}}else this.hideResults()},remove:function(){return $("body").off("keydown",this.targetSelector,this.onSearchKeyDown),$("body").off("input",this.targetSelector,this.onSearchInput),this.hideResults(),Monaco.View.prototype.remove.apply(this,arguments)},onSearchInput:function(e){var t=$(this.targetSelector).val().trim();this.hideResults(),t.length>=2&&this.callSearchAPI(t)}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'  <li class="title">'+e.escapeExpression("function"==typeof(l=null!=(l=n.title||(null!=t?t.title:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:s}):l)+"</li>\n"},3:function(e,t,n,a,s){var l;return"    <li>"+e.escapeExpression("function"==typeof(l=null!=(l=n.label||(null!=t?t.label:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"label",hash:{},data:s}):l)+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"<ul>\n"+(null!=(l=n.if.call(i,null!=t?t.title:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.each.call(i,null!=t?t.items:t,{name:"each",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"</ul>\n"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("AutocompleteField",s.Mixin.create({initAutocomplete:function(e,t){this.boundFields=this.boundFields||[],this.selector=n(e.element),this.autocompleteCollection=e.collection,this.title=e.title||null,this.autocompleteResults=new a.views.AutocompleteResults({collection:this.autocompleteCollection,boundField:this.selector,title:this.title}),this.selector.parent().find(".autocomplete-results").remove(),this.selector.before(this.autocompleteResults.render().$el),t()},remove:function(e){this.autocompleteResults&&this.autocompleteResults.remove(),e()}}))}(window,_,jQuery,window.app,window.Monaco)},function(e,t,n){"use strict";!function(e,t,n,a,s,l,i){l.add("FileUpload",i.Mixin.create({events:{"tap .file-select":"onFileSelect","change .file-upload":"onFileSelected","dragenter .file-drop":"onFileDragEnter","dragleave .file-drop":"onFileDragLeave","dragover .file-drop":"onFileDragOver","dragend .file-drop":"onFileDragEnd","drop .file-drop":"onFileDrop"},FileUpload:{},setElement:function(e,t){this.attachWindow(),t(e),this.connectMixin()},render:function(e){var t=e();return this.connectMixin(),t},connectMixin:function(e){var t=this.$("[data-file-upload]");t.addClass("file-upload"),this.$(".file-select").length<1&&t.find("button").addClass("file-select"),"drop"===t.data("file-upload")&&this.$(".file-drop").length<1&&t.addClass("file-drop"),this.FileUpload.$domRegion=t,this.FileUpload.$domDrop=this.$(".file-drop"),e()},attachWindow:function(t){var n=e.document,a=this;e.$(n).unbind("dragover.fileUpload").bind("dragover.fileUpload",function(e){a.onWindowDragEnter(e)}),e.$("body").unbind("dragleave.fileUpload").bind("dragleave.fileUpload",function(e){a.onWindowDragLeave(e)}),t()},onFileSelect:function(e){this.FileUpload.file=null,this.$(".file-upload input").trigger("click"),e()},onFileSelected:function(e){this.FileUpload.file=this.$(".file-upload > input")[0].files[0],this.FileUpload.$domDrop.addClass("drop-done"),this.showFile(),e()},onFileDragEnter:function(e,t){s.stopEvent(e),this.FileUpload.$domDrop.addClass("drag-over"),t()},onFileDragLeave:function(e,t){s.stopEvent(e),t()},onFileDragOver:function(e,t){s.stopEvent(e),this.FileUpload.$domDrop.addClass("drag-over"),t()},onFileDragEnd:function(e,t){s.stopEvent(e),this.FileUpload.$domDrop.removeClass("drag-window").removeClass("drag-over"),t()},onWindowDragEnter:function(e,t){s.stopEvent(e),this.FileUpload.$domDrop.addClass("drag-window"),t()},onWindowDragLeave:function(e,t){var n=e.relatedTarget||e.toElement;s.stopEvent(e),n&&"HTML"!=n.nodeName||this.FileUpload.$domDrop.removeClass("drag-window"),t()},onFileDrop:function(e,t){s.stopEvent(e),this.FileUpload.file=e.originalEvent.dataTransfer.files[0],this.showFile(),this.onFileDragEnd(e),this.FileUpload.$domDrop.addClass("drop-done"),t()},showFile:function(e){var t=this;this.getFile().then(function(e){t.$(".file-upload > img").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==").css("background-image","url("+e.data+")")}),this.fileReceivedCallback&&this.fileReceivedCallback(),e()},base64ToArrayBuffer:function(t,n){for(var a=e.atob(t),s=a.length,l=new Uint8Array(s),i=0;i<s;i++)l[i]=a.charCodeAt(i);return n(),l.buffer},getOrientation:function(e,t){var n=null,a=new DataView(this.base64ToArrayBuffer(e));if(65496==a.getUint16(0,!1))for(var s=a.byteLength,l=2;l<s;){var i=a.getUint16(l,!1);if(l+=2,65505==i){if(1165519206==a.getUint32(l+=2,!1)){var r=18761==a.getUint16(l+=6,!1);l+=a.getUint32(l+4,r);var o=a.getUint16(l,r);l+=2;for(var c=0;c<o;c++)274==a.getUint16(l+12*c,r)&&(n=a.getUint16(l+12*c+8,r))}}else{if(65280!=(65280&i))break;l+=a.getUint16(l,!1)}}return t(),n},getFile:function(t){var n=this,a=new e.FileReader,l=this.FileUpload.file,i=new Promise(function(e,t){l?(a.onload=function(t){var a=t.target.result.match(/;base64,(.+)$/)[1],s=n.getOrientation(a);e({metadata:l,data:t.target.result,parsed:t.target.result.match(/;base64,(.+)$/)[1],orientation:s}),n.$(".file-upload > input").replaceWith(n.$(".file-upload > input").clone())},a.onerror=function(){t({code:1,message:s.trans("Error reading file")})},a.readAsDataURL(l)):t({code:0,message:s.trans("Please select a file to upload")})});return t(),i}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(163));!function(e,t,n,s,l){s.add("SocialSharing",l.Mixin.create({events:{"tap .social-share":"onSocialShareSelected","click .social-share":"stopEvent"},templates:{row:a.default},getSocialShareTemplateHTML:function(e,t,n){return this.templates[e]({links:t})},onSocialShareSelected:function(a,s){if(a.isPropagationStopped&&a.isPropagationStopped())s(a);else{var l=$(a.currentTarget),i=l.data("share-channel"),r=this.createPopup("",i,l.data("width")||600,l.data("height")||320);if(n.stopEvent(a),l.data("share-url")){var o=n.urlDecode(l.data("share-content")),c=n.urlDecode(l.data("share-text")),u=n.urlDecode(l.data("share-url")),d=n.urlDecode(l.data("url"));Promise.resolve($.get("/v4/link",{source:"web",fields:"url",content:o,medium:i,uuid:n.getCookie("wp_id"),url:d,shorten:1})).then(function(n){c=e.sprintf(c,n.url),r.location=t.utils.sprintf(u,[encodeURIComponent(c),encodeURIComponent(n.url)])})}else r.location=l.attr("href");s(a)}},createPopup:function(e,t,a,s,l){return l(),n.openPopup(e,t+" "+n.trans("Share"),a,s)},_buildSocialShareLinks:function(t,a,s){s();var l,i,r=e.vsprintf,o=n.trans,c=n.slugify,u=n.simpleShorten,d=n.urlEncode,h=n.urlEncodeWithSpace,p=_.bind(this._getContent,this),m=_.bind(this._getSourceUrl,this),f=_.bind(this._escapeSpecifiers,this),g=" #wattpad #"+c(t.group.category),v=_.reduce(t.group.tags,function(e,t){return e+=c(t.name)+","},"")+"books,wattpad";v+="story_landing"===a||"story_reading"===a?",amreading":",amwriting";var w=t.group.title;t.part?(l=t.part.url,t.group.title!=t.part.title&&(w=o("%1$s - %2$s",t.group.title,t.part.title))):l=t.group.url;var y=w;return void 0!==t.user&&"string"==typeof t.user.twitter&&t.user.twitter.length>0&&(y=o("%1$s by @%2$s",w,t.user.twitter)),i={share:w,combined:g+" "+u(t.group.description,300),twitter:y+" #wattpad",tumblr:o("<b>%1$s</b> (on Wattpad) %%s\n\n%2$s",f(w),f(u(t.group.description)))},[{name:"facebook",icon:"fa-facebook",label:o("Share via Facebook"),href:r("https://www.facebook.com/sharer.php?u=%s",[d(m("facebook",l,a))])},{name:"twitter",icon:"fa-twitter",label:o("Share via Twitter"),content:p(a),text:i.twitter,urlTemplate:"https://twitter.com/intent/tweet?text=%s&url=%s",url:l,href:r("https://twitter.com/intent/tweet?text=%s&url=%s",[d(i.twitter),d(m("twitter",l,a))])},{name:"pinterest",icon:"fa-pinterest",label:o("Share via Pinterest"),href:r("https://www.pinterest.com/pin/create/button/?media=%s&description=%s&url=%s",[d(t.group.cover),d(i.combined),d(m("pinterest",l,a))])},{name:"tumblr",icon:"fa-tumblr",label:o("Share via Tumblr"),text:i.tumblr,urlTemplate:r("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%%s",[d(t.group.cover),d(v),d(l)]),content:p(a),url:l,href:r("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%s",[d(e.wattpad.siteRoot+"/banner?id="+t.group.id),d(r(i.tumblr,[m("tumblr",l,a)])),d(v),d(l),d(m("tumblr",l,a))])},{name:"email",icon:"fa-inbox",nopopup:!0,label:o("Share via Email"),href:r("mailto:?subject=%s&body=%s%%0A%s",[h(i.share),h(i.share),d(m("email",l,a))])}]},buildSocialShareLinksForStory:function(e,t,n){t=t||"story_landing";var a,s=e.attributes||e;s.categoryObject&&(a=s.categoryLabels&&s.categoryLabels.length>0?s.categoryLabels[0].name:s.categoryObject.name);var l=_.map(s.tags,function(e){return{name:e}});a&&l.concat(a);var i={group:{id:s.id,title:s.title,cover:s.cover,category:a,url:s.url,description:s.description,tags:l},user:{twitter:s.user.twitter}},r=this._buildSocialShareLinks(i,t),o=n(e)||[];return _.union(r,o)},buildSocialShareLinksForPart:function(e,t){var n=this._buildSocialShareLinks(e,"story_reading"),a=t(e)||[];return _.union(n,a)},buildSocialShareLinksForProfile:function(a,s){var l=e.vsprintf,i=n.trans,r=n.simpleShorten,o=n.urlEncode,c=n.urlEncodeWithSpace,u=_.bind(this._getContent,this),d=_.bind(this._getSourceUrl,this),h=(_.bind(this._escapeSpecifiers,this),t.siteRoot+"/"+a.username),p={default:i("Check out %s's profile on Wattpad",a.name),twitter:i("Check out %s's profile on #Wattpad",a.name)};n.currentUser().get("username")===a.username&&(p={default:i("Check out my profile on Wattpad, I'm %s",a.name),twitter:i("Check out my profile on #Wattpad, I'm %s",a.name)});var m=p.default+" "+d("tumblr",h,"profile")+" "+r(a.description,300);return[{name:"facebook",icon:"fa-facebook",label:i("Share via Facebook"),href:l("https://www.facebook.com/sharer.php?u=%s",[o(d("facebook",h,"profile"))])},{name:"twitter",icon:"fa-twitter",label:i("Share via Twitter"),content:u("profile"),text:p.twitter,urlTemplate:"https://twitter.com/intent/tweet?text=%s&url=%s",url:h,href:l("https://twitter.com/intent/tweet?text=%s&url=%s",[o(p.twitter),o(d("twitter",h,"profile"))])},{name:"pinterest",icon:"fa-pinterest",label:i("Share via Pinterest"),href:l("https://www.pinterest.com/pin/create/button/?media=%s&description=%s&url=%s",[o(a.avatarUrl),o(p.default+" "+r(a.description,300)),o(d("pinterest",h,"profile"))])},{name:"tumblr",icon:"fa-tumblr",label:i("Share via Tumblr"),text:m,urlTemplate:l("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%%s",[o(a.avatarUrl),o("books,wattpad,amreading"),o(h)]),content:u("profile"),url:h,href:l("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%s",[o(a.avatarUrl),o(m),o("books,wattpad,amreading"),o(h),o(d("tumblr",h,"profile"))])},{name:"email",icon:"fa-inbox",nopopup:!0,label:i("Share via Email"),href:l("mailto:?subject=%s&body=%s%%0A%s%%0A%s",[c(p.default),c(p.default),o(d("email",h,"profile")),c(a.description)])}]},buildSocialShareLinksForReadingList:function(t,a){var s=e.vsprintf,l=n.trans,i=n.slugify,r=n.urlEncode,o=n.urlEncodeWithSpace,c=_.bind(this._getContent,this),u=_.bind(this._getSourceUrl,this),d=_.bind(this._escapeSpecifiers,this),h=e.wattpad.siteRoot+"/list/"+t.id+"-"+i(t.name),p={share:l("%s - A reading list by %s",t.name,t.author),tumblr:l("Check out this reading list <b>%s</b> on Wattpad %%s",d(t.name))},m=r(p.share),f=r(p.share+" #wattpad"),g=[{name:"facebook",icon:"fa-facebook",label:l("Share via Facebook"),href:s("https://www.facebook.com/sharer.php?u=%s",[r(u("facebook",h,"list"))])},{name:"twitter",icon:"fa-twitter",label:l("Share via Twitter"),href:s("https://twitter.com/intent/tweet?text=%s&url=%s",[f,r(u("twitter",h,"list"))])},{name:"pinterest",icon:"fa-pinterest",label:l("Share via Pinterest"),href:s("https://www.pinterest.com/pin/create/button/?media=%s&description=%s&url=%s",[r(t.cover),m,r(u("pinterest",h,"list"))])},{name:"tumblr",icon:"fa-tumblr",label:l("Share via Tumblr"),text:r(p.tumblr),urlTemplate:r(s("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%%s",[r(t.cover),r("books,amreading,wattpad"),r(h)])),content:r(c("list")),url:r(h),href:s("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%s",[r(t.cover),r(s(p.tumblr,[u("tumblr",h,"list")])),r("books,amreading,wattpad"),r(h),r(u("tumblr",h,"list"))])},{name:"email",icon:"fa-inbox",nopopup:!0,label:l("Share via Email"),href:s("mailto:?subject=%s&body=%s%%0A%s",[o(p.share),o(p.share),r(u("email",h,c("list")))])}],v=a(t)||[];return _.union(g,v)},buildSocialShareLinksForTag:function(t,a){var s=e.vsprintf,l=n.trans,i=(n.slugify,n.urlEncode),r=_.bind(this._getContent,this),o=_.bind(this._getSourceUrl,this),c=e.wattpad.siteRoot+"/stories/"+t.tag,u=l("Find %s stories you'll love.",t.tag)+" "+l("Read free books and stories about %s on Wattpad.",t.tag),d=l("You should read #%s stories on Wattpad",t.tag),h="tag";t.isHot?(c+="/hot",u=l("Find the hottest %s stories you'll love. Read hot and popular stories about %s on Wattpad.",t.tag,t.tag),d=l("You should read hot #%s stories on #Wattpad",t.tag),h="tag_hot"):t.isNew?(c+="/new",u=l("Find the latest %s stories you'll love. Read new stories about %s on Wattpad.",t.tag,t.tag),d=l("You should read new #%s stories on #Wattpad",t.tag),h="tag_new"):t.isList&&(c+="/lists",u=l("Find good reading lists of %s stories you'll love. Browse collections of favorite stories about %s on Wattpad.",t.tag,t.tag),d=l("You should read collections of #%s stories on #Wattpad",t.tag),h="tag_list");var p={share:u,tumblr:u},m="books,amreading,wattpad,"+t.tag,f=i(p.share),g=[{name:"facebook",icon:"fa-facebook",label:l("Share via Facebook"),href:s("https://www.facebook.com/sharer.php?u=%s",[i(o("facebook",c,h))])},{name:"twitter",icon:"fa-twitter",label:l("Share via Twitter"),href:s("https://twitter.com/intent/tweet?text=%s&url=%s",[i(d),i(o("twitter",c,h))])},{name:"pinterest",icon:"fa-pinterest",label:l("Share via Pinterest"),href:s("https://www.pinterest.com/pin/create/button/?media=%s&description=%s&url=%s",[i(t.pinterestImage),f,i(o("pinterest",c,h))])},{name:"tumblr",icon:"fa-tumblr",label:l("Share via Tumblr"),text:p.tumblr,urlTemplate:s("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%%s",[i(t.tumblrImage),i(m),i(c)]),content:r(h),url:c,href:s("https://tumblr.com/widgets/share/tool?posttype=photo&content=%s&caption=%s&tags=%s&canonicalUrl=%s&clickthroughUrl=%s",[i(t.tag),i(s(p.tumblr,[o("tumblr",c,h)])),i(m),i(c),i(o("tumblr",c,h))])}],v=a(t)||[];return _.union(g,v)},_getContent:function(e,t){var n="share_info";switch(e){case"list":n="share_readinglist";break;case"story_landing":n="share_info";break;case"story_reading":n="share_reading";break;case"myworks":n="share_myworks";break;case"myworks_details":n="share_myworks_details";break;case"profile":n="share_profile";break;case"tag":n="share_tag";break;case"tag_hot":n="share_tag_hot";break;case"tag_new":n="share_tag_new";break;case"tag_list":n="share_tag_list"}return t(),n},_getSourceUrl:function(e,n,a,s){var l=this._getContent(a);return s(),t.utils.addSource(n,"web",e,l)},_escapeSpecifiers:function(e,t){return t(),e.replace(/%/g,"%%")},stopEvent:function(e,t){n.stopEvent(e),t()}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">"+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,18,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n"},2:function(e,t,n,a,s){return' social-share" target="_blank'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div class="social-share-links">\n'+(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.links:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("MediaSharing",s.Mixin.create({events:{"tap #media-share .share-facebook":"onShareFacebook","click #media-share .share-facebook":"stopEvent","tap #media-share .share-pinterest":"onSharePinterest","click #media-share .share-pinterest":"stopEvent"},onShareFacebook:function(a,s){n.stopEvent(a),t.utils.pushEvent({category:"reading",action:"shareinlinemedia:facebook"});var l=$(a.currentTarget).parent().parent().parent().find("img").attr("src"),i=e.decodeURIComponent($(a.currentTarget).attr("href").slice(38)),r=this.model.get("group").title+" - "+this.model.get("title"),o=this.model.get("group").description;l=l.replace(/w=\d+&h=\d+/,"w=1200&h=600"),t.facebook_share_dialog(i,r,o,l),s(a)},preparePinterestUrl:function(e,t,n){return e=e.replace(/w=\d+&h=\d+/,"w=735&h=1102"),t=t.replace(/media=.*&description/g,"media="+e+"&description"),n(),t},onSharePinterest:function(e,n){t.utils.pushEvent({category:"reading",action:"shareinlinemedia:pinterest"}),n(e)}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("StoryAdminManager",s.Mixin.create({events:{"tap    .on-admin-dropdown":"onAdminDropdown","click  .on-admin-dropdown":"stopEvent"},initAdminPanel:function(e,n,s){if(t.utils.currentUser().get("isSysAdmin")||t.utils.currentUser().get("ambassador")){var l=e instanceof a.models.StoryPartModel,i=l?e.get("group").user.username:e.get("user").username,r=new a.models.User({username:i}),o={fresh:!0,data:{fields:r._recursiveFields(r.fields.concat("age","country"))}},c=l?e:null,u=l?new a.models.StoryModel({id:e.get("group").id,categories:e.get("group").categories,firstPartId:e.get("id"),language:e.get("group").language.id,deleted:e.get("group").deleted}):e,d=this;Promise.all([r.loaded(o),$.get("/api/v3/users/"+i+"/stories?fields=stories(readCount)&limit=200")]).then(function(e){var t=0;e[1].stories&&e[1].stories.length&&_.each(e[1].stories,function(e){t+=e.readCount}),r.set("totalReads",t),d.adminView=new a.views.StoryAdmin({author:r,story:u,part:c}),d.$(n).append(d.adminView.render().$el)})}s()},onAdminDropdown:function(e,t){var n=$(e.currentTarget).parent(".button-group");n.hasClass("open")?n.removeClass("open"):n.addClass("open"),t()}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";!function(e,t,n,a,s,l,i,r){l.add("DragAndSort",i.Mixin.create({events:{"touchstart .drag-handle":"onMouseDown","mousedown .drag-handle":"onMouseDown"},DragAndSort:{clicked:!1,drop:"Before",dragging:!1,element:null,elementUnder:null,elementPlaceHolder:null,minimumDelta:10,scrollRate:0,intervalPointer:null,windowThird:0,maxScroll:0,mouseEvents:{move:"mousemove",end:"mouseup"},touchEvents:{move:"touchmove",end:"touchend"}},setElement:function(e,t){t(e),this.setupDOM()},render:function(e){var t=e();return this.setupDOM(),t},setupDOM:function(e){var t=this.DragAndSort;this.$("[data-drag]").children().addClass("drag-item"),t.elementPlaceHolder=t.elementPlaceHolder||n('<div class="drag-item-placeholder drag-item">'),e()},resolveDrag:function(e){var t=this.DragAndSort;t.element.css("top",t.offsetY+t.scrollOffset+t.startoffset),e()},movePlaceholder:function(e){var t=this.DragAndSort,n=t.elementPlaceHolder.next(),a=t.elementPlaceHolder.prev(),s=t.offsetY+t.scrollOffset+t.startoffset;n[0]===t.element[0]&&(n=n.next()),n.length&&s>n.position().top?(t.elementPlaceHolder.detach(),n.after(t.elementPlaceHolder)):a.length&&s<t.elementPlaceHolder.position().top&&(t.elementPlaceHolder.detach(),a.before(t.elementPlaceHolder)),e()},onMouseDown:function(t,a){var l,i,r=this,o=this.DragAndSort,c=t.touches||t.originalEvent.touches;i=c&&c.length?c[0]:t,1!==t.which&&"mousedown"===t.type||(s.stopEvent(t),o.clicked=!0,o.startY=i.clientY,o.scrollOffset=0,o.scrollRate=0,o.scrollY=0,o.windowThird=n(e).height()/3,o.maxScroll=n(e.document).height()-n(e).height()-50,o.element=l=n(t.currentTarget).parents(".drag-item"),o.elementPlaceHolder.css("height",l.outerHeight()).css("width",l.width()),l.width(l.width()),n(e.document).on(this.DragAndSort.mouseEvents.move,function(e){r.onDrag(e)}).on(this.DragAndSort.mouseEvents.end,function(e){r.onDragEnd(e)}).on(this.DragAndSort.touchEvents.move,function(e){r.onDrag(e)}).on(this.DragAndSort.touchEvents.end,function(e){r.onDragEnd(e)}),a())},onDrag:function(n,a){var l=this.DragAndSort,i=n&&(n.touches||n.originalEvent.touches);if(t.isEmpty(i))r=n;else var r=i[0];s.stopEvent(n),l.clientY=r?r.clientY:l.clientY,l.offsetY=l.clientY-l.startY+l.scrollY,l.clicked&&!l.dragging&&(l.offsetY>l.minimumDelta||l.offsetY<-l.minimumDelta)&&(l.startoffset=l.element.position().top,l.scrollStart=e.pageYOffset||e.document.documentElement.scrollTop,l.element.before(l.elementPlaceHolder),l.element.addClass("active-drag"),l.dragging=!0),l.clientY<l.windowThird?l.scrollRate=-Math.round((l.windowThird-l.clientY)/l.windowThird*20):l.clientY>2*l.windowThird?l.scrollRate=Math.round((l.clientY-2*l.windowThird)/l.windowThird*20):(l.scrollRate=0,l.intervalPointer&&(e.clearInterval(l.intervalPointer),l.intervalPointer=null)),0===l.scrollRate||l.intervalPointer||(l.intervalPointer=this.onScroll()),l.dragging&&(this.resolveDrag(),this.movePlaceholder()),a()},onScroll:function(){var t=this,n=this.DragAndSort;return e.setInterval(function(){(e.scrollY>100&&n.scrollRate<0||e.scrollY<n.maxScroll&&n.scrollRate>0)&&(e.scrollBy(0,n.scrollRate),n.scrollY+=n.scrollRate,t.onDrag())},20)},onDragEnd:function(t,a){var l=this.DragAndSort;s.stopEvent(t),n(e.document).off(this.DragAndSort.mouseEvents.move).off(this.DragAndSort.mouseEvents.end).off(this.DragAndSort.touchEvents.move).off(this.DragAndSort.touchEvents.end),l.intervalPointer&&(e.clearInterval(l.intervalPointer),l.intervalPointer=null),l.clicked=!1,!0===l.dragging&&(l.dragging=!1,l.element.removeAttr("style"),l.element.removeClass("active-drag"),l.elementPlaceHolder.replaceWith(l.element),a())}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco,window.Promise)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("AffixElement",s.Mixin.create({initialize:function(e,t){this.afxElements=[],t(e)},initAffix:function(e,t,a,s){e="string"==typeof e?n(e):e,t="string"==typeof t?n(t):t,this.afxElements.push({element:e,wrap:t,offset:a,height:e.height()}),"static"===t.css("position")&&t.css("position","relative"),s()},affixOnScroll:function(a){t.forEach(this.afxElements,function(t){var a=n(e).scrollTop(),s=t.wrap.offset().top,l=s+t.wrap.height();s>a+t.offset?(t.element.css({position:"",top:""}),t.element.removeClass("affixed bottomed")):s<=a+t.offset&&l>a+t.height+t.offset?(t.element.css({position:"fixed",top:t.offset+"px"}),t.element.addClass("affixed").removeClass("bottomed")):(t.element.css({position:"absolute",top:l-s-t.height+"px"}),t.element.addClass("bottomed").removeClass("affixed"))}),a()}}))}(window,_,jQuery,window.app,window.Monaco)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("ValidationView",Monaco.Mixin.create({events:{"keyup    .has-feedback input":"clearValidation","blur     .has-feedback input":"validateInput","change   .has-feedback input":"clearAndValidateInput","change   .has-feedback select.validate":"clearAndValidateInput"},initialize:function(e,t){this.bindValidationEvents(),t(e)},bindValidationEvents:function(e){this.listenTo(this.model,"attr:valid",this.setInputValid),this.listenTo(this.model,"attr:invalid",this.setInputInvalid),e()},setInputValid:function(e,t){var n=this.$('.has-feedback[data-attr="'+e+'"]').addClass("valid");this.$(".on-invalid").each(function(){n.children(".on-invalid")[0]===this?$(this).tooltip("destroy"):$(this).tooltip("hide")}),t()},setInputInvalid:function(e,t,n){var a=this.$('.has-feedback[data-attr="'+e+'"]').addClass("invalid").find(".on-invalid");this.$el.find(".on-invalid").each(function(){a[0]===this?$(this).tooltip("destroy"):$(this).tooltip("hide")}),a.tooltip({trigger:"click hover manual",title:t,html:!0}).tooltip("show"),n()},validateInput:function(t,n){var a=$(t.currentTarget),s=a.parents(".has-feedback"),l=s.data("attr"),i=this;this.activateTooltips(),s.hasClass("valid")||s.hasClass("invalid")||s.hasClass("warning")||(this.model.set(l,a.val()),this.timeout=e.setTimeout(function(){i.model.validate(l,{})},120)),n()},clearValidation:function(e,t){var n=$(e.currentTarget).parents(".has-feedback");(n.hasClass("valid")||n.hasClass("invalid")||n.hasClass("warning"))&&n.removeClass("valid invalid warning").children(".on-invalid").tooltip("destroy"),t()},clearAndValidateInput:function(e,t){this.clearValidation(e),this.validateInput(e),t()},activateTooltips:function(e){var t=this.$el.find(".on-invalid");t.off("show.bs.tooltip").on("show.bs.tooltip",function(e){var n=$(e.currentTarget);t.each(function(){n[0]!==this&&$(this).tooltip("hide")})}),e()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("FacebookConnect",Monaco.Mixin.create({events:{"tap .btn-facebook":"onFacebookConnect","click .btn-facebook":"stopEvent","tap .btn-facebook-link":"onFacebookLink","click .btn-facebook-link":"stopEvent"},initialize:function(n,a){if(n=n||{},this.nextUrlFirstPart=n.nextUrlFirstPart,t.bindAll(this,"onFacebookConnect","onFacebookLink","getPermissions","facebookSend"),0===$("#fb-root").length){var s=e.document.createElement("script");s.async=1,s.src="https://connect.facebook.net/en_US/sdk.js",s.id="facebook-jssdk",$("body").append("<div id='fb-root'></div>").append(s)}a(n)},tries:0,onFacebookConnect:function(t,a){var s=this.nextUrlFirstPart||e.location.href,l=n.utils.getNextUrl(s);this.getPermissions(function(){e.location.href="/fb-auth?nextUrl="+l+"&access_token="+e.FBStatus.accessToken}),a()},onFacebookLink:function(t,s){this.getPermissions(function(){Promise.resolve($.ajax({type:"PUT",url:"/api/v3/users/"+a.currentUser().get("username"),data:{fb_access_token:e.FBStatus.accessToken}})).then(function(){e.location.reload()}).catch(function(e){$(".errorMessage").html(n.utils.trans(e.responseJSON.message)),$(".alert-danger").removeClass("hidden")})}),s()},getPermissions:function(t,s){var l=this,i=a.currentUser().get("facebook")?e.wp.facebook_reprompt_permission:e.wp.facebook_prompt_permission;i?i("email,user_birthday,user_friends",function(){l.facebookConnected&&a.currentUser().get("facebook")?l.facebookConnected():"function"==typeof t&&t()}):this.tries>4?e.alert(n.utils.trans("Error logging in through Facebook. Please refresh and try again.")):(this.tries++,e.setTimeout(l.getPermissions,500)),s()},facebookSend:function(e,t){FB.ui({method:"send",link:e})}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("TwitterConnect",Monaco.Mixin.create({twitterShare:function(e,t){e=e||{},a.openPopup("https://twitter.com/intent/tweet?"+$.param(e),a.trans("Share Wattpad With Twitter"),575,400)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("GoogleAuth",Monaco.Mixin.create({events:{"tap .btn-google":"onGoogleAuth"},initialize:function(t,n){0===$("#google-root").length&&($.getScript("https://apis.google.com/js/api.js",function(){e.gapi.load("client:auth2")}),$("body").append("<div id='google-root'></div>")),n(t)},onGoogleAuth:function(t,s){e.gapi.auth2.authorize({client_id:n.googleClientId,scope:"profile openid email"},function(t){if(t.access_token){var n={token:t.access_token,type:"google"},s=encodeURIComponent(JSON.stringify(n));e.location.href="/oauth-auth?nextUrl="+a.getNextUrl()+"&data="+s}}),s()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("AuthPromptManagement",Monaco.Mixin.create({title:function(){return n.utils.trans("Join Wattpad")},subtitle:function(){return n.utils.trans("Add stories to your library and read them offline.")},onAuthPrompt:function(a,l){if(n.utils.currentUser().authenticated()){var i=this.options&&this.options.nextUrl||"";n.utils.redirectToServer(decodeURIComponent(i))}else if(0===$("#generic-modal").length)s.router.navigate("/login?nexturl="+n.utils.getNextUrl(e.location.href),{trigger:!0,replace:!0});else{var r=new s.views.SignUpPrompt({model:new s.models.Authsignup,title:t.result(this,"title"),subtitle:t.result(this,"subtitle"),formType:"modal",form:a.currentTarget.getAttribute("data-form")});$("#generic-modal .modal-body").html(r.render().$el),$("#generic-modal").modal("show"),$("#generic-modal").one("shown.bs.modal",function(){$(this).find("[autofocus]").focus()})}l(a)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("VoteManagement",s.mixins.AuthPromptManagement.extend({events:{"tap .on-vote":"onVote","click .on-vote":"stopEvent"},voteButton:".on-vote",title:function(){return n.utils.trans("Sign up to Vote")},subtitle:function(){return n.utils.trans("Sign up for Wattpad and start commenting, saving stories, reading them offline, or writing your own.")},onVote:function(e,t){var a=this,l=this.$("#vote-tool-tip");if(this.stopEvent(e),n.utils.currentUser().authenticated()){if(!n.utils.currentUser().get("verified_email")){var i=new s.views.PleaseVerifyModal;return $("#generic-modal .modal-body").html(i.render().$el),void $("#generic-modal").modal({})}this.$(this.$voteTooltip).tooltip({trigger:"manual",selector:"#vote-tool-tip"}),this.$(this.voteButton).prop("disabled",!0);var r=!this.model.get("voted"),o=r?this.model.get("voteCount")+1:this.model.get("voteCount")-1;s.trigger("app:story:vote",{voted:r,voteCount:o,storyId:a.model.get("id")}),this.model.vote().then(function(){var n=a.$(".vote-text"),s=a.$(".footer-vote .fa-vote");a.$(a.voteButton).prop("disabled",!1),a.model.get("voted")?(n.html("Voted"),s.removeClass("fa-wp-neutral-2"),s.addClass("fa-wp-base-1")):(n.html("Vote"),s.removeClass("fa-wp-base-1"),s.addClass("fa-wp-neutral-2")),t(e)}).catch(function(i){s.trigger("app:story:vote",{voted:a.model.get("voted"),voteCount:a.model.get("voteCount"),storyId:a.model.get("id")}),i.message&&l.attr("data-original-title",n.utils.trans(i.message)),l.tooltip("show"),setTimeout(function(){l.tooltip("hide")},3e3),a.$(a.voteButton).prop("disabled",!1),t(e)})}else this.onAuthPrompt(e)},stopEvent:function(e,t){n.utils.stopEvent(e),t()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){var l,i;s.add("LibraryManagement",s.mixins.AuthPromptManagement.extend({events:{"tap .on-add-story":"onAddToLibrary","click .on-add-story":"stopEvent","tap .on-remove-story":"onRemoveFromLibrary","click .on-remove-story":"stopEvent","tap .on-library-login":"onAuthPrompt","click .on-library-login":"stopEvent"},libraryButton:".btn-library",initialize:function(e,t){t(e),n.utils.currentUser().library().on("added",function(e){this.onAddedToLibrary(e.get("id"))},this),n.utils.currentUser().library().on("removed",function(e){this.onRemovedFromLibrary(e)},this)},setElement:function(e,n){var a=$(e).find(this.libraryButton);t.each(a,function(e){var t=$(e).data("story-id"),n=this.$(this.libraryButton+"[data-story-id='"+t+"']");n&&$(e).replaceWith(n[0])},this),n(e)},render:function(e){var t=e();return this.setupDOM(),t},setupDOM:function(e){var t=n.utils.currentUser(),a=this.$(this.libraryButton),s=a.data("storyId");a.prop("disabled",!0),t.authenticated()?s&&i.addToStoryQueue(s,this):(a.prop("disabled",!1),this.setLibraryLoginState()),e()},setLibraryLoginState:function(e){this.$(this.libraryButton).addClass("on-library-login"),e()},onAddToLibrary:function(e,t){var l=a.currentUser(),r=$(e.currentTarget).data("story-id"),o=new s.models.StoryModel({id:r});s.local.clear(l.library().resource()),l.library().saveItem(o),i.inLib[r]=!0,n.utils.stopEvent(e),t(e)},onRemoveFromLibrary:function(e,t){var l=a.currentUser(),r=$(e.currentTarget).data("story-id"),o=new s.models.StoryModel({id:r});s.local.clear(l.library().resource()),l.library().deleteItem(o),i.inLib[r]=!1,n.utils.stopEvent(e),t(e)},onAddedToLibrary:function(e,t){$(this.libraryButton+"[data-story-id='"+e+"']").removeClass("on-add-story").addClass("on-remove-story"),t(e)},onRemovedFromLibrary:function(e,t){$(this.libraryButton+"[data-story-id='"+e+"']").removeClass("on-remove-story").addClass("on-add-story"),t(e)},stopEvent:function(e,t){n.utils.stopEvent(e),t()}})),(l=function(){this.storyQueue=[],this.inLib={}}).prototype.addToStoryQueue=function(e,n){var a={storyId:e,ctx:n};if(void 0!==this.inLib[e]){var s=this.inLib[e]?"onAddedToLibrary":"onRemovedFromLibrary";t.defer(function(){n[s](e),n.$(n.libraryButton).prop("disabled",!1)})}else this.storyQueue=t.compact(this.storyQueue),t.find(this.storyQueue,a)||(this.storyQueue.push(a),this.batchFetch())},l.prototype.batchFetch=t.debounce(function(){if(this.storyQueue=t.compact(this.storyQueue),this.storyQueue.length>0){var e=t.pluck(t.unique(this.storyQueue,"storyId"),"storyId");this.fetchStoryCollections(e.join("%2C"))}},100,{maxWait:200}),l.prototype.fetchStoryCollections=function(e){var n=new s.models.StoryInLists({storyId:e}),a=this;Promise.resolve(n.fetch()).then(function(e){var n=e.collections;t.each(a.storyQueue,function(e,t){if(e&&n[e.storyId]){var s=n[e.storyId].library,l=s?"onAddedToLibrary":"onRemovedFromLibrary";a.inLib[e.storyId]=s,e.ctx[l](e.storyId),e.ctx.$(e.ctx.libraryButton).prop("disabled",!1),delete a.storyQueue[t]}})}).catch(function(e){t.each(a.storyQueue,function(t,n){t.ctx.handlePromiseExpected(e)})})},i=new l,e.wattpad.StoryInLibService=i}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(7));!function(e,t,n,s,l){l.add("StoryInListsManagement",l.mixins.AuthPromptManagement.extend({events:{"tap .on-library-login":"doAuthPrompt","click .on-library-login":"stopEvent","tap .on-modify-list":"onModifyList","click .on-modify-list":"stopEvent","tap .on-lists-add-clicked":"onAddClicked","click .on-lists-add-clicked":"stopEvent","tap .on-create-list":"onCreateList","click .on-create-list":"stopEvent","focus .list-name":"clearError"},templates:{list:a.default},readingLists:null,storyInLists:null,listsContainer:"ul.lists-menu",addButton:".btn-story-lists",setElement:function(e,t){t(e),this.$(this.addButton).length>0&&this.setupDOM()},render:function(e){var t=e();return this.setupDOM(),t},setupDOM:function(e){var t=n.utils.currentUser();this.$(this.addButton).prop("disabled",!0),t.authenticated()?this.renderAddButtons():(this.$(this.addButton).prop("disabled",!1),this.setLoginState()),e()},setLoginState:function(e){this.$(this.addButton).addClass("on-library-login"),e()},renderAddButtons:function(e){this.$(this.addButton).addClass("on-lists-add-clicked").prop("disabled",!1),e()},onAddClicked:function(e,t){t(e);var n=$(e.currentTarget).data("story-id"),a=$(e.currentTarget);this.fetchListsData(a,n,this.onAddToListsReady)},fetchListsData:function(e,a,s,i){var r,o=n.utils.currentUser(),c=this.$(this.listsContainer+"[data-story-id='"+a+"']"),u=this;this.readingLists=new l.collections.ReadingLists(null,{username:o.get("username"),limit:200}),this.storyInLists=new l.models.StoryInLists({storyId:a}),Promise.all([this.readingLists.fetchNextSet(),this.storyInLists.fetch()]).then(function(){c.empty(),r={id:0,name:n.utils.trans("My Library (Private)"),inList:u.storyInLists.get(a).library||!1,"user-device":l.get("device"),icon:"fa-library"},c.append(u.templates.list(r)),u.listenTo(o.library(),"added",function(e){u.onListModified(!0,0,e.get("id"))}),u.listenTo(o.library(),"removed",function(e){u.onListModified(!1,0,e)}),t.each(u.readingLists.models,function(e){r={id:e.get("id"),name:e.get("name"),inList:u.storyInLists.get(a)[e.get("id")]||!1,"user-device":l.get("device"),icon:"fa-reading-list"},c.append(this.templates.list(r)),this.listenTo(e,"list:added",function(e,t){u.onListModified(!0,e,t)}),this.listenTo(e,"list:removed",function(e,t){u.onListModified(!1,e,t)})},u),u.checkListScrollable(c),s&&s.call(u,e,a)}),i(e,a,s)},onModifyList:function(e,t){var n,a=s.currentUser(),i=$(e.currentTarget).data("list-id"),r=$(e.currentTarget).parent().parent().data("story-id"),o=new l.models.StoryModel({id:r}),c=this.storyInLists.get(r);0===i?c.library?(a.library().deleteItem(o),c.library=!1,this.storyInLists.set(r,c)):(a.library().saveItem(o),c.library=!0,this.storyInLists.set(r,c)):(n=this.readingLists.get(i),c[i]?(n.stories().remove(o),c[i]=!1,this.storyInLists.set(r,c)):(n.stories().add(o),c[i]=!0,this.storyInLists.set(r,c))),$(e.currentTarget).prop("disabled",!0);var u=$(e.currentTarget).children(".status");u.children(".in-list").addClass("hidden"),u.children(".spinner").removeClass("hidden"),t(e)},onListModified:function(e,t,a,s){var i=this.$(this.listsContainer+"[data-story-id='"+a+"']").children("li").children("a[data-list-id= "+t+"]");i.find(".status .spinner").addClass("hidden"),e?(i.find(".status .in-list").removeClass("hidden"),i.addClass("in-list")):(i.find(".status .in-list").addClass("hidden"),i.removeClass("in-list")),i.prop("disabled",!1),0===t?l.local.clear(n.utils.currentUser().library().resource()):(l.local.clear(this.readingLists.resource()),l.local.clear(this.readingLists.get(t).stories().resource())),s()},onCreateList:function(t,a){var i=this.$("input.list-name").val().trim(),r=$(t.currentTarget).data("story-id"),o=this;if(i.length>0){var c=new l.models.ReadingList;this.clearError(),this.listenToOnce(c,"sync",function(e){o.onListCreated(e,r)}),l.local.clear(this.readingLists.resource()),c.save({name:i,stories:r.toString()},{error:function(t,n){var a=JSON.parse(n.responseText);e.alert(a.message)}}).done(function(){s.cacheBust("ReadingLists",{username:s.currentUser().get("username")})})}else this.$(".inputs").addClass("has-error"),this.$("input.list-error-placeholder").attr("placeholder",n.utils.trans("Reading list name required")),n.utils.stopEvent(t);a()},onListCreated:function(e,t,n){var a,s,i=this,r=this.storyInLists.get(t);r[e.get("id")]=!0,this.storyInLists.set(t,r),this.readingLists.add(e),this.listenTo(e,"list:added",function(e,t){i.onListModified(!0,e,t)}),this.listenTo(e,"list:removed",function(e,t){i.onListModified(!1,e,t)}),a=this.$(this.listsContainer+"[data-story-id='"+t+"']"),s={id:e.get("id"),name:e.get("name"),inList:!0,"user-device":l.get("device"),icon:"fa-reading-list"},a.append(this.templates.list(s)),a.scrollTop(a[0].scrollHeight),this.checkListScrollable(a),this.$("input.list-name").val(""),n()},stopEvent:function(e,t){n.utils.stopEvent(e),t()},clearError:function(e){this.$(".inputs").removeClass("has-error"),this.$("input.list-error-placeholder").attr("placeholder",n.utils.trans("Add new reading list...")),e()},checkListScrollable:function(e,t){0!==e.length&&(e[0].scrollHeight>200?e.addClass("scrollable"):e.removeClass("scrollable"),t())},doAuthPrompt:function(e,t){var n=this;$("body").hasClass("modal-open")?($(".modal.in").one("hidden.bs.modal",function(){n.onAuthPrompt(e)}),$(".modal.in").modal("hide")):n.onAuthPrompt(e),t()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("FollowManager",Monaco.Mixin.create({events:{"tap .on-follow":"onFollow","click .on-follow":"stopEvent","tap .on-unfollow":"onUnfollow","click .on-unfollow":"stopEvent","tap .on-follow-login":"onFollowLogin","click .on-follow-login":"stopEvent"},followButton:".btn-fan",initialize:function(e,t){s.get("followStatus")||s.set("followStatus",{}),t(e)},setElement:function(e,n){var a=$(e).find(this.followButton);t.each(a,function(e){var t=$(e).data("target"),n=this.$(this.followButton+"[ data-target="+t+"]");n&&$(e).replaceWith(n[0])},this),n(e)},render:function(e){var t=e();return this.setupDOM(),t},setupDOM:function(e){var t=n.utils.currentUser();this.$(this.followButton).prop("disabled",!0),t.authenticated()?this.fetchFollowingStatus():(this.$(this.followButton).prop("disabled",!1),this.setFollowLoginState()),e()},fetchFollowingStatus:function(e){var n=this.$(this.followButton),a=this,l=null,i=null;t.each(n,function(e){if(l=$(e),i=$(e).data("target"))if(i in s.get("followStatus"))this.updateFollowButtons(i,s.get("followStatus")[i]);else{var t=!1;if(void 0!==l.data("following"))t=l.data("following"),this.updateFollowButtons(i,t);else{var n=new s.models.User({username:i});Promise.resolve(n.determineFollowStatus()).then(function(){a.updateFollowHash(n.get("username"),n.get("following")),a.updateFollowButtons(n.get("username"),n.get("following"))})}this.updateFollowHash(i,t)}},this),e()},setFollowLoginState:function(e){this.$(this.followButton).addClass("on-follow-login"),e()},onFollowLogin:function(t,a){if(0===$("#generic-modal").length)e.location.href="/login?nexturl="+e.location.href;else{var l=new s.views.SignUpPrompt({model:new s.models.Authsignup,title:n.utils.trans("Join Wattpad"),subtitle:n.utils.trans("Follow others to receive story updates!")});$("#generic-modal .modal-body").html(l.render().$el),$("#generic-modal").modal("show")}a(t)},updateFollowHash:function(e,t,n){var a=s.get("followStatus");a[e]=t,s.set("followStatus",a),n()},updateFollowButtons:function(e,t,n){var a=this.$(this.followButton+"[data-target="+e+"]");t?(a.removeClass("on-follow").addClass("on-unfollow"),s.trigger("app:user:follow",e)):(a.removeClass("on-unfollow").addClass("on-follow"),s.trigger("app:user:unfollow",e)),a.prop("disabled",!1),n()},onFollow:function(e,t){var a=this,s=$(e.currentTarget).data("target"),l=this.$(this.followButton+"[data-target="+s+"]");n.utils.stopEvent(e),l.prop("disabled",!0),Promise.resolve($.when(n.utils.currentUser().following().follow(s))).then(function(){a.updateFollowHash(s,!0),a.updateFollowButtons(s,!0),a.clearCache()}),t(e)},onUnfollow:function(e,t){var a=this,s=$(e.currentTarget).data("target"),l=this.$(this.followButton+"[data-target="+s+"]");n.utils.stopEvent(e),l.prop("disabled",!0),Promise.resolve($.when(n.utils.currentUser().following().unfollow(s))).then(function(){a.updateFollowHash(s,!1),a.updateFollowButtons(s,!1),a.clearCache()}),t(e)},clearCache:function(e,t){var a=n.utils.currentUser().get("username");s.local.clear("user."+a),s.local.clear("user."+a+".following"),s.local.clear("user."+a+".profile.following"),s.local.clear("user."+e),s.local.clear("user."+e+".following"),s.local.clear("user."+e+".profile.following"),t(e)},stopEvent:function(e,t){n.utils.stopEvent(e),t(e)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("InputCounterManagement",Monaco.Mixin.create({events:{"keyup .count-input":"onCount"},onCount:function(e,t){var n,a,s,l;n=$(e.currentTarget),a=parseInt(n.data("limit"),10),s=this.setCount(n),"function"==typeof this["on"+(l=n.data("name"))+"Update"]&&this["on"+l+"Update"](s&&s<=a),t()},setCount:function(e,t){var n,a;return n=this.$("."+e.data("counter")),a=e.val().length,n.children("span").html(a),a>0?n.removeClass("hidden"):n.addClass("hidden"),t(),a},resetCount:function(e){this.setCount(this.$(".count-input")),e()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("ReportManagement",Monaco.Mixin.create({events:{"tap   .on-report":"onReport","click .on-report":"stopEvent"},render:function(e){var t=e();return this.renderReportModal(),t},setElement:function(e,t){t(e),this.renderReportModal()},renderReportModal:function(e){var n,a;this.reportMoreInfo&&(n=t.result(this,"reportMoreInfo")),this.reportUserName&&(a=t.result(this,"reportUserName")),this.reportModal=this.reportModal?this.reportModal:new s.views.ReportModal({model:new s.models.SupportTicket,requestType:this.requestType,reportForm:this.reportForm,mainModal:!!this.isMainReportModal,moreInfo:n,modalTitle:this.modalTitle,reportUserName:a}),0===this.$(this.reportModalContainer+" > .report-modal").length&&this.$(this.reportModalContainer).append(this.reportModal.render().$el),e()},onReport:function(e,t){n.utils.stopEvent(e),this.$(this.reportModalContainer+" > .report-modal").modal("show"),t()}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(180));!function(e,t,n,s,l){l.add("ReadingList",l.mixins.StoryInListsManagement.extend({templates:t.extend({},l.mixins.StoryInListsManagement.mixinFunctions.templates,{container:a.default}),events:function(e){return t.extend({},e(),l.mixins.StoryInListsManagement.mixinFunctions.events)},onAddToListsReady:function(t,n,a){this.$(".reading-list-dropdown").addClass("open"),$(e.document).one("click.bs.dropdown.data-api",{context:this},this.closeReadingListSelector),a(t,n)},closeReadingListSelector:function(e){this.$(".reading-list-dropdown").removeClass("open"),e()},fetchListsData:function(e,t,n,a){this.$(".reading-list-dropdown").remove(),e.after(this.templates.container({id:t})),l.mixins.StoryInListsManagement.mixinFunctions.fetchListsData.apply(this,arguments),a(e,t,n)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="reading-list-dropdown">\n    <div class="triangle"></div>\n    <div class="dropdown-menu dropdown-menu-right add-to-library">\n        <ul class="lists-menu" data-story-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'"></ul>\n        <div class="input-group">\n            <label for="new-reading-list" class="sr-only">New Reading List</label>\n            <input id="new-reading-list" type="text" class="form-control list-name list-error-placeholder" placeholder="Add New Reading List">\n        <span class="input-group-btn">\n            <button class="btn btn-orange on-create-list" type="button" data-story-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'">\n                +\n            </button>\n        </span>\n        </div>\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("ReportConduct",Monaco.Mixin.create({reportForm:{id:48854,offenses:[{name:n.utils.trans("Explicit Content"),tag:"explicit_content",moreDetail:!0,intext:n.utils.trans("Please explain the violation of our policies and where it is located on the account with as much detail as possible. If the violation occurs in a story, please provide a link to the story part(s). For example: This user is promoting sexual conduct in their about section.")},{name:n.utils.trans("Hate & Harassment"),tag:"hate_or_harassment_conduct",moreDetail:!0,intext:n.utils.trans("Please explain the violation of our Code of Conduct and where it is located on the account. If the violation occurs within a story, please include a link to the story part(s). Please provide as much information as possible. For example: The user is sending me hateful private messages.")},{name:n.utils.trans("Violence"),tag:"violence_or_self_harm_conduct",moreDetail:!0,intext:n.utils.trans("Please explain the violation of our Code of Conduct and where it takes place on this account with as much information as possible. If the violation occurs within a story, please include a link to the story part(s). For example: The profile image is depicting an act of graphic violence.")},{name:n.utils.trans("Release of Personal Info"),tag:"release_of_personal_information_conduct",moreDetail:!0,intext:n.utils.trans("If a photo of you or your personal identifying information is being released, please tell us what the information is and where it is located on the account. If the violation occurs within a story, please include a link to the story part(s). For example: An image of my face is being used as the background photo.")},{name:n.utils.trans("Self-Harm"),tag:"violence_or_self_harm_conduct",moreDetail:!0,intext:n.utils.trans("Please explain the violation of our policies and where it is located on the account. If the violation occurs within a story, please include a link to the story part(s). For example: There is a self-harm image in the avatar. Or: The user is talking about self-harming on their conversation board or comments.")},{name:n.utils.trans("Underage User"),tag:"underage_user",moreDetail:!0,intext:""},{name:n.utils.trans("Spam"),tag:"spam_conduct",moreDetail:!0,intext:n.utils.trans("Please explain what type of spam you’ve encountered and where we can find it on the account. If the violation occurs within a story, please include a link to the story part(s). For example: This user is sharing malicious download links on their conversation board. Or: This is a publisher trying to recruit writers.")}]}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";var a=u(n(1)),s=u(n(183)),l=u(n(184)),i=u(n(185)),r=u(n(186)),o=u(n(187)),c=u(n(188));function u(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,u,d){u.add("WorksItemDetails",u.views.Base.extend({events:{"tap .on-edit-save":"onEditSaveSelected","tap .on-publish":"onPublish","tap .on-edit-cancel":"onEditCancelSelected","mouseenter .on-cover-edit-icon":"onCoverEditIconEnter","mouseleave .image-placeholder":"onCoverEditLeave","keyup .story-title":"onStoryTitleKeyUp","focus .story-title":"onStoryTitleFocus","blur .story-title":"onStoryTitleBlur","blur .story-description":"onStoryDescriptionBlur","paste [contenteditable]":"pastePlainText","change #categoryselect":"onCategorySelected","keyup .character-input":"onCharacterInputKeyUp","tap .on-add-character":"onAddCharacter","click .on-add-character":"stopEvent","tap .on-remove-character":"onRemoveCharacter","click .on-remove-character":"stopEvent","tap .on-add-tag":"onAddTagSelected","blur .on-tag-input":"onTagInputBlurred","keydown .on-tag-input":"onTagInputKeydown","change #mature-switch":"ratingChange","tap .on-new-part":"onNewPartClicked","tap .on-stats":"onStatsClicked","tap .on-delete-story":"onDeleteStoryClicked","tap .on-delete-published-story":"onDeletePublishedStoryClicked","tap .on-select":"onSelectAll","tap .on-embed":"onEmbedClicked","tap .on-delete-part":"onDeletePartClicked","tap .on-do-delete-part":"onDoDeletePart","tap .on-delete-published-part":"onDeletePublishedPartClicked","submit #delete-story-form":"onDoDeleteStory","tap .on-unpublish-part":"onUnpublishPartClicked","tap .on-unpublish-story":"onUnpublishStoryClicked","tap .on-do-unpublish-part":"onDoUnpublishPart","tap .on-do-unpublish-story":"onDoUnpublishStory","click .on-okay":"stopEvent","tap .on-okay":"onPopoverOk","click .popover-icon":"stopEvent","tap .popover-icon":"onPopover","mousedown .on-trigger-tooltip":"onTriggerTooltip","click .on-trigger-tooltip":"stopEvent","tap .on-trigger-tooltip":"stopEvent","tap .on-edit-close":"onEditClose","tap .on-switch-type":"onSwitchTabs","click .on-view-as-reader":"stopEvent","tap .on-view-as-reader":"viewAsReader"},templates:{worksItemDetails:i.default,character:r.default,tag:l.default,status:s.default,contestBanner:c.default},initialize:function(e){e=e||{},_.bindAll(this,"onCloseTooltip"),this.defaultStoryTitle=n.trans("Untitled Story"),this.isNew=e.isNew||!1,this.showTips=e.showTips||!1,this.isPublish=e.isPublish||!1,this.isPreview=e.isPreview||!1,this.partModel=e.partModel||null,this.model=e.model,this.storyLabelsModel=e.storyLabelsModel,this.didEditCharacters=!1,this.charactersLimit=20,this.maxNumParts=t.utils.currentUser().getMaxNumParts(),this.prefilledTag=e.prefilledTag||null,this.SUGGESTED_WRITER_TAGS=this.checkWattysEligibility()?["wattys2019"]:[],this.isNew&&this.model.set("title",this.defaultStoryTitle),Handlebars.registerPartial("desktop.create.works_item_editable_tag",this.templates.tag),Handlebars.registerPartial("desktop.components.modal.share_embed",a.default),Handlebars.registerPartial("desktop.create.works_table_of_contents",o.default),Handlebars.registerPartial("desktop.create.works_contests",c.default.bind(this,{storyId:this.model.id})),Handlebars.registerPartial("desktop.create.works_character_item",r.default)},render:function(){var n,a,s,l,i,r=this.model.toJSON();r.published=!1,_.each(r.parts,function(e){e.stats=!!(e.readCount||e.VoteCount||e.commentCount),r.published=r.published||!e.draft&&!e.deleted}),r.descriptionRemaining=2e3-r.description.length,r.languages=t.supportedLangs,r.categories=_.reduce(u.get("categories").toJSON(),function(e,t){return _.contains(t.roles,"writing")&&e.push(t),e},[]),r.copyrights=[],r.copyrights[0]=t.utils.trans("Not Specified"),r.copyrights[1]=t.utils.trans("All Rights Reserved"),r.copyrights[2]=t.utils.trans("Public Domain"),r.copyrights[3]=t.utils.trans("Creative Commons (CC) Attribution"),r.copyrights[4]=t.utils.trans("(CC) Attrib. NonCommercial"),r.copyrights[5]=t.utils.trans("(CC) Attrib. NonComm. NoDerivs"),r.copyrights[6]=t.utils.trans("(CC) Attrib. NonComm. ShareAlike"),r.copyrights[7]=t.utils.trans("(CC) Attribution-ShareAlike"),r.copyrights[8]=t.utils.trans("(CC) Attribution-NoDerivs"),r.language={id:r.language||t.utils.currentUser().get("language"),name:_.result(_.find(r.languages,function(e){return e.id==r.language}),"name")},r.everyone=!r.mature&&!r.ratingLocked,r.writerMature=r.mature&&!r.ratingLocked,r.maturePrivate=r.private&&r.mature,r.communityMature=r.mature&&r.ratingLocked,r.bcover=r.cover.replace("/cover/","/bcover/"),r.tooManyTagsInTheKitchen=_.size(r.tags)>20,this.isPublish&&(""===r.cover&&(n=!0),""!==r.title.trim()&&r.title.trim()!==this.defaultStoryTitle||(a=!0),""===r.description&&(s=!0),r.categoryObject||(l=!0),0===r.tags.length&&(i=!0));var o=this.partModel?this.partModel.get("title"):"",c=this.formatTags(r.tags,this.prefilledTag),d=t.utils.currentUser().get("locale").slice(0,2);e.store.dispatch(e.app.components.actions.setStoryTags({tags:c,withIcon:!0})),this.$el.html(this.templates.worksItemDetails({story:r,showNewStats:!0,isNew:this.isNew,showTips:this.showTips,isPublish:this.isPublish,needCover:n,needTitle:a,needDescription:s,isWattysEligible:this.checkWattysEligibility(),canvaApiKey:t.canvaApiKey,createCanvaCover:this.createCanvaCover.bind(this),needCategory:l,needTag:i,partTitle:o,testGroups:t.testGroups,lang:d,targetAudience:this.storyLabelsModel.get("target_audience"),characters:this.storyLabelsModel.get("characters"),charactersLimit:this.charactersLimit,prefilledTag:this.prefilledTag}));var h=0;return _.each(this.model.get("parts"),function(e){!0!==e.deleted&&h++}),h>=this.maxNumParts&&this.$(".on-newpart").parent().addClass("too-many-parts"),this.postRender(),this},renderContestBanner:function(){var e=null;this.checkWattysEligibility()&&(e=this.templates.contestBanner({storyId:this.model.id})),this.$("#contest-banner-container").html(e)},onDragEnd:function(){var e=_.map(this.$(".story-part"),function(e){return $(e).data("id")});e.length===this.model.get("parts").length&&(e=e.join(","),this.model.set({textids:e}),this.model.save())},onEditClicked:function(){u.router.trigger("route:createWorksEdit",this.model.get("id"))},onSelectAll:function(){var t=e.document.createRange();t.selectNode(e.document.getElementById("embed-url")),e.getSelection().addRange(t)},resetModal:function(){this.$("#embed-modal,#stats-modal,.delete-story-modal,.delete-published-story-modal,.unpublish-story-modal,.delete-part-modal,.delete-published-part-modal,.unpublish-part-modal").addClass("hidden"),this.$("#details-modal .modal-dialog").removeClass("embed").removeClass("stats")},onEmbedClicked:function(){var e=this.$("#embed-modal iframe");this.resetModal(),this.$("#details-modal .modal-dialog").addClass("embed"),e.attr("src",e.data("href")),this.$("#embed-modal").removeClass("hidden")},onStatsClicked:function(e){e.preventDefault(),u.router.navigate("/myworks/"+this.model.get("id")+"/analytics",{trigger:!0})},onDeletePartClicked:function(e){this.resetModal(),this.model.get("parts").length<2?this.onDeleteStoryClicked():(this.deleteId=$(e.currentTarget).data("id"),this.$(".delete-part-modal").removeClass("hidden"))},onDeletePublishedPartClicked:function(e){this.resetModal(),this.model.get("parts").length<2?this.onDeletePublishedStoryClicked():(this.deleteId=$(e.currentTarget).data("id"),this.unpublishId=$(e.currentTarget).data("id"),this.$(".on-delete-part").data("id",this.deleteId),this.$(".delete-published-part-modal").removeClass("hidden"))},onUnpublishPartClicked:function(e){this.resetModal(),this.unpublishId=$(e.currentTarget).data("id"),this.$(".unpublish-part-modal").removeClass("hidden")},onUnpublishStoryClicked:function(e){this.resetModal(),this.unpublishId=$(e.currentTarget).data("id"),this.$(".unpublish-story-modal").removeClass("hidden")},onDeleteStoryClicked:function(){this.resetModal(),this.$(".delete-story-modal .alert").addClass("hidden"),this.$(".delete-story-modal").removeClass("hidden")},onDeletePublishedStoryClicked:function(){this.resetModal(),this.$(".delete-published-story-modal").removeClass("hidden")},validateUsernameFields:function(e,a){var s=[];return e===a&&0!==e.length&&0!==a.length||s.push(t.utils.trans("Username fields should match")),e!==n.currentUser().get("username").trim().toLowerCase()&&s.push(t.utils.trans("Username is incorrect")),s},onDoDeleteStory:function(e){n.stopEvent(e);var t=$(e.currentTarget),a=t.find("#username").val().trim().toLowerCase(),s=t.find("#confirm-username").val().trim().toLowerCase(),l=this.validateUsernameFields(a,s);if(l.length>0){var i=t.find(".alert ul.messages");i.empty();for(var r=0;r<l.length;r++)i.append("<li>"+l[r]+"</li>");t.find(".alert").removeClass("hidden")}else{t.find("button, input").attr("disabled",!0);var o=this;this.model.set("transaction_key",n.currentUser().get("username")),Promise.resolve(this.model.destroy()).then(function(){return o.model.set("transaction_key",null),n.cacheBust("Works",{username:n.currentUser().get("username")},o.model.get("id"))}).then(function(){u.router.navigate("/myworks/",{trigger:!0,replace:!0})}).catch(function(e){o.displayErrors(e.responseJSON?e.responseJSON.message:e.message||e.errors||e)})}},onDoDeletePart:function(){var e=this,t=new u.models.StoryPartCreateModel({id:this.deleteId,authorid:n.currentUser().get("id")});Promise.resolve(t.destroy()).then(this.handlePromiseUnexpected).catch(this.handlePromiseExpected).then(function(){return Promise.resolve(e.model.fetch({fresh:!0,data:{drafts:1}}))}).then(function(){e.$("#details-modal").on("hidden.bs.modal",function(){$(this).off("hidden.bs.modal"),e.$("[data-id='"+e.deleteId+"']").addClass("fade hide")}).modal("hide");var t=0;_.each(e.model.get("parts"),function(e){!0!==e.deleted&&t++}),t<this.maxNumParts&&e.$(".on-newpart").parent().removeClass("too-many-parts")})},onDoUnpublishStory:function(e){var t=this,a=_.reject(this.model.get("parts"),function(e){return e.draft||e.deleted}),s=n.currentUser().get("id"),l=0;n.stopEvent(e),this.$("#unpublish-modal .progress-bar").attr("aria-value",0).width("0%").removeClass("progress-bar-success").addClass("progress-bar-info"),this.$("#unpublish-modal .cta").attr("disabled",!0),this.$("#working-wrapper").removeClass("hidden"),0!==a.length?_.each(a,function(e){var n=new u.models.StoryPartCreateModel({id:e.id,authorid:s});Promise.resolve(n.unpublish()).then(function(){l++,t.updateUnpublishStatus(a.length,l)})}):this.updateUnpublishStatus(1,1)},onDoUnpublishPart:function(){var e=this,t=new u.models.StoryPartCreateModel({id:this.unpublishId,authorid:n.currentUser().get("id")});Promise.resolve(t.unpublish()).then(function(){return Promise.resolve(e.model.fetch({fresh:!0,data:{drafts:1}}))}).then(function(){e.$("#details-modal").on("hidden.bs.modal",function(){$(this).off("hidden.bs.modal"),e.render()}).modal("hide")})},updateUnpublishStatus:function(t,a){var s=this,l=100*Math.floor(a/t);this.$(".unpublish-story-modal .progress-bar").attr("aria-valuenow",l).width(l+"%"),t===a&&(this.$("#unpublish-working").text(n.trans("Done")),this.$(".unpublish-story-modal .progress-bar").removeClass("progress-bar-info").addClass("progress-bar-success"),n.cacheBust(["Works","Works"],[{username:n.currentUser().get("username")},{username:n.currentUser().get("username"),published:!0}],this.selectedStoryId),this.model.fetch({fresh:!0}).then(function(){e.setTimeout(function(){s.$("#details-modal").on("hidden.bs.modal",function(){$(this).off("hidden.bs.modal"),s.render()}).modal("hide")},500)}))},onNewPartClicked:function(e){var t=0;if(_.each(this.model.get("parts"),function(e){!0!==e.deleted&&t++}),t>=this.maxNumParts)n.stopEvent(e);else{for(var a=this,s=!1,l=!1,i=1,r=new u.models.StoryPartCreateModel({groupid:this.model.get("id"),title:n.trans("Untitled Part ")+(this.model.get("parts").length+1),language:this.model.get("language"),copyright:this.model.get("copyright"),category1:this.model.get("categories")[0],draft:1,tags:this.model.get("tags").join(" ")});!1===l;)_.findWhere(this.model.get("parts"),{title:r.get("title")})?(r.set("title",n.trans("Untitled Part ")+(this.model.get("parts").length+1)+" ("+i+")"),i++):l=!0;n.stopEvent(e),Promise.resolve(r.save()).then(function(e){a.handlePromiseUnexpected(e)}).catch(function(e){s=!0,a.handlePromiseExpected(e)}).then(function(){if(!s)return Promise.resolve(a.model.fetch({fresh:!0,data:{drafts:1}}))}).then(function(){s||u.router.navigate("/myworks/"+a.model.get("id")+"/write/"+r.get("id"),{trigger:!0})})}},onCharacterInputKeyUp:_.throttle(function(e){var t=$(e.currentTarget),n=t.parent(".character").find(".btn"),a=n.find(".fa");t.val().trim().length>0?(n.removeClass("btn-grey").addClass("btn-orange"),a.removeClass("fa-wp-neutral-1").addClass("fa-wp-neutral-5")):(n.removeClass("btn-orange").addClass("btn-grey"),a.removeClass("fa-wp-neutral-5").addClass("fa-wp-neutral-1"))},200),onAddCharacter:function(e){var t=$(e.currentTarget),n=t.parent(".character").find("input").val().trim();n.length>0&&(this.didEditCharacters=!0,t.parent(".character").remove(),this.$(".characters").append(this.templates.character({name:n,readonly:!0})),this.$(".character").length<this.charactersLimit&&this.$(".characters").append(this.templates.character()))},onRemoveCharacter:function(e){var t=$(e.currentTarget).parent(".character");this.didEditCharacters=!0,this.$(".character [readonly]").length==this.charactersLimit&&this.$(".characters").append(this.templates.character()),t.remove(),0==this.$(".character").length&&this.$(".characters").empty().append(this.templates.character())},saveCharacters:function(){var e=[],t=this;_.each(this.$(".characters .character input"),function(t){var n=$(t).val().trim();n.length>0&&e.push({name:n})}),this.storyLabelsModel.clear({silent:!0}),Promise.resolve(this.storyLabelsModel.save({id:parseInt(this.model.get("id")),characters:e})).catch(function(){t.handlePromiseExpected("")})},onTagInputKeydown:function(e){var a=e.keyCode||e.which;13!==a&&32!==a||(n.stopEvent(e),this.onTagInputBlurred()<t.tagCountLimit&&this.onAddTagSelected());8===a&&0===this.getCurrentInput().length&&(n.stopEvent(e),this.$("#editable-tags .tag-item").last().remove(),this.onAddTagSelected())},getCurrentInput:function(){return this.$("#tag-input").val().trim()},onAddTagSelected:function(e){n.stopEvent(e),this.$("#add-tag").addClass("hidden"),this.$("#tag-input").val("").removeClass("hidden").focus();var a=_.difference(this.SUGGESTED_WRITER_TAGS,this.getTags()).map(function(e){return{label:e}});this.initAutocomplete({element:"#tag-input-wrapper #tag-input",collection:new u.collections.AutocompleteTag(a),title:t.utils.trans("Suggested Tags")})},onTagInputBlurred:function(){var n=this.$("#tag-input"),a=this.cleanHTMLToText(n).trim(),s=this.getTags(),l=s.length,i=[];return this.autocompleteResults&&this.autocompleteResults.remove(),n.addClass("hidden"),l<t.tagCountLimit&&a&&-1===s.indexOf(a)&&("wattys2019"===a&&this.checkWattysEligibility()&&e.store.dispatch(e.app.components.actions.openContestForm(this.model.id)),l++,i=this.formatTags(s.concat([a]),this.prefilledTag),e.store.dispatch(e.app.components.actions.setStoryTags({tags:i,withIcon:!0}))),l<t.tagCountLimit&&(this.$("#add-tag").removeClass("hidden"),l>0&&(this.$("#add-tag").removeClass("empty-border"),this.$("#tag-empty-warning").removeClass("red-warning"))),l},checkWattysEligibility:function(){return t.testGroups.WATTYS_TAG&&this.model.isWattysEligible()},getTags:function(){return e.store.getState().storyTags.tags.map(function(e){return e.name})},formatTags:function(e,t){return e.map(function(e){var n=e.trim();return{id:n,name:n,active:!0,className:"wattys2019"===n?"wattys-tag":t&&n===t?"prefilled-tag":null}})},pastePlainText:function(e){n.pastePlainText(e)},cleanHTMLToText:function(e){return(e.is("input")||e.is("textarea")?n.sanitizeHTMLExceptQuotes(e.val().trim()):n.sanitizeHTMLExceptQuotes(e.text().trim())).replace(/<(br|p|div)(\s*)>/gi,"\n").replace(/(<([^>]+)>)/gi,"")},sendViewAsReaderEvent:function(t){var n=$(t.currentTarget).data(),a=this.model.get("id"),s=n.id;u.currentView instanceof u.views.WorksWriter?e.te.push("event","writer",null,null,"reader_view",{storyid:a,source:"prepublish"}):"wid-btn"===n.attr?e.te.push("event","writer",null,null,"reader_view",{storyid:a,source:"story_details"}):"wid-toc"===n.attr&&e.te.push("event","writer",null,null,"reader_view",{storyid:a,partid:s,source:"table_of_contents"})},viewAsReader:function(a){var s=this,l=$(a.target).data("url");if(this.sendViewAsReaderEvent(a),n.stopEvent(a),this.isMissingRequiredFields())return this.$(".on-switch-type").removeClass("active"),this.$(".main-edit-form").removeClass("hidden"),void this.$(".table-of-contents").addClass("hidden");this.isPublish=!1;var i=e.open("","_blank");Promise.resolve(this.onEditSaveSelected()).then(function(e){i.location.href=l}).catch(function(e){i.close();var n=e.responseJSON?e.responseJSON.message:e.message||e.errors||t.utils.trans("We seem to have had some issues saving your story. Please try again.");return s.displayErrors(n)})},isMissingRequiredFields:function(){var e=this.cleanHTMLToText(this.$(".story-title")),t=this.cleanHTMLToText(this.$(".story-description")),n=this.$("#categoryselect").val(),a=this.$("#editable-tags .tag-item"),s=!1;return this.$("#publish-status-banner").empty(),e===this.defaultStoryTitle&&(this.$(".story-title").addClass("empty-border"),this.$("#title-warning").removeClass("hidden").addClass("red-warning"),s=!0),""===t&&(this.$(".story-description").addClass("empty-border"),this.$("#description-warning").removeClass("hidden").addClass("red-warning"),s=!0),"-1"===n&&(this.$("#categoryselect").addClass("empty-border"),this.$("#category-empty-warning").removeClass("hidden").addClass("red-warning"),s=!0),0===a.length&&this.isPublish&&(this.$("#add-tag").addClass("empty-border"),this.$("#tag-empty-warning").removeClass("hidden").addClass("red-warning"),s=!0),s},onPublish:function(e){this.isPublish=!0,this.onEditSaveSelected()},onEditSaveSelected:function(){var e=this;if(!this.showTips){if(this.$("button").attr("disabled",!0),this.$(".save-working").removeClass("hidden"),this.isPublish||this.model.get("published"))if(this.isMissingRequiredFields())return this.$("button").removeAttr("disabled"),void this.$(".save-working").addClass("hidden");var t=this.$("#complete-switch").prop("checked")?1:0,n=this.$("#mature-switch").prop("checked")?4:1,a=this.cleanHTMLToText(this.$(".story-title")),s=this.cleanHTMLToText(this.$(".story-description")),l=this.$("#categoryselect").val(),i=this.$("#languageselect").val(),r=parseInt(this.$("#copyrightSelect").val(),10);this.model.set({title:a,description:s,category1:l,language:i,complete:t,human_rating:n,copyright:r}),this.partModel&&this.partModel.set({category1:l});var o=this.model.validate(void 0,{ignore:{title:this.isPublish?[]:["isRequired","isNotEq"],tags:["isWattysEligible"]}});if(o)throw this.displayErrors(_.values(o)),new Error(_.first(_.values(o)));return this.isNew?Promise.resolve(this.create(!0,!0)):Promise.resolve(this.save().then(function(){e.renderContestBanner()}))}this.$("#finish-tooltip").popover("show")},onEditCancelSelected:function(){this.model.get("id")?u.router.navigate("/myworks",{trigger:!0}):n.goBackInHistory()},displayErrors:function(e){var t=u.currentView instanceof u.views.WorksWriter?".modal-content":"html, body";this.$("#publish-status-banner").html(this.templates.status({errors:[].concat(e)})),$(t).animate({scrollTop:"0px"}),this.$("button").removeAttr("disabled"),this.$(".save-working").addClass("hidden")},create:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this,l=new u.models.StoryPartCreateModel({title:this.model.get("title"),description:this.model.get("description"),part_title:n.trans("Untitled Part 1"),language:this.model.get("language"),draft:1});return l.set("skip_title",1),Promise.resolve(l.save(void 0,{validation:{ignore:{title:["isRequired","isNotEq","maxLength"],tags:["isWattysEligible"]}}})).then(function(e){return s.model.set({id:e.groupid,textids:e.id.toString(),parts:[e]}),s.model.set("skip_title",1),e.groupid,Promise.resolve(s.model.save())}).then(function(){return"-1"==s.$("#target-audience").val()||(s.storyLabelsModel.clear({silent:!0}),Promise.resolve(s.storyLabelsModel.save({id:parseInt(s.model.get("id")),target_audience:s.$("#target-audience").val()})).catch(s.handlePromiseExpected))}).then(function(){return!s.didEditCharacters||(s.didEditCharacters=!1,s.saveCharacters())}).then(function(){return s.saveTags()}).then(function(){return a?s.saveCover():Promise.resolve()}).then(function(){var t=n.currentUser().get("username");if(u.local.clear(l.resource()),u.local.clear(s.model.resource()),n.cacheBust(["Works"],[{username:t}]),e){var a="/myworks/"+s.model.get("id")+"/write/"+s.model.get("parts")[0].id;u.router.navigate(a,{trigger:!0,replace:!1})}}).catch(function(e){s.displayErrors(e.responseJSON?e.responseJSON.message:e.message||e.errors||t.utils.trans("We seem to have had some issues saving your story. Please try again."))})},bustWorksCache:function(){var e=n.cacheBust("Works",{username:t.utils.currentUser().get("username"),published:!0}),a=n.cacheBust("Works",{username:t.utils.currentUser().get("username")}),s=n.cacheBust("StoryCreateModel",{id:this.model.get("id")},null,!0);return Promise.all([e,a,s])},save:function(){var e=this;return this.model.set({language:this.model.get("language")}),Promise.resolve(this.model.save(void 0,{validation:{ignore:{title:["isRequired","isNotEq","maxLength"],tags:["isWattysEligible"]}}})).then(function(){return"-1"==e.$("#target-audience").val()||(e.storyLabelsModel.clear({silent:!0}),Promise.resolve(e.storyLabelsModel.save({id:parseInt(e.model.get("id")),target_audience:e.$("#target-audience").val()})).catch(e.handlePromiseExpected))}).then(function(){return!e.didEditCharacters||(e.didEditCharacters=!1,e.saveCharacters())}).then(function(){return e.saveTags()}).then(function(){return!e.isPublish||Promise.resolve(e.partModel.publish())}).then(function(){return e.bustWorksCache()}).then(function(){if(e.isPublish)e.isPreview?($("#generic-modal").modal("hide"),$(".draft-tag").addClass("hidden"),$(".on-publish").addClass("hidden"),$(".on-write").addClass("hidden"),$(".preview-alert").addClass("hidden")):e.partModel&&u.router.navigate(t.utils.formatStoryUrl(e.partModel.get("url")),{trigger:!0});else{var n=t.utils.trans("Saved."),a=u.currentView instanceof u.views.WorksWriter?".modal-content":"html, body";e.$("#publish-status-banner").html(e.templates.status({successMessage:n})),$(a).animate({scrollTop:"0px"}),e.$("button").attr("disabled",!1),e.$(".save-working").addClass("hidden")}}).catch(function(n){var a=n.responseJSON?n.responseJSON.message:n.message||n.errors||t.utils.trans("We seem to have had some issues saving your story. Please try again.");throw e.displayErrors(a),new Error(a)})},saveTags:function(){var e=this.getTags();return Promise.resolve($.ajax({type:"POST",url:"/apiv2/editstorytags",data:{request_type:"add",tag_value:e.join(" "),story_id:this.model.get("parts")[0].id,remove_old_tags:!0}}))},requestSaveCover:function(e,t){return Promise.resolve($.ajax({type:"POST",url:"/apiv2/updatestorycover",data:{id:e,image:t}}))},saveCover:function(){var t=this;return!this.FileUpload.file||t.getFile().then(function(n){if(n)return t.requestSaveCover(t.model.get("id"),n.parsed).then(function(n){t.model.set("cover",n.cover),e.te.push("event","writer","cover",null,"add",{storyid:t.model.get("id")})})})},onCoverEditIconEnter:function(){this.$("#cover-uploader").addClass("active"),this.$(".on-cover-edit").removeClass("hidden")},onCoverEditLeave:function(){this.$("#cover-uploader").removeClass("active"),this.$(".on-cover-edit").addClass("hidden")},onFileDragEnter:function(){this.onCoverEditIconEnter()},onPopoverOk:function(e){n.stopEvent(e),$(e.currentTarget).parent().parent().parent().popover("hide")},onCloseTooltip:function(e){var t=$(e.currentTarget),n=t.data("bs.popover");if(n&&n.tip().hasClass("in")){var a=t.attr("id");"image-tooltip"===a?this.$(".add-cover-text").click():"description-tooltip"===a?this.$(".story-description").focus():"tags-tooltip"===a?this.onAddTagSelected():"finish-tooltip"===a&&(this.showTips=!1,this.onEditSaveSelected())}},onTriggerTooltip:function(e){n.stopEvent(e);var t=$(e.currentTarget);t.parent().find('[data-toggle="popover"]').popover("show"),t.removeClass("on-trigger-tooltip"),_.delay(function(){t.hasClass("new-cover-upload")&&t.find(".dropdown-holder").attr("data-toggle","dropdown")})},postRender:function(){var e=t.utils.trans;this.isPreview&&this.model.get("title")===this.defaultStoryTitle&&this.$(".story-title").removeClass("has-title"),this.initPopover("#image-tooltip",e("Stories with a cover image get 23x more reads than ones without"),e("Must be in PNG, GIF, or JPG format, smaller than 2MB. Recommended cover dimensions: 512x800 pixels"),"https://www.wattpad.com/253535287-secrets-to-getting-more-reads-add-a-story-cover"),this.initPopover("#description-tooltip",e("Stories with descriptions get 100x more reads than ones without"),e("Write a short description that will excite your readers and hook them in"),"https://www.wattpad.com/253611251-secrets-to-getting-more-reads-write-a-story"),this.initPopover("#category-tooltip",e("This information helps us understand more about your story"),null,"https://support.wattpad.com/hc/en-us/articles/200774334-Content-Guidelines#categories"),this.initPopover("#characters-tooltip",e("Add up to 20 Main Characters. This information will not be shown to your readers. Instead, this information will be used to help Wattpad more easily discover your story."),null,"https://support.wattpad.com/hc/en-us/articles/360027382932-Add-Main-Characters-to-a-Story"),this.initPopover("#tags-tooltip",e("Adding 10 or more tags can help increase discoverability"),e("Tags should be a word or concept, reflective of your story’s themes and subgenres"),"https://www.wattpad.com/253614397-secrets-to-getting-more-reads-tags-tags-tags"),this.initPopover("#target-audience-tooltip",e("This information will not be shown to your readers. Instead, this information will be used to help Wattpad more easily discover your story."),null,"https://support.wattpad.com/hc/en-us/articles/360027383472-Add-a-Target-Audience-to-a-Story"),this.initPopover("#language-tooltip",e("Wattpad has a global audience; make sure your story reaches the right readers")),this.initPopover("#copyright-tooltip",e("Let others know if this story is just yours, or if anyone can repost or remix it"),null,"https://support.wattpad.com/hc/en-us/articles/216192503-Copyright-FAQ"),this.initPopover("#rating-tooltip",e("Rate your story appropriately to ensure a positive reading experience for your readers with no unwanted surprises"),null,"https://support.wattpad.com/hc/en-us/articles/200774334-Content-Guidelines#ratings");var n="";1===parseInt(u.get("language"),10)&&(n='<a href="https://www.wattpad.com/256413083-secrets-to-getting-more-reads-mark-your-story" target="_blank">Learn more</a>'),this.initPopover("#story-tooltip",e("If your story is complete, please let your readers know. ")+n),this.initPopover("#finish-tooltip",e("Don’t worry, you can finish adding your story information later"),null,"https://www.wattpad.com/story/71065441-secrets-to-getting-more-reads","finish-tooltip-ok"),this.prefilledTag&&(this.initPopover("#prefilled-tag-tooltip","<p>We've automatically added <span class='bold'>#"+this.prefilledTag+"</span> to your submission. This ensures we've received your entry.</p>",null,null,null,!0),this.$("#prefilled-tag-tooltip").popover("show"))},initPopover:function(e,n,a,s,l,i){var r="";n&&(r+="<div class='main-content'>"+n,a&&(r+="<div class='secondary-content'>"+a+"</div>"),r+="</div>"),r+="<div class='tooltip-footer'>",s&&(r+="<a target='_blank' href="+s+">"+t.utils.trans("Learn More")+"</a>"),r+="<button class='btn on-okay "+(i?"btn-link ":"btn-orange "),l&&(r+=l),r+="'>"+(i?"Got It":t.utils.trans("OK"))+"</button></div>";var o=this;this.$(e).popover({template:'<div class="popover writer-tooltip" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',html:!0,placement:"auto",content:function(){return r}}).on("shown.bs.popover",function(e){var t=$(e.target);$(document).on("click.closePopover",function(e){0===$(e.target).parents(".popover").length&&t.popover("hide")})}).on("hide.bs.popover",function(e){$(document).off("click.closePopover"),o.onCloseTooltip(e)})},ratingChange:function(e){$(e.currentTarget).prop("checked")?(this.$(".everyone").addClass("hidden"),this.$(".writerMature").removeClass("hidden")):(this.$(".everyone").removeClass("hidden"),this.$(".writerMature").addClass("hidden"))},onStoryTitleKeyUp:function(){"-1"!==this.$("#categoryselect").val()&&this.isNew&&this.$(".on-edit-save .text").text(t.utils.trans("Next"))},onStoryTitleFocus:function(){var e=this.$(".story-title");e.text().trim()===this.defaultStoryTitle&&(e.text(""),e.addClass("has-title"))},onStoryTitleBlur:function(){var e=this.$(".story-title");""===e.text().trim()?(e.text(this.defaultStoryTitle),e.removeClass("has-title")):e.hasClass("empty-border")&&""!==e.text()&&(e.removeClass("empty-border"),this.$("#title-warning").removeClass("red-warning"))},onCategorySelected:function(e){""!==this.$(".story-title").text()&&this.isNew&&this.$(".on-edit-save .text").text(t.utils.trans("Next"));var n=$(e.currentTarget);n.hasClass("empty-border")&&"-1"!==n.val()&&(n.removeClass("empty-border"),this.$("#category-empty-warning").removeClass("red-warning"))},onEditClose:function(){$(".publish-modal").modal("hide")},remove:function(){$(document).off("click.closePopover"),u.views.Base.prototype.remove.apply(this,arguments)},showFile:function(){this.isNew&&(this.$(".new-cover-upload").addClass("hidden"),this.$("#cover-uploader").removeClass("hidden"),this.$("#image-tooltip").addClass("hidden"))},onStoryDescriptionBlur:function(e){var t=$(e.currentTarget);t.hasClass("empty-border")&&""!==t.val()&&(t.removeClass("empty-border"),this.$("#description-warning").removeClass("red-warning"))},onSwitchTabs:function(e){var t=$(e.currentTarget);this.$(".on-switch-type").removeClass("active"),t.addClass("active"),"toc"===t.data("type")&&this.$(".table-of-contents").hasClass("hidden")?(this.$(".table-of-contents").removeClass("hidden"),this.$(".main-edit-form").addClass("hidden")):"story-detail"===t.data("type")&&this.$(".main-edit-form").hasClass("hidden")&&(this.$(".main-edit-form").removeClass("hidden"),this.$(".table-of-contents").addClass("hidden")),n.stopEvent(e)},fileReceivedCallback:function(){this.model.id&&this.saveCover()},createCanvaCover:function(t){var n=this,a=new XMLHttpRequest;a.open("GET",t.exportUrl,!0),a.responseType="blob",a.onload=function(t){if(200==this.status){var a=this.response;n.FileUpload.file=a,n.showFile(),n.FileUpload.$domDrop.addClass("drop-done"),n.model.id&&n.saveCover(),e.te.push("event","writer","cover",null,"create",{target:"canva"})}},a.send()}})),u.mixin(u.views.WorksItemDetails,"FileUpload","DragAndSort","SocialSharing","AutocompleteField")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<div class="error">\n  <div class="h6">\n'+(null!=(l=n.if.call(i,null!=t?t.title:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"  </div>\n"+(null!=(l=(n.greaterThan||t&&t.greaterThan||n.helperMissing).call(i,null!=(l=null!=t?t.errors:t)?l.length:l,1,{name:"greaterThan",hash:{},fn:e.program(6,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+"</div>\n"},2:function(e,t,n,a,s){var l;return"      "+e.escapeExpression("function"==typeof(l=null!=(l=n.title||(null!=t?t.title:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:s}):l)+"\n"},4:function(e,t,n,a,s){return"      "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Some errors occured while trying to save your story",{name:"trans",hash:{},data:s}))+"\n"},6:function(e,t,n,a,s){var l,i,r,o="  <ul>\n";return i=null!=(i=n.errors||(null!=t?t.errors:t))?i:n.helperMissing,r={name:"errors",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.errors||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o+"  </ul>\n"},7:function(e,t,n,a,s){return"      <li>"+e.escapeExpression(e.lambda(t,t))+"</li>\n"},9:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.errors||(null!=t?t.errors:t))?i:n.helperMissing,r={name:"errors",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.errors||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},10:function(e,t,n,a,s){return"      <p>"+e.escapeExpression(e.lambda(t,t))+"</p>\n"},12:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.successMessage:t,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:""},13:function(e,t,n,a,s){var l;return'  <div class="success">\n    <div class="h6">'+e.escapeExpression("function"==typeof(l=null!=(l=n.successMessage||(null!=t?t.successMessage:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"successMessage",hash:{},data:s}):l)+"</div>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.errors:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(12,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"StoryTags","storyTags",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"        "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Before you publish %s",null!=t?t.partTitle:t,{name:"trans",hash:{},data:s}))+"\n"},3:function(e,t,n,a,s){var l,i=e.lambda,r=n.blockHelperMissing;return(null!=(l=r.call(t,i(null!=(l=null!=t?t.story:t)?l.id:l,t),{name:"story.id",hash:{},fn:e.noop,inverse:e.program(4,s,0),data:s}))?l:"")+(null!=(l=r.call(t,i(null!=(l=null!=t?t.story:t)?l.id:l,t),{name:"story.id",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")},4:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?l:""},5:function(e,t,n,a,s){return"        "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Add Story Info",{name:"trans",hash:{},data:s}))+"\n        "},7:function(e,t,n,a,s){return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Please enter your story details",{name:"trans",hash:{},data:s}))+"\n"},9:function(e,t,n,a,s){return"        "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Edit Story Details",{name:"trans",hash:{},data:s}))+"\n"},11:function(e,t,n,a,s){return'      <button class="btn btn-grey on-edit-close">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Close",{name:"trans",hash:{},data:s}))+"</button>\n"},13:function(e,t,n,a,s){return'      <button class="btn btn-grey on-edit-cancel">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Cancel",{name:"trans",hash:{},data:s}))+"</button>\n"},15:function(e,t,n,a,s){return'      <button class="btn btn-orange on-edit-save"><span class="text">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Skip",{name:"trans",hash:{},data:s}))+'</span>\n        <div id="finish-tooltip" data-toggle="popover"></div>\n      </button>\n'},17:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isPublish:t,{name:"if",hash:{},fn:e.program(18,s,0),inverse:e.program(20,s,0),data:s}))?l:""},18:function(e,t,n,a,s){return'      <button class="btn btn-orange on-publish">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Publish",{name:"trans",hash:{},data:s}))+"</button>\n"},20:function(e,t,n,a,s){return'      <button class="btn btn-orange on-edit-save">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Save",{name:"trans",hash:{},data:s}))+"</button>\n"},22:function(e,t,n,a,s){return"new-image"},24:function(e,t,n,a,s){return" on-trigger-tooltip"},26:function(e,t,n,a,s){return" hidden"},28:function(e,t,n,a,s){return' data-toggle="dropdown" '},30:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'        <span data-toggle="popover" class="popover-icon" id="image-tooltip" title="'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Add a story cover",{name:"trans",hash:{},data:s}))+'">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</span>\n"},32:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'      <button class="btn btn-orange btn-view-as-reader on-view-as-reader" data-attr="wid-btn" data-url="'+e.escapeExpression((n.formatStoryUrl||t&&t.formatStoryUrl||r).call(i,null!=(l=null!=t?t.story:t)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'">\n        '+(null!=(l=(n.ifequal||t&&t.ifequal||r).call(i,null!=t?t.lang:t,"en",{name:"ifequal",hash:{},fn:e.program(33,s,0),inverse:e.program(35,s,0),data:s}))?l:"")+"\n      </button>\n"},33:function(e,t,n,a,s){return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"View as reader",{name:"trans",hash:{},data:s}))},35:function(e,t,n,a,s){return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Preview",{name:"trans",hash:{},data:s}))},37:function(e,t,n,a,s){var l;return'      <div class="social-share-wrapper">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.story:t)?l.published:l,{name:"if",hash:{},fn:e.program(38,s,0),inverse:e.noop,data:s}))?l:"")+"      </div>\n"},38:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"        <h5>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Share ",{name:"trans",hash:{},data:s}))+"</h5>\n"+(null!=(l=n.each.call(i,null!=(l=null!=t?t.story:t)?l.socialLinks:l,{name:"each",hash:{},fn:e.program(39,s,0),inverse:e.noop,data:s}))?l:"")},39:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(40,s,0),inverse:e.noop,data:s}))?l:"")+'"\n          '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n          "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,24,"wp-neutral-2","fa-2x social-icon",{name:"iconify",hash:{},data:s}))?l:"")+"\n        </a>\n"},40:function(e,t,n,a,s){return' social-share" target="_blank'},42:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["desktop.create.works_contests"],t,{name:"desktop.create.works_contests",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:""},44:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||n.helperMissing).call(i,"PAID_WRITER_INSIGHTS",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(45,s,0),inverse:e.noop,data:s}))?l:""},45:function(e,t,n,a,s){var l;return"            "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"WriterInsightsCTA","works-editor",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},47:function(e,t,n,a,s){return"active "},49:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.isPublish:t,{name:"unless",hash:{},fn:e.program(50,s,0),inverse:e.noop,data:s}))?l:""},50:function(e,t,n,a,s){return'                <button class="active on-switch-type" data-type="toc">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Table of Contents",{name:"trans",hash:{},data:s}))+"</button>\n"},52:function(e,t,n,a,s){return"publish-edit\n                "},54:function(e,t,n,a,s){var l;return(null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(55,s,0),inverse:e.noop,data:s}))?l:"")+"\n                "},55:function(e,t,n,a,s){return"hidden"},57:function(e,t,n,a,s){return" has-title"},59:function(e,t,n,a,s){return"on-trigger-tooltip"},61:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["desktop.create.works_character_item"],t,{name:"desktop.create.works_character_item",hash:{readonly:!0},data:s,indent:"                                ",helpers:n,partials:a,decorators:e.decorators}))?l:""},63:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["desktop.create.works_character_item"],t,{name:"desktop.create.works_character_item",data:s,indent:"                                ",helpers:n,partials:a,decorators:e.decorators}))?l:""},65:function(e,t,n,a,s){return'                          <span data-toggle="popover" class="popover-anchor on-trigger-tooltip" id="prefilled-tag-tooltip" title="Your submission has been tagged!"></span>\n'},67:function(e,t,n,a,s){return'                      <p class="fa-wp-grey"><small>Add the tag <a href="https://www.wattpad.com/story/189693848-unlimitedpride-write-a-thon"><span style="color:rgb(228,3,3)">#Un</span><span style="color:rgb(255,140,0)">lim</span><span style="color:rgb(0,128,38)">ite</span><span style="color:rgb(0,77,2555)">dPr</span><span style="color:rgb(117,7,135)">ide</span></a> to your story this month and Wattpad will donate $1 to GLSEN.</small></p>\n'},69:function(e,t,n,a,s,l,i){var r;return"                        "+(null!=(r=(n.select||t&&t.select||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.id:t,null!=t?t.name:t,null!=(r=null!=(r=null!=i[1]?i[1].story:i[1])?r.categoryObject:r)?r.id:r,{name:"select",hash:{},data:s}))?r:"")+"\n"},71:function(e,t,n,a,s){return"selected"},73:function(e,t,n,a,s,l,i){var r;return"                            "+(null!=(r=(n.select||t&&t.select||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.id:t,null!=t?t.name:t,null!=(r=null!=(r=null!=i[1]?i[1].story:i[1])?r.language:r)?r.id:r,{name:"select",hash:{},data:s}))?r:"")+"\n"},75:function(e,t,n,a,s,l,i){var r;return"                            "+(null!=(r=(n.select||t&&t.select||n.helperMissing).call(null!=t?t:e.nullContext||{},s&&s.index,t,null!=(r=null!=i[1]?i[1].story:i[1])?r.copyright:r,{name:"select",hash:{},data:s}))?r:"")+"\n"},77:function(e,t,n,a,s){return" checked"},79:function(e,t,n,a,s){return' disabled="disabled" '},81:function(e,t,n,a,s){return'                    <p class="rating-warning">\n                        '+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"The Wattpad community has rated your story Mature. For more info, please read Wattpad’s\n                        Content Guidelines:",{name:"trans",hash:{},data:s}))+" <a href='https://www.wattpad.com/guidelines'>https://www.wattpad.com/guidelines</a>\n                    </p>\n"},83:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression;return'                    <div class="form-group status-form">\n                    <div class="form-wrapper">\n                        <label class="rating-label">'+u((n.trans||t&&t.trans||c).call(o,"Story Status",{name:"trans",hash:{},data:s}))+'</label>\n                        <span data-toggle="popover" class="popover-icon" id="story-tooltip" title="'+u((n.trans||t&&t.trans||c).call(o,"Mark as Complete",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <span class="toggle-prompt">'+u((n.trans||t&&t.trans||c).call(o,"Complete?",{name:"trans",hash:{},data:s}))+'</span>\n                        <div class="onoffswitch">\n                        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="complete-switch"\n                            '+(null!=(r=n.if.call(o,null!=(r=null!=t?t.story:t)?r.completed:r,{name:"if",hash:{},fn:e.program(77,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'>\n                        <label class="onoffswitch-label" for="complete-switch">\n                            <span class="onoffswitch-inner">\n                            <span class="on">'+u((n.trans||t&&t.trans||c).call(o,"ON",{name:"trans",hash:{},data:s}))+'</span>\n                            <span class="off">'+u((n.trans||t&&t.trans||c).call(o,"OFF",{name:"trans",hash:{},data:s}))+'</span>\n                            </span>\n                            <span class="onoffswitch-switch"></span>\n                        </label>\n                        </div>\n                    </div>\n                    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.lambda,h=e.escapeExpression;return'<div id="works-item-edit">\n  <div id="edit-controls" class="edit-profile">\n    <button class="btn btn-text on-edit-cancel">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-left",24,{name:"iconify",hash:{},data:s}))?r:"")+'</button>\n    <div class="works-item-metadata">\n      <p class="small group-title">\n'+(null!=(r=n.if.call(c,null!=t?t.isPublish:t,{name:"if",hash:{},fn:e.program(1,s,0,l,i),inverse:e.program(3,s,0,l,i),data:s}))?r:"")+'      </p>\n      <span class="h4">'+h(d(null!=(r=null!=t?t.story:t)?r.title:r,t))+'</span>\n    </div>\n\n    <div class="actions pull-right" role="menu">\n      <img class="save-working hidden" src="/img/desktop-web/ajax-spinner-off-white.gif" />\n'+(null!=(r=n.if.call(c,null!=t?t.isPublish:t,{name:"if",hash:{},fn:e.program(11,s,0,l,i),inverse:e.program(13,s,0,l,i),data:s}))?r:"")+(null!=(r=n.if.call(c,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(15,s,0,l,i),inverse:e.program(17,s,0,l,i),data:s}))?r:"")+'    </div>\n  </div>\n  <div id="publish-status-banner"></div>\n  <div class="container">\n    <div class="col-lg-3 col-md-3 col-sm-12" id="picture-sidebar">\n      <div class="image-placeholder '+(null!=(r=n.if.call(c,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(22,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'" data-file-upload="drop">\n        '+h((n.connectCover||t&&t.connectCover||u).call(c,null!=(r=null!=t?t.story:t)?r.cover:r,null!=(r=null!=t?t.story:t)?r.title:r,256,"cover cover-xlg edit-cover",{name:"connectCover",hash:{},data:s}))+'\n\n        <div class="new-cover-upload'+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(24,s,0,l,i),inverse:e.noop,data:s}))?r:"")+(null!=(r=n.unless.call(c,null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n          <span class="dropdown-holder" '+(null!=(r=n.unless.call(c,null!=t?t.showTips:t,{name:"unless",hash:{},fn:e.program(28,s,0,l,i),inverse:e.noop,data:s}))?r:"")+">"+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-image",60,"wp-neutral-2","fa-3x",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n          <div class="add-cover-text dropdown-holder" '+(null!=(r=n.unless.call(c,null!=t?t.showTips:t,{name:"unless",hash:{},fn:e.program(28,s,0,l,i),inverse:e.noop,data:s}))?r:"")+">"+h((n.trans||t&&t.trans||u).call(c,"Add a cover",{name:"trans",hash:{},data:s}))+'</div>\n          <div class="drop-cover-text dropdown-holder" '+(null!=(r=n.unless.call(c,null!=t?t.showTips:t,{name:"unless",hash:{},fn:e.program(28,s,0,l,i),inverse:e.noop,data:s}))?r:"")+">"+h((n.trans||t&&t.trans||u).call(c,"Drop a cover",{name:"trans",hash:{},data:s}))+'</div>\n          <div class="triangle"></div>\n          <ul id="works-more-options-'+h("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+'" class="dropdown-menu cover-edit-dropdown" role="menu">\n            <li>\n              <a class="file-select" role="button" href="#" data-toggle="modal" data-target="#worksDelete">\n                '+h((n.trans||t&&t.trans||u).call(c,"Upload Cover",{name:"trans",hash:{},data:s}))+'\n              </a>\n            </li>\n            <li>\n                <a class="list-item-no-style" role="button" href="javascript:void(0);">\n                    '+(null!=(r=(n.reactComponent||t&&t.reactComponent||u).call(c,"CanvaButton","canva-button-new",{name:"reactComponent",hash:{},data:s}))?r:"")+'\n                </a>\n            </li>\n          </ul>\n        </div>\n\n        <div id="cover-uploader" class="button-group inline-block dropdown'+(null!=(r=n.if.call(c,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n          <div class="cover-edit-prompt">\n            <div class="default-state">\n              <span class="on-cover-edit hidden" data-toggle="dropdown">Edit your cover</span>\n              <span data-toggle="dropdown">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-edit",16,"wp-neutral-5","on-cover-edit-icon",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n              <div class="triangle"></div>\n              <ul id="works-more-options-'+h("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+'" class="dropdown-menu cover-edit-dropdown" role="menu">\n                <li>\n                  <a class="file-select" role="button" href="#" data-toggle="modal" data-target="#worksDelete">\n                    '+h((n.trans||t&&t.trans||u).call(c,"Upload Cover",{name:"trans",hash:{},data:s}))+'\n                  </a>\n                </li>\n                <li>\n                    <a class="list-item-no-style" role="button" href="javascript:void(0);">\n                        '+(null!=(r=(n.reactComponent||t&&t.reactComponent||u).call(c,"CanvaButton","canva-button-edit",{name:"reactComponent",hash:{},data:s}))?r:"")+'\n                    </a>\n                </li>\n              </ul>\n            </div>\n            <div class="drag-state">\n              <span class="on-cover-edit hidden">Drop your cover</span>\n              '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-plus",16,"wp-neutral-5","on-cover-edit-icon",{name:"iconify",hash:{},data:s}))?r:"")+'\n            </div>\n          </div>\n        </div>\n        <span class="empty-warning'+(null!=(r=n.unless.call(c,null!=t?t.needCover:t,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">'+h((n.trans||t&&t.trans||u).call(c,"Required",{name:"trans",hash:{},data:s}))+'</span>\n\n\n        <input accept="image/jpeg, image/png, image/gif" type="file" name="file" style="position: absolute; right: 0px; top: 0px; opacity: 0; height: 0; width: 0">\n\n'+(null!=(r=n.if.call(c,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(30,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"      </div>\n\n"+(null!=(r=n.unless.call(c,null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(32,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n"+(null!=(r=n.unless.call(c,null!=t?t.isPublish:t,{name:"unless",hash:{},fn:e.program(37,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'    </div>\n    <div class="col-lg-8 col-lg-offset-1 col-sm-12 col-md-8 col-md-offset-1" id="main-edit-container">\n      <div class="row">\n        <div id="contest-banner-container">\n'+(null!=(r=n.if.call(c,null!=t?t.isWattysEligible:t,{name:"if",hash:{},fn:e.program(42,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"        </div>\n\n"+(null!=(r=n.unless.call(c,null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(44,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n        <div class="work-section">\n            <div class="works-edit-select">\n                <button class="'+(null!=(r=n.if.call(c,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(47,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'on-switch-type" data-type="story-detail">'+h((n.trans||t&&t.trans||u).call(c,"Story Details",{name:"trans",hash:{},data:s}))+"</button>\n\n"+(null!=(r=n.unless.call(c,null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(49,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'            </div>\n\n            <form class="main-edit-form\n                '+(null!=(r=n.if.call(c,null!=t?t.isPublish:t,{name:"if",hash:{},fn:e.program(52,s,0,l,i),inverse:e.program(54,s,0,l,i),data:s}))?r:"")+'">\n\n                <div class="required-form-wrapper">\n                    <div class="form-group title-form">\n                    <label>'+h((n.trans||t&&t.trans||u).call(c,"Title",{name:"trans",hash:{},data:s}))+'</label>\n                    <span class="empty-warning'+(null!=(r=n.unless.call(c,null!=t?t.needTitle:t,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'" id="title-warning">'+h((n.trans||t&&t.trans||u).call(c,"Required",{name:"trans",hash:{},data:s}))+'</span>\n                    <div contenteditable="true" class="story-title'+(null!=(r=n.unless.call(c,null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(57,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">'+h(d(null!=(r=null!=t?t.story:t)?r.title:r,t))+'</div>\n                    </div>\n\n                    <div class="form-group description-form">\n                    <div class="form-wrapper">\n                        <label>'+h((n.trans||t&&t.trans||u).call(c,"Description",{name:"trans",hash:{},data:s}))+'</label>\n                        <span data-toggle="popover" class="popover-icon" id="description-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"Add a story description",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <span class="empty-warning'+(null!=(r=n.unless.call(c,null!=t?t.needDescription:t,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'" id="description-warning">'+h((n.trans||t&&t.trans||u).call(c,"Required",{name:"trans",hash:{},data:s}))+'</span>\n                    </div>\n                    <textarea type="text" name="title" class="story-description '+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(59,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">'+h(d(null!=(r=null!=t?t.story:t)?r.description:r,t))+'</textarea>\n                    </div>\n\n                    <div class="form-group characters-form">\n                        <div class="form-wrapper">\n                            <label>'+h((n.trans||t&&t.trans||u).call(c,"Main Characters",{name:"trans",hash:{},data:s}))+'</label>\n                            <span data-toggle="popover" class="popover-icon" id="characters-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"Who are your Main Characters?",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        </div>\n\n                        <div class="characters'+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(24,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=n.each.call(c,null!=t?t.characters:t,{name:"each",hash:{},fn:e.program(61,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n"+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=(r=null!=t?t.characters:t)?r.length:r,null!=t?t.charactersLimit:t,{name:"ifequal",hash:{},fn:e.noop,inverse:e.program(63,s,0,l,i),data:s}))?r:"")+'                        </div>\n                    </div>\n\n                    <div class="form-group tags-form">\n                    <div class="form-wrapper">\n                        <label>'+h((n.trans||t&&t.trans||u).call(c,"Tags",{name:"trans",hash:{},data:s}))+'</label>\n                        <span data-toggle="popover" class="popover-icon" id="tags-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"Help readers find your story",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <span class="empty-warning'+(null!=(r=n.unless.call(c,null!=t?t.needTag:t,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'" id="tag-empty-warning">'+h((n.trans||t&&t.trans||u).call(c,"Required",{name:"trans",hash:{},data:s}))+'</span>\n                    </div>\n                    <div class="tag-container'+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(24,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=n.if.call(c,null!=t?t.prefilledTag:t,{name:"if",hash:{},fn:e.program(65,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                        <div id="editable-tags" style="margin-bottom: 5px;">\n'+(null!=(r=e.invokePartial(a["desktop.create.works_item_editable_tag"],t,{name:"desktop.create.works_item_editable_tag",data:s,indent:"                        ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'                        </div>\n                        <div id="add-tag" class="tag-item with-icon on-add-tag">\n                        <span>'+h((n.trans||t&&t.trans||u).call(c,"Add a tag",{name:"trans",hash:{},data:s}))+"</span>"+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-plus",12,"wp-neutral-1",{name:"iconify",hash:{},data:s}))?r:"")+'\n                        </div>\n                        <span id="tag-input-wrapper">\n                        <input id="tag-input" class="hidden on-tag-input" placeholder="'+h((n.trans||t&&t.trans||u).call(c,"Separate tags with a space",{name:"trans",hash:{},data:s}))+'"\n                            autocomplete="off" />\n                        </span>\n                    </div>\n'+(null!=(r=n.if.call(c,null!=(r=null!=t?t.testGroups:t)?r.CONTEST_TAG:r,{name:"if",hash:{},fn:e.program(67,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                    </div>\n\n                    <div class="form-group inline-form">\n                    <div class="form-wrapper">\n                        <label for="categoryselect">'+h((n.trans||t&&t.trans||u).call(c,"Genre",{name:"trans",hash:{},data:s}))+'</label>\n                        <span data-toggle="popover" class="popover-icon" id="category-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"Tell Wattpad the genre of your story",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <select id="categoryselect" class="form-control '+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(59,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                        <option value="-1">'+h((n.trans||t&&t.trans||u).call(c,"Select a genre",{name:"trans",hash:{},data:s}))+"</option>\n"+(null!=(r=n.each.call(c,null!=(r=null!=t?t.story:t)?r.categories:r,{name:"each",hash:{},fn:e.program(69,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                        </select>\n                        <span class="empty-warning'+(null!=(r=n.unless.call(c,null!=t?t.needCategory:t,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'" id="category-empty-warning">'+h((n.trans||t&&t.trans||u).call(c,"Required",{name:"trans",hash:{},data:s}))+'</span>\n                    </div>\n                    </div>\n                </div>\n\n                <div class="form-group target-audience-form">\n                    <div class="form-wrapper">\n                    <label for="target-audience">'+h((n.trans||t&&t.trans||u).call(c,"Target Audience",{name:"trans",hash:{},data:s}))+'</label>\n                    <span data-toggle="popover" class="popover-icon" id="target-audience-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"Who is this story for?",{name:"trans",hash:{},data:s}))+'">\n                        '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n                    </span>\n                    <select id="target-audience" class="form-control '+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(59,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                        <option selected="true" disabled="disabled">'+h((n.trans||t&&t.trans||u).call(c,"Who is your primary audience?",{name:"trans",hash:{},data:s}))+'</option>\n                        <option value="8-13" '+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=t?t.targetAudience:t,"8-13",{name:"ifequal",hash:{},fn:e.program(71,s,0,l,i),inverse:e.noop,data:s}))?r:"")+">"+h((n.trans||t&&t.trans||u).call(c,"Middle Grade (8-13 years of age)",{name:"trans",hash:{},data:s}))+'</option>\n                        <option value="13-18" '+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=t?t.targetAudience:t,"13-18",{name:"ifequal",hash:{},fn:e.program(71,s,0,l,i),inverse:e.noop,data:s}))?r:"")+">"+h((n.trans||t&&t.trans||u).call(c,"Young Adult (13-18 years of age)",{name:"trans",hash:{},data:s}))+'</option>\n                        <option value="18-25" '+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=t?t.targetAudience:t,"18-25",{name:"ifequal",hash:{},fn:e.program(71,s,0,l,i),inverse:e.noop,data:s}))?r:"")+">"+h((n.trans||t&&t.trans||u).call(c,"New Adult (18-25 years of age)",{name:"trans",hash:{},data:s}))+'</option>\n                        <option value="25+" '+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=t?t.targetAudience:t,"25+",{name:"ifequal",hash:{},fn:e.program(71,s,0,l,i),inverse:e.noop,data:s}))?r:"")+">"+h((n.trans||t&&t.trans||u).call(c,"Adult (25+ years of age)",{name:"trans",hash:{},data:s}))+'</option>\n                    </select>\n                    </div>\n                </div>\n\n                <div class="inline-form-wrapper">\n                    <div class="inline-form-row">\n                    <div class="form-group inline-form">\n                        <div class="form-wrapper">\n                        <label>'+h((n.trans||t&&t.trans||u).call(c,"Language",{name:"trans",hash:{},data:s}))+'</label>\n                        <span data-toggle="popover" class="popover-icon" id="language-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"What language is your story in?",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <select id="languageselect" class="form-control '+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(59,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=n.each.call(c,null!=(r=null!=t?t.story:t)?r.languages:r,{name:"each",hash:{},fn:e.program(73,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                        </select>\n                        </div>\n                    </div>\n                    <div class="form-group inline-form copyright-form">\n                        <div class="form-wrapper">\n                        <label>'+h((n.trans||t&&t.trans||u).call(c,"Copyright",{name:"trans",hash:{},data:s}))+'</label>\n                        <span data-toggle="popover" class="popover-icon" id="copyright-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"Who owns your story?",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <select id="copyrightSelect" class="form-control '+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(59,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=n.each.call(c,null!=(r=null!=t?t.story:t)?r.copyrights:r,{name:"each",hash:{},fn:e.program(75,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                        </select>\n                        </div>\n                    </div>\n                    </div>\n\n                    <div class="form-group rating-form">\n                    <div class="form-wrapper">\n                        <label class="rating-label">'+h((n.trans||t&&t.trans||u).call(c,"Rating",{name:"trans",hash:{},data:s}))+'</label>\n                        <span data-toggle="popover" class="popover-icon" id="rating-tooltip" title="'+h((n.trans||t&&t.trans||u).call(c,"Rate your story",{name:"trans",hash:{},data:s}))+'">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-info",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <span class="toggle-prompt">'+h((n.trans||t&&t.trans||u).call(c,"Mature",{name:"trans",hash:{},data:s}))+'</span>\n                        <div class="onoffswitch '+(null!=(r=n.if.call(c,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(59,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="mature-switch"\n                            '+(null!=(r=n.if.call(c,null!=(r=null!=t?t.story:t)?r.mature:r,{name:"if",hash:{},fn:e.program(77,s,0,l,i),inverse:e.noop,data:s}))?r:"")+" "+(null!=(r=n.if.call(c,null!=(r=null!=t?t.story:t)?r.ratingLocked:r,{name:"if",hash:{},fn:e.program(79,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'>\n                        <label class="onoffswitch-label" for="mature-switch">\n                            <div class="onoffswitch-inner">\n                            <span class="on">'+h((n.trans||t&&t.trans||u).call(c,"ON",{name:"trans",hash:{},data:s}))+'</span>\n                            <span class="off">'+h((n.trans||t&&t.trans||u).call(c,"OFF",{name:"trans",hash:{},data:s}))+'</span>\n                            </div>\n                            <span class="onoffswitch-switch"></span>\n                        </label>\n                        </div>\n                    </div>\n\n                    <p class="rating-warning everyone'+(null!=(r=n.unless.call(c,null!=(r=null!=t?t.story:t)?r.everyone:r,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                        '+h((n.trans||t&&t.trans||u).call(c,"Your story is appropriate for all audiences. The Wattpad community has the ability to rate\n                        your story Mature. For more info, please read Wattpad’s Content Guidelines:",{name:"trans",hash:{},data:s}))+" <a href='https://www.wattpad.com/guidelines'>https://www.wattpad.com/guidelines</a>\n                    </p>\n                    <p class=\"rating-warning writerMature"+(null!=(r=n.unless.call(c,null!=(r=null!=t?t.story:t)?r.writerMature:r,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                        '+h((n.trans||t&&t.trans||u).call(c,"Your story contains graphic depictions of violence, sexuality, strong language, and/or other\n                        mature themes. For more info, please read Wattpad’s Content Guidelines:",{name:"trans",hash:{},data:s}))+" <a href='https://www.wattpad.com/guidelines'>https://www.wattpad.com/guidelines</a>\n                    </p>\n"+(null!=(r=n.if.call(c,null!=t?t.communityMature:t,{name:"if",hash:{},fn:e.program(81,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                    </div>\n\n"+(null!=(r=n.unless.call(c,null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(83,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                </div>\n            </form>\n\n            <div class="table-of-contents '+(null!=(r=n.if.call(c,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(55,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=e.invokePartial(a["desktop.create.works_table_of_contents"],t,{name:"desktop.create.works_table_of_contents",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'            </div>\n        </div>\n\n      </div>\n\n    </div>\n\n  </div>\n  <div id="details-modal" class="modal fade" role="dialog">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <span class="close pull-right" data-dismiss="modal">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n          <span class="sr-only">'+h((n.trans||t&&t.trans||u).call(c,"Close",{name:"trans",hash:{},data:s}))+'</span>\n\n          <div class="modal-title delete-part-modal hidden">'+h((n.trans||t&&t.trans||u).call(c,"Confirm Part Delete",{name:"trans",hash:{},data:s}))+'</div>\n          <div class="modal-title delete-published-part-modal hidden">'+h((n.trans||t&&t.trans||u).call(c,"Delete Part?",{name:"trans",hash:{},data:s}))+'</div>\n          <div class="modal-title unpublish-part-modal hidden">'+h((n.trans||t&&t.trans||u).call(c,"Unpublish Part?",{name:"trans",hash:{},data:s}))+'</div>\n          <div class="modal-title unpublish-story-modal hidden">'+h((n.trans||t&&t.trans||u).call(c,"Unpublish Story?",{name:"trans",hash:{},data:s}))+'</div>\n          <div class="modal-title delete-story-modal hidden">'+h((n.trans||t&&t.trans||u).call(c,"Confirm Story Delete",{name:"trans",hash:{},data:s}))+'</div>\n          <div class="modal-title delete-published-story-modal hidden">'+h((n.trans||t&&t.trans||u).call(c,"Delete Story?",{name:"trans",hash:{},data:s}))+'</div>\n        </div>\n        <div class="modal-body">\n'+(null!=(r=e.invokePartial(a["desktop.components.modal.share_embed"],t,{name:"desktop.components.modal.share_embed",data:s,indent:"          ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'          <iframe id="stats-modal" frameborder="0" class="hidden" data-href="/dialog/story_stats?groupid='+h(d(null!=(r=null!=t?t.story:t)?r.id:r,t))+'&load-font=1"></iframe>\n\n          <div class="hidden warning delete-published-story-modal delete-story-modal delete-published-part-modal delete-part-modal">\n            '+h((n.trans||t&&t.trans||u).call(c,"WARNING: This cannot be undone.",{name:"trans",hash:{},data:s}))+'\n          </div>\n\n          <div class="hidden question-modal unpublish-part-modal">\n            <div class="prompt">\n              '+h((n.trans||t&&t.trans||u).call(c,"Draft stories can't be seen by other members of Wattpad, so they don't get any new reads, votes, or comments.",{name:"trans",hash:{},data:s}))+'\n            </div>\n\n            <div class="action-buttons two-btns">\n              <button class="btn btn-long btn-teal on-do-unpublish-part">'+h((n.trans||t&&t.trans||u).call(c,"Unpublish",{name:"trans",hash:{},data:s}))+'</button>\n              <button class="btn btn-short btn-grey" data-dismiss="modal">'+h((n.trans||t&&t.trans||u).call(c,"Cancel",{name:"trans",hash:{},data:s}))+'</button>\n            </div>\n          </div>\n\n          <div class="hidden question-modal delete-published-part-modal">\n            <div class="prompt">\n              '+(null!=(r=(n.trans||t&&t.trans||u).call(c,"If you're unsure, it's better to <strong>unpublish</strong> your part. Unpublished parts can only be seen by you, so they don't get any new reads, votes, or comments.",{name:"trans",hash:{},data:s}))?r:"")+'\n            </div>\n            <div class="action-buttons">\n              <button class="btn btn-red on-delete-part">'+h((n.trans||t&&t.trans||u).call(c,"Delete",{name:"trans",hash:{},data:s}))+'</button>\n              <button class="btn btn-teal on-do-unpublish-part">'+h((n.trans||t&&t.trans||u).call(c,"Unpublish",{name:"trans",hash:{},data:s}))+'</button>\n              <button class="btn btn-grey" data-dismiss="modal">'+h((n.trans||t&&t.trans||u).call(c,"Cancel",{name:"trans",hash:{},data:s}))+'</button>\n            </div>\n          </div>\n\n          <div class="hidden question-modal delete-part-modal">\n            <div class="prompt">\n              <div>'+(null!=(r=(n.trans||t&&t.trans||u).call(c,"All <strong>reads</strong> for this part will be <strong>deleted</strong>.",{name:"trans",hash:{},data:s}))?r:"")+"</div>\n              <div>"+(null!=(r=(n.trans||t&&t.trans||u).call(c,"All <strong>votes</strong> for this part will be <strong>deleted</strong>.",{name:"trans",hash:{},data:s}))?r:"")+"</div>\n              <div>"+(null!=(r=(n.trans||t&&t.trans||u).call(c,"All <strong>comments</strong> for this part will be <strong>deleted</strong>.",{name:"trans",hash:{},data:s}))?r:"")+'</div>\n            </div>\n            <div class="action-buttons two-btns">\n              <button class="btn btn-long btn-red on-do-delete-part">'+h((n.trans||t&&t.trans||u).call(c,"Delete Forever",{name:"trans",hash:{},data:s}))+'</button>\n              <button class="btn btn-short btn-grey" data-dismiss="modal">'+h((n.trans||t&&t.trans||u).call(c,"Cancel",{name:"trans",hash:{},data:s}))+'</button>\n            </div>\n          </div>\n\n          <div class="hidden question-modal unpublish-story-modal">\n            <div class="prompt">\n              '+h((n.trans||t&&t.trans||u).call(c,"Draft stories can't be seen by other members of Wattpad, so they don't get any new reads, votes, or comments.",{name:"trans",hash:{},data:s}))+'\n            </div>\n            <div class="action-buttons two-btns">\n              <button class="btn btn-long btn-teal on-do-unpublish-story cta">'+h((n.trans||t&&t.trans||u).call(c,"Unpublish",{name:"trans",hash:{},data:s}))+'</button>\n              <button class="btn btn-short btn-grey" data-dismiss="modal">'+h((n.trans||t&&t.trans||u).call(c,"Cancel",{name:"trans",hash:{},data:s}))+'</button>\n            </div>\n\n            <div id="working-wrapper" class="hidden">\n              <div id="unpublish-working">'+h((n.trans||t&&t.trans||u).call(c,"Working",{name:"trans",hash:{},data:s}))+' &hellip;</div>\n              <div class="progress">\n                <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                  aria-valuemax="100" style="width: 0%;"></div>\n              </div>\n            </div>\n          </div>\n\n          <div class="hidden question-modal delete-published-story-modal">\n            <div class="prompt">\n              '+(null!=(r=(n.trans||t&&t.trans||u).call(c,"If you're unsure, it's better to <strong>unpublish</strong> your story. Unpublished stories can only be seen by you, so they don't get any new reads, votes, or comments.",{name:"trans",hash:{},data:s}))?r:"")+'\n            </div>\n            <div class="action-buttons">\n              <button class="btn btn-red on-delete-story">'+h((n.trans||t&&t.trans||u).call(c,"Delete",{name:"trans",hash:{},data:s}))+'</button>\n              <button class="btn btn-teal on-unpublish-story">'+h((n.trans||t&&t.trans||u).call(c,"Unpublish",{name:"trans",hash:{},data:s}))+'</button>\n              <button class="btn btn-grey" data-dismiss="modal">'+h((n.trans||t&&t.trans||u).call(c,"Cancel",{name:"trans",hash:{},data:s}))+'</button>\n            </div>\n          </div>\n\n          <div class="hidden question-modal delete-story-modal">\n            <div class="prompt">\n              <div>'+(null!=(r=(n.trans||t&&t.trans||u).call(c,"All <strong>parts</strong> for this story will be <strong>deleted</strong>.",{name:"trans",hash:{},data:s}))?r:"")+"</div>\n              <div>"+(null!=(r=(n.trans||t&&t.trans||u).call(c,"All <strong>reads</strong> for this story will be <strong>deleted</strong>.",{name:"trans",hash:{},data:s}))?r:"")+"</div>\n              <div>"+(null!=(r=(n.trans||t&&t.trans||u).call(c,"All <strong>votes</strong> for this story will be <strong>deleted</strong>.",{name:"trans",hash:{},data:s}))?r:"")+"</div>\n              <div>"+(null!=(r=(n.trans||t&&t.trans||u).call(c,"All <strong>comments</strong> for this story will be <strong>deleted</strong>.",{name:"trans",hash:{},data:s}))?r:"")+'</div>\n            </div>\n\n            <form id="delete-story-form">\n              <div class="hidden alert alert-danger" role="alert">\n                '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-warning",16,"wp-error-1",{name:"iconify",hash:{},data:s}))?r:"")+" <div>"+h((n.trans||t&&t.trans||u).call(c,"Please correct the following",{name:"trans",hash:{},data:s}))+'</div>\n                <ul class="messages"></ul>\n              </div>\n\n              <div class="form-group">\n                <input id="username" class="form-control input-lg enable" type="text" autocomplete="off" autocorrect="off"\n                  autocapitalize="off" placeholder="'+h((n.trans||t&&t.trans||u).call(c,"Username",{name:"trans",hash:{},data:s}))+'">\n              </div>\n              <div class="form-group last">\n                <input id="confirm-username" class="form-control input-lg enable" type="text" autocomplete="off"\n                  autocorrect="off" autocapitalize="off" placeholder="'+h((n.trans||t&&t.trans||u).call(c,"Confirm Username",{name:"trans",hash:{},data:s}))+'">\n              </div>\n\n              <div class="action-buttons two-btns">\n                <input type="submit" class="btn btn-long btn-red" value="'+h((n.trans||t&&t.trans||u).call(c,"Delete Forever",{name:"trans",hash:{},data:s}))+'">\n                <button class="btn btn-short btn-grey" data-dismiss="modal">'+h((n.trans||t&&t.trans||u).call(c,"Cancel",{name:"trans",hash:{},data:s}))+"</button>\n              </div>\n            </form>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"},usePartial:!0,useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'readonly="readonly"'},3:function(e,t,n,a,s){var l;return'    <div class="btn btn-orange on-remove-character">'+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-minus",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"</div>\n"},5:function(e,t,n,a,s){var l;return'    <div class="btn btn-grey on-add-character">'+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-plus",16,"wp-neutral-1",{name:"iconify",hash:{},data:s}))?l:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="character">\n  <input type="text" class="character-input" name="character" '+(null!=(l=n.if.call(r,null!=t?t.readonly:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+' placeholder="'+c((n.trans||t&&t.trans||o).call(r,"Name",{name:"trans",hash:{},data:s}))+'" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" value="'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'"/>\n\n'+(null!=(l=n.if.call(r,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r;return null!=(r=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.isPublish:t,{name:"unless",hash:{},fn:e.program(2,s,0,l,i),inverse:e.noop,data:s}))?r:""},2:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression;return'    <div class="works-item-toc">\n      <h4 class="vcenter hidden">'+u((n.trans||t&&t.trans||c).call(o,"Table of Contents",{name:"trans",hash:{},data:s}))+'</h4>\n      <button class="btn btn-orange on-new-part">+ '+u((n.trans||t&&t.trans||c).call(o,"New Part",{name:"trans",hash:{},data:s}))+'</button>\n\n      <div class="parts-list text-left" data-drag="true">\n'+(null!=(r=n.each.call(o,null!=(r=null!=t?t.story:t)?r.parts:r,{name:"each",hash:{},fn:e.program(3,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"      </div>\n    </div>\n"},3:function(e,t,n,a,s,l,i){var r,o,c,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h="function",p=e.escapeExpression,m=n.blockHelperMissing,f='          <div class="story-part" data-id="'+p(typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:d)===h?o.call(u,{name:"id",hash:{},data:s}):o)+'">\n            <div class="drag-handle vcenter">\n              '+(null!=(r=(n.iconify||t&&t.iconify||d).call(u,"fa-menu",28,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n            </div>\n            <div class="part-meta vcenter">\n              <div class="part-name col-xs-12">\n'+(null!=(r=n.if.call(u,(n.isTestGroup||t&&t.isTestGroup||d).call(u,"STORY_IMAGE_MOD",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(4,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                <a href="/myworks/'+p(e.lambda(null!=(r=null!=i[1]?i[1].story:i[1])?r.id:r,t))+"/write/"+p(typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:d)===h?o.call(u,{name:"id",hash:{},data:s}):o)+'"\n                   class="auto-shorten on-navigate">'+p(typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:d)===h?o.call(u,{name:"title",hash:{},data:s}):o)+'</a>\n              </div>\n              <div class="part-detail">\n                <div class="col-xs-10 col-sm-5">\n                    <span class="publish-state';return o=null!=(o=n.draft||(null!=t?t.draft:t))?o:d,c={name:"draft",hash:{},fn:e.noop,inverse:e.program(7,s,0,l,i),data:s},r=typeof o===h?o.call(u,c):o,n.draft||(r=m.call(t,r,c)),null!=r&&(f+=r),o=null!=(o=n.deleted||(null!=t?t.deleted:t))?o:d,c={name:"deleted",hash:{},fn:e.program(9,s,0,l,i),inverse:e.noop,data:s},r=typeof o===h?o.call(u,c):o,n.deleted||(r=m.call(t,r,c)),null!=r&&(f+=r),f+=' ">\n'+(null!=(r=n.if.call(u,null!=t?t.deleted:t,{name:"if",hash:{},fn:e.program(11,s,0,l,i),inverse:e.program(13,s,0,l,i),data:s}))?r:"")+"                    </span>\n                  <span> - "+p((n.formatDate||t&&t.formatDate||d).call(u,null!=t?t.modifyDate:t,"MMM DD, YYYY",{name:"formatDate",hash:{},data:s}))+'</span>\n                </div>\n                <div class="col-xs-10 col-sm-5">\n',o=null!=(o=n.stats||(null!=t?t.stats:t))?o:d,c={name:"stats",hash:{},fn:e.program(18,s,0,l,i),inverse:e.noop,data:s},r=typeof o===h?o.call(u,c):o,n.stats||(r=m.call(t,r,c)),null!=r&&(f+=r),o=null!=(o=n.stats||(null!=t?t.stats:t))?o:d,c={name:"stats",hash:{},fn:e.noop,inverse:e.program(20,s,0,l,i),data:s},r=typeof o===h?o.call(u,c):o,n.stats||(r=m.call(t,r,c)),null!=r&&(f+=r),f+='                </div>\n              </div>\n            </div>\n            <div class="button-group vcenter dropdown">\n              <button class="btn btn-white dropdown-toggle" data-toggle="dropdown" role="button" aria-controls="profile-more-options-'+p(typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:d)===h?o.call(u,{name:"id",hash:{},data:s}):o)+'" aria-expanded="false" aria-label="'+p((n.trans||t&&t.trans||d).call(u,"More options",{name:"trans",hash:{},data:s}))+" "+p((n.trans||t&&t.trans||d).call(u,"button",{name:"trans",hash:{},data:s}))+'." aria-hidden="true">'+(null!=(r=(n.iconify||t&&t.iconify||d).call(u,"fa-more",18,"wp-neutral-2","fa-l",{name:"iconify",hash:{},data:s}))?r:"")+'</button>\n              <div class="triangle"></div>\n              <ul id="works-more-options-'+p(typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:d)===h?o.call(u,{name:"id",hash:{},data:s}):o)+'" class="dropdown-menu align-right"\n                  role="menu">\n                <li>\n                  <a target="_blank" href="'+p((n.formatStoryUrl||t&&t.formatStoryUrl||d).call(u,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" data-url="'+p((n.formatStoryUrl||t&&t.formatStoryUrl||d).call(u,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'"\n                     class="on-view-as-reader" data-id="'+p(typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:d)===h?o.call(u,{name:"id",hash:{},data:s}):o)+'" data-attr="wid-toc">\n                    '+(null!=(r=(n.ifequal||t&&t.ifequal||d).call(u,null!=i[1]?i[1].lang:i[1],"en",{name:"ifequal",hash:{},fn:e.program(22,s,0,l,i),inverse:e.program(24,s,0,l,i),data:s}))?r:"")+"\n                  </a>\n                </li>\n                <li>\n"+(null!=(r=n.unless.call(u,null!=t?t.draft:t,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                </li>\n",o=null!=(o=n.draft||(null!=t?t.draft:t))?o:d,c={name:"draft",hash:{},fn:e.noop,inverse:e.program(28,s,0,l,i),data:s},r=typeof o===h?o.call(u,c):o,n.draft||(r=m.call(t,r,c)),null!=r&&(f+=r),o=null!=(o=n.draft||(null!=t?t.draft:t))?o:d,c={name:"draft",hash:{},fn:e.program(30,s,0,l,i),inverse:e.noop,data:s},r=typeof o===h?o.call(u,c):o,n.draft||(r=m.call(t,r,c)),null!=r&&(f+=r),f+"              </ul>\n            </div>\n          </div>\n"},4:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasBannedImages:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:""},5:function(e,t,n,a,s){var l;return"                    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-image-warning",18,"wp-warning-01",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},7:function(e,t,n,a,s){return" published"},9:function(e,t,n,a,s){return" deleted"},11:function(e,t,n,a,s){return"                        "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted",{name:"trans",hash:{},data:s}))+"\n"},13:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.draft||(null!=t?t.draft:t))?i:n.helperMissing,r={name:"draft",hash:{},fn:e.program(14,s,0),inverse:e.program(16,s,0),data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.draft||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},14:function(e,t,n,a,s){return"                          "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Draft",{name:"trans",hash:{},data:s}))+"\n"},16:function(e,t,n,a,s){return"                          "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Published",{name:"trans",hash:{},data:s}))+"\n"},18:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                    <div class="meta">\n                      <div class="col-xs-4">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+'</div>\n                      <div class="col-xs-4">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+'</div>\n                      <div class="col-xs-4">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-comment",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.commentCount:t,{name:"count",hash:{},data:s}))+"\n                      </div>\n                    </div>\n"},20:function(e,t,n,a,s){return'                    <div class="no-stats">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"no stats available",{name:"trans",hash:{},data:s}))+"</div>\n"},22:function(e,t,n,a,s){return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"View as reader",{name:"trans",hash:{},data:s}))},24:function(e,t,n,a,s){return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Preview",{name:"trans",hash:{},data:s}))},26:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                    <a role="button" href="" data-toggle="modal"\n                       class="on-unpublish-part"\n                       data-target="#details-modal"\n                       data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'">'+o((n.trans||t&&t.trans||r).call(i,"Unpublish",{name:"trans",hash:{},data:s}))+"</a>\n"},28:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                  <li>\n                    <a role="button" href="" data-toggle="modal"\n                       data-target="#details-modal"\n                       class="on-delete-published-part" data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'">\n                      '+o((n.trans||t&&t.trans||r).call(i,"Delete Part",{name:"trans",hash:{},data:s}))+"\n                    </a>\n                  </li>\n"},30:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                  <li>\n                    <a role="button" href="" data-toggle="modal"\n                       data-target="#details-modal"\n                       class="on-delete-part" data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'">\n                      '+o((n.trans||t&&t.trans||r).call(i,"Delete Part",{name:"trans",hash:{},data:s}))+"\n                    </a>\n                  </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r;return null!=(r=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.isNew:t,{name:"unless",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:""},useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"ContestBanner","contest-banner",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n\n\n\n\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(190));!function(e,t,n,s,l){s.add("PostPublishModal",s.views.Base.extend({template:a.default,className:"post-publish-modal modal fade",events:{"tap .share-embed":"hideModal","click .share-embed":"stopEvent","tap .on-post-message":"onPostMessage","click .on-post-message":"stopEvent"},showModal:function(){this.$el.modal("show")},hideModal:function(){this.$el.modal("hide")},render:function(){return this.$el.html(this.template(t.extend(this.model.toJSON(),{links:this.options.links,showBroadcastMessaging:this.options.showBroadcastMessaging,username:l.currentUser().get("username"),testGroups:n.testGroups}))),this},sendPrometheusEventFromBroadcast:function(){var t=this.model.get("group").id;e.te.push("event","modal","story_publish","broadcast_message","click",{storyid:t})},onPostMessage:function(e){l.stopEvent(e);var t=this.$(".broadcast-message").val().trim(),a=this.model.get("group").id,i=n.siteRoot+"/story/"+a;if(""!==t){var r={broadcast:!0,body:t+" "+i};new s.models.Message({ownername:l.currentUser().get("username")}).save(r,{success:this.onBroadcastMessageSuccess.bind(this),error:this.onBroadcastMessageError.bind(this)})}},onBroadcastMessageSuccess:function(e,t,n){this.sendPrometheusEventFromBroadcast(),this.trigger("message:new",e),this.$(".broadcast-message").val("").blur();var a=l.iconify("fa-check",16,"wp-base-2")+l.trans("Your message has been posted!");this.$(".message-info").html(a),this.$(".message-wrapper").addClass("hidden"),this.$(".profile-link").removeClass("hidden")},onBroadcastMessageError:function(e,t,n){var a=l.iconify("fa-warning",16,"wp-lighterror")+l.trans("There was a problem posting your message, please try again later.");this.$(".message-info").html(a)}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"              <p>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Your story can be found here",{name:"trans",hash:{},data:s}))+'</p>\n              <div class="taglist">\n'+(null!=(l=n.each.call(i,null!=(l=null!=t?t.group:t)?l.tags:l,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"              </div>\n"},2:function(e,t,n,a,s){var l=e.lambda,i=e.escapeExpression;return'                  <span class="tag"><a href="/stories/'+i(l(t,t))+'">#'+i(l(t,t))+"</a> </span>\n"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"              <p>"+o((n.trans||t&&t.trans||r).call(i,"Get your story discovered!",{name:"trans",hash:{},data:s}))+'</p><a href="'+o(e.lambda(null!=(l=null!=t?t.group:t)?l.url:l,t))+'">'+o((n.trans||t&&t.trans||r).call(i,"Add tags to your story.",{name:"trans",hash:{},data:s}))+"</a>\n"},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'        <div class="info col-xs-12">\n          <h4 class="title">'+o((n.trans||t&&t.trans||r).call(i,"Share what's great about your story",{name:"trans",hash:{},data:s}))+'</h4>\n          <div class="content">\n            <div class="message-wrapper">\n              <input class="broadcast-message" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Write a message...",{name:"trans",hash:{},data:s}))+'">\n              <button class="btn btn-orange on-post-message">'+o((n.trans||t&&t.trans||r).call(i,"Post",{name:"trans",hash:{},data:s}))+'</button>\n            </div>\n            <div class="message-info">'+o((n.trans||t&&t.trans||r).call(i,"This will post to your profile and notify your followers",{name:"trans",hash:{},data:s}))+'</div>\n            <a class="on-navigate profile-link hidden" href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'/conversations">'+o((n.trans||t&&t.trans||r).call(i,"View on your profile",{name:"trans",hash:{},data:s}))+"</a>\n          </div>\n        </div>\n"},8:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'            <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">"+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,18,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n"},9:function(e,t,n,a,s){return' social-share" target="_blank'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="modal-dialog" id="generic-modal">\n  <div class="modal-content">\n    <header class="modal-header">\n      <h2 class="modal-title text-center">'+c((n.trans||t&&t.trans||o).call(r,"Congratulations!",{name:"trans",hash:{},data:s}))+'</h1>\n      <div class="close" data-dismiss="modal">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      </div>\n    </header>\n    <div class="modal-body clearfix">\n      <div class="col-xs-4">\n        <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-story-details cover pull-left on-cover">\n          <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=(l=null!=t?t.group:t)?l.cover:l,150,{name:"resizeCover",hash:{},data:s}))+'" alt="'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'">\n        </a>\n      </div>\n      <div class="col-xs-8">\n        <div class="info col-xs-12">\n          <h4 class="title">'+c((n.trans||t&&t.trans||o).call(r,"You just published %s",null!=t?t.title:t,{name:"trans",hash:{},data:s}))+'!</h4>\n          <div class="content">\n'+(null!=(l=n.if.call(r,null!=(l=null!=t?t.group:t)?l.tags:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"          </div>\n        </div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.showBroadcastMessaging:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+'\n        <h4 class="title">'+c((n.trans||t&&t.trans||o).call(r,"Share and get discovered:",{name:"trans",hash:{},data:s}))+'</h4>\n        <div class="social-share-links">\n'+(null!=(l=n.each.call(r,null!=t?t.links:t,{name:"each",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+"        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(192));!function(e,t,n,s){s.add("DummyReactView",s.views.Base.extend({template:a.default,initialize:function(e){if(!(e=e||{}).component)throw new Error("Must pass in a React component");if(!e.componentId)throw new Error("Must pass in a React componentId");this.component=e.component,this.componentId=e.componentId,this.componentData=e.componentData||{}},render:function(){return this.$el.html(this.template(_.extend(this.componentData,{component:this.component,componentId:this.componentId}))),this}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.component:t,null!=t?t.componentId:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(8));!function(e,t,n,s,l,i,r){i.add("PromotedStoryItem",i.views.Base.extend({className:"promoted-story-section",events:{"tap .on-story-preview":"onStoryPreview","click .on-story-preview":"stopEvent"},initialize:function(e){Handlebars.registerPartial("core.item_views.story_item",a.default),e=e||{},this.fromPage=e.fromPage||"",this.template=e.template||t.noop,this.storyId=e.storyId||null,this.promotedEl=e.promotedEl||"",this.viewed=!1,this.model=new i.models.PromotedStoryModel(e),t.bindAll(this,"trackViews")},remove:function(){this.recommendedStories&&this.recommendedStories.remove(),n(e).off("scroll",this.trackViews),i.views.Base.prototype.remove.apply(this,arguments)},render:function(){var a=this;return a.model.fetch().then(function(s){if(s)if("stories-similar"==a.templateName){var l={hasStories:!0,stories:[s]};a.$el.empty().append(a.template(l)),n(e).on("scroll",a.trackViews),n(a.promotedEl).removeClass("hidden"),t.defer(function(){a.trackViews()})}else{s.user.fullname=s.user.fullname||s.user.name,s.user.name=s.user.username;var o={items:{stories:[s]},tracking:{impressionUrl:a.model.impressionUrls,clickUrl:a.model.clickUrls}},c=new r.Model;c.set("data",o),c.set("type","promotedStoriesRecommended"),a.recommendedStories=new i.views.DiscoverModule({model:c,experience:"story_reading"}),a.recommendedStories.setElement(n(".promoted-recommended-stories-view")),a.recommendedStories.render(),n(".colWrap").removeClass("no-promoted-section"),n(".colWrap").addClass("has-promoted-section"),n(a.promotedEl).removeClass("hidden")}}),this},trackViews:t.throttle(function(){l.isOnScreen(this.$el,.67)&&!this.viewed&&(this.viewed=!0,t.each(this.model.impressionUrls,function(e){n.ajax({type:"GET",url:e})}))},200),onStoryPreview:function(a){var s=n(a.currentTarget),l=this.model.storyModel;"storyReading"==this.fromPage&&e.te.push("event","reading","similar_stories","promoted_story","click",{current_storyid:this.storyId,storyid:l.get("id"),campaignid:s.data("author-name")}),t.each(this.model.clickUrls,function(e){n.ajax({type:"GET",url:e})});var r=new i.views.BrowseStoryPreview({isHome:!1,model:l});this.$("#preview-modal").empty().append(r.render().$el),r.openModal()}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(195));!function(e,t,n,s){s.add("SearchFieldBase",s.views.Base.extend({autocompleteTemplate:a.default,events:{"tap    .on-autocomplete-item":"onAutocompleteItem","click  .on-autocomplete-item":"stopEvent"},initialize:function(e){this.listenTo(s,"navbar:search:save",this.saveSearchTerm)},getSearchUrl:function(e){return"/search/"},saveSearchTerm:function(e){try{if(e=e.trim(),!t.isEmpty(e)){this.sendSearchTracking(e);var n=JSON.parse(localStorage.getItem("recentSearches"))||[];n.unshift(e),n=t.uniq(n),localStorage.setItem("recentSearches",JSON.stringify(n.slice(0,3)))}}catch(e){}},sendSearchTracking:function(t){e.te.push("event","search","story",null,"search",{search:t.trim(),tags:t.match(/#[\w]+(?=\s|$)/g)})},onAutocompleteItem:function(e){var t=$(e.currentTarget).attr("href");n.utils.pushEvent({autocomplete:{click:!0,category:"Nav",action:"Autocomplete",label:t.split("/").slice(1).join(":")}}),this.$(this.targetSelector).blur(),s.router.navigate(t,{trigger:!0})}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'  <li id="'+c("function"==typeof(i=null!=(i=n.itemId||(null!=t?t.itemId:t))?i:o)?i.call(r,{name:"itemId",hash:{},data:s}):i)+'" class="autocomplete-item">\n    <a href="/search/'+c((n.urlEncodeWithSpace||t&&t.urlEncodeWithSpace||o).call(r,null!=t?t.term:t,{name:"urlEncodeWithSpace",hash:{},data:s}))+'" class="on-autocomplete-item">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-search",13,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="term">'+c("function"==typeof(i=null!=(i=n.term||(null!=t?t.term:t))?i:o)?i.call(r,{name:"term",hash:{},data:s}):i)+"</span>\n    </a>\n  </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.results:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(2));!function(e,t,n,s){s.add("SearchField",s.views.SearchFieldBase.extend({className:"dropdown",template:a.default,enabled:!0,events:t.extend({"input    #search-query":"onSearchInput","blur     #search-query":"onSearchBlur","keydown  #search-query":"onSearchKeyDown","submit form":"onSubmit","focus  form":"focusGained"},s.views.SearchFieldBase.prototype.events),initialize:function(e){this.selectedItem=null,this.searchResults=null,this.targetSelector="#search-query",this.loadingIcon=n.utils.iconifySpin("fa-loading",16,s.get("device"),{hash:{color:"wp-neutral-5"}}),this.listenTo(s,"navbar:search:enable",this.enable),this.listenTo(s,"navbar:search:disable",this.disable),this.listenTo(s,"navbar:search:set",this.set),s.views.SearchFieldBase.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(this.template()),this},renderAutocomplete:function(e){this.$("ul.autocomplete-item-container").append(this.autocompleteTemplate({results:e}))},showAutocompleteSuggestions:t.debounce(function(e){var t=new s.collections.Autocomplete([],{searchTerm:e}),n=this;Promise.resolve(t.fetch()).then(function(){n.cleanup(),t.length&&(n.searchResults=t.toJSON(),n.renderAutocomplete(n.searchResults),n.showResults())})},500),showResults:function(){var e=this.$el.children("form");e.hasClass("open")||e.addClass("open")},hideResults:function(){var e=this.$el.children("form");e.hasClass("open")&&(e.removeClass("open"),this.cleanup())},cleanup:function(){this.$("ul, .loading-icon").empty(),this.selectedItem=null,this.searchResults=null},selectPrev:function(){if(null===this.selectedItem)return this.selectedItem=this.searchResults.length-1,void this.highlightSelected();var e=this.selectedItem-1;e<0&&(e=this.searchResults.length-1),this.selectedItem=e,this.highlightSelected()},selectNext:function(){if(null===this.selectedItem)return this.selectedItem=0,void this.highlightSelected();var e=this.selectedItem+1;e>=this.searchResults.length&&(e=0),this.selectedItem=e,this.highlightSelected()},highlightSelected:function(){var e=this.searchResults[this.selectedItem].itemId;this.$(".autocomplete-item").removeClass("selected"),this.$(".autocomplete-item#"+e).addClass("selected")},loadSelection:function(){if(null!==this.selectedItem){var e=this.searchResults[this.selectedItem].itemId;this.$(".autocomplete-item#"+e).children("a").trigger("tap")}},onSearchKeyDown:function(e){if((13===e.which&&this.selectedItem||38===e.which||40===e.which)&&n.utils.stopEvent(e),27!==e.which){if(this.searchResults&&!(this.searchResults.length<1))switch(e.which){case 38:this.selectPrev();break;case 40:this.selectNext();break;case 13:this.loadSelection()}}else this.hideResults()},onSearchInput:function(e){var t=this.$(this.targetSelector).val();this.enabled?t.trim().length>=2&&(this.hideResults(),this.$(".loading-icon").html(this.loadingIcon),this.showAutocompleteSuggestions(t.trim())):s.trigger("navbar:search:query",t)},onSearchBlur:function(t){this.saveSearchTerm($(t.currentTarget).val());var n=this;e.setTimeout(function(){n.hideResults()},500)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},set:function(e,t){this.$(this.targetSelector).val(e),!1!==t&&this.onSearchInput()},onSubmit:function(e){if(this.enabled)this.searchXHR&&(e.stopPropagation(),this.searchXHR.abort(),this.hideResults(),this.$(".loading-icon").html(this.loadingIcon));else{n.utils.stopEvent(e);var t=this.$("#search-query").val();this.saveSearchTerm(t),s.trigger("navbar:search:query",t)}},focusGained:function(){s.trigger("navbar:search:focus")}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a=u(n(198)),s=u(n(2)),l=u(n(199)),i=u(n(9)),r=u(n(3)),o=u(n(10)),c=u(n(200));function u(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,u){u.add("Header",u.views.Base.extend({template:null,partials:{"core.header.community_menu":o.default,"desktop.browse.browse_topics":r.default,"core.header.discover_menu":i.default,"desktop.components.header.partials.profile_menu":l.default,"core.header.search_field":s.default,"desktop.components.header.partials.create_menu":c.default},events:{"tap    .on-language":"onLanguageSelected","click  .on-language":"stopEvent","tap    #header-item-login":"onAuthModal","click  #header-item-login":"stopEvent","tap    #header-item-signup":"onAuthModal","click  #header-item-signup":"stopEvent","tap .on-logout":"onLogout","click .on-logout":"stopEvent","tap .on-premium":"onPremium","click .on-premium":"stopEvent","click  .on-navigate":"onNavigate","mouseleave .show-related-tags":"onUnhoverCategory","mouseenter .show-related-tags":"onCategoryHovered","tap .show-related-tags":"onCategoryHovered","click .show-related-tags":"stopEvent","tap .on-topic":"onTopicClick","click .on-topic":"onTopicClick"},title:function(){n.utils.trans("Join Wattpad")},subtitle:function(){n.utils.trans("Be part of a global community of readers and writers, all connected through the power of story.")},initialize:function(e){e=e||{},this.template=a.default,t.each(this.partials,function(e,t,n){Handlebars.registerPartial(t,e)}),this.searchFieldView=new u.views.SearchField;var n=u.get("device");this.showCurationPanel=n.is.desktop;var s=u.get("supported-languages").get(u.get("language"));this.language=s.get("code")},render:function(){var a,s={},l=null,i=null,r=[],o=this;return s.currentUrl=n.utils.getNextUrl(e.location.href),n.utils.currentUser().authenticated()&&(s["current-user"]=n.utils.currentUser().toJSON(),s["current-user"].recommendedTags=e.wattpad.userRecommendedTags),t.each(JSON.parse(n.newCurationProfiles),function(e){e.code===o.language&&(i=e.username)}),i&&(l=new u.collections.ReadingLists([],{username:i}),r.push(l.fetchNextSet())),a=new u.collections.BrowseTopics,r.push(a.fetch()),Promise.all(r).then(function(){s.browseTopics=n.utils.sortByColumns(a.toJSON(),3),s.newCurationLists=i&&o.showCurationPanel?l.toJSON():null,s.testGroups=n.testGroups,o.renderAllViews(s)}).catch(function(){o.renderAllViews(s)}),this},renderAllViews:function(e){this.$el.html(this.template(e)),this.searchFieldView&&this.$("#header-item-search").html(this.searchFieldView.render().$el)},setElement:function(e){Monaco.View.prototype.setElement.apply(this,arguments),this.searchFieldView&&this.searchFieldView.setElement(this.$("#header-item-search > div"))},onLanguageSelected:function(t){var n=$("#languageModal iframe");n.attr("src","/settings/language?jq=true"),n[0].onload=function(){n[0].contentWindow.callbackFn=function(t){$("#languageModal").modal("hide"),t&&e.location.reload()}},$("#languageModal").modal({show:!0}).removeClass("hide")},onAuthModal:function(t){var a=t.currentTarget.getAttribute("data-form"),s="signup"===a?n.utils.trans("Join Wattpad"):n.utils.trans("Sign in to Wattpad"),l=new u.views.SignUpPrompt({model:new u.models.Authsignup,title:s,subtitle:n.utils.trans("Be part of a global community of readers and writers, all connected through the power of story."),formType:"navbar_modal",form:a,nextUrl:e.location.href}),i=a.concat("-modal-wrapper");$("#generic-modal .modal-body").html(l.render().$el);var r=$("#generic-modal").find(".modal-dialog");r.hasClass("signup-modal-wrapper")&&r.removeClass("signup-modal-wrapper"),r.hasClass("login-modal-wrapper")&&r.removeClass("login-modal-wrapper"),r.addClass(i),$("#generic-modal").modal("show")},onPremium:function(t){e.te.push("event","subscriptions","cta",null,"view",{cta_type:"header_button"}),n.utils.redirectToServer(t.currentTarget.href)},onNavigate:function(e){e.preventDefault(),u.views.Base.prototype.onNavigate.apply(this,arguments)},onLogout:function(t){e.localStorage.clear(),n.utils.redirectToServer("/logout")},currentTimer:null,onCategoryHovered:function(e){this.currentTimer=setTimeout(function(){var t=this.$("#main-browse-navigate .active");$(t.data("id")).addClass("hide"),t.removeClass("active");var n=$(e.target);$(n.data("id")).removeClass("hide"),n.addClass("active")},50)},onUnhoverCategory:function(e){clearTimeout(this.currentTimer)},onTopicClick:function(t){e.te.push("event","browse","topic",null,"click",{topic:$(t.target).text()})}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return' class="hidden"'},3:function(e,t,n,a,s){return"/home"},5:function(e,t,n,a,s){var l,i,r,o="/";return i=null!=(i=n.nextUrl||(null!=t?t.nextUrl:t))?i:n.helperMissing,r={name:"nextUrl",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.nextUrl||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},6:function(e,t,n,a,s){return"?nextUrl="+e.escapeExpression(e.lambda(t,t))},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return null!=(l=n.unless.call(i,(n.getCurrentUserAttr||t&&t.getCurrentUserAttr||n.helperMissing).call(i,"premium",{name:"getCurrentUserAttr",hash:{},data:s}),{name:"unless",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:""},9:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'    <div id="go-premium-button">\n      <a href="//premium.wattpad.com" class="btn-primary on-premium" aria-label="'+r((n.trans||t&&t.trans||i).call(l,"Go Premium",{name:"trans",hash:{},data:s}))+'">'+r((n.trans||t&&t.trans||i).call(l,"Go Premium",{name:"trans",hash:{},data:s}))+"</a>\n    </div>\n"},11:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div id="profile-dropdown" class="button-group dropdown" role="menu" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"User",{name:"trans",hash:{},data:s}))+'">\n    \n\n    <a href="#" data-toggle="dropdown">\n      <div class="avatar avatar-sm">\n'+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t["current-user"]:t)?l.inbox:l)?l.unread:l,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.program(14,s,0),data:s}))?l:"")+"         "+o((n.connectAvatar||t&&t.connectAvatar||r).call(i,null!=(l=null!=t?t["current-user"]:t)?l.avatar:l,null!=(l=null!=t?t["current-user"]:t)?l.username:l,25,{name:"connectAvatar",hash:{},data:s}))+'\n      </div>\n      <span class="username hidden-xs '+(null!=(l=n.if.call(i,null!=(l=null!=t?t.testGroups:t)?l.WATTPAD_PREMIUM_MESSAGING:l,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:"")+'">\n        '+o((n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t["current-user"]:t)?l.username:l,13,{name:"simpleShorten",hash:{},data:s}))+'\n      </span>\n      <span class="caret"></span>\n    </a>\n\n'+(null!=(l=e.invokePartial(a["desktop.components.header.partials.profile_menu"],t,{name:"desktop.components.header.partials.profile_menu",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"  </div>\n"},12:function(e,t,n,a,s){return'            <span class="notification-badge"></span>\n'},14:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t["current-user"]:t)?l.notifications:l)?l.unread:l,{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:""},15:function(e,t,n,a,s){return'            <span class="notification-badge"></span>\n        '},17:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return" "+(null!=(l=n.unless.call(i,(n.getCurrentUserAttr||t&&t.getCurrentUserAttr||n.helperMissing).call(i,"premium",{name:"getCurrentUserAttr",hash:{},data:s}),{name:"unless",hash:{},fn:e.program(18,s,0),inverse:e.noop,data:s}))?l:"")+" "},18:function(e,t,n,a,s){return" hidden-sm hidden-md "},20:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'  <div id="login-menu" role="menu">\n    <a id="header-item-login" rel="nofollow" href="/login?nexturl='+r((n.urlEncode||t&&t.urlEncode||i).call(l,null!=t?t.currentUrl:t,{name:"urlEncode",hash:{},data:s}))+'" data-form="login">'+r((n.trans||t&&t.trans||i).call(l,"Log in",{name:"trans",hash:{},data:s}))+'</a>\n    <a id="header-item-signup" rel="nofollow" href="/?nexturl='+r((n.urlEncode||t&&t.urlEncode||i).call(l,null!=t?t.currentUrl:t,{name:"urlEncode",hash:{},data:s}))+'" data-form="signup">'+r((n.trans||t&&t.trans||i).call(l,"Sign Up",{name:"trans",hash:{},data:s}))+"</a>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=n.blockHelperMissing,d=e.escapeExpression,h='<div role="banner" id="header"';return i=null!=(i=n.hideHeader||(null!=t?t.hideHeader:t))?i:c,r={name:"hideHeader",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.hideHeader||(l=u.call(t,l,r)),null!=l&&(h+=l),h+='>\n<nav role="navigation">\n  <ul class="list-inline">\n    <li id=\'header-item-logo\'>\n      <a class="on-navigate" href="'+(null!=(l=n.if.call(o,null!=t?t["current-user"]:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+'" title="Wattpad Home" aria-label="'+d((n.trans||t&&t.trans||c).call(o,"Home",{name:"trans",hash:{},data:s}))+'">\n      &nbsp;\n      </a>\n   </li>\n\n    <li id="discover-dropdown" class="button-group dropdown">\n      <a href="#" data-toggle="dropdown">'+d((n.trans||t&&t.trans||c).call(o,"Browse",{name:"trans",hash:{},data:s}))+' <span class="caret"></span></a>\n'+(null!=(l=e.invokePartial(a["desktop.browse.browse_topics"],t,{name:"desktop.browse.browse_topics",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'    </li>\n\n    <li id="community-dropdown" class="button-group dropdown hidden-xs hidden-sm">\n      <a href="#" data-toggle="dropdown">'+d((n.trans||t&&t.trans||c).call(o,"Community",{name:"trans",hash:{},data:s}))+' <span class="caret"></span></a>\n'+(null!=(l=e.invokePartial(a["core.header.community_menu"],t,{name:"core.header.community_menu",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'    </li>\n  </ul>\n</nav>\n\n<div id="header-item-search" aria-label="'+d((n.trans||t&&t.trans||c).call(o,"Search",{name:"trans",hash:{},data:s}))+'">\n  <div>'+(null!=(l=e.invokePartial(a["core.header.search_field"],t,{name:"core.header.search_field",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</div>\n</div>\n\n<nav role="navigation">\n  <ul class="list-inline">\n    <li class="button-group dropdown hidden-xs hidden-sm">\n      <a href="#" data-toggle="dropdown">'+d((n.trans||t&&t.trans||c).call(o,"Write",{name:"trans",hash:{},data:s}))+' <span class="caret"></span></a>\n'+(null!=(l=e.invokePartial(a["desktop.components.header.partials.create_menu"],t,{name:"desktop.components.header.partials.create_menu",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </li>\n  </ul>\n</nav>\n\n"+(null!=(l=n.if.call(o,null!=(l=null!=t?t.testGroups:t)?l.WATTPAD_PREMIUM_MESSAGING:l,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(o,null!=t?t["current-user"]:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:""),i=null!=(i=n["current-user"]||(null!=t?t["current-user"]:t))?i:c,r={name:"current-user",hash:{},fn:e.noop,inverse:e.program(20,s,0),data:s},l="function"==typeof i?i.call(o,r):i,n["current-user"]||(l=u.call(t,l,r)),null!=l&&(h+=l),h+"</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'            <span class="badge">'+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t["current-user"]:t)?l.inbox:l)?l.unread:l,t))+"</span>\n"},3:function(e,t,n,a,s){return"on-navigate"},5:function(e,t,n,a,s){var l;return'            <span id="notifications-menu-badge" class="badge">'+e.escapeExpression((n.count||t&&t.count||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t["current-user"]:t)?l.notifications:l)?l.unread:l,{name:"count",hash:{},data:s}))+"</span>\n"},7:function(e,t,n,a,s){return'            <li><a class="on-navigate" href="/checkout">Checkout</a></li>\n            <li><a class="on-navigate" href="/manage_payment">Manage Payment</a></li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'<div class="triangle"></div>\n<div class="dropdown-menu dropdown-menu-right large" role="menu" aria-labelledby="profile-dropdown">\n    <ul aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Profile",{name:"trans",hash:{},data:s}))+'">\n        <li><a class="on-navigate" href="/user/'+o(c(null!=(l=null!=t?t["current-user"]:t)?l.username:l,t))+'">'+o((n.trans||t&&t.trans||r).call(i,"My Profile",{name:"trans",hash:{},data:s}))+'</a></li>\n        <li role="presentation" class="divider"></li>\n        <li><a href="/inbox">'+o((n.trans||t&&t.trans||r).call(i,"Inbox",{name:"trans",hash:{},data:s}))+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t["current-user"]:t)?l.inbox:l)?l.unread:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'        </a></li>\n        <li><a class="'+(null!=(l=n.unless.call(i,(n.isTestGroup||t&&t.isTestGroup||r).call(i,"SENTIMENT_SURVEY",{name:"isTestGroup",hash:{},data:s}),{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'" href="/notifications">'+o((n.trans||t&&t.trans||r).call(i,"Notifications",{name:"trans",hash:{},data:s}))+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t["current-user"]:t)?l.notifications:l)?l.unread:l,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'        </a></li>\n        <li><a class="on-navigate" href="/newsfeed">'+o((n.trans||t&&t.trans||r).call(i,"Newsfeed",{name:"trans",hash:{},data:s}))+'</a></li>\n        <li><a class="on-navigate" href="/library">'+o((n.trans||t&&t.trans||r).call(i,"Library",{name:"trans",hash:{},data:s}))+"</a></li>\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.testGroups:t)?l.WEB_PAYMENTS:l,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'        <li><a href="/invite_friends">'+o((n.trans||t&&t.trans||r).call(i,"Invite Friends",{name:"trans",hash:{},data:s}))+'</a></li>\n        <li role="presentation" class="divider"></li>\n        <li><a href="/settings/language?jq=true" class="on-language"\n          data-ignore="true" >'+o((n.trans||t&&t.trans||r).call(i,"Language",{name:"trans",hash:{},data:s}))+": "+o(c(null!=(l=null!=t?t.contentLang:t)?l.name:l,t))+'</a></li>\n        <li><a href="//support.wattpad.com" >'+o((n.trans||t&&t.trans||r).call(i,"Help",{name:"trans",hash:{},data:s}))+'</a></li>\n        <li>\n          <a class="on-navigate" href="/settings">'+o((n.trans||t&&t.trans||r).call(i,"Settings",{name:"trans",hash:{},data:s}))+'</a>\n        </li>\n        <li><a href="/logout" class="on-logout">'+o((n.trans||t&&t.trans||r).call(i,"Log Out",{name:"trans",hash:{},data:s}))+"</a></li>\n    </ul>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"/myworks/new"},3:function(e,t,n,a,s){return"/?nexturl=/myworks/new"},5:function(e,t,n,a,s){return"/myworks"},7:function(e,t,n,a,s){return"/?nexturl=/myworks"},9:function(e,t,n,a,s){return'      <li>\n        <a href="/writers/">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Writer Opportunities",{name:"trans",hash:{},data:s}))+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="triangle"></div>\n<div class="dropdown-menu large" aria-labelledby="create-dropdown">\n  <ul aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Write",{name:"trans",hash:{},data:s}))+'">\n    <li>\n      <a href="'+(null!=(l=n.if.call(i,null!=t?t["current-user"]:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'" rel="nofollow" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Create a new story",{name:"trans",hash:{},data:s}))+'">\n        '+o((n.connectImage||t&&t.connectImage||r).call(i,"/icons/create-story.svg",(n.trans||t&&t.trans||r).call(i,"Create a new story",{name:"trans",hash:{},data:s}),{name:"connectImage",hash:{},data:s}))+o((n.trans||t&&t.trans||r).call(i,"Create a new story",{name:"trans",hash:{},data:s}))+'\n      </a>\n    </li>\n    <li>\n      <a href="'+(null!=(l=n.if.call(i,null!=t?t["current-user"]:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+'" rel="nofollow" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"My Stories",{name:"trans",hash:{},data:s}))+'">'+o((n.trans||t&&t.trans||r).call(i,"My Stories",{name:"trans",hash:{},data:s}))+'</a>\n    </li>\n    <li role="presentation" class="divider"></li>\n'+(null!=(l=(n.ifequal||t&&t.ifequal||r).call(i,null!=(l=null!=t?t.interfaceLang:t)?l.name:l,"English",{name:"ifequal",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'    <li>\n      <a href="/go/writing-contests/">'+o((n.trans||t&&t.trans||r).call(i,"Writing Contests",{name:"trans",hash:{},data:s}))+"</a></li>\n  </ul>\n</div>"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(202));!function(e,t,n,s,l){l.add("Announcement",Monaco.View.extend({template:a.default,className:"announcement",events:{"click  .on-dismiss":"stopEvent","tap    .on-dismiss":"onDismiss"},initialize:function(e){this.options=e},render:function(){return this.$el.html(this.template(this.getData())),this},getData:function(){return this.options||{}},onDismiss:function(e){$("#announcements-container").remove(),this.remove(),s.setCookie("anDi",1,30)},stopEvent:function(e){n.utils.stopEvent(e)}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<div class="btn btn-white on-dismiss">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Dismiss",{name:"trans",hash:{},data:s}))+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="message '+c("function"==typeof(i=null!=(i=n.messageClass||(null!=t?t.messageClass:t))?i:o)?i.call(r,{name:"messageClass",hash:{},data:s}):i)+'">\n  <a href="'+c("function"==typeof(i=null!=(i=n.url||(null!=t?t.url:t))?i:o)?i.call(r,{name:"url",hash:{},data:s}):i)+'" target="_blank">'+c("function"==typeof(i=null!=(i=n.message||(null!=t?t.message:t))?i:o)?i.call(r,{name:"message",hash:{},data:s}):i)+"</a>\n</div>\n"+(null!=(l=n.if.call(r,null!=t?t.dismissable:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(204));!function(e,t,n,s){s.add("VerifyEmail",s.views.Announcement.extend({template:a.default,state:"default",className:s.views.Announcement.prototype.className+" verify-email",events:t.extend({"click  .on-verify":"stopEvent","tap    .on-verify":"onVerify","click  .on-changeemail":"stopEvent","tap    .on-changeemail":"onChangeEmail","click  .learn-more":"stopEvent","tap    .learn-more":"onLearnMore","tap    .on-close":"onClose","click  .on-close":"stopEvent"},s.views.Announcement.prototype.events),initialize:function(e){Handlebars.registerPartial("core.signup_prompt",function(){return""})},getData:function(){var e={};return e[this.state]=!0,e},onVerify:function(e){n.utils.stopEvent(e);var t=this;Promise.resolve($.ajax({type:"POST",url:"/api/v3/users/validate",data:{activation_email:"true"}})).then(function(e){t.onEmailSent({success:!0,title:"sent"})}).catch(function(e){t.onEmailSent({success:!1})})},onEmailSent:function(e){var t=new s.views.SentEmailModal(e);$("#generic-modal .modal-body").html(t.render().$el),$("#generic-modal").modal({})},onChangeEmail:function(e){n.utils.stopEvent(e);var t={model:new s.models.ChangeEmailModal},a=new s.views.ChangeEmailModal(t);$("#generic-modal .modal-body").html(a.render().$el),$("#generic-modal").modal({})},onLearnMore:function(e){n.utils.stopEvent(e);var t=new s.views.PleaseVerifyModal;$("#generic-modal .modal-body").html(t.render().$el),$("#generic-modal").modal({})},onClose:function(e){$("#generic-modal").modal("hide")}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div class="default">\n    <div class="message col-xs-12 col-md-8"> '+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Hi %s, please check your email <b>(%s)</b> to complete the sign-up process.",null!=t?t.username:t,null!=t?t.email:t,{name:"trans",hash:{},data:s}))?l:"")+' <a class="on-navigate"><span class="learn-more">'+o((n.trans||t&&t.trans||r).call(i,"Learn more",{name:"trans",hash:{},data:s}))+'</span></a>\n    </div>\n\n    <div class="controls col-xs-12 col-md-4">\n      <div class="alignment">\n        <a href="#" class="btn btn-grey on-changeemail"> '+o((n.trans||t&&t.trans||r).call(i,"Change email",{name:"trans",hash:{},data:s}))+'</a>\n        <a href="#" class="btn btn-orange on-verify"> '+o((n.trans||t&&t.trans||r).call(i,"Resend email",{name:"trans",hash:{},data:s}))+" </a>\n      </div>\n    </div>\n  </div>\n"},3:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'  <div class="success">\n    <div class="message success"> '+r((n.trans||t&&t.trans||i).call(l,"We've just sent an email to you. Please click on the link provided to confirm your email address with us.",{name:"trans",hash:{},data:s}))+'</div>\n      <div class="controls">\n        <a href="#" class="btn btn-orange on-dismiss"> '+r((n.trans||t&&t.trans||i).call(l,"Dismiss",{name:"trans",hash:{},data:s}))+" </a>\n      </div>\n  </div>\n"},5:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'  <div class="fail">\n    <div class="message error"> '+r((n.trans||t&&t.trans||i).call(l,"Oops, looks like we can't reach that email address.",{name:"trans",hash:{},data:s}))+' </div>\n      <div class="controls">\n        <a href="/settings" class="btn btn-grey"> '+r((n.trans||t&&t.trans||i).call(l,"Change email",{name:"trans",hash:{},data:s}))+" </a>\n      </div>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.default:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.success:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.fail:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(206));!function(e,t,n,s){s.add("EmailVerifiedSuccess",s.views.Announcement.extend({template:a.default,state:"default",className:s.views.Announcement.prototype.className+" email-verified-success",events:t.extend({"tap    .on-close":"onClose","click  .on-close":"stopEvent"},s.views.Announcement.prototype.events),onClose:function(e){this.remove()}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div class="default">\n  <div class="message">\n\t'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"<strong>Success!</strong> Your email is verified and sign-up is complete. Enjoy!",{name:"trans",hash:{},data:s}))?l:"")+'\n  </div>\n  <div class="controls on-close">\n    <span>'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",12,"wp-neutral-5","on-close",{name:"iconify",hash:{},data:s}))?l:"")+"</span>\n  </div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.default:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(208));!function(e,t,n,s){s.add("SentEmailModal",s.views.Base.extend({template:a.default,events:{"click  .on-verify":"stopEvent","tap    .on-verify":"onVerify","click  .on-changeemail":"stopEvent","tap    .on-changeemail":"onChangeEmail","tap    .on-close":"onClose","click  .on-close":"stopEvent"},initialize:function(e){e=e||{},this.success=e.success,"changed"===e.title?this.title=n.utils.trans("Email Changed"):this.title=n.utils.trans("Email Sent");var t=e.emailNew?e.emailNew:n.utils.currentUser().attributes.email;this.sentence=n.utils.trans("Please check your email <strong>%s</strong> to complete sign-up.",n.utils.sanitizeHTML(t))},render:function(){return this.$el.html(this.template({success:this.success,title:this.title,sentence:this.sentence})),this},onVerify:function(e){n.utils.stopEvent(e);var t=this;Promise.resolve($.ajax({type:"POST",url:"/api/v3/users/validate",data:{activation_email:"true"}})).then(function(e){t.onEmailSent({success:!0,title:"sent"})}).catch(function(e){t.onEmailSent({success:!1})})},onEmailSent:function(e){var t=new s.views.SentEmailModal(e);$("#generic-modal .modal-body").html(t.render().$el),$("#generic-modal").modal({})},onChangeEmail:function(e){n.utils.stopEvent(e);var t={model:new s.models.ChangeEmailModal},a=new s.views.ChangeEmailModal(t);$("#generic-modal .modal-body").html(a.render().$el),$("#generic-modal").modal({})},onClose:function(e){$("#generic-modal").modal("hide")}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return"\t\t<h2>"+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h2>\n\t\t<p>"+(null!=(l="function"==typeof(i=null!=(i=n.sentence||(null!=t?t.sentence:t))?i:o)?i.call(r,{name:"sentence",hash:{},data:s}):i)?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"After you click the link in your email, you'll be able to:",{name:"trans",hash:{},data:s}))+'</p>\n\n\t\t<ul>\n\t\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Vote</strong> on stories that you like",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Comment</strong> on stories and profiles",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Update</strong> your profile",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Create</strong> your stories, and more!",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t\t</ul>\n\n    <div class="controls">\n      <a href="#" class="btn btn-orange on-close"> '+c((n.trans||t&&t.trans||o).call(r,"Dismiss",{name:"trans",hash:{},data:s}))+" </a>\n    </div>\n"},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return"\t\t<h2>"+c((n.trans||t&&t.trans||o).call(r,"Problem reaching email :(",{name:"trans",hash:{},data:s}))+"</h2>\n\t\t<p>"+(null!=(l="function"==typeof(i=null!=(i=n.sentence||(null!=t?t.sentence:t))?i:o)?i.call(r,{name:"sentence",hash:{},data:s}):i)?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"Please try again or change your email.",{name:"trans",hash:{},data:s}))+'</p>\n\n\t\t<div class="controls row">\n\t\t\t<div class="col-xs-6"><a href="#" class="btn btn-grey on-changeemail pull-right"> '+c((n.trans||t&&t.trans||o).call(r,"Change email",{name:"trans",hash:{},data:s}))+'</a></div>\n\t\t\t<div class="col-xs-6"><a href="#" class="btn btn-orange on-verify pull-left"> '+c((n.trans||t&&t.trans||o).call(r,"Resend email",{name:"trans",hash:{},data:s}))+" </a></div>\n\t\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return" <div class=\"panel-body sent-email\">\n\t<span class='close-modal on-close'>\n\t\t"+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n\t</span>\n\n"+(null!=(l=n.if.call(i,null!=t?t.success:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.unless.call(i,null!=t?t.success:t,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"</div>"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(210));!function(e,t,n,s){s.add("ChangeEmailModal",s.views.Base.extend({template:a.default,events:{"click  .on-submit":"stopEvent","tap    .on-submit":"onSubmit","tap    .on-close":"onClose","click  .on-close":"stopEvent"},initialize:function(e){e=e||{};var t=n.utils.currentUser().attributes.email;this.sentence=n.utils.trans("You registered your account with <strong>%s</strong>.",n.utils.sanitizeHTML(t))},render:function(){return this.$el.html(this.template({sentence:this.sentence})),this},onSubmit:function(){var e=n.utils.currentUser().attributes.username,t=$("#new-email").val(),a=$("#confirm-email").val();if(0!==$(".valid").length){if(t!==a)return $("#errorMessage").html(n.utils.trans("Please ensure the email fields match.")),void $(".alert-danger").removeClass("hidden");Promise.resolve($.ajax({type:"POST",url:"/apiv2/updateuseremail",dataType:"text",data:{username:e,email:t,confirm_email:a}})).then(function(e){var n={success:!0,title:"changed",emailNew:t},a=new s.views.SentEmailModal(n);$("#generic-modal .modal-body").html(a.render().$el),$("#generic-modal").modal({})}).catch(function(e){$("#errorMessage").html(n.utils.trans("Oops, looks like we can't reach that email address. You may want to try a different one.")),$(".alert-danger").removeClass("hidden")})}},onClose:function(e){$("#generic-modal").modal("hide")}})),s.mixin(s.views.ChangeEmailModal,"ValidationView")}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return"<div class=\"panel-body change-email\">\n\t<span class='close-modal on-close'>\n\t\t"+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n\t</span>\n\n\t<h2>"+c((n.trans||t&&t.trans||o).call(r,"Change email",{name:"trans",hash:{},data:s}))+"</h2>\n\t<p>"+(null!=(l="function"==typeof(i=null!=(i=n.sentence||(null!=t?t.sentence:t))?i:o)?i.call(r,{name:"sentence",hash:{},data:s}):i)?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"If this is incorrect, you can change your email here.",{name:"trans",hash:{},data:s}))+'</p>\n\n\t<div class="alert alert-danger hidden" role="alert"><span class="fa fa-warning fa-wp-lighterror " aria-hidden="true" style="font-size:16px;"></span><span id="errorMessage"></span></div>\n\n\t<form class="form-horizontal" role="form">\n\n\t\t<div class="form-group has-feedback" data-attr="email" id="email1">\n\t\t\t<label class="control-label col-sm-5" for="new-email"><strong>'+c((n.trans||t&&t.trans||o).call(r,"New Email",{name:"trans",hash:{},data:s}))+'</strong></label>\n\t\t\t<div class="col-sm-5">\n\t\t\t\t<input type="email" id="new-email" class="form-control" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"Enter New Email",{name:"trans",hash:{},data:s}))+'">\n\t\t\t\t'+(null!=(l=(n.validationElements||t&&t.validationElements||o).call(r,22,{name:"validationElements",hash:{},data:s}))?l:"")+'\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<label class="control-label col-sm-5"><strong>'+c((n.trans||t&&t.trans||o).call(r,"Confirm New Email",{name:"trans",hash:{},data:s}))+'</strong></label>\n\t\t\t<div class="col-sm-5"> \n\t\t\t\t<input type="email" id="confirm-email" class="form-control" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"Confirm New Email",{name:"trans",hash:{},data:s}))+'">\n\t\t\t</div>\n\t\t</div>\n\t</form>\n\n\t<div class="controls row">\n\t\t<div class="col-xs-6"><a href="#" class="btn btn-grey on-close pull-right">'+c((n.trans||t&&t.trans||o).call(r,"Cancel",{name:"trans",hash:{},data:s}))+'</a></div>\n\t\t<div class="col-xs-6"><a href="#" class="btn btn-orange on-submit">'+c((n.trans||t&&t.trans||o).call(r,"Save",{name:"trans",hash:{},data:s}))+"</a></div>\n\t</div>\n</div>"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("ChangeEmailModal",Monaco.Model.extend({defaults:{email:null},validationRules:{email:[{func:"isRequired",msg:a.trans("Email is required.")},{func:"isEmail",msg:a.trans("That is not a valid email address.")},{func:"uniqueEmail",async:!0}]},uniqueEmail:function(e,t){return Promise.resolve($.ajax("/api/v3/users/validate",{data:{email:e}}))},uniqueUsername:function(e,t){return Promise.resolve($.ajax("/api/v3/users/validate",{data:{username:e}}))}})),s.mixin(s.models.ChangeEmailModal,"ValidationModel")}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(213));!function(e,t,n,s){s.add("PleaseVerifyModal",s.views.Base.extend({template:a.default,events:{"click  .on-verify":"stopEvent","tap    .on-verify":"onVerify","click  .on-changeemail":"stopEvent","tap    .on-changeemail":"onChangeEmail","tap    .on-close":"onClose","click  .on-close":"stopEvent"},initialize:function(e){e=e||{};var t=n.utils.currentUser().attributes.email;this.sentence=n.utils.trans("Please check your email <strong>%s</strong> to complete sign-up.",n.utils.sanitizeHTML(t))},render:function(){return this.$el.html(this.template({sentence:this.sentence})),this},onVerify:function(e){n.utils.stopEvent(e);var t=this;$.ajax({type:"POST",url:"/api/v3/users/validate",data:{activation_email:"true"},success:function(e){t.onEmailSent({success:!0})},error:function(e){t.onEmailSent({success:!1})}})},onEmailSent:function(e){var t=new s.views.SentEmailModal(e);$("#generic-modal .modal-body").html(t.render().$el),$("#generic-modal").modal({})},onChangeEmail:function(e){n.utils.stopEvent(e);var t={model:new s.models.ChangeEmailModal},a=new s.views.ChangeEmailModal(t);$("#generic-modal .modal-body").html(a.render().$el),$("#generic-modal").modal({})},onClose:function(e){$("#generic-modal").modal("hide")}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return" <div class=\"panel-body please-verify\">\n\t<span class='close-modal on-close'>\n\t\t"+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n\t</span>\n\n\t<h2>"+c((n.trans||t&&t.trans||o).call(r,"Please verify your email",{name:"trans",hash:{},data:s}))+"</h2>\n\t<p>"+(null!=(l="function"==typeof(i=null!=(i=n.sentence||(null!=t?t.sentence:t))?i:o)?i.call(r,{name:"sentence",hash:{},data:s}):i)?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"After you click the link in your email, you'll be able to:",{name:"trans",hash:{},data:s}))+'</p>\n\n\t<ul>\n\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Vote</strong> on stories that you like",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Comment</strong> on stories and profiles",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Update</strong> your profile",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t\t<li><span class="fa fa-check fa-wp-success" aria-hidden="true"></span>'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>Create</strong> your stories, and more!",{name:"trans",hash:{},data:s}))?l:"")+'</li>\n\t</ul>\n\n\t<div class="controls row">\n\t\t<div class="col-xs-6"><a href="#" class="btn btn-grey on-changeemail pull-right"> '+c((n.trans||t&&t.trans||o).call(r,"Change email",{name:"trans",hash:{},data:s}))+'</a></div>\n\t\t<div class="col-xs-6"><a href="#" class="btn btn-orange on-verify"> '+c((n.trans||t&&t.trans||o).call(r,"Resend email",{name:"trans",hash:{},data:s}))+" </a></div>\n\t</div>\n</div>"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(215));!function(e,t,n,s,l){l.add("SpielbergoAnnouncment",l.views.Announcement.extend({template:a.default,className:l.views.Announcement.prototype.className+" spielbergo",events:t.extend({"click  .on-navigate":"stopEvent","tap    .on-navigate":"onNavigate"},l.views.Announcement.prototype.events),render:function(){return l.views.Announcement.prototype.render.apply(this,arguments),this.$el.html(this.template({isMobile:l.get("device").is.mobile})),this},onDismiss:function(e){s.setCookie("noSbg",1),l.views.Announcement.prototype.onDismiss.apply(this,arguments)},onNavigate:function(t){this.onDismiss(t),e.location.href=$(t.currentTarget).attr("href")}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-remove",20,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},3:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-remove",25,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<div class="on-dismiss">\n'+(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'</div>\n\n<div class="message">\n  '+e.escapeExpression((n.connectImage||t&&t.connectImage||n.helperMissing).call(i,"wattpad-presents/video-icon.png","Wattpad Presents",{name:"connectImage",hash:{klass:"icon"},data:s}))+'\n  <span class="text">\n    <span class="title">Wattpad Presents...</span>\n    <span class="subtitle">Videos based on popular stories!</span>\n  </span>\n</div>\n\n<a href="/presents" class="on-navigate">\n  <span class="learn-more">Watch Now</span>\n</a>\n'},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(217));!function(e,t,n,s){s.add("BetaProgram",s.views.Announcement.extend({template:a.default,state:"default",className:s.views.Announcement.prototype.className+" beta",events:t.extend({"click  .on-joinbeta":"stopEvent","tap    .on-joinbeta":"onJoinBeta"},s.views.Announcement.prototype.events),getData:function(){var e={};return e[this.state]=!0,e},onDismiss:function(e){this.remove(),n.utils.setCookie("nobb","1")},onJoinBeta:function(e){n.utils.stopEvent(e);var t=this,a=n.utils.currentUser();a&&$.ajax({type:"PUT",url:"/api/v3/users/"+a.get("username"),data:{beta_enabled:!0},success:function(e){t.state=e&&e.beta_enabled?"success":"fail",t.render()},error:function(e){t.state="fail",t.render()}})}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'<div class="default">\n  <div class="message">\n    '+r((n.trans||t&&t.trans||i).call(l,"Give feedback about the Wattpad experience and be the first to get new features. Join our beta program.",{name:"trans",hash:{},data:s}))+'\n    <a class="learn-more" href="//support.wattpad.com/hc/articles/201708720-How-do-I-Join-the-Beta-Testing-for-Wattpad-">\n      '+r((n.trans||t&&t.trans||i).call(l,"Learn More",{name:"trans",hash:{},data:s}))+'\n    </a>\n  </div>\n  <div class="controls">\n    <a href="#" class="btn btn-grey on-joinbeta"> '+r((n.trans||t&&t.trans||i).call(l,"Join Beta Program",{name:"trans",hash:{},data:s}))+'</a>\n    <a href="#" class="btn btn-grey on-dismiss"> '+r((n.trans||t&&t.trans||i).call(l,"Dismiss",{name:"trans",hash:{},data:s}))+" </a>\n  </div>\n</div>\n"},3:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'  <div class="success">\n    <div class="message success"> '+r((n.trans||t&&t.trans||i).call(l,"Welcome. You are now a member of Wattpad's web beta program.",{name:"trans",hash:{},data:s}))+'</div>\n    <div class="controls">\n      <a href="//support.wattpad.com/hc/articles/201708720-How-do-I-Join-the-Beta-Testing-for-Wattpad-">\n        '+r((n.trans||t&&t.trans||i).call(l,"For more information",{name:"trans",hash:{},data:s}))+'\n      </a>\n      <a href="#" class="btn btn-grey on-dismiss"> '+r((n.trans||t&&t.trans||i).call(l,"Dismiss",{name:"trans",hash:{},data:s}))+" </a>\n  </div>\n  </div>\n"},5:function(e,t,n,a,s){return'  <div class="fail">\n    <div class="message error"> '+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Sorry, we were unable to add you to the beta program.",{name:"trans",hash:{},data:s}))+" </div>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.default:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.success:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.fail:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(219));!function(e,t,n,s){s.add("Survey",s.views.Announcement.extend({template:a.default,state:"default",className:s.views.Announcement.prototype.className+" survey",events:t.extend({"tap    .on-click":"onClick","click  .on-click":"stopEvent"},s.views.Announcement.prototype.events),onClick:function(t){var a=this.$("div.survey-banner");n.utils.stopEvent(t),e.document.cookie=a.data("survey-cookie")+"=1;path=/;domain="+e.location.hostname.replace("www",""),this.remove(),e.open(a.data("target"),"_blank")},onDismiss:function(t){var a=this.$("div.survey-banner");n.utils.stopEvent(t),e.document.cookie=a.data("survey-cookie")+"=1;path=/;domain="+e.location.hostname.replace("www",""),this.remove()}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="survey-banner" data-survey-cookie="'+o("function"==typeof(l=null!=(l=n.cookie_id||(null!=t?t.cookie_id:t))?l:r)?l.call(i,{name:"cookie_id",hash:{},data:s}):l)+'" data-target="'+o("function"==typeof(l=null!=(l=n.url||(null!=t?t.url:t))?l:r)?l.call(i,{name:"url",hash:{},data:s}):l)+'">\n    <div class="message">\n      '+o((n.trans||t&&t.trans||r).call(i,"Do you want to help us improve our website? Take part in a study and tell us what you think.",{name:"trans",hash:{},data:s}))+'\n    </div>\n\t<div class="controls">\n\t\t<a href="#" class="btn btn-default on-click"> '+o((n.trans||t&&t.trans||r).call(i,"Click Here",{name:"trans",hash:{},data:s}))+'</a>\n\t\t<a href="#" class="btn btn-default on-dismiss"> '+o((n.trans||t&&t.trans||r).call(i,"Dismiss",{name:"trans",hash:{},data:s}))+" </a>\n\t</div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(221));!function(e,t,n,s){s.add("TransitionGroup",s.views.Announcement.extend({template:a.default,state:"default",className:s.views.Announcement.prototype.className+" transition-group",events:t.extend({"click  .on-learnmore":"stopEvent","tap    .on-learnmore":"onLearnMore"},s.views.Announcement.prototype.events),getData:function(){var e={};return e[this.state]=!0,e},onDismiss:function(e){this.remove(),n.utils.setCookie("noRe","1")},onLearnMore:function(t){switch(n.utils.stopEvent(t),this.remove(),n.utils.setCookie("noRe","1"),n.utils.getCookie("locale")||"en_US"){case"en_US":e.location="https://support.wattpad.com/hc/en-us/articles/204991780";break;case"fr_FR":e.location="https://support.wattpad.com/hc/en-us/articles/204775074";break;case"es_ES":e.location="https://support.wattpad.com/hc/es/articles/204991780";break;case"pt_PT":e.location="https://support.wattpad.com/hc/en-us/articles/204776024";break;case"ru_RU":e.location="https://support.wattpad.com/hc/en-us/articles/204777014";break;case"de_DE":e.location="https://support.wattpad.com/hc/en-us/articles/204991230";break;case"tr_TR":e.location="https://support.wattpad.com/hc/tr/articles/204991780";break;default:e.location="https://support.wattpad.com/hc/en-us/articles/204991780"}}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'  <div class="default">\n    <div class="message"> '+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Welcome home! %s Learn more %s about the new design for the Wattpad site.","<a href='#' class='btn-link on-learnmore' style='margin-right: 0px'>","</a>",{name:"trans",hash:{},data:s}))?l:"")+' </div>\n      <div class="controls">\n        <a href="#" class="btn btn-grey on-dismiss"> '+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Dismiss",{name:"trans",hash:{},data:s}))+" </a>\n      </div>\n  </div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(223));!function(e,t,n,s){s.add("Footer",Monaco.View.extend({template:a.default,events:{"click .on-language":"stopEvent","tap .on-language":"onLanguageSelected","click .on-premium":"stopEvent","tap .on-premium":"onPremium","click .on-back-to-mobile":"stopEvent","tap .on-back-to-mobile":"onBackToMobile"},render:function(){var e={isCookieSet:!!n.utils.getCookie("mw-no")};return this.$el.html(this.template(e)),this},onLanguageSelected:function(e){var t=$("#languageModal iframe");t.attr("src","/settings/language?jq=true"),t[0].onload=function(){t[0].contentWindow.callbackFn=function(e){var t=n.utils.getWindowSearch()||"?";$("#languageModal").modal("hide"),e&&(t.indexOf("language")>-1?t=t.replace(/language=[^\&]*/,"language="+e):t+="&language="+e,n.utils.reloadWithQuery(t.replace(/\?\&/,"?")))}},$("#languageModal").modal({show:!0}).removeClass("hide")},onPremium:function(t){e.te.push("event","subscriptions","cta",null,"view",{cta_type:"footer_button"}),n.utils.redirectToServer(t.currentTarget.href)},onBackToMobile:function(t){e.backToMobileWeb()},stopEvent:function(e){n.utils.stopEvent(e)}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'    <li><a href="#" class="on-back-to-mobile" title="'+r((n.trans||t&&t.trans||i).call(l,"Back to Mobile",{name:"trans",hash:{},data:s}))+'" aria-label="'+r((n.trans||t&&t.trans||i).call(l,"Back to Mobile",{name:"trans",hash:{},data:s}))+'"> '+r((n.trans||t&&t.trans||i).call(l,"Back to Mobile",{name:"trans",hash:{},data:s}))+"</a></li>\n"},3:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'      <li><a class="on-premium" href="/premium" aria-label="'+r((n.trans||t&&t.trans||i).call(l,"Try Premium",{name:"trans",hash:{},data:s}))+'">'+r((n.trans||t&&t.trans||i).call(l,"Try Premium",{name:"trans",hash:{},data:s}))+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<footer id="footer">\n  <ul id="footer-items" role="navigation" aria-label="Footer Links">\n'+(null!=(l=(n.isCookieSet||t&&t.isCookieSet||o).call(r,"mw-no",{name:"isCookieSet",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'    <li><a href="/paidstories" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Paid Stories",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Paid Stories",{name:"trans",hash:{},data:s}))+"</a></li>\n"+(null!=(l=n.if.call(r,null!=(l=null!=t?t.testGroups:t)?l.WATTPAD_PREMIUM_MESSAGING:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'    <li><a href="/getmobile" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Get the App",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Get the App",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="/settings/language?jq=true" class="on-language" rel="nofollow" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Language",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Language",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="/writers" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Writers",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Writers",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="http://business.wattpad.com" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Business",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Business",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="https://company.wattpad.com/work-at-wattpad" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Jobs",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Jobs",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="https://company.wattpad.com/press" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Press",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Press",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="/terms" rel="nofollow" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Terms",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Terms",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="/privacy" rel="nofollow" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Privacy",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Privacy",{name:"trans",hash:{},data:s}))+'</a></li>\n    <li><a href="https://support.wattpad.com" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Help",{name:"trans",hash:{},data:s}))+'">'+c((n.trans||t&&t.trans||o).call(r,"Help",{name:"trans",hash:{},data:s}))+"</a></li>\n    <li>&copy; "+c("function"==typeof(i=null!=(i=n.currentYear||(null!=t?t.currentYear:t))?i:o)?i.call(r,{name:"currentYear",hash:{},data:s}):i)+" Wattpad</li>\n  </ul>\n</footer>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(225));!function(e,t,n,s){s.add("ReportModal",s.views.Base.extend({className:"report-modal modal fade",attributes:{role:"dialog"},template:a.default,events:{"tap   .on-option-selected":"onOptionSelected","click .on-option-selected":"onOptionSelected","keyup .details-input":"onInputDetails","tap   .on-prev":"onPrev","click .on-prev":"stopEvent","tap   .on-next":"onNext","click .on-next":"stopEvent"},buttonStates:{SUBMITTED:1,SUBMIT:2,NEXT:3},zendeskCustomFieldIds:{REQUEST_TYPE:21523158,CONDUCT_REPORT:22875340,PLATFORM:21519886,UI_LANGUAGE:22708584},initialize:function(e){if(!(e=e||{}).requestType)throw new Error("ReportModal Mixin | support ticket request type not specified");if(!e.reportForm)throw new Error("ReportModal Mixin | report form specifications not given");this.requestType=e.requestType,this.moreInfo=e.moreInfo,this.reportForm=e.reportForm,this.mainModal=e.mainModal,this.modalTitle=e.modalTitle,this.reportUserName=e.reportUserName,this.step=1,this.requireDetail=!1},render:function(){var e=this;return this.$el.html(this.template(this.reportForm)),this.$el.on("hidden.bs.modal",function(){e.resetModal()}),this.$el.addClass("main-report-modal"),this.$(".modal-title").text(this.modalTitle),this},onOptionSelected:function(e){var t=this.$(e.currentTarget),n=t.data("require-detail"),a=t.data("intext"),s=t.data("tag");n?(this.setButtonState(!1,this.buttonStates.NEXT),this.$(".reason-selected").html(t.val()),this.$(".details-input").attr("placeholder",a),this.$(".checkbox").addClass("hide"),this.$("."+s).removeClass("hide"),this.requireDetail=!0):(this.setButtonState(!1,this.buttonStates.SUBMIT),this.requireDetail=!1)},onInputDetails:function(e){this.setButtonState(!this.$(e.currentTarget).val().length,this.buttonStates.SUBMIT)},onNext:function(e){1===this.step&&this.requireDetail?this.toStep2():this.toStep3()},onPrev:function(e){3===this.step&&this.requireDetail?this.toStep2():(this.toStep1(),this.$(":checkbox").prop("checked",!1),this.$(".details-input").val(""))},toStep1:function(){this.step=1,this.$(".btn-prev").addClass("hidden"),this.$(".modal-body-content").removeClass("step-2 step-3").addClass("step-1"),this.setButtonState(!1,this.requireDetail?this.buttonStates.NEXT:this.buttonStates.SUBMIT)},toStep2:function(){this.step=2,this.$(".btn-prev").removeClass("hidden"),this.$(".modal-body-content").removeClass("step-1 step-3").addClass("step-2"),this.setButtonState(!this.$(".details-input").val().length,this.buttonStates.SUBMIT)},toStep3:function(){var e=this.$(".btn-prev"),t=this.$(".requester-contact-info");this.step=3,this.$(".modal-body-content").removeClass("step-1 step-2").addClass("step-3"),this.isRequesterValid()?(e.addClass("hidden"),t.addClass("hidden"),this.submitReport(),this.$(".report-success").removeClass("faded"),this.setButtonState(!0,this.buttonStates.SUBMITTED)):(e.removeClass("hidden"),t.removeClass("hidden"),this.setButtonState(!1,this.buttonStates.SUBMIT))},isRequesterValid:function(){return this.$("#requester-name").hasClass("valid")&&this.$("#requester-email").hasClass("valid")||n.utils.currentUser().authenticated()},setButtonState:function(e,t){var a=this.$(".modal-footer > button");switch(a.prop("disabled",e),t){case this.buttonStates.SUBMITTED:a.html(n.utils.trans("Report submitted"));break;case this.buttonStates.NEXT:a.html(n.utils.trans("Next"));break;case this.buttonStates.SUBMIT:default:a.html(n.utils.trans("Submit report"))}},submitReport:function(){var e,a="",l=this.$("input[name=report-reason-option]:checked").data("tag"),i=this.$("."+l+" input").toArray(),r=this;i.forEach(function(e){if(e.checked){var t=r.$(e).data("id");r.model.setCustomField(t,r.$(e).data("checktag"))}else{t=r.$(e).data("id");r.model.setCustomField(t,r.$(e).data("nochecktag"))}}),this.moreInfo&&(a=t.reduce(this.moreInfo,function(e,n){return e+"\n"+n.key+": "+t.result(n,"val")},"\n")),e=this.$(".details-input").val()+a,this.model.set("comment",e),this.model.set("ticket_form_id",parseInt(this.$("form[data-ticket-form-id]").data("ticket-form-id"),10)),this.reportUserName&&this.model.set("username",this.reportUserName),this.model.setCustomField(this.zendeskCustomFieldIds.REQUEST_TYPE,this.requestType),this.model.setCustomField(this.zendeskCustomFieldIds.UI_LANGUAGE,n.utils.getCookie("locale")||"en_US"),this.model.setCustomField(this.zendeskCustomFieldIds.PLATFORM,s._settings.device.is.mobile?"mobile_web":"web"),this.model.setCustomField(this.zendeskCustomFieldIds.CONDUCT_REPORT,this.$("input[name=report-reason-option]:checked").data("tag")),this.model.setRequester(),this.model.save(),i.forEach(function(e){var t=r.$(e).data("id");r.model.setCustomField(t,null)})},resetModal:function(){this.step=1,this.$(".btn-prev").addClass("hidden"),this.$(".modal-body-content").removeClass("step-2 step-3").addClass("step-1"),this.setButtonState(!0,this.buttonStates.SUBMIT),this.$("input[name=report-reason-option]").attr("checked",!1),this.$(":checkbox").prop("checked",!1),this.$(".details-input").val(""),this.$("#requester-name > input").val(""),this.$("#requester-email > input").val(""),this.$("#requester-name").removeClass("valid invalid warning"),this.$("#requester-email").removeClass("valid invalid warning")}})),s.mixin(s.views.ReportModal,"ValidationView")}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o="function",c=e.escapeExpression;return'            <div class="report-reason radio">\n              <label><input type="radio" class="on-option-selected" name="report-reason-option"\n                            value="'+c(typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)===o?l.call(i,{name:"name",hash:{},data:s}):l)+'" data-require-detail="'+c(typeof(l=null!=(l=n.moreDetail||(null!=t?t.moreDetail:t))?l:r)===o?l.call(i,{name:"moreDetail",hash:{},data:s}):l)+'" data-intext="'+c(typeof(l=null!=(l=n.intext||(null!=t?t.intext:t))?l:r)===o?l.call(i,{name:"intext",hash:{},data:s}):l)+'" data-tag="'+c(typeof(l=null!=(l=n.tag||(null!=t?t.tag:t))?l:r)===o?l.call(i,{name:"tag",hash:{},data:s}):l)+'">'+c(typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)===o?l.call(i,{name:"name",hash:{},data:s}):l)+"</label>\n            </div>\n"},3:function(e,t,n,a,s,l,i){var r;return null!=(r=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.extraOption:t,{name:"each",hash:{},fn:e.program(4,s,0,l,i),inverse:e.noop,data:s}))?r:""},4:function(e,t,n,a,s,l,i){var r,o=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=n.helperMissing;return'            <div class="'+o(e.lambda(null!=i[1]?i[1].tag:i[1],t))+' option checkbox hide">\n              <label><input data-id="'+o("function"==typeof(r=null!=(r=n.id||(null!=t?t.id:t))?r:u)?r.call(c,{name:"id",hash:{},data:s}):r)+'" data-checktag="'+o("function"==typeof(r=null!=(r=n.checktag||(null!=t?t.checktag:t))?r:u)?r.call(c,{name:"checktag",hash:{},data:s}):r)+'" data-nochecktag="'+o("function"==typeof(r=null!=(r=n.nochecktag||(null!=t?t.nochecktag:t))?r:u)?r.call(c,{name:"nochecktag",hash:{},data:s}):r)+'" type="checkbox">'+o("function"==typeof(r=null!=(r=n.text||(null!=t?t.text:t))?r:u)?r.call(c,{name:"text",hash:{},data:s}):r)+"</label>\n            </div>\n"},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'          <div class="requester-contact-info hidden">\n            <span>'+o((n.trans||t&&t.trans||r).call(i,"Please leave your contact information so that we may reach you.",{name:"trans",hash:{},data:s}))+'</span>\n            <div class="form-group has-feedback" data-attr="name" id="requester-name">\n              <label '+(null!=(l=(n.supportsPlaceholder||t&&t.supportsPlaceholder||r).call(i,null!=t?t.device:t,{name:"supportsPlaceholder",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+' for="requester-name">Username</label>\n              <input class="form-control" name="report-name" type="text" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Name",{name:"trans",hash:{},data:s}))+'">\n              '+(null!=(l=(n.validationElements||t&&t.validationElements||r).call(i,16,{name:"validationElements",hash:{},data:s}))?l:"")+'\n            </div>\n            <div class="form-group has-feedback" data-attr="email" id="requester-email">\n              <label '+(null!=(l=(n.supportsPlaceholder||t&&t.supportsPlaceholder||r).call(i,null!=t?t.device:t,{name:"supportsPlaceholder",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+' for="requester-email">Username</label>\n              <input class="form-control" name="report-email" type="email" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Email",{name:"trans",hash:{},data:s}))+'">\n              '+(null!=(l=(n.validationElements||t&&t.validationElements||r).call(i,16,{name:"validationElements",hash:{},data:s}))?l:"")+"\n            </div>\n          </div>\n"},7:function(e,t,n,a,s){return'class="sr-only"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h=e.escapeExpression,p='<div class="modal-dialog modal-sm">\n\n  <div class="modal-content"> \n    <div class="modal-header">\n      <h3 class="modal-title">'+h("function"==typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:d)?o.call(u,{name:"title",hash:{},data:s}):o)+'</h3>\n      <div class="btn-prev on-prev hidden">'+(null!=(r=(n.iconify||t&&t.iconify||d).call(u,"fa-left",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'</div>\n      <div class="close top-right on-close" data-dismiss="modal">\n        '+(null!=(r=(n.iconify||t&&t.iconify||d).call(u,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n      </div>\n    </div>\n    <div class="modal-body">\n      <form data-ticket-form-id="'+h("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:d)?o.call(u,{name:"id",hash:{},data:s}):o)+'">\x3c!-- inline-block fix\n     --\x3e<div class="modal-body-content step-1">\n          <span>'+h((n.trans||t&&t.trans||d).call(u,"Select a reason",{name:"trans",hash:{},data:s}))+'</span>\n          <div class="form-group">\n'+(null!=(r=n.each.call(u,null!=t?t.offenses:t,{name:"each",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'          </div>\n        </div>\x3c!--\n\n     --\x3e<div class="modal-body-content step-1"  \n          <span>'+h((n.trans||t&&t.trans||d).call(u,"Reason:",{name:"trans",hash:{},data:s}))+' <strong class="reason-selected"></strong></span>\n          <div class="extra-option">\n'+(null!=(r=n.each.call(u,null!=t?t.offenses:t,{name:"each",hash:{},fn:e.program(3,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'          </div>\n          <textarea class="form-control details-input" role="textbox" aria-multiline="true" placeholder="'+h((n.trans||t&&t.trans||d).call(u,"Please provide more details",{name:"trans",hash:{},data:s}))+'"></textarea>\n        </div>\x3c!--\n     --\x3e<div class="modal-body-content step-1">\n';return o=null!=(o=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?o:d,c={name:"isLoggedIn",hash:{},fn:e.noop,inverse:e.program(6,s,0,l,i),data:s},r="function"==typeof o?o.call(u,c):o,n.isLoggedIn||(r=n.blockHelperMissing.call(t,r,c)),null!=r&&(p+=r),p+'          <div class="report-success faded">\n            <h4>'+h((n.trans||t&&t.trans||d).call(u,"Report submitted",{name:"trans",hash:{},data:s}))+"</h4>\n            <span>"+h((n.trans||t&&t.trans||d).call(u,"Thanks for taking time to support a positive Wattpad community.",{name:"trans",hash:{},data:s}))+'</span>\n          </div>\n        </div>\x3c!--\n   --\x3e</form>\n    </div>\n    <div class="modal-footer">\n      <button class="btn btn-orange btn-next on-next" disabled="true">'+h((n.trans||t&&t.trans||d).call(u,"Submit a report",{name:"trans",hash:{},data:s}))+"</button>\n    </div>\n  </div>\n</div>\n"},useData:!0,useDepths:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(227));!function(e,t,n,s,l){s.add("SubscriptionModal",s.views.Base.extend({template:a.default,className:"subscription-modal modal fade",events:{"tap .on-track-event":"sendTrackingEvent","hidden.bs.modal":"sendTrackingEvent","shown.bs.modal":"sendTrackingEvent"},initialize:function(e){this.model.set("mode","go_premium"),s.views.Base.prototype.initialize.apply(this,arguments)},showModal:function(){this.$el.modal("show")},sendTrackingEvent:function(a){var s,l=$(a.currentTarget),i=this.model.get("mode");s="shown"===a.type?"prompt":"hidden"===a.type?"dismiss":l.data("action-type");var r={country:t.get(n.utils.currentUser().toJSON(),"country"),partid:this.model.get("id"),modal_type:i,cta_type:null};e.te.push("event","subscriptions","modal",null,s,r)},render:function(){return this.$el.html(this.template(t.assign(this.model.toJSON(),{appUrl:l.getAppUrl("homepage")}))),this}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div id="generic-modal" class="modal-dialog">\n    <div class="modal-content">\n        <header class="modal-header">\n            <div class="close" data-dismiss="modal">\n                '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",28,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'\n            </div>\n        </header>\n        <div class="modal-body clearfix">\n            <div id="subscribe-cta" class="background">\n                <p class="title">'+o((n.trans||t&&t.trans||r).call(i,"Discover the best reading experience with Wattpad Premium",{name:"trans",hash:{},data:s}))+"</p>\n                "+o((n.trans||t&&t.trans||r).call(i,"Upgrade to discover a new layer of Wattpad with new themes, an ad-free experience, and to show support for the community you love.",{name:"trans",hash:{},data:s}))+'\n                <div class="strong">'+o((n.trans||t&&t.trans||r).call(i,"To get started, subscribe through the Wattpad app on your mobile device.",{name:"trans",hash:{},data:s}))+'</div>\n            </div>\n            <div id="how-to-subscribe">\n                <div class="row">\n                    <div class="col-sm-4">\n                        <div class="step-circle">\n                            <p>1</p>\n                        </div>\n                        <p class="step-instruction">'+o((n.trans||t&&t.trans||r).call(i,"Open the Wattpad app on your mobile device and click on the Go Premium button on the home page.",{name:"trans",hash:{},data:s}))+'</p>\n                    </div>\n                    <div class="col-sm-4">\n                        <div class="step-circle">\n                            <p>2</p>\n                        </div>\n                        <p class="step-instruction">'+o((n.trans||t&&t.trans||r).call(i,"Choose your Wattpad Premium plan.",{name:"trans",hash:{},data:s}))+'</p>\n                    </div>\n                    <div class="col-sm-4">\n                        <div class="step-circle">\n                            <p>3</p>\n                        </div>\n                        <p class="step-instruction">'+o((n.trans||t&&t.trans||r).call(i,"Once you purchase Wattpad Premium, your account will instantly be upgraded wherever you use Wattpad.",{name:"trans",hash:{},data:s}))+'\n                        </p>\n                    </div>\n                </div>\n                <div class="row instructions-images">\n                    <div class="col-sm-4">\n                        '+o((n.connectImage||t&&t.connectImage||r).call(i,"/premium-modal/step-1@2x.png","Open the app",{name:"connectImage",hash:{},data:s}))+'\n                    </div>\n                    <div class="col-sm-4">\n                        '+o((n.connectImage||t&&t.connectImage||r).call(i,"/premium-modal/step-2@2x.png","Select a plan",{name:"connectImage",hash:{},data:s}))+'\n                    </div>\n                    <div class="col-sm-4">\n                        '+o((n.connectImage||t&&t.connectImage||r).call(i,"/premium-modal/step-3@2x.png","You're premium!",{name:"connectImage",hash:{},data:s}))+'\n                    </div>\n                </div>\n            </div>\n        </div>\n        <footer class="modal-footer">\n            <div class="strong on-track-event" data-action-type="faq">'+o((n.trans||t&&t.trans||r).call(i,"Have any questions?",{name:"trans",hash:{},data:s}))+' <a href="https://premium.wattpad.com" target="_blank" rel="noopener noreferrer">'+o((n.trans||t&&t.trans||r).call(i,"Read our FAQ",{name:"trans",hash:{},data:s}))+"</a></div>\n        </footer>\n    </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s,l,i){l.add("RegionManager",l.views.Base.extend({regionMethod:"append",constructor:function(){this.regions={},l.views.Base.apply(this,arguments)},clearRegion:function(e){void 0!==this.regions[e]&&(this.regions[e].view.remove(),delete this.regions[e].view,delete this.regions[e])},setRegion:function(e,t){var n;for(var a in this.regions)if(this.regions.hasOwnProperty(a)&&this.regions[a].view===t){n=!0;break}if(n)throw new Error("RegionManager: The subview (in element "+e+") is already bound to another region on this view.");void 0===this.regions[e]?this.regions[e]={view:null}:void 0!==this.regions[e].view&&(this.regions[e].view.remove(),delete this.regions[e].view),this.regions[e].view=t,this.$el.find(e)[this.regionMethod](t.$el)},attachRegions:function(){var e=this;t.forOwn(this.regions,function(t,n){t.view&&t.view.setElement(e.$(n))})},remove:function(){t.forOwn(this.regions,function(e,t){e.view&&this.clearRegion(t)},this),l.views.Base.prototype.remove.apply(this,arguments)}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("CollectionView",a.views.Base.extend({directions:{up:"prepend",down:"append"},constructor:function(e){if(e=e||{},void 0===this.itemView)throw new Error("CollectionView: this.itemView does not exist (required).");if(this.viewPointers={},this.direction=this.directions[e.direction||"down"],null===this.direction)throw new Error("CollectionView: this.direction is not valid.");this.containerId=e.containerId||this.containerId||null,this.containerClass=e.containerClass||this.containerClass||null,this.$container=null,this.collectionFilter=null,t.bindAll(this,"renderCollection","renderItem"),a.views.Base.prototype.constructor.apply(this,arguments)},bindEvents:function(){this.stopListening(this.collection,"reset sort add remove"),this.listenTo(this.collection,"reset sort",this.renderCollection,this),this.listenTo(this.collection,"add",function(e){this.renderItem(e)},this),this.listenTo(this.collection,"remove",function(e){this.removeItem(e)},this)},setDirection:function(e){"string"==typeof e?(this.direction=this.directions[e],void 0!==this.direction&&null!==this.direction||(this.direction=this.directions.down)):this.direction=this.directions.down},setElement:function(e){var n=this;if(a.views.Base.prototype.setElement.call(this,e),this.$container=this.getContainer(),this.collection&&0!==this.$container.length){var s=0;t.each(this.collection.models,function(e){var t=n.viewPointers[e.cid];t&&(t.setElement(n.$container.children()[s]),s++)})}},getContainer:function(){return this.containerId?this.$el.find(this.containerId):this.containerClass?this.$el.children(this.containerClass):this.$el},renderItem:function(e,n,a,s){if(n=n||this.getContainer(),null===this.collectionFilter||!0===this.collectionFilter.apply(e)){var l={model:e,cvIndex:a};s?t.extend(l,s):t.extend(l,this.getItemViewOptions()),this.viewPointers[e.cid]=new this.itemView(l),this.viewPointers[e.cid].render(),n[this.direction](this.viewPointers[e.cid].$el)}},getItemViewOptions:function(){return{}},renderCollection:function(e){var t=this.getContainer();return this.removeAll(),this.collection.each(function(n,a){this.renderItem(n,t,a,e)},this),this},setCollectionfilter:function(e){this.collectionFilter=e},removeItem:function(e){t.has(this.viewPointers,e.cid)&&(this.viewPointers[e.cid].remove(),delete this.viewPointers[e.cid])},removeAll:function(){t.each(this.viewPointers,function(e){this.removeItem(e.model)},this)},remove:function(){this.removeAll(),a.views.Base.prototype.remove.apply(this,arguments)}}))}(window,_,wattpad,window.app,Monaco)},function(e,t,n){"use strict";!function(e,t,n,a,s,l){s.add("IncrementalList",s.views.CollectionView.extend({containerClass:".collection",events:{"tap        .on-showmore":"onShowMore","touchstart .on-showmore":"setTouchState","touchend   .on-showmore":"removeTouchState"},constructor:function(e){s.views.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this.collection,"fetchNext:done",this.setButtonState)},render:function(){return this.$el.empty().append(this.template(this.getTemplateData())),this.renderCollection(this.getItemViewOptions()),this.setButtonState(),this.bindEvents(),this},getItemViewOptions:function(){return null},getTemplateData:function(){return this.model?this.model.toJSON():{}},setButtonState:function(){"function"==typeof this.collection.hasMore&&this.collection.hasMore()?this.$(".show-more").removeClass("hidden"):this.$(".show-more").addClass("hidden")},onShowMore:function(e){var t=this;e&&a.stopEvent(e),this.$(".show-more-message").addClass("hidden"),this.$(".loading-message").removeClass("hidden"),Promise.resolve(this.collection.fetchNextSet()).then(function(){t.$(".show-more-message").removeClass("hidden"),t.$(".loading-message").addClass("hidden")})},setTouchState:function(e){this.$(".on-showmore").addClass("touched")},removeTouchState:function(e){this.$(".on-showmore").removeClass("touched")}}))}(window,_,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(232));!function(e,t,n,s){s.add("Error404",s.views.RegionManager.extend({id:"error-404",template:a.default,initialize:function(e){e=e||{},this.type=e.type,this.modelId=e.modelId,this.browseTopics=e.browseTopics,Handlebars.registerPartial("core.header.search_field",function(){return""}),this.searchFieldView=new s.views.SearchField},setElement:function(e){Monaco.View.prototype.setElement.apply(this,arguments);var t="#error-404-stories";this.regions[t]&&this.regions[t].view&&this.$(t).length>0&&this.regions[t].view.setElement($(this.$(t+" > div")))},render:function(){var e,n={},a=JSON.parse(t.tagBgColours),s=JSON.parse(t.tagTextColours);switch(e=t.utils.trans("Page not found"),console.log("type:"+this.type),n.heading=t.utils.trans("This page seems to be missing..."),this.type){case"story":e=t.utils.trans("Story not found"),n.subHeading=t.utils.trans("The story has either been deleted or removed.");break;case"user":e=t.utils.trans("User not found"),n.subHeading=t.utils.trans("We couldn't find the profile you were looking for.");break;default:e=t.utils.trans("Page not found"),n.subHeading=t.utils.trans("We couldn't find what you were looking for.")}n.subHeading=n.subHeading+" "+t.utils.trans("You could try searching for something else you love!"),n.browseTopics=_.map(this.browseTopics.toJSON(),function(e,t){var n=t%s.length;return{name:e.name,topic:e.topic,background:a[n],color:s[n]}}),t.utils.setTitle(e),this.$el.html(this.template(n)),this.searchFieldView&&this.$("#header-item-search").html(this.searchFieldView.render().$el)},getCategories:function(){var e=s.get("categories")?s.get("categories").toJSON():[];return _.sortBy(e,"name")}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"      "+e.escapeExpression("function"==typeof(l=null!=(l=n.heading||(null!=t?t.heading:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"heading",hash:{},data:s}):l)+"\n"},3:function(e,t,n,a,s){return"      "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"This page seems to be missing...",{name:"trans",hash:{},data:s}))+"\n"},5:function(e,t,n,a,s){var l;return"      "+e.escapeExpression("function"==typeof(l=null!=(l=n.subHeading||(null!=t?t.subHeading:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"subHeading",hash:{},data:s}):l)+"\n"},7:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return"      "+r((n.trans||t&&t.trans||i).call(l,"We couldn't find what you were looking for.",{name:"trans",hash:{},data:s}))+"\n      "+r((n.trans||t&&t.trans||i).call(l,"You could try searching for something else you love!",{name:"trans",hash:{},data:s}))+"\n"},9:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <div class="category-item topic-item col-md-4 col-xs-6">\n              <a class="on-navigate" href="/stories/'+o("function"==typeof(l=null!=(l=n.topic||(null!=t?t.topic:t))?l:r)?l.call(i,{name:"topic",hash:{},data:s}):l)+'" style="background-color:'+o("function"==typeof(l=null!=(l=n.background||(null!=t?t.background:t))?l:r)?l.call(i,{name:"background",hash:{},data:s}):l)+";color:"+o("function"==typeof(l=null!=(l=n.color||(null!=t?t.color:t))?l:r)?l.call(i,{name:"color",hash:{},data:s}):l)+'">\n                <span class="text">'+o((n.trans||t&&t.trans||r).call(i,null!=t?t.name:t,{name:"trans",hash:{},data:s}))+"</span>\n              </a>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="error-404 col-sm-10 col-sm-offset-1">\n  <div class="header-wrapper">\n    <h1 class="heading">\n'+(null!=(l=n.if.call(r,null!=t?t.heading:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'    </h1>\n    <h3 class="subheading">\n'+(null!=(l=n.if.call(r,null!=t?t.subHeading:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+'    </h3>\n    <div id="search-container">\n      <form class="form-horizontal dropdown" role="form" name="search" action="/search/" action="GET" autocomplete="off">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-search",21,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        <input id="search-query" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"Search Stories & People",{name:"trans",hash:{},data:s}))+'" name="q" type="text" role="search" spellcheck="false" aria-label="'+c((n.trans||t&&t.trans||o).call(r,"Search Stories & People",{name:"trans",hash:{},data:s}))+'" value="'+c("function"==typeof(i=null!=(i=n.searchTerm||(null!=t?t.searchTerm:t))?i:o)?i.call(r,{name:"searchTerm",hash:{},data:s}):i)+'">\n      </form>\n    </div>\n  </div>\n  <div class="body-wrapper">\n    <div class="row">\n        <div class="categories-grid col-md-12">\n          <div class="title col-xs-12"><h3>'+c((n.trans||t&&t.trans||o).call(r,"Browse Topics",{name:"trans",hash:{},data:s}))+"</h3></div>\n"+(null!=(l=n.each.call(r,null!=t?t.browseTopics:t,{name:"each",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'          <a class="on-navigate more col-md-4 col-xs-12" href="/home">'+c((n.trans||t&&t.trans||o).call(r,"Discover more",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-right",16,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n        </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=g(n(234)),s=g(n(235)),l=g(n(236)),i=g(n(11)),r=g(n(237)),o=g(n(238)),c=g(n(239)),u=g(n(240)),d=g(n(12)),h=g(n(241)),p=g(n(242)),m=g(n(243)),f=g(n(244));function g(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,g,v,w,y){w.add("UserEvent",w.views.Base.extend({tagName:"article",className:"user-event",template:null,userEventConvoBtn:a.default,templates:{comment:f.default,inline_comment:m.default,follow:p.default,library:h.default,message:d.default,upload:u.default,vote:c.default,placeholder:o.default,dedicate:r.default},partials:{regions:{"core.events.partials.user_event_footer":i.default,"core.events.partials.user_event_story_meta":l.default,"core.events.partials.user_event_user_meta":s.default}},events:{"tap    .on-user":"onUser","click  .on-user":"stopEvent","tap    .on-user-mention":"onNavigate","click  .on-user-mention":"stopEvent","tap    .on-add-to-library":"onAddToLibrary","tap    .on-remove-from-library":"onRemoveFromLibrary","tap    .on-hide":"onHideUserEvent"},initialize:function(){this.template=this.templates[this.model.get("type")],t.each(this.partials.regions,function(e,t,n){Handlebars.registerPartial(t,e)})},render:function(){var e,t=this.model.get("type"),n=this.model.get("data");switch((e=this.model.toJSON()).isValidMessage=!1,t){case"comment":case"inline_comment":e.data.comment.body=v.sanitizeHTML(n.comment.body),e.leftButton=this.userEventConvoBtn(e);break;case"upload":e.data.story.isNew=1===n.story.numParts;break;case"dedicate":e.outgoing=n.dedicator.name===this.model.get("username"),e.data.dedicatee.hasWorks=n.dedicatee.numWorks>0,e.meta=e.meta||{},e.meta.user=e.data.dedicatee}return n.story&&n.story.part&&(e.data.story.inLibrary=!!v.currentUser().library().get(n.story.id),"upload"!==n.type&&n.story.title===n.story.part.title&&(e.data.story.part.title=""),e.data.story.url=g.utils.formatStoryUrl(n.story.url),e.data.story.part.url=g.utils.formatStoryUrl(n.story.part.url)),e.hideMenu=this.model.get("username")!==g.utils.currentUser().get("username")&&!e.isValidMessage||!(this.model instanceof w.models.PublicMessage),this.$el.html(this.template(e)),"placeholder"!==t&&("dedicate"!==t?n.user.name===this.model.get("username")&&this.$el.addClass("self"):e.outgoing&&this.$el.addClass("self")),this},onUser:function(e){var t=n(e.currentTarget),a=new RegExp("user/"+t.data("username")+"($|/)");null===Backbone.history.fragment.match(a)&&w.router.navigate("/user/"+t.data("username"),{trigger:!0})},onHideUserEvent:function(e){v.stopEvent(e),this.model.destroy()},onAddToLibrary:function(e){var t=v.currentUser(),n=new w.models.StoryGroup({id:this.model.get("data").story.id});t.library().add(n),this.deactivateLibraryButton()},onRemoveFromLibrary:function(e){var t=v.currentUser(),n=new w.models.StoryGroup({id:this.model.get("data").story.id});t.library().remove(n),this.activateLibraryButton()},activateLibraryButton:function(){var e=g.utils.iconify("fa-plus",14,"wp-base-2-dark")+" "+g.utils.trans("Add to Library");this.$(".on-remove-from-library").html(e),this.$(".on-remove-from-library").addClass("on-add-to-library"),this.$(".on-remove-from-library").addClass("btn-white"),this.$(".on-remove-from-library").removeClass("btn-teal"),this.$(".on-remove-from-library").removeClass("on-remove-from-library")},deactivateLibraryButton:function(){var e=g.utils.iconify("fa-check",14,"wp-neutral-5")+" "+g.utils.trans("Added to Library");this.$(".on-add-to-library").html(e),this.$(".on-add-to-library").addClass("on-remove-from-library"),this.$(".on-add-to-library").addClass("btn-teal"),this.$(".on-add-to-library").removeClass("btn-white"),this.$(".on-add-to-library").removeClass("on-add-to-library")}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<a class="on-view-convo btn btn-sm btn-grey"\n  href=\''+o((n.formatStoryUrl||t&&t.formatStoryUrl||r).call(i,null!=(l=null!=(l=null!=t?t.data:t)?l.comment:l)?l.deeplink_url:l,{name:"formatStoryUrl",hash:{},data:s}))+"'>\n  "+o((n.trans||t&&t.trans||r).call(i,"View Conversation",{name:"trans",hash:{},data:s}))+"\n</a>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r,o=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h='<div class="user-meta">\n  <a class="on-user avatar avatar-lg"\n     data-username="'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.avatar:l,t))+'">\n  </a>\n  <div class="clearfix">\n     <a class="on-user alt-link"\n     data-username="'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,t))+'">\n     <strong class="title">'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,t))+'</strong>\n   </a>\n\n   <div class="subtitle meta">\n     <span> '+c((n.sprintf||t&&t.sprintf||d).call(u,(n.ngettext||t&&t.ngettext||d).call(u,"%s Follower","%s Followers",(n.count||t&&t.count||d).call(u,null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.numFollowers:l,{name:"count",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||d).call(u,null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.numFollowers:l,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+" </span>\n"+(null!=(l=n.if.call(u,null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.hasWorks:l,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"   </div>\n\n";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:d,r={name:"isLoggedIn",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(u,r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(h+=l),h+'    <a class="btn btn-grey btn-sm on-user"\n      data-username="'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,t))+'"\n      href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,t))+'">\n      '+c((n.trans||t&&t.trans||d).call(u,"View Profile",{name:"trans",hash:{},data:s}))+"\n    </a>\n  </div>\n</div>\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"       <span> "+e.escapeExpression((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Work","%s Works",(n.count||t&&t.count||r).call(i,null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.numWorks:l,{name:"count",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||r).call(i,null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.numWorks:l,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+" </span>\n"},4:function(e,t,n,a,s){var l;return null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.name:l,{name:"isCurrentUser",hash:{},fn:e.noop,inverse:e.program(5,s,0),data:s}))?l:""},5:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.meta:t)?l.user:l)?l.following:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:""},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'         <button class="btn btn-sm btn-teal on-unfollow-user">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-following",14,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Following",{name:"trans",hash:{},data:s}))+"</button>\n"},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'         <button class="btn btn-sm btn-white on-follow-user">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-follow",14,"wp-base-2-dark",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Follow",{name:"trans",hash:{},data:s}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.meta:t)?l.user:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"      <span> "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.readCount:l,{name:"count",hash:{},data:s}))+" </span>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"      <span> "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.voteCount:l,{name:"count",hash:{},data:s}))+" </span>\n"},5:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.inLibrary:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:""},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'        <button class="btn btn-sm btn-teal on-remove-from-library">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-check",14,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Added to Library",{name:"trans",hash:{},data:s}))+"</button>\n"},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'        <button class="btn btn-sm btn-white on-add-to-library">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-plus",14,"wp-base-2-dark",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Add to Library",{name:"trans",hash:{},data:s}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h='<div class="story-meta">\n  <a class="on-navigate cover cover-sm"\n    href="'+c(o(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,t))+'">\n      <img src="'+c((n.resizeCover||t&&t.resizeCover||d).call(u,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.cover:l,50,{name:"resizeCover",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    <a class="on-navigate alt-link"\n      href="'+c(o(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,t))+'">\n      <strong class="title">'+c(o(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+'</strong>\n    </a>\n\n    <div class="subtitle meta">\n'+(null!=(l=n.if.call(u,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.readCount:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(u,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.voteCount:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"    </div>\n\n";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:d,r={name:"isLoggedIn",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(u,r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(h+=l),h+"  </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"      "+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,t))+"\n"},3:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'      <a class="on-user"\n        data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,t))+'"\n        href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,t))+'">\n        <strong>'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,t))+"</strong>\n      </a>\n"},5:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return"         <strong>"+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+" - "+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,t))+"</strong>\n"},7:function(e,t,n,a,s){var l;return"         <strong>"+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+"</strong>\n"},9:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.avatar:l,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.program(12,s,0),data:s}))?l:""},10:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'        <a class="on-user"\n           data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.name:l,t))+'"\n           href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.name:l,t))+'">\n           <strong>'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.name:l,t))+"</strong>\n        </a>\n"},12:function(e,t,n,a,s){var l;return"        "+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.name:l,t))+"\n"},14:function(e,t,n,a,s){var l;return"       "+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.name:l,t))+"\n"},16:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.avatar:l,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.program(19,s,0),data:s}))?l:""},17:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.events.partials.user_event_user_meta"],t,{name:"core.events.partials.user_event_user_meta",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:""},19:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:""},21:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n'+(null!=(l=n.if.call(o,null!=t?t.outgoing:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"    "+r((n.trans||t&&t.trans||c).call(o,"dedicated",{name:"trans",hash:{},data:s}))+'\n    <a class="on-navigate"\n       href="'+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.url:l,t))+'">\n'+(null!=(l=n.if.call(o,null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+"    </a>\n    "+r((n.trans||t&&t.trans||c).call(o,"to",{name:"trans",hash:{},data:s}))+"\n"+(null!=(l=n.if.call(o,null!=t?t.outgoing:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.program(14,s,0),data:s}))?l:"")+"  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n\n<hr>\n"+(null!=(l=n.if.call(o,null!=t?t.outgoing:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.program(21,s,0),data:s}))?l:"")+"<br>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'<header>\n  <a class="on-user avatar avatar-sm avatar-logo"\n     data-username="wattpad"\n     href="/user/wattpad">\n    <img src="//a.wattpad.com/img/mobile-web/white_wattpad_icon.png">\n  </a>\n  <div class="clearfix">\n    wattpad '+o((n.trans||t&&t.trans||r).call(i,"recommends",{name:"trans",hash:{},data:s}))+'\n     <a class="on-navigate"\n      href="'+o(c(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,t))+'">\n      <strong>'+o(c(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+"</strong>\n    </a>\n  </div>\n  <time>"+o((n.fromNow||t&&t.fromNow||r).call(i,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n<hr>\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return"         <strong>"+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+" - "+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,t))+"</strong>\n"},3:function(e,t,n,a,s){var l;return"         <strong>"+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+"</strong>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n  <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    '+r((n.trans||t&&t.trans||c).call(o,"%s voted on",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+'\n    <a class="on-navigate"\n       href="'+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.url:l,t))+'">\n'+(null!=(l=n.if.call(o,null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"    </a>\n  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n<hr>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'      <a class="on-navigate"\n         href="'+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.url:l,t))+'">\n         <strong>'+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,t))+"</strong>\n      </a>\n    "+r((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"to",{name:"trans",hash:{},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n  <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    '+r((n.trans||t&&t.trans||c).call(o,"%s posted",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+"\n"+(null!=(l=n.if.call(o,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:"")+'    <a class="on-navigate"\n      href="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,t))+'">\n      <strong>'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+"</strong>\n    </a>\n  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n<hr>\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n  <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    '+r((n.trans||t&&t.trans||c).call(o,"%s added",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+'\n    <a class="on-navigate"\n      href="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,t))+'">\n      <strong>'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+"</strong>\n    </a>\n    "+r((n.trans||t&&t.trans||c).call(o,"to",{name:"trans",hash:{},data:s}))+'\n    <a class="on-navigate"\n         href="/list/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.list:l)?l.id:l,t))+'">\n       <strong>'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.list:l)?l.name:l,t))+"</strong>\n    </a>\n  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n\n<hr>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    '+r((n.trans||t&&t.trans||c).call(o,"%s followed",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+'\n    <a class="on-user"\n       data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.followed:l)?l.name:l,t))+'"\n       href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.followed:l)?l.name:l,t))+'">\n       <strong>'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.followed:l)?l.name:l,t))+"</strong>\n    </a>\n  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n\n<hr>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_user_meta"],t,{name:"core.events.partials.user_event_user_meta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n<br>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return"         <strong>"+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+" - "+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,t))+"</strong>\n"},3:function(e,t,n,a,s){var l;return"         <strong>"+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+"</strong>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n  <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    '+r((n.trans||t&&t.trans||c).call(o,"%s commented on",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+'\n    <a class="on-navigate"\n       href="'+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.url:l,t))+'">\n'+(null!=(l=n.if.call(o,null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"    </a>\n  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n<hr>\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"<br>\n\n<blockquote>"+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.comment:l)?l.highlighted_text:l,200,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</blockquote>\n\n<div class="reply">\n  <header>\n    <a class="on-user avatar avatar-sm"\n       data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+"\"\n       href='/user/"+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+"'>\n     <img src=\""+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,t))+'">\n    </a>\n  <div class="clearfix title"> '+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+" </div>\n  </header>\n  <pre>"+(null!=(l=(n.linkify||t&&t.linkify||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.comment:l)?l.body:l,{name:"linkify",hash:{},data:s}))?l:"")+"</pre>\n</div>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return"         <strong>"+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+" - "+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,t))+"</strong>\n"},3:function(e,t,n,a,s){var l;return"         <strong>"+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,t))+"</strong>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header>\n  <a class="on-user avatar avatar-sm"\n     data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'"\n     href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n    <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n  <div class="clearfix">\n    '+r((n.trans||t&&t.trans||c).call(o,"%s commented on",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+'\n    <a class="on-story-navigate"\n       href="'+r(i(null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.url:l,t))+'">\n'+(null!=(l=n.if.call(o,null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"    </a>\n  </div>\n  <time>"+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{dropSuffix:!0},data:s}))+"</time>\n</header>\n<hr>\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_story_meta"],t,{name:"core.events.partials.user_event_story_meta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+'<br>\n\n<div class="reply">\n  <header>\n    <a class="on-user avatar avatar-sm"\n       data-username="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+"\"\n       href='/user/"+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+"'>\n     <img src=\""+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,t))+'">\n    </a>\n  <div class="clearfix title"> '+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+" </div>\n  <pre>"+(null!=(l=(n.linkify||t&&t.linkify||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.comment:l)?l.body:l,{name:"linkify",hash:{},data:s}))?l:"")+"</pre>\n</div>\n\n"+(null!=(l=e.invokePartial(a["core.events.partials.user_event_footer"],t,{name:"core.events.partials.user_event_footer",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=C(n(246)),s=C(n(247)),l=C(n(248)),i=C(n(249)),r=C(n(250)),o=C(n(251)),c=C(n(252)),u=C(n(253)),d=C(n(254)),h=C(n(255)),p=C(n(256)),m=C(n(257)),f=C(n(258)),g=C(n(259)),v=C(n(260)),w=C(n(261)),y=C(n(262)),b=C(n(263)),x=C(n(264));function C(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,C,k,_,S){_.add("FeedItem",S.View.extend({tagName:"article",className:"feed-item-new panel",template:null,templates:{comment:x.default,inline_comment:x.default,follow:b.default,library:y.default,upload:w.default,update:w.default,newMessage:v.default,message:v.default,vote:g.default,dedicate:f.default,placeholder:m.default},groupTemplates:{comment:p.default,inline_comment:p.default,follow:h.default,library:d.default,upload:w.default,update:w.default,vote:u.default,dedicate:c.default},itemTemplates:{comment:o.default,inline_comment:o.default,follow:r.default,library:i.default,vote:l.default,dedicate:s.default},events:{"tap    .on-hide":"onHideUserEvent","click    .on-hide":"stopEvent","tap    .send-avatar-event":"sendAvatarClickTrackingEvent","click  .send-avatar-event":"stopEvent"},initialize:function(){this.model.get("group")?this.template=this.groupTemplates[this.model.get("type")]:this.template=this.templates[this.model.get("type")],Handlebars.registerPartial("core.feed_items.aggregates.item_views.feed_comment_item",this.itemTemplates.comment),Handlebars.registerPartial("core.feed_items.aggregates.item_views.feed_follow_item",this.itemTemplates.follow),Handlebars.registerPartial("core.feed_items.aggregates.item_views.feed_library_item",this.itemTemplates.library),Handlebars.registerPartial("core.feed_items.aggregates.item_views.feed_dedicate_item",this.itemTemplates.dedicate),Handlebars.registerPartial("core.feed_items.aggregates.item_views.feed_vote_item",this.itemTemplates.vote),Handlebars.registerPartial("core.feed_items.feed_item_options",a.default),"follow"!==this.model.get("type")&&"dedicate"!==this.model.get("type")||(this.listenTo(_,"app:user:follow",this.onUpdateFollow),this.listenTo(_,"app:user:unfollow",this.onUpdateUnfollow))},render:function(){var e=this.model.toJSON(),n=this;return e.group&&(t.each(e.group,function(t){e.data.story&&(t.data.story.inLibrary=!!k.currentUser().library().get(t.data.story.id))}),e.groupCount=e.children.length+1),"dedicate"===e.type&&(e.outgoing=e.data.dedicatee.name!==C.utils.currentUser().get("username")),e.username&&(e.profile=e.username),this.$el.html(this.template(e)),t.defer(function(){n.$(".panel-body [data-toggle=tooltip]").tooltip()}),this},onUpdateFollow:function(e){var t=this.$(this.followButton+"[data-target="+e+"]");t.children(".fa").removeClass("fa-follow fa-wp-neutral-2").addClass("fa-following fa-wp-neutral-5"),t.children(".toggle-triangle").addClass("active"),t.children(".toggle-shadow").addClass("active"),t.attr("title",C.utils.trans("Following")).tooltip("fixTitle")},onUpdateUnfollow:function(e){var t=this.$(this.followButton+"[data-target="+e+"]");t.children(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-neutral-2"),t.children(".toggle-triangle").removeClass("active"),t.children(".toggle-shadow").removeClass("active"),t.attr("title",C.utils.trans("Follow")).tooltip("fixTitle")},onAddedToLibrary:function(e){var t=this.$(this.libraryButton+"[data-story-id='"+e+"']");t.children(".fa").removeClass("fa-wp-neutral-2 fa-plus").addClass("fa-wp-neutral-5 fa-check"),t.children(".toggle-triangle").addClass("active"),t.children(".toggle-shadow").addClass("active"),t.attr("title",C.utils.trans("Added to Library")).tooltip("fixTitle")},onRemovedFromLibrary:function(e){var t=this.$(this.libraryButton+"[data-story-id='"+e+"']");t.children(".fa").addClass("fa-wp-neutral-2 fa-plus").removeClass("fa-wp-neutral-5 fa-check"),t.children(".toggle-triangle").removeClass("active"),t.children(".toggle-shadow").removeClass("active"),t.attr("title",C.utils.trans("Add to Library")).tooltip("fixTitle")},onHideUserEvent:function(e){k.stopEvent(e),this.model.destroy()},sendAvatarClickTrackingEvent:function(t){e.te.push("event","newsfeed","avatar","","click",{feed_item_type:this.model.get("type")})},stopEvent:function(e){k.stopEvent(e)}})),_.mixin(_.views.FeedItem,"LibraryManagement","FollowManager")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div class="button-group relative dropdown">\n    <button class="btn btn-text btn-options dropdown-toggle" data-toggle="dropdown">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-more",20,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n    <div class="triangle"></div>\n    <ul class="dropdown-menu align-right">\n        <li><a class="on-hide" role="button" href="#" data-action="deleteEvent"> '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove-alt",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Delete",{name:"trans",hash:{},data:s}))+"</a></li>\n    </ul>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.profile:t,{name:"isCurrentUser",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return'  <a class="on-navigate" href="'+d((n.formatStoryUrl||t&&t.formatStoryUrl||u).call(c,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n      <div class="cover cover-xs pull-left">\n          <img src="'+d((n.resizeCover||t&&t.resizeCover||u).call(c,null!=t?t.cover:t,50,{name:"resizeCover",hash:{},data:s}))+'">\n      </div>\n      <div class="content">\n          <h5 class="h6">'+d("function"==typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:u)?o.call(c,{name:"title",hash:{},data:s}):o)+"</h5>\n          <small>"+d(e.lambda(null!=(r=null!=t?t.user:t)?r.name:r,t))+"</small>\n        "+(null!=(r=n.if.call(c,null!=t?t.outgoing:t,{name:"if",hash:{},fn:e.program(2,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n      </div>\n      <div class="meta">\n        '+(null!=(r=n.if.call(c,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(4,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n        "+(null!=(r=n.if.call(c,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(6,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n      </div>\n      <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+d("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+'">\n          '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n          <span class="toggle-triangle"></span>\n          <span class="toggle-shadow"></span>\n      </button>\n  </a>\n'},2:function(e,t,n,a,s,l,i){var r;return"<p>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Dedicated to %s",null!=(r=null!=(r=null!=i[2]?i[2].data:i[2])?r.dedicatee:r)?r.name:r,{name:"trans",hash:{},data:s}))+"</p>"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r;return null!=(r=n.blockHelperMissing.call(t,e.lambda(null!=(r=null!=t?t.data:t)?r.story:r,t),{name:"data.story",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:""},useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression,u=e.lambda;return'  <a class="on-navigate" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=(l=null!=t?t.part:t)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'">\n    <div class="cover cover-xs pull-left">\n        <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,50,{name:"resizeCover",hash:{},data:s}))+'">\n    </div>\n    <div class="content">\n        <h5 class="h6">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+" - "+c(u(null!=(l=null!=t?t.part:t)?l.title:l,t))+"</h5>\n        <small>"+c(u(null!=(l=null!=t?t.user:t)?l.name:l,t))+'</small>\n    </div>\n    <div class="meta">\n        '+(null!=(l=n.if.call(r,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n        "+(null!=(l=n.if.call(r,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'\n    </div>\n  </a>\n\n  <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-toggle="tooltip" data-placement="left" title="'+c((n.trans||t&&t.trans||o).call(r,"Add to Library",{name:"trans",hash:{},data:s}))+'">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="toggle-triangle"></span>\n      <span class="toggle-shadow"></span>\n  </button>\n'},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=t?t.data:t)?l.story:l,t),{name:"data.story",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'  <a class="on-navigate" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n    <div class="cover cover-xs pull-left">\n        <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,50,{name:"resizeCover",hash:{},data:s}))+'">\n    </div>\n    <div class="content">\n        <h4 class="h6">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h4>\n        <small>"+c(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+'</small>\n    </div>\n    <div class="meta">\n        '+(null!=(l=n.if.call(r,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n        "+(null!=(l=n.if.call(r,null!=t?t.voteCount:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'\n    </div>\n  </a>\n\n  <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-toggle="tooltip" data-placement="left" title="'+c((n.trans||t&&t.trans||o).call(r,"Add to Library",{name:"trans",hash:{},data:s}))+'">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="toggle-triangle"></span>\n      <span class="toggle-shadow"></span>\n  </button>\n'},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=t?t.data:t)?l.story:l,t),{name:"data.story",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c="function",u=e.escapeExpression;return'  <a class="on-navigate" href="/user/'+u(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)===c?i.call(r,{name:"name",hash:{},data:s}):i)+'">\n    <div class="avatar avatar-md pull-left">\n        <img src="'+u((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,48,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </div>\n    <div class="content">\n        <h4 class="h5">'+u(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)===c?i.call(r,{name:"name",hash:{},data:s}):i)+"</h4>\n        <small>\n            @"+u(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)===c?i.call(r,{name:"name",hash:{},data:s}):i)+"\n            "+(null!=(l=n.if.call(r,null!=t?t.numWorks:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n            "+(null!=(l=n.if.call(r,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'\n        </small>\n    </div>\n      <button class="btn btn-triangle btn-fan" data-target="'+u(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)===c?i.call(r,{name:"name",hash:{},data:s}):i)+'" data-following="'+u(typeof(i=null!=(i=n.following||(null!=t?t.following:t))?i:o)===c?i.call(r,{name:"following",hash:{},data:s}):i)+'" data-toggle="tooltip" data-placement="left" title="'+u((n.trans||t&&t.trans||o).call(r,"Follow",{name:"trans",hash:{},data:s}))+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-follow",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        <span class="toggle-triangle"></span>\n        <span class="toggle-shadow"></span>\n      </button>\n  </a>\n'},2:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"&middot; "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Work","%s Works",null!=t?t.numWorks:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numWorks:t,{name:"sprintf",hash:{},data:s}))},4:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"&middot; "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Follower","%s Followers",null!=t?t.numFollowers:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numFollowers:t,{name:"sprintf",hash:{},data:s}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=t?t.data:t)?l.followed:l,t),{name:"data.followed",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression,h=e.lambda;return'<div class="item-content">\n    <div class="cover cover-xs pull-left">\n        <a class="on-navigate" href="'+d((n.formatStoryUrl||t&&t.formatStoryUrl||u).call(c,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n            <img src="'+d((n.resizeCover||t&&t.resizeCover||u).call(c,null!=t?t.cover:t,50,{name:"resizeCover",hash:{},data:s}))+'">\n        </a>\n    </div>\n    <div class="content">\n        <a class="on-navigate" href="'+d((n.formatStoryUrl||t&&t.formatStoryUrl||u).call(c,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n            <h4 class="h6">'+d("function"==typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:u)?o.call(c,{name:"title",hash:{},data:s}):o)+" - "+d(h(null!=(r=null!=t?t.part:t)?r.title:r,t))+"</h4>\n        </a>\n        <small>"+d(h(null!=(r=null!=t?t.user:t)?r.name:r,t))+'</small>\n        <a class="on-navigate" href="'+d((n.formatStoryUrl||t&&t.formatStoryUrl||u).call(c,null!=(r=null!=(r=null!=i[1]?i[1].data:i[1])?r.comment:r)?r.deeplink_url:r,{name:"formatStoryUrl",hash:{},data:s}))+'">\n            <div class="btn btn-text">'+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-comment",14,"fa-mediumgrey",{name:"iconify",hash:{},data:s}))?r:"")+" "+d((n.trans||t&&t.trans||u).call(c,"View Conversation",{name:"trans",hash:{},data:s}))+'</div>\n        </a>\n    </div>\n    <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+d("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+'" data-toggle="tooltip" data-placement="left" title="'+d((n.trans||t&&t.trans||u).call(c,"Add to Library",{name:"trans",hash:{},data:s}))+'">\n      '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n        <span class="toggle-triangle"></span>\n        <span class="toggle-shadow"></span>\n    </button>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r;return null!=(r=n.blockHelperMissing.call(t,e.lambda(null!=(r=null!=t?t.data:t)?r.story:r,t),{name:"data.story",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:""},useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'    <h3 class="h6">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"%s dedicated %s story parts",null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,null!=t?t.groupCount:t,{name:"trans",hash:{},data:s}))+"</h3>\n"},3:function(e,t,n,a,s){var l;return'    <h3 class="h6">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"%s received %s dedications",null!=(l=null!=(l=null!=t?t.data:t)?l.dedicatee:l)?l.name:l,null!=t?t.groupCount:t,{name:"trans",hash:{},data:s}))+"</h3>\n"},5:function(e,t,n,a,s){var l;return'    <li class="list-group-item">\n'+(null!=(l=e.invokePartial(a["core.feed_items.aggregates.item_views.feed_dedicate_item"],t,{name:"core.feed_items.aggregates.item_views.feed_dedicate_item",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </li>\n"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<button data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'" class="btn btn-text on-expand">'+o((n.trans||t&&t.trans||r).call(i,"See more",{name:"trans",hash:{},data:s}))+"</button>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+r(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.name:l,t))+'">\n      <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.dedicator:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n'+(null!=(l=n.if.call(o,null!=t?t.outgoing:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'    <time datetime="'+r("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:c)?i.call(o,{name:"createDate",hash:{},data:s}):i)+'">'+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<ul class="list-group">\n'+(null!=(l=n.each.call(o,null!=t?t.group:t,{name:"each",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'</ul>\n\n<footer class="panel-footer">\n  '+(null!=(l=n.if.call(o,null!=(l=null!=t?t.children:t)?l[0]:l,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"\n</footer>\n\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'    <li class="list-group-item">\n'+(null!=(l=e.invokePartial(a["core.feed_items.aggregates.item_views.feed_vote_item"],t,{name:"core.feed_items.aggregates.item_views.feed_vote_item",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </li>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<button data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'" class="btn btn-text on-expand">'+o((n.trans||t&&t.trans||r).call(i,"See more",{name:"trans",hash:{},data:s}))+"</button>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+r(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n      <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+r((n.trans||t&&t.trans||c).call(o,"%s voted on %s parts",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,null!=t?t.groupCount:t,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+r("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:c)?i.call(o,{name:"createDate",hash:{},data:s}):i)+'">'+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<ul class="list-group">\n'+(null!=(l=n.each.call(o,null!=t?t.group:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'</ul>\n\n<footer class="panel-footer">\n  '+(null!=(l=n.if.call(o,null!=(l=null!=t?t.children:t)?l[0]:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return(null!=(r=n.if.call(c,null!=(r=null!=t?t.sample_covers:t)?r[0]:r,{name:"if",hash:{},fn:e.program(2,s,0,l,i),inverse:e.program(4,s,0,l,i),data:s}))?r:"")+'            <div class="content">\n                <h4 class="h3">'+d("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)?o.call(c,{name:"name",hash:{},data:s}):o)+"</h4>\n                <small>"+d((n.sprintf||t&&t.sprintf||u).call(c,(n.ngettext||t&&t.ngettext||u).call(c,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStories:t,{name:"sprintf",hash:{},data:s}))+"</small>\n            </div>\n            </a>\n"},2:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                <a href="/list/'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"-"+c((n.slugify||t&&t.slugify||o).call(r,null!=t?t.name:t,{name:"slugify",hash:{},data:s}))+'" class="header panel-heading" style="background-image: url('+c((n.resizeCoverAsBackground||t&&t.resizeCoverAsBackground||o).call(r,null!=(l=null!=t?t.sample_covers:t)?l[0]:l,640,{name:"resizeCoverAsBackground",hash:{},data:s}))+');">\n'},4:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return'                <a href="/list/'+d("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+"-"+d((n.slugify||t&&t.slugify||u).call(c,null!=t?t.name:t,{name:"slugify",hash:{},data:s}))+'" class="header panel-heading" style="background-image: url('+d((n.resizeCoverAsBackground||t&&t.resizeCoverAsBackground||u).call(c,null!=(r=null!=i[1]?i[1].story:i[1])?r.cover:r,640,{name:"resizeCoverAsBackground",hash:{},data:s}))+');">\n'},6:function(e,t,n,a,s){var l;return'            <li class="list-group-item">\n'+(null!=(l=e.invokePartial(a["core.feed_items.aggregates.item_views.feed_library_item"],t,{name:"core.feed_items.aggregates.item_views.feed_library_item",data:s,indent:"              ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </li>\n"},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<button data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'" class="btn btn-text on-expand">'+o((n.trans||t&&t.trans||r).call(i,"See more",{name:"trans",hash:{},data:s}))+"</button>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c=e.lambda,u=e.escapeExpression,d=null!=t?t:e.nullContext||{},h=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+u(c(null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.name:r,t))+'">\n      <img src="'+u((n.resizeAvatar||t&&t.resizeAvatar||h).call(d,null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.avatar:r,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+u((n.trans||t&&t.trans||h).call(d,"%s added %s stories to %s",null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.name:r,null!=t?t.groupCount:t,null!=(r=null!=(r=null!=t?t.data:t)?r.list:r)?r.name:r,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+u("function"==typeof(o=null!=(o=n.createDate||(null!=t?t.createDate:t))?o:h)?o.call(d,{name:"createDate",hash:{},data:s}):o)+'">'+u((n.fromNow||t&&t.fromNow||h).call(d,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(r=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'</header>\n\n<div class="panel-body">\n    <div class="panel list">\n\n'+(null!=(r=n.blockHelperMissing.call(t,c(null!=(r=null!=t?t.data:t)?r.list:r,t),{name:"data.list",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n        <ul class="list-group">\n'+(null!=(r=n.each.call(d,null!=t?t.group:t,{name:"each",hash:{},fn:e.program(6,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'        </ul>\n\n    </div>\n</div>\n\n<footer class="panel-footer">\n  '+(null!=(r=n.if.call(d,null!=(r=null!=t?t.children:t)?r[0]:r,{name:"if",hash:{},fn:e.program(8,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n</footer>\n"},usePartial:!0,useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'    <li class="list-group-item">\n'+(null!=(l=e.invokePartial(a["core.feed_items.aggregates.item_views.feed_follow_item"],t,{name:"core.feed_items.aggregates.item_views.feed_follow_item",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </li>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<button data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'" class="btn btn-text on-expand">'+o((n.trans||t&&t.trans||r).call(i,"See more",{name:"trans",hash:{},data:s}))+"</button>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+r(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n      <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+r((n.trans||t&&t.trans||c).call(o,"%s followed %s people",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,null!=t?t.groupCount:t,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+r("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:c)?i.call(o,{name:"createDate",hash:{},data:s}):i)+'">'+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<ul class="list-group">\n'+(null!=(l=n.each.call(o,null!=t?t.group:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'</ul>\n\n<footer class="panel-footer">\n  '+(null!=(l=n.if.call(o,null!=(l=null!=t?t.children:t)?l[0]:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'    <li class="list-group-item">\n'+(null!=(l=e.invokePartial(a["core.feed_items.aggregates.item_views.feed_comment_item"],t,{name:"core.feed_items.aggregates.item_views.feed_comment_item",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </li>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<button data-id="'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'" class="btn btn-text on-expand">'+o((n.trans||t&&t.trans||r).call(i,"See more",{name:"trans",hash:{},data:s}))+"</button>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+r(e.lambda(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n      <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+r((n.trans||t&&t.trans||c).call(o,"%s posted %s comments",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,null!=t?t.groupCount:t,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+r("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:c)?i.call(o,{name:"createDate",hash:{},data:s}):i)+'">'+r((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<ul class="list-group">\n'+(null!=(l=n.each.call(o,null!=t?t.group:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'</ul>\n\n<footer class="panel-footer">\n  '+(null!=(l=n.if.call(o,null!=(l=null!=t?t.children:t)?l[0]:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="panel story on-navigate">\n        <div class="cover cover-md pull-left">\n            <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,123,{name:"resizeCover",hash:{},data:s}))+'">\n        </div>\n        <div class="content">\n            <h4 class="h3">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h4>\n            <small>"+c(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+" &middot; "+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Part","%s Parts",null!=t?t.numParts:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numParts:t,{name:"sprintf",hash:{},data:s}))+'</small>\n            <div class="meta">\n                '+(null!=(l=n.if.call(r,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n                "+(null!=(l=n.if.call(r,null!=t?t.voteCount:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"\n            </div>\n            <p>"+c((n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,140,!1,{name:"simpleShorten",hash:{},data:s}))+'</p>\n        </div>\n    </a>\n\n    <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        <span class="toggle-triangle"></span>\n        <span class="toggle-shadow"></span>\n    </button>\n'},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/wattpad">\n      <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||r).call(i,"//a.wattpad.com/useravatar/Wattpad.128.263229.jpg",36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+o((n.trans||t&&t.trans||r).call(i,"wattpad recommends...",{name:"trans",hash:{},data:s}))+"</h3>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<div class="panel-body">\n\n'+(null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=t?t.data:t)?l.story:l,t),{name:"data.story",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'\n</div>\n\n<footer class="panel-footer">\n    <a href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||r).call(i,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'" class="btn btn-text on-navigate">'+o((n.trans||t&&t.trans||r).call(i,"Story details",{name:"trans",hash:{},data:s}))+"</a>\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r;return null!=(r=n.blockHelperMissing.call(t,e.lambda(null!=(r=null!=t?t.data:t)?r.dedicatee:r,t),{name:"data.dedicatee",hash:{},fn:e.program(2,s,0,l,i),inverse:e.noop,data:s}))?r:""},2:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d="function",h=e.escapeExpression;return'        <a class="on-navigate" href="/user/'+h(typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)===d?o.call(c,{name:"name",hash:{},data:s}):o)+'">\n\n'+(null!=(r=n.if.call(c,null!=t?t.backgroundUrl:t,{name:"if",hash:{},fn:e.program(3,s,0,l,i),inverse:e.program(5,s,0,l,i),data:s}))?r:"")+'\n                <div class="avatar avatar-lg pull-left">\n                    <img src="'+h((n.resizeAvatar||t&&t.resizeAvatar||u).call(c,null!=t?t.avatar:t,72,{name:"resizeAvatar",hash:{},data:s}))+'">\n                </div>\n                <div class="content">\n                    <h4 class="h3">'+h(typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)===d?o.call(c,{name:"name",hash:{},data:s}):o)+"</h4>\n                    <small>\n                        @"+h(typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)===d?o.call(c,{name:"name",hash:{},data:s}):o)+"\n                        "+(null!=(r=n.if.call(c,null!=t?t.numWorks:t,{name:"if",hash:{},fn:e.program(7,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n                        "+(null!=(r=n.if.call(c,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(9,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n                    </small>\n                </div>\n                <button class="btn btn-triangle btn-fan" data-target="'+h(typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)===d?o.call(c,{name:"name",hash:{},data:s}):o)+'" data-following="'+h(typeof(o=null!=(o=n.following||(null!=t?t.following:t))?o:u)===d?o.call(c,{name:"following",hash:{},data:s}):o)+'">\n                    '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-follow",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n                    <span class="toggle-triangle"></span>\n                    <span class="toggle-shadow"></span>\n                </button>\n            </header>\n        <a/>\n'},3:function(e,t,n,a,s){return'            <header class="panel-heading" style="background-image: url( '+e.escapeExpression((n.profileBackground||t&&t.profileBackground||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.backgroundUrl:t,640,{name:"profileBackground",hash:{},data:s}))+' );">\n'},5:function(e,t,n,a,s,l,i){var r;return'            <header class="panel-heading" style="background-color: '+e.escapeExpression(e.lambda(null!=(r=null!=i[2]?i[2].data:i[2])?r.highlight_colour:r,t))+';">\n'},7:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"&middot; "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Work","%s Works",null!=t?t.numWorks:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||i).call(l,null!=t?t.numWorks:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))},9:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"&middot; "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Follower","%s Followers",null!=t?t.numFollowers:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||i).call(l,null!=t?t.numFollowers:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c,u=e.lambda,d=e.escapeExpression,h=null!=t?t:e.nullContext||{},p=n.helperMissing,m='<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+d(u(null!=(r=null!=(r=null!=t?t.data:t)?r.dedicator:r)?r.name:r,t))+'">\n      <img src="'+d((n.resizeAvatar||t&&t.resizeAvatar||p).call(h,null!=(r=null!=(r=null!=t?t.data:t)?r.dedicator:r)?r.avatar:r,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+d((n.trans||t&&t.trans||p).call(h,"%s dedicated %s - %s to %s",null!=(r=null!=(r=null!=t?t.data:t)?r.dedicator:r)?r.name:r,null!=(r=null!=(r=null!=t?t.data:t)?r.story:r)?r.title:r,null!=(r=null!=(r=null!=(r=null!=t?t.data:t)?r.story:r)?r.part:r)?r.title:r,null!=(r=null!=(r=null!=t?t.data:t)?r.dedicatee:r)?r.name:r,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+d("function"==typeof(o=null!=(o=n.createDate||(null!=t?t.createDate:t))?o:p)?o.call(h,{name:"createDate",hash:{},data:s}):o)+'">'+d((n.fromNow||t&&t.fromNow||p).call(h,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(r=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'</header>\n\n<div class="panel-body">\n    <div class="panel dedication">\n\n';return o=null!=(o=n.outgoing||(null!=t?t.outgoing:t))?o:p,c={name:"outgoing",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s},r="function"==typeof o?o.call(h,c):o,n.outgoing||(r=n.blockHelperMissing.call(t,r,c)),null!=r&&(m+=r),m+'\n        <ul class="list-group">\n            <li class="list-group-item single-item">\n'+(null!=(r=e.invokePartial(a["core.feed_items.aggregates.item_views.feed_vote_item"],t,{name:"core.feed_items.aggregates.item_views.feed_vote_item",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'            </li>\n        </ul>\n    </div>\n</div>\n\n<footer class="panel-footer">\n    <a href="'+d((n.formatStoryUrl||t&&t.formatStoryUrl||p).call(h,null!=(r=null!=(r=null!=t?t.data:t)?r.story:r)?r.url:r,{name:"formatStoryUrl",hash:{},data:s}))+'" class="btn btn-text on-navigate" data-story-id="'+d(u(null!=(r=null!=(r=null!=t?t.data:t)?r.story:r)?r.id:r,t))+'">\n        '+d((n.trans||t&&t.trans||p).call(h,"Story details",{name:"trans",hash:{},data:s}))+"\n    </a>\n</footer>\n\n"},usePartial:!0,useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression,u=e.lambda;return'    <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="panel vote on-navigate">\n        <div class="cover cover-xs pull-left">\n            <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,50,{name:"resizeCover",hash:{},data:s}))+'">\n        </div>\n        <div class="content">\n            <h4 class="h3">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+" - "+c(u(null!=(l=null!=t?t.part:t)?l.title:l,t))+"</h4>\n            <small>"+c(u(null!=(l=null!=t?t.user:t)?l.name:l,t))+" &middot; "+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Part","%s Parts",null!=t?t.numParts:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numParts:t,{name:"sprintf",hash:{},data:s}))+'</small>\n            <div class="meta">\n                '+(null!=(l=n.if.call(r,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n                "+(null!=(l=n.if.call(r,null!=t?t.voteCount:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'\n            </div>\n        </div>\n    </a>\n    <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-toggle="tooltip" data-placement="left" title="'+c((n.trans||t&&t.trans||o).call(r,"Add to Library",{name:"trans",hash:{},data:s}))+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        <span class="toggle-triangle"></span>\n        <span class="toggle-shadow"></span>\n    </button>\n'},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.lambda,o=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+o(r(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n      <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||u).call(c,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+o((n.trans||t&&t.trans||u).call(c,"%s voted on %s - %s",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+o("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(c,{name:"createDate",hash:{},data:s}):i)+'">'+o((n.fromNow||t&&t.fromNow||u).call(c,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<div class="panel-body">\n\n'+(null!=(l=n.blockHelperMissing.call(t,r(null!=(l=null!=t?t.data:t)?l.story:l,t),{name:"data.story",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'\n</div>\n\n<footer class="panel-footer">\n    <a href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||u).call(c,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'" class="btn btn-text on-navigate">'+o((n.trans||t&&t.trans||u).call(c,"Story details",{name:"trans",hash:{},data:s}))+"</a>\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <small class="x-small offensive">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-warning",13,"wp-error-1",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"this message may be offensive",{name:"trans",hash:{},data:s}))+"</small>\n"},3:function(e,t,n,a,s){var l;return"      <pre>"+(null!=(l=(n.linkify||t&&t.linkify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.body:t,{name:"linkify",hash:{},data:s}))?l:"")+"</pre>\n"},5:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.beautifyUrlMetadata||(null!=t?t.beautifyUrlMetadata:t))?i:n.helperMissing,r={name:"beautifyUrlMetadata",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.beautifyUrlMetadata||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},6:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.shared.beautify_url"],t,{name:"core.shared.beautify_url",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:""},8:function(e,t,n,a,s){return" hidden "},10:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'  <div id="'+(null!=(l=n.if.call(r,null!=t?t.pinnedItem:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:"")+"replies-"+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"\"\n      class='replies-list collapse'\n      data-id=\""+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'"\n      data-profile-owner="'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'"\n      data-message-owner="'+c(e.lambda(null!=(l=null!=t?t.from:t)?l.name:l,t))+'">\n  </div>\n'},11:function(e,t,n,a,s){return"pinned-"},13:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.feed_items.feed_message_reply"],t,{name:"core.feed_items.feed_message_reply",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression,u=e.lambda;return'<header id="comment-'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" class="panel-heading message-heading">\n    <a class="send-avatar-event avatar avatar-sm3 on-navigate" href="/user/'+c(u(null!=(l=null!=t?t.from:t)?l.name:l,t))+'">\n      <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=(l=null!=t?t.from:t)?l.avatar:l,42,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n\n    <h3 class="h6 from-name"><a class="username on-navigate" href="/user/'+c(u(null!=(l=null!=t?t.from:t)?l.name:l,t))+'">'+c(u(null!=(l=null!=t?t.from:t)?l.name:l,t))+'</a></h3>\n\n    <time class="timestamp" datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:o)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.fromNow||t&&t.fromNow||o).call(r,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_message_options"],t,{name:"core.feed_items.feed_item_message_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n<div class="panel-body message dark-grey new-message">\n'+(null!=(l=n.if.call(r,null!=t?t.isOffensive:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.body:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.beautifyUrlMetadata:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'\n<button class="btn btn-white btn-block btn-replies on-reply '+(null!=(l=n.if.call(r,null!=t?t.numReplies:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(8,s,0),data:s}))?l:"")+'"\n  type="button" data-toggle="collapse" data-target="#replies-'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n   '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-comment",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"View %s more reply","View %s more replies",null!=t?t.numReplies:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numReplies:t,{name:"sprintf",hash:{},data:s}))+"\n</button>\n\n"+(null!=(l=n.if.call(r,null!=t?t.isReply:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(10,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.each.call(r,null!=t?t.latestReplies:t,{name:"each",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"\n<footer class=\"panel-footer new-message\">\n  <a href class='btn btn-text btn-reply-link new-reply'>"+(null!=(l=(n.trans||t&&t.trans||o).call(r,"Reply",{name:"trans",hash:{},data:s}))?l:"")+"</a>\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'<h3 class="h6">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"%s posted a new story",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+"</h3>"},3:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.groupCount:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:""},4:function(e,t,n,a,s){var l;return'        <h3 class="h6">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"%s posted %s parts",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,null!=t?t.groupCount:t,{name:"trans",hash:{},data:s}))+"</h3>\n"},6:function(e,t,n,a,s){var l;return'        <h3 class="h6">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"%s posted %s - %s",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))+"</h3>\n"},8:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="panel story on-navigate">\n        <div class="cover cover-md pull-left">\n            <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,123,{name:"resizeCover",hash:{},data:s}))+'">\n        </div>\n        <div class="content">\n            <h4 class="h3">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+" - "+c(e.lambda(null!=(l=null!=t?t.part:t)?l.title:l,t))+"</h4>\n            <small>"+(null!=(l=n.if.call(r,null!=(l=null!=t?t.user:t)?l.name:l,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Part","%s Parts",null!=t?t.numParts:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numParts:t,{name:"sprintf",hash:{},data:s}))+'</small>\n            <div class="meta">\n                '+(null!=(l=n.if.call(r,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:"")+"\n                "+(null!=(l=n.if.call(r,null!=t?t.voteCount:t,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"\n            </div>\n            <p>"+c((n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,140,!1,{name:"simpleShorten",hash:{},data:s}))+'</p>\n        </div>\n    </a>\n\n    <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-toggle="tooltip" data-placement="left" title="'+c((n.trans||t&&t.trans||o).call(r,"Add to Library",{name:"trans",hash:{},data:s}))+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        <span class="toggle-triangle"></span>\n        <span class="toggle-shadow"></span>\n    </button>\n'},9:function(e,t,n,a,s){var l;return e.escapeExpression(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+" &middot; "},11:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h=n.blockHelperMissing,p='<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n      <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||d).call(u,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    ';return i=null!=(i=n.isNew||(null!=t?t.isNew:t))?i:d,r={name:"isNew",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(u,r):i,n.isNew||(l=h.call(t,l,r)),null!=l&&(p+=l),p+="\n",i=null!=(i=n.isNew||(null!=t?t.isNew:t))?i:d,r={name:"isNew",hash:{},fn:e.noop,inverse:e.program(3,s,0),data:s},l="function"==typeof i?i.call(u,r):i,n.isNew||(l=h.call(t,l,r)),null!=l&&(p+=l),p+'    <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:d)?i.call(u,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.fromNow||t&&t.fromNow||d).call(u,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<div class="panel-body">\n\n'+(null!=(l=h.call(t,o(null!=(l=null!=t?t.data:t)?l.story:l,t),{name:"data.story",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'\n</div>\n\n<footer class="panel-footer">\n    <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||d).call(u,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'" class="btn btn-text on-navigate">'+c((n.trans||t&&t.trans||d).call(u,"Story details",{name:"trans",hash:{},data:s}))+"</a>\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return(null!=(r=n.if.call(c,null!=(r=null!=t?t.sample_covers:t)?r[0]:r,{name:"if",hash:{},fn:e.program(2,s,0,l,i),inverse:e.program(4,s,0,l,i),data:s}))?r:"")+'            <div class="content">\n                <h4 class="h3">'+d("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)?o.call(c,{name:"name",hash:{},data:s}):o)+"</h4>\n                <small>"+d((n.sprintf||t&&t.sprintf||u).call(c,(n.ngettext||t&&t.ngettext||u).call(c,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStories:t,{name:"sprintf",hash:{},data:s}))+"</small>\n            </div>\n        </a>\n"},2:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <a href="/list/'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"-"+c((n.slugify||t&&t.slugify||o).call(r,null!=t?t.name:t,{name:"slugify",hash:{},data:s}))+'" class="header panel-heading" style="background-image: url('+c((n.resizeCoverAsBackground||t&&t.resizeCoverAsBackground||o).call(r,null!=(l=null!=t?t.sample_covers:t)?l[0]:l,640,{name:"resizeCoverAsBackground",hash:{},data:s}))+');">\n'},4:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return'        <a href="/list/'+d("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+"-"+d((n.slugify||t&&t.slugify||u).call(c,null!=t?t.name:t,{name:"slugify",hash:{},data:s}))+'" class="header panel-heading" style="background-image: url('+d((n.resizeCoverAsBackground||t&&t.resizeCoverAsBackground||u).call(c,null!=(r=null!=i[1]?i[1].story:i[1])?r.cover:r,640,{name:"resizeCoverAsBackground",hash:{},data:s}))+');">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c=e.lambda,u=e.escapeExpression,d=null!=t?t:e.nullContext||{},h=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+u(c(null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.name:r,t))+'">\n      <img src="'+u((n.resizeAvatar||t&&t.resizeAvatar||h).call(d,null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.avatar:r,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n\n    <h3 class="h6">'+u((n.trans||t&&t.trans||h).call(d,"%s added %s to %s",null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.name:r,null!=(r=null!=(r=null!=t?t.data:t)?r.story:r)?r.title:r,null!=(r=null!=(r=null!=t?t.data:t)?r.list:r)?r.name:r,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+u("function"==typeof(o=null!=(o=n.createDate||(null!=t?t.createDate:t))?o:h)?o.call(d,{name:"createDate",hash:{},data:s}):o)+'">'+u((n.fromNow||t&&t.fromNow||h).call(d,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(r=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'</header>\n\n<div class="panel-body">\n    <article class="panel list">\n\n'+(null!=(r=n.blockHelperMissing.call(t,c(null!=(r=null!=t?t.data:t)?r.list:r,t),{name:"data.list",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n        <ul class="list-group">\n            <li class="list-group-item single-item">\n'+(null!=(r=e.invokePartial(a["core.feed_items.aggregates.item_views.feed_library_item"],t,{name:"core.feed_items.aggregates.item_views.feed_library_item",data:s,indent:"              ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'            </li>\n        </ul>\n\n    </article>\n</div>\n\n<footer class="panel-footer">\n    <a href="/list/'+u(c(null!=(r=null!=(r=null!=t?t.data:t)?r.list:r)?r.id:r,t))+'" class="btn btn-text on-navigate">\n      '+u((n.trans||t&&t.trans||h).call(d,"View reading list",{name:"trans",hash:{},data:s}))+"\n    </a>\n</footer>\n"},usePartial:!0,useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return(null!=(r=n.if.call(c,null!=t?t.backgroundUrl:t,{name:"if",hash:{},fn:e.program(2,s,0,l,i),inverse:e.program(4,s,0,l,i),data:s}))?r:"")+'        <div class="avatar avatar-lg pull-left">\n            <img src="'+d((n.resizeAvatar||t&&t.resizeAvatar||u).call(c,null!=t?t.avatar:t,72,{name:"resizeAvatar",hash:{},data:s}))+'">\n        </div>\n        <div class="content">\n            <h4 class="h3">'+d("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)?o.call(c,{name:"name",hash:{},data:s}):o)+"</h4>\n            <small>\n                @"+d("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)?o.call(c,{name:"name",hash:{},data:s}):o)+"\n                "+(null!=(r=n.if.call(c,null!=t?t.numWorks:t,{name:"if",hash:{},fn:e.program(6,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n                "+(null!=(r=n.if.call(c,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(8,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n            </small>\n        </div>\n    </a>\n\n    <button class="btn btn-triangle btn-fan" data-target="'+d("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)?o.call(c,{name:"name",hash:{},data:s}):o)+'" data-following="'+d("function"==typeof(o=null!=(o=n.following||(null!=t?t.following:t))?o:u)?o.call(c,{name:"following",hash:{},data:s}):o)+'" data-toggle="tooltip" data-placement="left" title="'+d((n.trans||t&&t.trans||u).call(c,"Follow",{name:"trans",hash:{},data:s}))+'">\n        '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-follow",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n        <span class="toggle-triangle"></span>\n        <span class="toggle-shadow"></span>\n    </button>\n'},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'        <a href="/user/'+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+'" class="panel on-navigate follow" style="background-image: url( '+o((n.profileBackground||t&&t.profileBackground||r).call(i,null!=t?t.backgroundUrl:t,640,{name:"profileBackground",hash:{},data:s}))+' );">\n'},4:function(e,t,n,a,s,l,i){var r,o,c=e.escapeExpression;return'        <a href="/user/'+c("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:n.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:s}):o)+'" class="panel on-navigate follow" style="background-color: '+c(e.lambda(null!=(r=null!=i[1]?i[1].data:i[1])?r.highlight_colour:r,t))+'">\n'},6:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"&middot; "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Work","%s Works",null!=t?t.numWorks:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numWorks:t,{name:"sprintf",hash:{},data:s}))},8:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"&middot; "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Follower","%s Followers",null!=t?t.numFollowers:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numFollowers:t,{name:"sprintf",hash:{},data:s}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c=e.lambda,u=e.escapeExpression,d=null!=t?t:e.nullContext||{},h=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+u(c(null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.name:r,t))+'">\n      <img src="'+u((n.resizeAvatar||t&&t.resizeAvatar||h).call(d,null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.avatar:r,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+u((n.trans||t&&t.trans||h).call(d,"%1$s followed %2$s",null!=(r=null!=(r=null!=t?t.data:t)?r.user:r)?r.name:r,null!=(r=null!=(r=null!=t?t.data:t)?r.followed:r)?r.name:r,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+u("function"==typeof(o=null!=(o=n.createDate||(null!=t?t.createDate:t))?o:h)?o.call(d,{name:"createDate",hash:{},data:s}):o)+'">'+u((n.fromNow||t&&t.fromNow||h).call(d,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(r=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+'</header>\n\n<div class="panel-body">\n\n'+(null!=(r=n.blockHelperMissing.call(t,c(null!=(r=null!=t?t.data:t)?r.followed:r,t),{name:"data.followed",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n</div>\n\n<footer class="panel-footer">\n  <a href="/user/'+u(c(null!=(r=null!=(r=null!=t?t.data:t)?r.followed:r)?r.name:r,t))+'" class="btn btn-text on-navigate">'+u((n.trans||t&&t.trans||h).call(d,"View profile",{name:"trans",hash:{},data:s}))+"</a>\n</footer>\n"},usePartial:!0,useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression,u=e.lambda;return'        <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="header clearfix on-navigate">\n            <div class="cover cover-xs pull-left">\n                <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,50,{name:"resizeCover",hash:{},data:s}))+'">\n            </div>\n            <div class="content">\n                <h4 class="h3">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+" - "+c(u(null!=(l=null!=t?t.part:t)?l.title:l,t))+"</h4>\n                <small>"+c(u(null!=(l=null!=t?t.user:t)?l.name:l,t))+" &middot; "+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Part","%s Parts",null!=t?t.numParts:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numParts:t,{name:"sprintf",hash:{},data:s}))+'</small>\n                <div class="meta">\n                    '+(null!=(l=n.if.call(r,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n                    "+(null!=(l=n.if.call(r,null!=t?t.voteCount:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"\n                </div>\n            </div>\n        </a>\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.lambda,o=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=n.helperMissing;return'<header class="panel-heading">\n    <a class="send-avatar-event avatar avatar-sm2 on-navigate" href="/user/'+o(r(null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,t))+'">\n      <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||u).call(c,null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <h3 class="h6">'+o((n.trans||t&&t.trans||u).call(c,"%s commented on %s - %s",null!=(l=null!=(l=null!=t?t.data:t)?l.user:l)?l.name:l,null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.title:l,null!=(l=null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))+'</h3>\n    <time datetime="'+o("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(c,{name:"createDate",hash:{},data:s}):i)+'">'+o((n.fromNow||t&&t.fromNow||u).call(c,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_options"],t,{name:"core.feed_items.feed_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<div class="panel-body">\n    <article class="panel comment">\n'+(null!=(l=n.blockHelperMissing.call(t,r(null!=(l=null!=t?t.data:t)?l.story:l,t),{name:"data.story",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'        <blockquote class="comment-body">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||u).call(c,null!=(l=null!=(l=null!=t?t.data:t)?l.comment:l)?l.body:l,2e3,!0,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</blockquote>\n    </article>\n\n    <button class="btn btn-triangle btn-library" data-icon="true" data-story-id="'+o(r(null!=(l=null!=(l=null!=t?t.data:t)?l.story:l)?l.id:l,t))+'" data-toggle="tooltip" data-placement="left" title="'+o((n.trans||t&&t.trans||u).call(c,"Add to Library",{name:"trans",hash:{},data:s}))+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||u).call(c,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        <span class="toggle-triangle"></span>\n        <span class="toggle-shadow"></span>\n    </button>\n</div>\n\n<footer class="panel-footer">\n    <a class="btn btn-text on-navigate" href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||u).call(c,null!=(l=null!=(l=null!=t?t.data:t)?l.comment:l)?l.deeplink_url:l,{name:"formatStoryUrl",hash:{},data:s}))+'">'+(null!=(l=(n.iconify||t&&t.iconify||u).call(c,"fa-comment",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||u).call(c,"View Conversation",{name:"trans",hash:{},data:s}))+"</a>\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(266));!function(e,t,n,s,l,i,r){i.add("List",i.views.IncrementalList.extend({itemView:{},template:a.default,className:"list container",containerClass:".collection",initialize:function(e){if(void 0===e.itemView)throw new Error("List View: options.itemView cannot be null");this.itemView=e.itemView,this.className=e.className?e.className:this.className,this.title=e.title?e.title:"",e.pageTitle&&this._setTitle(e.pageTitle)},_setTitle:function(t){e.document.title!==t&&(e.document.title=t)},getTemplateData:function(){return{hasItems:this.collection.length>0,title:this.title}}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div class="collection"></div>\n  <div class="show-more hidden center-text">\n    <button class="btn btn-link on-showmore">\n        <span class=\'show-more-message\'>\n            <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n        </span>\n        <span class='loading-message'>\n            "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n            <span> "+o((n.trans||t&&t.trans||r).call(i,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n        </span>\n    </button>\n  </div>\n"},3:function(e,t,n,a,s){return'  <div class="collection">\n    <p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No items available at the moment",{name:"trans",hash:{},data:s}))+"</p>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{};return"<h5> "+e.escapeExpression("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:n.helperMissing)?i.call(r,{name:"title",hash:{},data:s}):i)+" </h5>\n<hr>\n"+(null!=(l=n.if.call(r,null!=t?t.hasItems:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"\n\n\n"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a){a.add("CoreFeed",a.views.IncrementalList.extend({itemView:a.views.UserEvent,getItemView:function(e){switch(e.get("type")){case"message":case"newMessage":return a.views.NewFeedItemMessage;case"comment":case"inline_comment":case"library":case"upload":case"vote":case"placeholder":case"dedicate":case"follow":default:return a.views.FeedItem}},renderItem:function(e,t){this.itemView=this.getItemView(e),a.views.IncrementalList.prototype.renderItem.apply(this,arguments)}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s,l,i){l.add("FeedEventFollow",l.views.UserEvent.extend({events:t.extend({"tap    .on-follow-user":"onFollowUser","tap    .on-unfollow-user":"onUnfollowUser"},l.views.UserEvent.prototype.events),render:function(){var e,t=this.model.get("data");(e=this.model.toJSON()).leftButton="",e.data.followed.hasWorks=t.followed.numWorks>0,e.meta=e.meta||{},e.meta.user=e.data.followed,this.$el.html(this.template(e)),t.user.name===this.model.get("username")&&this.$el.addClass("self")},onFollowUser:function(e){var t=this.model.get("data"),a=s.currentUser(),i=a.get("username"),r=t.followed.name,o=this;n.when(a.following().follow(r)).done(function(){o.deactivateFollowButton(),t.followed.following=!0,o.model.set("data",t),l.local.clear("user."+i),l.local.clear("user."+i+".following"),l.local.clear("user."+i+".profile.following"),l.local.clear("user."+r),l.local.clear("user."+r+".following"),l.local.clear("user."+r+".profile.following")})},onUnfollowUser:function(e){var t=this.model.get("data"),a=s.currentUser(),i=a.get("username"),r=t.followed.name,o=this;n.when(a.following().unfollow(r)).done(function(){o.activateFollowButton(),t.followed.following=!1,o.model.set("data",t),l.local.clear("user."+i),l.local.clear("user."+i+".following"),l.local.clear("user."+i+".profile.following"),l.local.clear("user."+r),l.local.clear("user."+r+".following"),l.local.clear("user."+r+".profile.following")})},activateFollowButton:function(){var e=a.utils.iconify("fa-follow",14,"wp-base-2-dark")+" "+a.utils.trans("Follow");this.$(".on-unfollow-user").html(e),this.$(".on-unfollow-user").addClass("on-follow-user"),this.$(".on-unfollow-user").addClass("btn-white"),this.$(".on-unfollow-user").removeClass("btn-teal"),this.$(".on-unfollow-user").removeClass("on-unfollow-user")},deactivateFollowButton:function(){var e=a.utils.iconify("fa-following",14,"wp-neutral-5")+" "+a.utils.trans("Following");this.$(".on-follow-user").html(e),this.$(".on-follow-user").addClass("on-unfollow-user"),this.$(".on-follow-user").addClass("btn-teal"),this.$(".on-follow-user").removeClass("btn-white"),this.$(".on-follow-user").removeClass("on-follow-user")}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=l(n(13)),s=l(n(14));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("NewFeedItemMessage",r.views.FeedItem.extend({reportModalContainer:".message-report-modal",requestType:"inappropriate_comments",isMainReportModal:!1,modalTitle:l.utils.trans("Report a Message"),events:t.extend({"tap  .on-reply":"onReply","click .on-reply":"stopEvent","tap  .new-reply":"newReply","click .new-reply":"stopEvent","tap  .on-delete":"onDeleteMessage","click .on-delete":"stopEvent","tap  .on-send-event":"sendEventForBeautifyUrl","click .on-send-event":"stopEvent","tap    .send-avatar-event":"sendAvatarClickTrackingEvent","click  .send-avatar-event":"stopEvent"},r.views.FeedItem.prototype.events),initialize:function(e){Handlebars.registerPartial("core.feed_items.feed_item_message_options",s.default),Handlebars.registerPartial("core.shared.beautify_url",a.default),Handlebars.registerPartial("core.feed_items.feed_message_reply",function(){return""}),this.template=this.templates.newMessage,this.pinnedItem=e.pinnedItem||null;var n=this.model.get("username"),i=this.model.get("from").name;this.newMessageView=new r.views.NewMessageNew({to:n,parentId:this.model.get("id"),placeholder:l.utils.trans("Write a reply..."),canBroadcast:!1,autoMention:i}),this.listenTo(this.newMessageView,"message:new",this.expand),this.listenTo(r,"message:scroll",t.debounce(this.scrollToComment))},render:function(){var e=t.cloneDeep(this.model.toJSON()),n=this;if("message"===e.type&&(e.id=e.data.message.id),e.currentUser=l.utils.currentUser().toJSON(),e.canDelete=!1,this.model.get("username")){var a=l.utils.currentUser().get("username")===this.model.get("username"),s=l.utils.currentUser().get("username")===this.model.get("from").name,i=l.utils.currentUser().get("isSysAdmin");e.canDelete=a||s||i}e.numReplies=e.numReplies-e.latestReplies.length,e.showTarget=!1,e.pinnedItem=this.pinnedItem,this.collection=new r.collections.NewMessageReplies(e.latestReplies,{parentId:e.id,messageOwnerName:this.model.get("username"),limit:10}),this.repliesView=new r.views.MessageRepliesList({collection:this.collection,forFeeds:!0});var o=this.model.getBeautifyUrlSettings(e);return o&&!this.model.get("beautifyUrlMetadata")&&n.model.getMetadataForBeautifyUrl(o).then(function(t){e.beautifyUrlMetadata=t,n.$el.html(n.template(e)),n.renderLatestReplies()}),this.$el.html(this.template(e)),this.renderLatestReplies(),r.trigger("message:scroll"),this},scrollToComment:function(){var t=e.location.hash.replace("#","");if(t===this.model.get("id").toString()){var a=n("#comment-"+t);a.length&&(n("html, body").animate({scrollTop:a.offset().top-n("#header").height()},1e3),this.newMessageView._setActiveState(),this.newMessageView.$("textarea").focus())}},sendEventForBeautifyUrl:function(t){var a=n(t.currentTarget).parent(".beautify-url").data(),s=a.storyId,l=a.profileOwner;e.te.push("event","profile","message","story","click",{username:l,storyid:s})},renderLatestReplies:function(){var e=this;this.stopListening(this.newMessageView,"message:new",this.expand),this.autoMention=this.model.get("from").name;var t=this.$(".replies-list");this.collection.listenTo(this.newMessageView,"message:new",this.collection.add),this.newMessageView.listenTo(this.repliesView,"message:mention",this.newMessageView.addMention),0===this.$(".panel-footer").children(".message-new").length&&(this.$(".panel-footer").empty().append(this.newMessageView.render().$el),this.newMessageView.delegateEvents()),t.append(this.repliesView.render().$el),t.collapse("show"),t.one("hidden.bs.collapse",function(){e.repliesView.remove(),e.collection.reset(),e.collection.stopListening(e.newMessageView,"message:new"),r.local.clear(e.collection.resource())}),t.addClass("no-collapse")},onReply:function(e){var t=n(e.target).data("target"),a=this;if(!this.$(t).hasClass("collapsing"))if(this.$(t).hasClass("collapse")&&this.$(t).hasClass("in")&&!this.$(t).hasClass("no-collapse"))this.listenTo(this.newMessageView,"message:new",this.expand),this.$(t).collapse("hide"),n(e.target).blur();else{this.autoMention=this.model.get("from").name;var s=this.$(t),l={};this.collection.models.length&&(l.replyId=this.collection.models[0].get("id")),Promise.resolve(this.collection.fetchNextSet(l)).then(function(e){a.updateReplyCount(e.replies.length),s.one("hidden.bs.collapse",function(){a.repliesView.remove(),a.collection.reset(),a.collection.stopListening(a.newMessageView,"message:new"),r.local.clear(a.collection.resource())})})}},newReply:function(e){this.$(".panel-footer").empty().append(this.newMessageView.render().$el),this.newMessageView.focus()},updateReplyCount:function(e){var t=this.$el.children(".on-reply"),a=t.text().trim(),s=new RegExp(/([0-9]*)([M|K]?)(\s)? more (reply|replies)/gi).exec(a);if(!s[2]){var i=0;s[1].trim().length>0&&(i=parseInt(s[1],10));var r=i-e,o=l.utils.sprintf(l.utils.ngettext("View %s more reply","View %s more replies",r),[l.utils.count(r)]);t.html(o),r>0&&this.$el.children(".on-reply").removeClass("hidden"),r<=0&&(this.$el.children(".on-reply").addClass("hidden"),n(this.$el.children(".on-reply").data("target")).removeClass("no-collapse"))}},expand:function(){this.$('button[data-target="#replies-'+this.model.get("id")+'"]').trigger("tap")},onDeleteMessage:function(t){var n=this.model.toJSON(),a=new r.models.Message({id:n.id,body:n.body,createDate:n.createDate,from:{name:n.from.name,avatar:n.from.avatar,isActive:!0},isReply:!1,parentId:null,ownername:this.model.get("ownername")||this.model.get("username")||l.utils.currentUser().get("username")});e.confirm("Are you sure you want to delete this message?")&&(a.destroy(),this.model.collection.remove(this.model))},reportMoreInfo:function(){var t=this;return[{key:"Message Author",val:this.model.get("from").name},{key:"Message Location",val:e.location.href},{key:"Message Body",val:function(){return i.sanitizeHTML(t.model.get("body"))}}]},sendAvatarClickTrackingEvent:function(t){e.te.push("event","newsfeed","avatar","","click",{feed_item_type:this.model.get("type")})}})),r.mixin(r.views.NewFeedItemMessage,"InputCounterManagement","ReportManagement","ReportConduct")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(271));!function(e,t,n,s,l,i,r){i.add("FeedMessageReply",r.View.extend({reportModalContainer:".message-report-modal-reply",requestType:"inappropriate_comments",isMainReportModal:!1,modalTitle:s.utils.trans("Report a Message"),tagName:"li",className:"list-group-item",template:null,events:{"tap    .on-user":"onNavigate","click  .on-user":"stopEvent","tap    .on-user-mention":"onNavigate","click  .on-user-mention":"stopEvent","tap  .on-reply":"onReply","click .on-reply":"stopEvent","tap  .on-delete":"onDelete","click .on-delete":"stopEvent","tap  .on-send-reply-event":"sendEventForBeautifyUrl","click .on-send-reply-event":"stopEvent"},initialize:function(){this.template=a.default},render:function(){var e=this.model.toJSON(),t=l.currentUser().get("username"),n=this;e.body&&(e.body=l.sanitizeHTML(e.body)),e.canDelete=0!==this.model.get("id")&&(this.model.get("ownername")===t||this.model.get("from").name===t||s.utils.currentUser().get("isSysAdmin"));var a=this.model.getBeautifyUrlSettings(e);return a&&!this.model.get("beautifyUrlMetadata")&&n.model.getMetadataForBeautifyUrl(a).then(function(t){e.beautifyUrlMetadata=t,n.$el.html(n.template(e))}),this.$el.html(this.template(e)),this},sendEventForBeautifyUrl:function(t){var a=n(t.currentTarget).parent(".beautify-url").data(),s=a.storyId,l=a.profileOwner;e.te.push("event","profile","message","story","click",{username:l,storyid:s})},onNavigate:function(e){var t=n(e.currentTarget);i.router.navigate(t.attr("href"),{trigger:!0})},onReply:function(e){this.stopEvent(e),this.trigger("message:mention",this.model.get("from").name)},onDelete:function(t){this.stopEvent(t),e.confirm("Are you sure you want to delete this message?")&&this.model.destroy()},stopEvent:function(e){l.stopEvent(e)},reportMoreInfo:function(){var t=this;return[{key:"Message Author",val:this.model.get("username")||this.model.get("from").name},{key:"Message Location",val:e.location.href},{key:"Message Body",val:function(){return l.sanitizeHTML(t.model.get("body"))}}]}})),i.mixin(i.views.FeedMessageReply,"ReportManagement","ReportConduct")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'      <small class="x-small offensive">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-warning",13,"wp-error-1",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"this message may be offensive",{name:"trans",hash:{},data:s}))+"</small>\n"},3:function(e,t,n,a,s){var l;return"        <pre>"+(null!=(l=(n.linkify||t&&t.linkify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.body:t,{name:"linkify",hash:{},data:s}))?l:"")+"</pre>\n"},5:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.beautifyUrlMetadata||(null!=t?t.beautifyUrlMetadata:t))?i:n.helperMissing,r={name:"beautifyUrlMetadata",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.beautifyUrlMetadata||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},6:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.shared.beautify_url"],t,{name:"core.shared.beautify_url",data:s,indent:"          ",helpers:n,partials:a,decorators:e.decorators}))?l:""},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'            <li>\n              <a class="on-delete" role="button" href="#">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-trash",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Delete Message",{name:"trans",hash:{},data:s}))+"</a>\n            </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.lambda,o=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=n.helperMissing;return'<div class="panel-body message latest-replies reply-new">\n  <a class="avatar avatar-xs2 on-navigate" href="/user/'+o(r(null!=(l=null!=t?t.from:t)?l.name:l,t))+'">\n    <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||u).call(c,null!=(l=null!=t?t.from:t)?l.avatar:l,30,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n\n  <div class="message-wrapper">\n    <h3 class="h6 from-name"><a class="username on-navigate" href="/user/'+o(r(null!=(l=null!=t?t.from:t)?l.name:l,t))+'">'+o(r(null!=(l=null!=t?t.from:t)?l.name:l,t))+'</a></h3>\n    <div class="body dark-grey">\n'+(null!=(l=n.if.call(c,null!=t?t.isOffensive:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(c,null!=t?t.body:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(c,null!=t?t.beautifyUrlMetadata:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'    </div>\n\n    <div class="reply-meta">\n      <time class="timestamp" datetime="'+o("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(c,{name:"createDate",hash:{},data:s}):i)+'">'+o((n.fromNow||t&&t.fromNow||u).call(c,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+'</time>\n      <span class="bullet">&bull;</span>\n      <span class="reply-wrapper"><a class="on-reply" role="button" href="#">'+o((n.trans||t&&t.trans||u).call(c,"Reply",{name:"trans",hash:{},data:s}))+'</a></span>\n    </div>\n  </div>\n\n    <div class="button-group dropdown">\n        <button class="btn btn-text btn-options dropdown-toggle" data-toggle="dropdown">'+(null!=(l=(n.iconify||t&&t.iconify||u).call(c,"fa-more",20,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n        <div class="triangle"></div>\n        <ul class="dropdown-menu align-right extra-right">\n          <li><a class="on-report" role="button" href="#">'+(null!=(l=(n.iconify||t&&t.iconify||u).call(c,"fa-flag",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||u).call(c,"Report Message",{name:"trans",hash:{},data:s}))+"</a></li>\n"+(null!=(l=n.if.call(c,null!=t?t.canDelete:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'        </ul>\n    </div>\n\n    <div class="message-report-modal-reply">\n    </div>\n\n</div>\n'},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(8));!function(e,t,n,s,l,i,r){i.add("StoryItem",i.views.Base.extend({className:"story-item clearfix",template:a.default,render:function(){var e=this.model.toJSON();return e.categories=[],t.each(this.model.get("categories"),function(t){var n=i.get("categories").get(t);n&&e.categories.push(n.get("name"))}),e.description&&(e.description=l.sanitizeHTML(e.description)),this.$el.html(this.template(e)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=i(n(274)),s=i(n(11)),l=i(n(12));function i(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,i,r,o,c){o.add("MessageReply",o.views.Base.extend({tagName:"article",className:"user-event",template:l.default,events:{"tap    .on-user":"onUser","click  .on-user":"stopEvent","tap    .on-user-mention":"onNavigate","click  .on-user-mention":"stopEvent","tap  footer button.on-reply":"onReply","click footer button.on-reply":"stopEvent","tap  footer li .on-report":"onReport","tap  footer li .on-delete":"onDelete"},initialize:function(){Handlebars.registerPartial("core.events.partials.user_event_footer",s.default)},render:function(){var e={},t=r.currentUser().get("username");e.user={name:this.model.get("from").name,avatar:this.model.get("from").avatar},e.message=this.model.toJSON(),e.message.body&&(e.message.body=r.sanitizeHTML(e.message.body));var n=0!==this.model.get("id")&&(this.model.get("ownername")===t||this.model.get("from").name===t||i.utils.currentUser().get("isSysAdmin")),s=0!==this.model.get("id"),l=!s,o={createDate:this.model.get("createDate"),data:e,canDelete:n,isValidMessage:s,repliesBtnText:i.utils.trans("Reply"),hideMenu:l};return o.leftButton=(0,a.default)(o),this.$el.html(this.template(o)),this.model.get("from").name===this.model.get("ownername")?this.$el.addClass("self"):this.$el.addClass("external"),this},onUser:function(e){var t=n(e.currentTarget);o.router.navigate("/user/"+t.data("username"),{trigger:!0})},onReply:function(e){this.stopEvent(e),this.trigger("message:mention",this.model.get("from").name)},onReport:function(e){this.stopEvent(e);var t=encodeURIComponent(this.model.get("body")),n=this.model.get("from").name;r.redirectToServer("/help/report?author="+n+"&comment="+t)},onDelete:function(t){this.stopEvent(t),e.confirm(i.utils.trans("Are you sure you want to delete this comment?"))&&this.model.destroy()},stopEvent:function(e){r.stopEvent(e)}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'  <button type="button" class="on-reply btn btn-sm btn-grey"\n    data-target="#replies-'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.id:l,t))+'"\n    data-id="'+r(i(null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.id:l,t))+'">\n      '+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.numReplies:l,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"\n  </button>\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return" "+e.escapeExpression((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Reply","%s Replies",null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.numReplies:l,{name:"ngettext",hash:{},data:s}),null!=(l=null!=(l=null!=t?t.data:t)?l.message:l)?l.numReplies:l,{name:"sprintf",hash:{},data:s}))+" "},4:function(e,t,n,a,s){return" "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Reply",{name:"trans",hash:{},data:s}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isValidMessage:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=l(n(14)),s=l(n(276));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("PinnedItemMessage",r.views.NewFeedItemMessage.extend({className:"feed-item-new panel pinned-item",template:s.default,initialize:function(e){Handlebars.registerPartial("core.feed_items.feed_item_message_options",a.default),Handlebars.registerPartial("core.feed_items.feed_message_reply",function(){return""});var t=this.model.get("username"),n=this.model.get("from").name;this.newMessageView=new r.views.NewMessageNew({to:t,parentId:this.model.get("id"),placeholder:l.utils.trans("Write a reply..."),canBroadcast:!1,autoMention:n}),this.listenTo(this.newMessageView,"message:new",this.expand),this.listenTo(this.newMessageView,"message:new",function(e){this.model.get("latestReplies").push(e.toJSON())})},render:function(){var e=this,n={pinnedItem:t.cloneDeep(this.model.toJSON())};if(n.pinnedItem.currentUser=l.utils.currentUser().toJSON(),n.canDelete=!1,this.model.get("username")){var a=l.utils.currentUser().get("username")===this.model.get("username"),s=l.utils.currentUser().get("username")===this.model.get("from").name,i=l.utils.currentUser().get("isSysAdmin");n.canDelete=a||s||i}n.pinnedItem.numReplies=n.pinnedItem.numReplies-n.pinnedItem.latestReplies.length,n.pinnedItem.showTarget=!1,n.pinnedItem.pinnedItem=this.pinnedItem,this.collection=new r.collections.NewMessageReplies(n.pinnedItem.latestReplies,{parentId:n.pinnedItem.id,messageOwnerName:this.model.get("username"),limit:10}),this.repliesView=new r.views.MessageRepliesList({collection:this.collection,forFeeds:!0});var o=this.model.getBeautifyUrlSettings(n.pinnedItem);return o&&!this.model.get("beautifyUrlMetadata")&&e.model.getMetadataForBeautifyUrl(o).then(function(t){n.pinnedItem.beautifyUrlMetadata=t,e.$el.html(e.template(n)),e.renderLatestReplies()}),this.$el.html(this.template(n)),this.renderLatestReplies(),this},onDeleteMessage:function(t){var n=this.model.toJSON(),a=this,s=new r.models.Message({id:n.id,body:n.body,createDate:n.createDate,from:{name:n.from.name,avatar:n.from.avatar,isActive:!0},isReply:!1,parentId:null,ownername:this.model.get("ownername")||this.model.get("username")||l.utils.currentUser().get("username")});e.confirm("Are you sure you want to delete this message?")&&Promise.resolve(s.destroy()).then(function(){a.trigger("pinnedItem:remove",a.model)})}})),r.mixin(r.views.PinnedItemMessage,"ReportManagement","ReportConduct")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <small class="x-small offensive">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-warning",13,"wp-error-1",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"this message may be offensive",{name:"trans",hash:{},data:s}))+"</small>\n"},3:function(e,t,n,a,s){var l;return"      <pre>"+(null!=(l=(n.linkify||t&&t.linkify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.pinnedItem:t)?l.body:l,{name:"linkify",hash:{},data:s}))?l:"")+"</pre>\n"},5:function(e,t,n,a,s){var l;return null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=t?t.pinnedItem:t)?l.beautifyUrlMetadata:l,t),{name:"pinnedItem.beautifyUrlMetadata",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:""},6:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.shared.beautify_url"],t,{name:"core.shared.beautify_url",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:""},8:function(e,t,n,a,s){return" hidden "},10:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.escapeExpression,c=e.lambda;return'  <div id="'+(null!=(l=n.if.call(r,null!=t?t.pinnedItem:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:"")+"replies-"+o("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:n.helperMissing)?i.call(r,{name:"id",hash:{},data:s}):i)+"\"\n      class='replies-list collapse'\n      data-id=\""+o(c(null!=(l=null!=t?t.pinnedItem:t)?l.id:l,t))+'"\n      data-profile-owner="'+o(c(null!=(l=null!=t?t.pinnedItem:t)?l.username:l,t))+'"\n      data-message-owner="'+o(c(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'">\n  </div>\n'},11:function(e,t,n,a,s){return"pinned-"},13:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.feed_items.feed_message_reply"],t,{name:"core.feed_items.feed_message_reply",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=e.lambda,o=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=n.helperMissing;return'<div class="pinned-icon" data-toggle="tooltip" data-placement="top" title="last message from '+o(r(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'">'+(null!=(l=(n.iconify||t&&t.iconify||u).call(c,"fa-pin",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</div>\n\n<header class="panel-heading message-heading">\n    <a class="avatar avatar-sm3 on-navigate" href="/user/'+o(r(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'">\n      <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||u).call(c,null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.avatar:l,42,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n\n    <h3 class="h6 from-name">'+o(r(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'</h3>\n\n    <time class="timestamp" datetime="'+o(r(null!=(l=null!=t?t.pinnedItem:t)?l.createDate:l,t))+'">'+o((n.fromNow||t&&t.fromNow||u).call(c,null!=(l=null!=t?t.pinnedItem:t)?l.createDate:l,{name:"fromNow",hash:{},data:s}))+"</time>\n"+(null!=(l=e.invokePartial(a["core.feed_items.feed_item_message_options"],t,{name:"core.feed_items.feed_item_message_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</header>\n\n<div class="panel-body message dark-grey new-message">\n'+(null!=(l=n.if.call(c,null!=(l=null!=t?t.pinnedItem:t)?l.isOffensive:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(c,null!=(l=null!=t?t.pinnedItem:t)?l.body:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n\n"+(null!=(l=n.if.call(c,null!=(l=null!=t?t.pinnedItem:t)?l.beautifyUrlMetadata:l,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'\n<button class="btn btn-white btn-block btn-replies on-reply '+(null!=(l=n.if.call(c,null!=(l=null!=t?t.pinnedItem:t)?l.numReplies:l,{name:"if",hash:{},fn:e.noop,inverse:e.program(8,s,0),data:s}))?l:"")+'"\n  type="button" data-toggle="collapse" data-target="#replies-'+o("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:u)?i.call(c,{name:"id",hash:{},data:s}):i)+'">\n   '+(null!=(l=(n.iconify||t&&t.iconify||u).call(c,"fa-comment",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+(null!=(l=(n.sprintf||t&&t.sprintf||u).call(c,(n.ngettext||t&&t.ngettext||u).call(c,"View %s more reply","View %s more replies",null!=(l=null!=t?t.pinnedItem:t)?l.numReplies:l,{name:"ngettext",hash:{},data:s}),null!=(l=null!=t?t.pinnedItem:t)?l.numReplies:l,{name:"sprintf",hash:{},data:s}))?l:"")+"\n</button>\n\n"+(null!=(l=n.if.call(c,null!=(l=null!=t?t.pinnedItem:t)?l.isReply:l,{name:"if",hash:{},fn:e.noop,inverse:e.program(10,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.each.call(c,null!=(l=null!=t?t.pinnedItem:t)?l.latestReplies:l,{name:"each",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"\n<footer class=\"panel-footer new-message\">\n  <a href class='btn btn-text btn-reply-link new-reply'>"+(null!=(l=(n.trans||t&&t.trans||u).call(c,"Reply",{name:"trans",hash:{},data:s}))?l:"")+"</a>\n</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(278)),s=l(n(279));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("MessageRepliesList",r.views.IncrementalList.extend({className:"message-replies",template:null,itemView:r.views.MessageReply,initialize:function(e){(e=e||{}).forFeeds?this.template=s.default:this.template=a.default,this.forFeeds=e.forFeeds||!1},renderItem:function(e){var t=this;this.forFeeds&&(this.itemView=r.views.FeedMessageReply),r.views.IncrementalList.prototype.renderItem.apply(this,arguments),this.listenTo(this.viewPointers[e.cid],"message:mention",function(e){t.trigger("message:mention",e)})},getTemplateData:function(){return{hasReplies:0!==this.collection.models.length}}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'    <div class="show-more hidden">\n        <button class="btn btn-sm btn-default btn-block on-showmore">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Show More",{name:"trans",hash:{},data:s}))+" </button>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasReplies:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'<div class="collection"></div>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){return'<ul class="list-group collection new-feed-messages"></ul>\n'},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverModuleListItem",a.models.Base.extend({defaults:{id:null,name:null,numStories:null,cover:null}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverModuleStoryItem",a.models.StoryModel.extend({defaults:{id:null,title:null,cover:null,voteCount:null,readCount:null,url:null}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverModuleUserItem",a.models.Base.extend({defaults:{avatar:null,description:null,name:null,numFollowers:null,numLists:null,numStoriesPublished:null,username:null}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverModuleStories",a.collections.BaseCollection.extend({model:a.models.DiscoverModuleStoryItem,arrayKey:"stories"}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverModuleLists",a.collections.BaseCollection.extend({model:a.models.DiscoverModuleListItem,arrayKey:"lists"}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("DiscoverModuleUsers",a.collections.BaseCollection.extend({model:a.models.DiscoverModuleUserItem}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(287));!function(e,t,n,s){s.add("DiscoverModuleLists",s.views.Base.extend({className:"discover-module-lists on-discover-module-item",template:a.default,render:function(){var e=this.model?this.model.toJSON():{empty:!0};return e.type="reading_lists",e.isDesktop=s.get("device").isDesktop(),this.$el.html(this.template(e)),this}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<a class="cover cover-md empty-cover"><div class="fixed-ratio fixed-ratio-cover"></div></a>\n'},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c="function",u=e.escapeExpression;return'\n<a class="cover cover-home on-navigate" data-target="'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+u(typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)===c?i.call(r,{name:"type",hash:{},data:s}):i)+'" href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n  <div class="fixed-ratio fixed-ratio-lists">\n'+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+'  </div>\n</a>\n\n<div class="content" data-target="'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+u(typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)===c?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n  <a class="title meta on-navigate" href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'">'+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.program(10,s,0),data:s}))?l:"")+'</a>\n  <div class="num-stories meta">'+u((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStories:t,{name:"sprintf",hash:{},data:s}))+'</div>\n  <div class="tags meta">\n    '+(null!=(l=n.each.call(r,null!=t?t.tags:t,{name:"each",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+"\n  </div>\n</div>\n\n"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.background:t,142,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.name:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.background:t,92,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.name:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},8:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name:t,35,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},10:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name:t,28,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},12:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return" "+(null!=(l=(n.linkify||t&&t.linkify||r).call(i,(n.sprintf||t&&t.sprintf||r).call(i,"#%s",t,{name:"sprintf",hash:{},data:s}),{name:"linkify",hash:{},data:s}))?l:"")+" "},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.empty:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(289));!function(e,t,n,s,l,i,r){i.add("ContestSwimlane",i.views.StoryItem.extend({className:"contest-swimlane discover-module-stories-large on-discover-module-item",template:a.default,render:function(){var e=this.model?this.model.toJSON():{empty:!0};return e.contest=this.options.contest||{},e.type=this.options.type||"storiesByPromotedUser",e.isDesktop=i.get("device").isDesktop(),e.isMobile=i.get("device").is.mobile,e.descCharLimit=e.isDesktop?170:130,e.descCharLimit=this.options.descCharLimit||e.descCharLimit,e.titleCharLimit=e.isDesktop?35:24,e.titleCharLimit=this.options.titleCharLimit||e.titleCharLimit,e.contestCopyLimit=e.isDesktop?100:55,this.$el.html(this.template(e)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,142,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,92,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},5:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+c("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n            <a class="title meta on-contest-reading" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n                '+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.title:t,null!=t?t.titleCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+'\n            </a>\n            <div class="description">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,null!=t?t.descCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</div>\n"+(null!=(l=n.if.call(r,null!=(l=null!=t?t.contest:t)?l.ctaLabel:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"        </div>\n"},6:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'            <div class="contest-cta-container">\n                <a class="contest-cta on-contest-reading" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=(l=null!=t?t.contest:t)?l.ctaLabel:l,15,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</a>\n            </div>\n"},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="contest-copy challenge">\n        '+(null!=(l=(n.connectImage||t&&t.connectImage||r).call(i,"contest-discovery/pen.svg","Pen",{name:"connectImage",hash:{width:"24",height:"18",klass:"icon"},data:s}))?l:"")+'\n        <p><span class="bold">Challenge: </span>'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.contest:t)?l.challenge:l,null!=t?t.contestCopyLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</p>\n    </div>\n"},10:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="contest-copy prizes">\n        '+(null!=(l=(n.connectImage||t&&t.connectImage||r).call(i,"contest-discovery/trophy.svg","Trophy",{name:"connectImage",hash:{width:"24",height:"18",klass:"icon"},data:s}))?l:"")+'\n        <p><span class="bold">Prizes: </span>'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.contest:t)?l.prize:l,null!=t?t.contestCopyLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</p>\n    </div>\n"},12:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.contest:t)?l.ctaLabel:l,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:""},13:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <div class="contest-cta-container-mw">\n        <a class="contest-cta on-contest-reading" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=(l=null!=t?t.contest:t)?l.ctaLabel:l,15,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</a>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="contest-left">\n    <a class="cover cover-home on-contest-reading send-cover-event" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n        <div class="fixed-ratio fixed-ratio-cover">\n'+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"        </div>\n    </a>\n"+(null!=(l=n.unless.call(r,null!=t?t.isMobile:t,{name:"unless",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'</div>\n<div class="contest-right">\n'+(null!=(l=n.if.call(r,null!=(l=null!=t?t.contest:t)?l.challenge:l,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'    <div class="contest-copy deadline">\n        '+(null!=(l=(n.connectImage||t&&t.connectImage||o).call(r,"contest-discovery/calendar.svg","Calendar",{name:"connectImage",hash:{width:"24",height:"18",klass:"icon"},data:s}))?l:"")+'\n        <p><span class="bold">Deadline: </span>'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=(l=null!=t?t.contest:t)?l.endDate:l,null!=t?t.contestCopyLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</p>\n    </div>\n"+(null!=(l=n.if.call(r,null!=(l=null!=t?t.contest:t)?l.prize:l,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"+(null!=(l=n.if.call(r,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){"use strict";var a=l(n(291)),s=l(n(292));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("DiscoverModuleStoriesLarge",r.views.StoryItem.extend({className:"discover-module-stories-large on-discover-module-item",template:s.default,initialize:function(){Handlebars.registerPartial("core.tag_metadata",a.default)},render:function(){var e=this.model?this.model.toJSON():{empty:!0};return e.isRecentlyRead=this.options.isRecentlyRead,e.type="stories",e.isDesktop=r.get("device").isDesktop(),e.isProfileWorksView=this.options.isProfileWorksView,e.user||(e.user=this.options.user),e.descCharLimit=e.isDesktop?170:130,e.descCharLimit=this.options.descCharLimit||e.descCharLimit,e.titleCharLimit=e.isDesktop?35:24,e.titleCharLimit=this.options.titleCharLimit||e.titleCharLimit,e.tagMeta=t.extend(this.formatTags(e.tags,r.get("device")&&r.get("device").is.mobile?2:3),{storyId:e.id}),e.showTagRankings=e.tagRankings&&e.tagRankings.length&&e.isProfileWorksView,e.isPaywalled&&(e.descCharLimit-=40,e.tagMeta&&(e.tagMeta.numNotShown=0)),e.testGroups=l.testGroups,this.$el.html(this.template(e)),this},formatTags:function(e,n){if(e=e||null,n=n||3,t.isEmpty(e))return null;e=t.clone(e);var a={tags:[],numNotShown:Math.max(e.length-n,0)},s=null;if(e.length<=n)t.each(e,function(e){a.tags.push({name:e})});else for(;a.tags.length<n;)s=e.splice(Math.floor(Math.random()*e.length),1)[0],a.tags.push({name:s});return a}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <li>\n          <a class="tag-item on-navigate" href="/stories/'+o((n.urlEncodeWithSpace||t&&t.urlEncodeWithSpace||r).call(i,null!=t?t.name:t,{name:"urlEncodeWithSpace",hash:{},data:s}))+'">'+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+"</a>\n      </li>\n"},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <span class="num-not-shown on-story-preview" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">'+c((n.trans||t&&t.trans||o).call(r,"+%s more",null!=(l=null!=t?t.tagMeta:t)?l.numNotShown:l,{name:"trans",hash:{},data:s}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<div class="tag-meta clearfix">\n  <ul class="tag-items">\n'+(null!=(l=n.each.call(i,null!=(l=null!=t?t.tagMeta:t)?l.tags:l,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"  </ul>\n\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.tagMeta:t)?l.numNotShown:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<a class="cover cover-home empty-cover-large">\n    <div class="fixed-ratio fixed-ratio-cover">\n    </div>\n</a>\n'},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<a class="send-cover-event'+(null!=(l=n.if.call(r,null!=t?t.isRecentlyRead:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+' cover cover-home" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n    <div class="fixed-ratio fixed-ratio-cover">\n'+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.program(10,s,0),data:s}))?l:"")+"    </div>\n</a>\n"+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.program(43,s,0),data:s}))?l:"")},4:function(e,t,n,a,s){return" on-continue-reading"},6:function(e,t,n,a,s){return" on-story-preview"},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,142,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},10:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,92,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n'},12:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+c("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n'+(null!=(l=n.if.call(r,null!=t?t.isPaywalled:t,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+'\n        <a class="title meta '+(null!=(l=n.if.call(r,null!=t?t.isRecentlyRead:t,{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.program(17,s,0),data:s}))?l:"")+'" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n            '+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.title:t,null!=t?t.titleCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"\n        </a>\n\n"+(null!=(l=n.unless.call(r,null!=t?t.isProfileWorksView:t,{name:"unless",hash:{},fn:e.program(19,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.promoted:t,{name:"if",hash:{},fn:e.program(24,s,0),inverse:e.program(26,s,0),data:s}))?l:"")+'\n        <div class="description">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,null!=t?t.descCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.showTagRankings:t,{name:"if",hash:{},fn:e.program(33,s,0),inverse:e.program(35,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.isProfileWorksView:t,{name:"if",hash:{},fn:e.program(37,s,0),inverse:e.noop,data:s}))?l:"")+"    </div>\n\n"},13:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'            <div class="supported-marker">\n                '+r((n.connectImage||t&&t.connectImage||i).call(l,"paid-content/supported-stories-badge.svg","Paid Stories Badge",{name:"connectImage",hash:{width:"18",height:"18"},data:s}))+"\n                "+r((n.trans||t&&t.trans||i).call(l,"Paid Story",{name:"trans",hash:{},data:s}))+"\n            </div>\n"},15:function(e,t,n,a,s){return"on-continue-reading"},17:function(e,t,n,a,s){return"on-story-preview"},19:function(e,t,n,a,s){var l;return'        <a class="username meta on-navigate" href="/user/'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+'">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.user:t)?l.fullname:l,{name:"if",hash:{},fn:e.program(20,s,0),inverse:e.program(22,s,0),data:s}))?l:"")+"        </a>\n"},20:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.trans||t&&t.trans||r).call(i,"by %s",(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.user:t)?l.fullname:l,30,!1,{name:"simpleShorten",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+"\n"},22:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"by %s",(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.user:t)?l.name:l,30,!1,{name:"simpleShorten",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n"},24:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'            <span class="meta promotion-description-story-reading">\n                '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-badge-promoted",13,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+"\n                "+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Promoted by %s",(n.sprintf||t&&t.sprintf||r).call(i,'<div class="lightbold">%s</div>',null!=t?t.sponsorName:t,{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+"\n            </span>\n"},26:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <div class="meta social-meta">\n                <span class="read-count"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||r).call(i,null!=t?t.readCount:t,999,{name:"greaterThan",hash:{},fn:e.program(27,s,0),inverse:e.noop,data:s}))?l:"")+">\n                    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",15,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+'\n                </span>\n\n                <span class="vote-count"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||r).call(i,null!=t?t.voteCount:t,999,{name:"greaterThan",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:"")+">\n                    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",15,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+'\n                </span>\n\n                <span class="part-count"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||r).call(i,null!=t?t.numParts:t,999,{name:"greaterThan",hash:{},fn:e.program(31,s,0),inverse:e.noop,data:s}))?l:"")+">\n                    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-list",15,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.numParts:t,{name:"count",hash:{},data:s}))+"\n                </span>\n            </div>\n"},27:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                      data-toggle="tooltip" data-placement="top" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Read","%s Reads",(n.format||t&&t.format||i).call(l,null!=t?t.readCount:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.readCount:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n                    '},29:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                      data-toggle="tooltip" data-placement="top" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Vote","%s Votes",(n.format||t&&t.format||i).call(l,null!=t?t.voteCount:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.voteCount:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n                    '},31:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                      data-toggle="tooltip" data-placement="top" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Part","%s Parts",(n.format||t&&t.format||i).call(l,null!=t?t.numParts:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.numParts:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n                    '},33:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'            <div class="tag-ranking">\n              '+c((n.connectImage||t&&t.connectImage||o).call(r,"/shared/ranking-medal-grey.png","ranking",{name:"connectImage",hash:{width:"22",height:"27",klass:"tag-ranking-medal"},data:s}))+"\n              <span>"+(null!=(l=(n.trans||t&&t.trans||o).call(r,"#%1$s in %2$s",(n.sprintf||t&&t.sprintf||o).call(r,"<b>%s</b>",null!=(l=null!=(l=null!=t?t.tagRankings:t)?l[0]:l)?l.rank:l,{name:"sprintf",hash:{},data:s}),(n.sprintf||t&&t.sprintf||o).call(r,"<b>%s</b>",(n.sanitize||t&&t.sanitize||o).call(r,null!=(l=null!=(l=null!=t?t.tagRankings:t)?l[0]:l)?l.name:l,{name:"sanitize",hash:{},data:s}),{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+'</span>\n              <a href="'+c("function"==typeof(i=null!=(i=n.url||(null!=t?t.url:t))?i:o)?i.call(r,{name:"url",hash:{},data:s}):i)+'/rankings" class="on-ranking-navigate">'+c((n.trans||t&&t.trans||o).call(r,"See all rankings",{name:"trans",hash:{},data:s}))+"</a>\n            </div>\n"},35:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.tag_metadata"],t,{name:"core.tag_metadata",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:""},37:function(e,t,n,a,s){var l;return"        "+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.user:t)?l.name:l,{name:"isCurrentUser",hash:{},fn:e.program(38,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},38:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.firstPartId:t,{name:"if",hash:{},fn:e.program(39,s,0),inverse:e.program(41,s,0),data:s}))?l:""},39:function(e,t,n,a,s){return'\n        <span class="work-state">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Published",{name:"trans",hash:{},data:s}))+"</span>\n"},41:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'        <span class="work-state draft">'+r((n.trans||t&&t.trans||i).call(l,"Draft",{name:"trans",hash:{},data:s}))+' <span class="text">('+r((n.trans||t&&t.trans||i).call(l,"only visible to you",{name:"trans",hash:{},data:s}))+")</span></span>\n        "},43:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+c("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n'+(null!=(l=n.if.call(r,null!=t?t.isPaywalled:t,{name:"if",hash:{},fn:e.program(44,s,0),inverse:e.noop,data:s}))?l:"")+'\n        <a class="title meta '+(null!=(l=n.if.call(r,null!=t?t.isRecentlyRead:t,{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.program(17,s,0),data:s}))?l:"")+'" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.title:t,null!=t?t.titleCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</a>\n\n"+(null!=(l=n.unless.call(r,null!=t?t.isProfileWorksView:t,{name:"unless",hash:{},fn:e.program(46,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.promoted:t,{name:"if",hash:{},fn:e.program(49,s,0),inverse:e.program(51,s,0),data:s}))?l:"")+'\n        <div class="description">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,null!=t?t.descCharLimit:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.showTagRankings:t,{name:"if",hash:{},fn:e.program(33,s,0),inverse:e.program(35,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.isProfileWorksView:t,{name:"if",hash:{},fn:e.program(37,s,0),inverse:e.noop,data:s}))?l:"")+"    </div>\n"},44:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'            <div class="supported-marker meta">\n                '+r((n.connectImage||t&&t.connectImage||i).call(l,"paid-content/supported-stories-badge.svg","Paid Stories Badge",{name:"connectImage",hash:{},data:s}))+"\n                "+r((n.trans||t&&t.trans||i).call(l,"Paid Story",{name:"trans",hash:{},data:s}))+"\n            </div>\n"},46:function(e,t,n,a,s){var l;return'        <a class="username meta on-navigate" href="/user/'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+'">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.user:t)?l.fullname:l,{name:"if",hash:{},fn:e.program(47,s,0),inverse:e.program(22,s,0),data:s}))?l:"")+"        </a>\n"},47:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"by %s",(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=(l=null!=t?t.user:t)?l.fullname:l,30,!1,{name:"simpleShorten",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n"},49:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'            <span class="meta promotion-description-story-reading">\n                '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-badge-promoted",11,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+"\n                "+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Promoted by %s",(n.sprintf||t&&t.sprintf||r).call(i,'<div class="lightbold">%s</div>',null!=t?t.sponsorName:t,{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+"\n            </span>\n"},51:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <div class="meta social-meta">\n                <span class="read-count"> '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+' </span>\n                <span class="vote-count"> '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+' </span>\n                <span class="part-count"> '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-list",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.numParts:t,{name:"count",hash:{},data:s}))+" </span>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.empty:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:""},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(15));!function(e,t,n,s,l,i,r){i.add("DiscoverModuleStoriesSmall",i.views.StoryItem.extend({className:"discover-module-stories-small on-discover-module-item",template:a.default,render:function(){var e=this.model?this.model.toJSON():{empty:!0};e.isRecentlyRead=this.options.isRecentlyRead,e.isDesktop=this.options.isDesktop;var t=this.model?this.model.get("category"):null;return e.type="stories",e.titleCharLimit=e.isDesktop?35:25,e.titleCharLimit=this.options.titleCharLimit||e.titleCharLimit,t&&(e.category=i.get("categories").get(t).toJSON()),this.$el.html(this.template(e)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=l(n(295)),s=l(n(296));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("DiscoverModuleUsers",r.views.Base.extend({className:"on-discover-module-item",render:function(){var e=this.model&&this.options.numUsersInCollection>0?this.model.toJSON():{empty:!0},t=r.get("device").isDesktop(),n=!1;return(t&&this.options.numUsersInCollection<6||!t&&this.options.numUsersInCollection<3)&&(n=!0),n?(this.template=s.default,this.$el.addClass("discover-module-users-large"),e.nameMaxLength=t?35:25,e.descMaxLength=t?170:110):(this.template=a.default,this.$el.addClass("discover-module-users-small"),e.nameMaxLength=t?35:28),this.$el.html(this.template(e)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<div class="cover cover-md empty-cover"></div>\n'},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'\n<a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="avatar on-navigate">\n  <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,140,{name:"resizeAvatar",hash:{},data:s}))+'">\n</a>\n\n<div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" data-type="users">\n  <a class="title meta on-navigate" href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n    '+(null!=(l=n.if.call(r,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+'\n  </a>\n\n  <div class="user-stats meta">\n    <span>'+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Follower","%s Followers",null!=t?t.numFollowers:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||o).call(r,null!=t?t.numFollowers:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'</span>\n  </div>\n</div>\n\n<button class="btn btn-white btn-follow btn-fan on-follow" data-target="'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n  '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-follow",15,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n  <span class="follow-text">'+c((n.trans||t&&t.trans||o).call(r,"Follow",{name:"trans",hash:{},data:s}))+"</span>\n</button>\n\n"},4:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name:t,null!=t?t.nameMaxLength:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},6:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,null!=t?t.nameMaxLength:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.empty:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<div class="cover cover-md empty-cover"></div>\n'},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'\n<div class="avatar-container">\n  <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="avatar on-navigate">\n    <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,140,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </a>\n\n  <button class="btn btn-white btn-follow btn-fan on-follow" data-target="'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n    '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-follow",15,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n    <span class="follow-text">'+c((n.trans||t&&t.trans||o).call(r,"Follow",{name:"trans",hash:{},data:s}))+'</span>\n  </button>\n</div>\n\n<div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" data-type="users">\n  <a class="title meta on-navigate" href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n    '+(null!=(l=n.if.call(r,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+'\n  </a>\n\n  <div class="user-stats meta">\n    <span>'+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Work","%s Works",null!=t?t.numStoriesPublished:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStoriesPublished:t,{name:"sprintf",hash:{},data:s}))+"</span>\n    <span>"+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Reading List","%s Reading Lists",null!=t?t.numLists:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numLists:t,{name:"sprintf",hash:{},data:s}))+"</span>\n    <span>"+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Follower","%s Followers",null!=t?t.numFollowers:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||o).call(r,null!=t?t.numFollowers:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'</span>\n  </div>\n\n  <div class="description">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,null!=t?t.descMaxLength:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</div>\n</div>\n\n"},4:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name:t,null!=t?t.nameMaxLength:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},6:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,null!=t?t.nameMaxLength:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.empty:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=l(n(298)),s=l(n(299));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l){l.add("DiscoverModule",l.views.IncrementalList.extend({className:"discover-module",template:a.default,containerClass:".collection",events:_.extend({"tap .module-header":"onModuleHeader","click .module-header":"stopEvent","tap .on-discover-module-item":"onModuleItem","click .on-discover-module-item":"stopEvent","tap a.module-title":"onModuleTitle","click a.module-title":"stopEvent","tap .on-avatar":"onAvatar","click .on-avatar":"stopEvent","tap .on-story-preview":"onStoryPreview","click .on-story-preview":"stopEvent","tap .on-continue-reading":"onContinueReading","click .on-continue-reading":"stopEvent","tap .send-cover-event":"sendCoverClickTrackingEvent","click .send-cover-event":"stopEvent","tap .on-contest-reading":"onContestReading","click .on-contest-reading":"stopEvent"},l.views.IncrementalList.prototype.events),constructor:function(t){var n=t.model;if(this.pageNum=t.pageNum,this.experience=t.experience||"home",this.trackedTypes=["storiesByPromotedUser","listPromoted","promotedStoriesRecommended"],"storiesByPromotedUser"===n.get("type")&&n.get("data").contest)this.itemView=l.views.ContestSwimlane,this.collection=new l.collections.DiscoverModuleStories(n.get("data").items.stories),this.template=s.default;else if(n.get("data").items.stories)this.itemView=l.views.DiscoverModuleStoriesLarge,this.collection=new l.collections.DiscoverModuleStories(n.get("data").items.stories);else if(n.get("data").items.lists){this.itemView=l.views.DiscoverModuleLists;for(var a=_.clone(n.get("data").items.lists),i=n.get("data").user,r=0;r<a.length;r++)void 0==a[r].user&&(a[r].user=_.clone(i));this.collection=new l.collections.DiscoverModuleLists(a)}else n.get("data").items.users&&(this.itemView=l.views.DiscoverModuleUsers,this.collection=new l.collections.DiscoverModuleUsers(n.get("data").items.users));l.views.IncrementalList.prototype.constructor.apply(this,arguments),this.listenTo(l,"app:user:follow",this.onUpdateFollow),this.listenTo(l,"app:user:unfollow",this.onUpdateUnfollow),-1!=_.indexOf(this.trackedTypes,this.model.get("type"))&&(this.trackViewsWrapper=_.throttle(this.trackViews,200),this.sentViewTracking=!1,this.viewTrackingUrls=_.flatten([this.model.get("data").tracking.impressionUrl]),this.clickTrackingUrls=_.flatten([this.model.get("data").tracking.clickUrl]),this.model.get("data").tracking.thirdParty&&(this.viewTrackingUrls=this.viewTrackingUrls.concat(this.model.get("data").tracking.thirdParty.impressionUrls),this.clickTrackingUrls=this.clickTrackingUrls.concat(this.model.get("data").tracking.thirdParty.clickUrls)),_.bindAll(this,"trackViewsWrapper"),$(e).on("scroll",this.trackViewsWrapper))},remove:function(){$(e).off("scroll",this.trackViewsWrapper),l.views.IncrementalList.prototype.remove.apply(this,arguments)},renderCollection:function(e){var t=this.getContainer();if(this.removeAll(),e=e||{},_.extend(e,{isDesktop:l.get("device").isDesktop()}),"storiesRecentlyRead"===this.model.get("type")?_.extend(e,{isRecentlyRead:!0}):this.model.get("data").items.users?_.extend(e,{numUsersInCollection:this.model.get("data").items.users.length}):this.model.get("data").contest&&_.extend(e,{contest:this.model.get("data").contest,type:this.model.get("type")}),this.collection.each(function(n,a){if(this.renderItem(n,t,a,e),"storiesByPromotedUser"===this.model.get("type"))return t.find(".on-discover-module-item").after(t.find(".promoted-blurb")),t.addClass("promoted-story"),!1},this),-1!=_.indexOf(this.trackedTypes,this.model.get("type"))){var n=this;_.defer(function(){n.trackViewsWrapper()})}return this},getTemplateData:function(){var e,a,s,i,r,o,c,u,d,h,p,m=new n.Device;switch(this.model.get("type")){case"listCurated":e=this.model.get("data").list.name,a=t.utils.trans("A reading list by %s, handpicked for you",this.model.get("data").list.user.fullname||this.model.get("data").list.user.name),o="/list/"+this.model.get("data").list.id,c=this.model.get("data").list.id;break;case"storiesRecentlyRead":e=t.utils.trans("Continue Reading"),a=t.utils.trans("Find more in your library"),o="/library";break;case"storiesRecommended":e=t.utils.trans("Recommendations"),a=t.utils.trans("A fresh set of stories, just for you");break;case"storiesRecommendedExplore":e=t.utils.trans("Explore something different"),a=t.utils.trans("The more you explore, the more personalized your stories get");break;case"storiesRecommendedInfluential":e=t.utils.trans("Community Showcase"),a=t.utils.trans("Sample what Wattpad has to offer");break;case"storiesSupported":e=t.utils.trans("Paid Stories"),a=t.utils.trans("Become a supporter and help your favorite writers earn money");break;case"storiesRecommendedRNN":e=t.utils.trans("What to read next"),a=t.utils.trans("Stories based on your recent reads");break;case"storiesReadingRecommended":e=t.utils.trans("Recommendations"),h=!0;break;case"promotedStoriesRecommended":e=t.utils.trans("Promoted stories"),h=!0;break;case"storiesRecentlyUpdated":e=t.utils.trans("Recently Updated"),a=t.utils.trans("Stories from your library and connections");break;case"storiesTop":e=t.utils.trans("Most Shared Stories"),a=t.utils.trans("See what everyone's talking about");break;case"storiesByFollowedHub":e=t.utils.sprintf(t.utils.ngettext("Story by %s","Stories by %s",this.model.get("data").items.stories&&this.model.get("data").items.stories.length||0),[this.model.get("data").user.fullname||this.model.get("data").user.name]),a=t.utils.trans("Stories written by a profile you follow"),o="/user/"+this.model.get("data").user.name,c=this.model.get("data").user.name;break;case"tagTop":e=t.utils.trans("Hottest stories tagged %s","#"+this.model.get("data").tag.name),a=t.utils.trans("A tag that might interest you"),o="/stories/"+this.model.get("data").tag.name,c=this.model.get("data").tag.name;break;case"tagRecommended":e=t.utils.trans("%s stories","#"+this.model.get("data").tag.name),a=t.utils.trans("A tag recommended just for you"),o="/stories/"+this.model.get("data").tag.name,c=this.model.get("data").tag.name;break;case"storiesByRecentVote":e=t.utils.trans("Because you voted on %s",this.model.get("data").story.title),a=t.utils.trans("We think you'll like these stories too"),o=this.model.get("data").story.url,c=this.model.get("data").story.url;break;case"hubTop":e=t.utils.trans("Reading lists by %s",this.model.get("data").user.fullname||this.model.get("data").user.name),a=t.utils.trans("Collections from a top profile"),o="/user/"+this.model.get("data").user.name,c=this.model.get("data").user.name;break;case"listsByFollowedHub":e=t.utils.trans("Reading lists by %s",this.model.get("data").user.fullname||this.model.get("data").user.name),a=t.utils.trans("Handpicked by a profile you follow"),o="/user/"+this.model.get("data").user.name,c=this.model.get("data").user.name;break;case"storiesRecentlyVotedByFollowedHubs":e=t.utils.trans("%s voted on",this.model.get("data").user.fullname||this.model.get("data").user.name),a=t.utils.trans("Stories you might also like"),o="/user/"+this.model.get("data").user.name,c=this.model.get("data").user.name;break;case"hubsFollowedByFollowedHub":e=t.utils.trans("%s follows",this.model.get("data").user.fullname||this.model.get("data").user.name),a=t.utils.trans("Discover new profiles"),o="/user/"+this.model.get("data").user.name,c=this.model.get("data").user.name;break;case"listTrending":e=this.model.get("data").list.name,a=t.utils.trans("A trending reading list"),o="/list/"+this.model.get("data").list.id,c=this.model.get("data").list.id;break;case"hubTrending":e=t.utils.trans("Reading lists by %s",this.model.get("data").user.fullname||this.model.get("data").user.name),a=t.utils.trans("Selected by a trending profile"),o="/user/"+this.model.get("data").user.name,c=this.model.get("data").user.name;break;case"tagTrending":e="#"+this.model.get("data").tag.name,a=t.utils.trans("A trending tag"),o="/stories/"+this.model.get("data").tag.name,c=this.model.get("data").tag.name;break;case"storiesBySearchResults":e=t.utils.trans("Based on recent searches"),a=t.utils.trans("Stories you might also like"),o="/stories/"+this.model.get("data").items.tags[0],c=this.model.get("data").items.tags[0];break;case"emergentStories":e=t.utils.trans("Emerging Stories"),a=t.utils.trans("Stories we think you'll love");break;case"storiesByPromotedUser":this.model.get("data").contest?(e=t.utils.trans("Featured Contest"),p=this.model.get("data").items.stories[0].id):e=t.utils.sprintf(t.utils.ngettext("Story by %s","Stories by %s",1),[this.model.get("data").user.fullname||this.model.get("data").user.name]),a=t.utils.ngettext("Story written by a fellow Wattpad writer","Stories written by a fellow Wattpad writer",1),u=this.model.get("data").sponsor?this.model.get("data").sponsor.name:this.model.get("data").user.fullname||this.model.get("data").user.name,s=!0,r=!0,o="/user/"+this.model.get("data").user.name,c=this.model.get("data").user.name;break;case"listPromoted":e=this.model.get("data").list.name,a=t.utils.trans("A reading list, handpicked for you"),this.model.get("data").sponsor?(u=this.model.get("data").sponsor.name,this.model.get("data").sponsor.avatar&&(d=this.model.get("data").sponsor.avatar)):u=this.model.get("data").list.user.fullname||this.model.get("data").list.user.name,o="/list/"+this.model.get("data").list.id,c=this.model.get("data").list.id,s=!0,i=!0}var f={title:e,subtitle:a,promoted:s,promotedReadingList:i,promotedByUser:r,fromStoryReading:h,sponsorName:u,sponsorAvatar:d,moduleUser:this.model.get("data").user||this.model.get("data").list&&this.model.get("data").list.user,list:this.model.get("data").list,moduleLink:o,moduleTarget:c,type:this.model.get("type"),isDesktop:m.is.desktop,testGroups:t.testGroups,languageId:parseInt(l.get("language"),10),contestStoryId:p};return this.model.get("data").items.lists?f.isLists=!0:this.model.get("data").items.users&&(f.isUsers=!0),(this.model.get("data").items.stories||this.model.get("data").items.lists||this.model.get("data").items.users).length<=2&&(f.turnOffLooping=!0),f.isHome="home"===this.experience,f},onAvatar:function(t){var n=this.model.get("type");e.te.push("event",this.experience,"module","avatar","click",{module_type:n,username:t.currentTarget.getAttribute("data-target")}),-1!=_.indexOf(this.trackedTypes,n)&&e.te.push("event",this.experience,"promoted_module","avatar","click",{module_type:n,username:t.currentTarget.getAttribute("data-target")})},onStoryPreview:function(a){var s=this,l=$(a.currentTarget).data("story-id"),i=this.collection.get(l);n.shouldSeePaidOnboarding(i.get("isPaywalled"))?e.app.components.showPaidOnboardingModal({premium:t.utils.currentUser().get("premium"),onOnboardingFinish:function(){s.showBrowsePreview(l)}}):this.showBrowsePreview(l)},showBrowsePreview:function(e){var t=new l.models.StoryModel({id:e});Promise.resolve(t.fetch({fresh:!0})).then(function(){var e=new l.views.BrowseStoryPreview({isHome:!0,showTagRankings:!0,model:t});$("#preview-modal").empty().append(e.render().$el),e.openModal()}),-1!=_.indexOf(this.trackedTypes,this.model.get("type"))&&this.trackClicks()},onUpdateFollow:function(e){var t=this.$(this.followButton+"[data-target="+e+"]");t.removeClass("btn-white").addClass("btn-teal"),t.children(".fa").removeClass("fa-follow fa-wp-neutral-2").addClass("fa-following fa-wp-neutral-5"),t.children(".follow-text").text(n.trans("Following"))},onUpdateUnfollow:function(e){var t=this.$(this.followButton+"[data-target="+e+"]");t.removeClass("btn-teal").addClass("btn-white"),t.children(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-neutral-2"),t.children(".follow-text").text(n.trans("Follow"))},onFollow:function(t){var n=this.model.get("type");e.te.push("event",this.experience,"module","user","follow",{module_type:n,username:t.currentTarget.getAttribute("data-target")}),-1!=_.indexOf(this.trackedTypes,n)&&e.te.push("event",this.experience,"promoted_module","user","follow",{module_type:n,username:t.currentTarget.getAttribute("data-target")})},onUnfollow:function(t){var n=this.model.get("type");e.te.push("event",this.experience,"module","user","unfollow",{module_type:n,username:t.currentTarget.getAttribute("data-target")}),-1!=_.indexOf(this.trackedTypes,n)&&e.te.push("event",this.experience,"promoted_module","user","unfollow",{module_type:n,username:t.currentTarget.getAttribute("data-target")})},onContinueReading:function(e){var n=$(e.currentTarget).data("story-id"),a=this.collection.get(n);Promise.resolve(a.fetch({fresh:!0})).then(function(){Promise.resolve($.get("/apiv2/syncreadingposition",{story_id:a.get("firstPartId"),wp_token:t.utils.getCookie("token")})).then(function(e){var n=_.where(a.get("parts"),{id:parseInt(e.part,10)});n[0]?l.router.navigate(t.utils.formatStoryUrl(n[0].url),{trigger:!0}):l.router.navigate(t.utils.formatStoryUrl(a.get("url")),{trigger:!0})})})},onContestReading:function(e){var n=$(e.currentTarget).data("story-id"),a=this.collection.get(n);e.currentTarget.classList.contains("module-title")||this.trackClicks(),Promise.resolve(a.fetch({fresh:!0})).then(function(){var e="/"+a.get("firstPartId");l.router.navigate(t.utils.formatStoryUrl(e),{trigger:!0})})},onModuleTitle:function(t){var n=this.model.get("type"),a=null,s=$(t.currentTarget).data("target"),l=$(t.currentTarget).attr("href").split("/");"storiesRecentlyRead"===n?s=null:"list"===l[1]?a="reading list":"user"===l[1]&&(a="user"),e.te.push("event",this.experience,"module","title","click",{module_type:n,item_type:a,itemid:s}),-1!=_.indexOf(this.trackedTypes,n)&&(e.te.push("event",this.experience,"promoted_module","title","click",{module_type:n,item_type:a,itemid:s}),this.trackClicks())},onModuleItem:function(t){var n=$(t.currentTarget).find(".content"),a=this.model.get("type"),s=null;switch(a){case"hubsFollowedByFollowedHub":case"listsByFollowedHub":case"storiesByFollowedHub":case"storiesByPromotedUser":case"storiesRecentlyVotedByFollowedHubs":case"hubTrending":s=_.get(this.model.get("data"),"user.name");break;case"listCurated":case"listPromoted":case"listTrending":s=_.get(this.model.get("data"),"list.id");break;case"tagTop":case"tagTrending":case"tagRecommended":s=_.get(this.model.get("data"),"tag.name");break;case"storiesBySearchResults":s=_.get(this.model.get("data"),"tags[0]")}e.te.push("event",this.experience,"module","content","click",{module_type:a,content_type:n.data("type"),contentid:n.data("target"),itemid:s,page_number:this.pageNum}),-1!=_.indexOf(this.trackedTypes,a)&&e.te.push("event",this.experience,"promoted_module","content","click",{module_type:a,content_type:n.data("type"),contentid:n.data("target"),itemid:s})},trackClicks:function(){_.each(this.clickTrackingUrls,function(e){$.ajax({type:"GET",url:e})})},trackViews:function(){n.isOnScreen(this.$el,.67)&&!this.sentViewTracking&&(this.sentViewTracking=!0,_.each(this.viewTrackingUrls,function(e){$.ajax({type:"GET",url:e})}))},sendCoverClickTrackingEvent:function(t){e.te.push("event","discover","list","cover","click",{storyid:$(t.currentTarget).data("story-id"),moduletype:this.model.get("type")})},stopEvent:function(e){t.utils.stopEvent(e)}})),l.mixin(l.views.DiscoverModule,"InfiniteScroll","FollowManager")}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"module-header-story-reading"},3:function(e,t,n,a,s){return"module-header"},5:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'        <a class="avatar on-avatar on-navigate" href="/user/'+r(i(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+"\" data-target='"+r(i(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+"'>\n"+(null!=(l=n.if.call(o,null!=t?t.sponsorAvatar:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:"")+"        </a>\n\n        <button class='btn btn-white btn-follow btn-fan on-follow' data-target='"+r(i(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+"'>\n            "+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-follow",15,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n            <span class="follow-text">'+r((n.trans||t&&t.trans||c).call(o,"Follow",{name:"trans",hash:{},data:s}))+"</span>\n        </button>\n"},6:function(e,t,n,a,s){return'                <img src="'+e.escapeExpression((n.resizeAvatar||t&&t.resizeAvatar||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.sponsorAvatar:t,60,{name:"resizeAvatar",hash:{},data:s}))+'">\n'},8:function(e,t,n,a,s){var l;return'                <img src="'+e.escapeExpression((n.resizeAvatar||t&&t.resizeAvatar||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.moduleUser:t)?l.avatar:l,60,{name:"resizeAvatar",hash:{},data:s}))+'">\n'},10:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <a class="module-title on-navigate" href="'+c("function"==typeof(i=null!=(i=n.moduleLink||(null!=t?t.moduleLink:t))?i:o)?i.call(r,{name:"moduleLink",hash:{},data:s}):i)+"\" data-target='"+c("function"==typeof(i=null!=(i=n.moduleTarget||(null!=t?t.moduleTarget:t))?i:o)?i.call(r,{name:"moduleTarget",hash:{},data:s}):i)+"'>\n            <span>"+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"  "+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.program(13,s,0),data:s}))?l:"")+"</span>\n        </a>\n"},11:function(e,t,n,a,s){var l;return" "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-right",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "},13:function(e,t,n,a,s){var l;return" "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-right",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "},15:function(e,t,n,a,s){var l;return'        <div class="module-title">'+e.escapeExpression("function"==typeof(l=null!=(l=n.title||(null!=t?t.title:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:s}):l)+"</div>\n"},17:function(e,t,n,a,s){var l;return'        <div class="module-subtitle">\n            '+e.escapeExpression("function"==typeof(l=null!=(l=n.subtitle||(null!=t?t.subtitle:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"subtitle",hash:{},data:s}):l)+"\n        </div>\n"},19:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="promotion-description">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-badge-promoted",13,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+" "+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Promoted by %s",(n.sprintf||t&&t.sprintf||r).call(i,"<b>%s</b>",null!=t?t.sponsorName:t,{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+"\n    </div>\n"},21:function(e,t,n,a,s){return"rtl"},23:function(e,t,n,a,s){return"ltr"},25:function(e,t,n,a,s){var l;return" invisible owl-carousel"+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.turnOffLooping:t,{name:"if",hash:{},fn:e.program(26,s,0),inverse:e.program(28,s,0),data:s}))?l:"")},26:function(e,t,n,a,s){return" no-loop"},28:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isUsers:t,{name:"if",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:""},29:function(e,t,n,a,s){return" users"},31:function(e,t,n,a,s){var l;return null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.data:t)?l.items:l)?l.lists:l,{name:"each",hash:{},fn:e.program(32,s,0),inverse:e.noop,data:s}))?l:""},32:function(e,t,n,a,s){var l;return'            <div class="discover-module-lists">\n'+(null!=(l=e.invokePartial(a["core.item_views.discover_module_lists"],t,{name:"core.item_views.discover_module_lists",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </div>\n"},34:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.promotedByUser:t,{name:"if",hash:{},fn:e.program(35,s,0),inverse:e.program(38,s,0),data:s}))?l:""},35:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=e.lambda,o=e.escapeExpression;return'\n            <div class="discover-module-stories-large promoted-blurb">\n                <div class="user-description">'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.moduleUser:t)?l.description:l,{name:"if",hash:{},fn:e.program(36,s,0),inverse:e.noop,data:s}))?l:"")+'</div>\n                <a href="/user/'+o(r(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+'" class="avatar avatar-xs2 on-navigate">\n                    <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||n.helperMissing).call(i,null!=(l=null!=t?t.moduleUser:t)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n                </a>\n                <a href="/user/'+o(r(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+'" class="user-name on-navigate">@'+o(r(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+"</a>\n            </div>\n"},36:function(e,t,n,a,s){var l;return(null!=(l=(n.linkify||t&&t.linkify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.moduleUser:t)?l.description:l,{name:"linkify",hash:{sanitization:"unsanitize"},data:s}))?l:"")+"..."},38:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.data:t)?l.smallStories:l,{name:"if",hash:{},fn:e.program(39,s,0),inverse:e.program(42,s,0),data:s}))?l:""},39:function(e,t,n,a,s){var l;return null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.data:t)?l.items:l)?l.stories:l,{name:"each",hash:{},fn:e.program(40,s,0),inverse:e.noop,data:s}))?l:""},40:function(e,t,n,a,s){var l;return'                <div class="discover-module-stories-small">\n'+(null!=(l=e.invokePartial(a["core.item_views.discover_module_stories_small"],t,{name:"core.item_views.discover_module_stories_small",data:s,indent:"                    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                </div>\n"},42:function(e,t,n,a,s){var l;return(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.data:t)?l.items:l)?l.stories:l,{name:"each",hash:{},fn:e.program(43,s,0),inverse:e.noop,data:s}))?l:"")+"        "},43:function(e,t,n,a,s){var l;return'                <div class="discover-module-stories-large">\n'+(null!=(l=e.invokePartial(a["core.item_views.discover_module_stories_large"],t,{name:"core.item_views.discover_module_stories_large",data:s,indent:"                    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'<div class="'+(null!=(l=n.if.call(r,null!=t?t.fromStoryReading:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'">\n'+(null!=(l=n.if.call(r,null!=t?t.moduleUser:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.moduleLink:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.program(15,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.subtitle:t,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:"")+"\n</div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.promoted:t,{name:"if",hash:{},fn:e.program(19,s,0),inverse:e.noop,data:s}))?l:"")+'\n<div style="direction:'+(null!=(l=n.if.call(r,(n.rtlLanguage||t&&t.rtlLanguage||o).call(r,null!=t?t.languageId:t,{name:"rtlLanguage",hash:{},data:s}),{name:"if",hash:{},fn:e.program(21,s,0),inverse:e.program(23,s,0),data:s}))?l:"")+'"\n     class="collection'+(null!=(l=n.if.call(r,null!=t?t.isHome:t,{name:"if",hash:{},fn:e.program(25,s,0),inverse:e.noop,data:s}))?l:"")+'"\n     data-target="'+e.escapeExpression("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n\n'+(null!=(l=n.if.call(r,null!=(l=null!=t?t.data:t)?l.readingLists:l,{name:"if",hash:{},fn:e.program(31,s,0),inverse:e.program(34,s,0),data:s}))?l:"")+'</div>\n<div id="preview-modal"></div>\n'},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"module-header-story-reading"},3:function(e,t,n,a,s){return"module-header"},5:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'        <a class="avatar on-avatar on-navigate" href="/user/'+r(i(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+"\" data-target='"+r(i(null!=(l=null!=t?t.moduleUser:t)?l.name:l,t))+"'>\n"+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.sponsorAvatar:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:"")+"        </a>\n"},6:function(e,t,n,a,s){return'                <img src="'+e.escapeExpression((n.resizeAvatar||t&&t.resizeAvatar||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.sponsorAvatar:t,60,{name:"resizeAvatar",hash:{},data:s}))+'">\n'},8:function(e,t,n,a,s){var l;return'                <img src="'+e.escapeExpression((n.resizeAvatar||t&&t.resizeAvatar||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.moduleUser:t)?l.avatar:l,60,{name:"resizeAvatar",hash:{},data:s}))+'">\n'},10:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <a class="module-title on-contest-reading" href="'+c("function"==typeof(i=null!=(i=n.moduleLink||(null!=t?t.moduleLink:t))?i:o)?i.call(r,{name:"moduleLink",hash:{},data:s}):i)+"\" data-target='"+c("function"==typeof(i=null!=(i=n.moduleTarget||(null!=t?t.moduleTarget:t))?i:o)?i.call(r,{name:"moduleTarget",hash:{},data:s}):i)+"' data-story-id=\""+c("function"==typeof(i=null!=(i=n.contestStoryId||(null!=t?t.contestStoryId:t))?i:o)?i.call(r,{name:"contestStoryId",hash:{},data:s}):i)+'">\n            <span>'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"  "+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.program(13,s,0),data:s}))?l:"")+"</span>\n        </a>\n"},11:function(e,t,n,a,s){var l;return" "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-right",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "},13:function(e,t,n,a,s){var l;return" "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-right",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "},15:function(e,t,n,a,s){var l;return'        <div class="module-title">'+e.escapeExpression("function"==typeof(l=null!=(l=n.title||(null!=t?t.title:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:s}):l)+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'<div class="'+(null!=(l=n.if.call(r,null!=t?t.fromStoryReading:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'">\n'+(null!=(l=n.if.call(r,null!=t?t.moduleUser:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.moduleLink:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.program(15,s,0),data:s}))?l:"")+'\n    <div class="module-subtitle">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-badge-promoted",13,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+" "+(null!=(l=(n.trans||t&&t.trans||o).call(r,"Promoted by %s",(n.sprintf||t&&t.sprintf||o).call(r,"<b>%s</b>",null!=t?t.sponsorName:t,{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+'\n    </div>\n\n</div>\n\n<div class="collection contest-discovery-module"\n     data-target="'+e.escapeExpression("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n</div>\n\n<div id="preview-modal"></div>\n'},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(301));!function(e,t,n,s){s.add("DiscoverRows",s.views.IncrementalList.extend({className:"discover-rows",template:a.default,itemView:s.views.DiscoverModule,containerId:"#module-collection",initialize:function(){this.setCollectionfilter(s.models.DiscoverModule.prototype.isValid),_.bindAll(this,"moduleInView"),this.pageNum=1},renderCollection:function(){s.views.IncrementalList.prototype.renderCollection.apply(this,arguments),_.defer(this.afterRender.bind(this))},afterRender:function(){$(e).on("scroll",this.moduleInView),this.initCarousel()},getTemplateData:function(){return{hasRows:this.collection.length>0,testGroups:t.testGroups}},getItemViewOptions:function(){return{pageNum:this.pageNum}},remove:function(){$(e).off("scroll",this.moduleInView)},onShowMore:function(e){e&&n.stopEvent(e),this.pageNum++,this.$(".show-more-message").addClass("hidden"),this.$(".loading-message").removeClass("hidden");var t=this;Promise.resolve(this.collection.fetchNextSet()).then(function(){t.$(".show-more-message").removeClass("hidden"),t.$(".loading-message").addClass("hidden"),t.initCarousel()})},renderItem:function(e,t,n){s.views.IncrementalList.prototype.renderItem.apply(this,arguments)},initCarousel:function(){var e={nav:!0,navText:['<span class="fa fa-left fa-wp-neutral-2 carousel-left"></span>','<span class="fa fa-right fa-wp-neutral-2 carousel-right"></span>']};n.rtlLanguage(parseInt(s.get("language"),10))&&_.extend(e,{rtl:!0}),s.get("device").is.mobile?_.extend(e,{responsive:{0:{items:1},600:{items:2},900:{items:3}}}):_.extend(e,{items:2,autoWidth:!0,margin:30}),this.$(".owl-carousel").one("initialized.owl.carousel",function(){$(this).removeClass("invisible")}),this.$(".owl-carousel.no-loop, .owl-carousel.users").owlCarousel(e),_.extend(e,{loop:!0}),this.$(".owl-carousel:not(.no-loop):not(.users)").owlCarousel(e)},moduleInView:_.throttle(function(){var t=$(".discover-module"),a=this;this.visitedModule=this.visitedModule||{},t.each(function(t,s){if(!a.visitedModule[t]&&n.isOnScreen($(s),.67)){var l,i,r=$(s).children(".collection").data("target"),o=a.collection.findWhere({type:r}),c=o.get("data"),u=c.items.stories||c.items.lists||c.items.users;c.user?(l="user",i=c.user.name):c.list?(l="reading_list",i=c.list.id):c.tag?(l="tag",i=c.tag.name):(l=null,i=null),a.visitedModule[t]=s,e.te.push("event","home","module",null,"view",{module_type:o.get("type"),content_type:c.items.stories?"stories":"reading_lists",contentids:_.pluck(u,"id").join("|"),content_count:u.length,item_type:l,itemid:i});-1!=_.indexOf(["storiesByPromotedUser","listPromoted"],o.get("type"))&&e.te.push("event","home","promoted_module",null,"view",{module_type:o.get("type"),content_type:c.items.stories?"stories":"reading_lists",contentids:_.pluck(u,"id").join("|"),content_count:u.length,item_type:l,itemid:i})}})},500)})),s.mixin(s.views.DiscoverRows,"InfiniteScroll")}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div id="module-collection" class="collection">\n'+(null!=(l=n.each.call(i,null!=t?t.modules:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'  </div>\n\n  <div id="preview-modal"></div>\n\n  <div class="show-more center-text hidden">\n      <button class="btn btn-link on-showmore">\n          <span class=\'show-more-message\'>\n              <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n              <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n          </span>\n          <span class='loading-message hidden'>\n              "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n              <span> "+o((n.trans||t&&t.trans||r).call(i,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n          </span>\n      </button>\n  </div>\n\n"},2:function(e,t,n,a,s){var l;return'      <div class="discover-module">\n'+(null!=(l=e.invokePartial(a["core.collection_views.discover_module"],t,{name:"core.collection_views.discover_module",data:s,indent:"          ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"      </div>\n"},4:function(e,t,n,a,s){return'  <p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No recommendations available.",{name:"trans",hash:{},data:s}))+"</p>\n"},6:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"WPModal","modal-home",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<div id="home">\n'+(null!=(l=n.if.call(i,null!=t?t.hasRows:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"</div>\n\n"+(null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||n.helperMissing).call(i,"PAID_ONBOARDING",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a){a.add("BrowseTopics",a.collections.BaseCollection.extend({cacheLocal:!0,arrayKey:"topics",fields:{topics:["name","categoryID","browseURL","tagURL"]},initialize:function(e,t){t=t||{},this.topic=t.topic||null,this.discoverURL=t.discoverURL||null,this.image=t.image||null},resource:function(){return"topics"+(this.topic?"."+this.topic:"")},url:function(){return this.discoverURL?this.discoverURL.replace(/^.*\/\/[^\/]+/,"")+"?language="+a.get("language"):"/v5/browse/topics"+(this.topic?"/"+this.topic:"")+"?language="+a.get("language")}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("Tags",a.collections.BaseCollection.extend({model:a.models.BaseModel,arrayKey:"tags"}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("CategoryModuleItem",a.models.Base.extend({validTypes:["hotStoriesForCategory","featuredStoriesForCategory","risingStoriesForCategory","newStoriesForCategory"],isValid:function(){return t.contains(this.validTypes,this.get("type"))}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.add("CategoryModules",s.collections.BaseCollection.extend({model:s.models.CategoryModuleItem,arrayKey:"modules",fields:{modules:["type","data"]},typeByPathName:{hot:"hotStoriesForCategory",rising:"risingStoriesForCategory",new:"newStoriesForCategory",featured:"featuredStoriesForCategory"},initialize:function(e,t){t=t||{},this.categoryId=t.categoryId},resource:function(){return"user."+(a.currentUser().get("username")||"anonymous")+".category.modules."+this.categoryId},url:function(){return"/v5/discover/categories/"+this.categoryId},getTypeByUrlPath:function(e){return this.typeByPathName[e]}}))}(window,_,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(307));!function(e,t,n,s,l,i,r){i.add("TagModuleWriters",i.views.Base.extend({className:"tag-module-writers",template:a.default,render:function(){var e=this.model?this.model.toJSON():{empty:!0};return e.nameMaxLength=i.get("device").isDesktop()?30:28,this.$el.html(this.template(e)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.name:t,null!=t?t.nameMaxLength:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},3:function(e,t,n,a,s){var l;return null!=(l=(n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,null!=t?t.nameMaxLength:t,!1,{name:"simpleShorten",hash:{},data:s}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="writer-avatar">\n  <a class="on-navigate" href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n    <img src="'+c("function"==typeof(i=null!=(i=n.avatar||(null!=t?t.avatar:t))?i:o)?i.call(r,{name:"avatar",hash:{},data:s}):i)+'">\n  </a>\n</div>\n<div class="writer-info">\n  <div class="writer-name">\n    <a class="on-navigate" href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n      '+(null!=(l=n.if.call(r,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'\n    </a>\n  </div>\n\n  <div class="writer-meta">\n    <span class="works">'+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Work","%s Works",null!=t?t.numStoriesPublished:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStoriesPublished:t,{name:"sprintf",hash:{},data:s}))+'</span>\n    <span class="reading-lists">'+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Reading List","%s Reading Lists",null!=t?t.numLists:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numLists:t,{name:"sprintf",hash:{},data:s}))+'</span>\n    <span class="followers">'+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Follower","%s Followers",null!=t?t.numFollowers:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||o).call(r,null!=t?t.numFollowers:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'</span>\n  </div>\n\n  <div class="writer-description">\n    '+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,200,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(309));!function(e,t,n,s,l,i,r){i.add("TagModuleLists",i.views.Base.extend({className:"tag-module-lists",template:a.default,render:function(){var e=this.model?this.model.toJSON():{empty:!0};return e.isDesktop=i.get("device").isDesktop(),e.testGroups=s.testGroups,this.$el.html(this.template(e)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'      <span class="lists-user">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Selected by %s",null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+"</span>\n"},3:function(e,t,n,a,s,l,i){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=i[1]?i[1].isDesktop:i[1],{name:"if",hash:{},fn:e.program(4,s,0,l,i),inverse:e.program(6,s,0,l,i),data:s}))?r:""},4:function(e,t,n,a,s){var l=e.lambda,i=e.escapeExpression;return'            <a class="on-navigate" href="/stories/'+i(l(t,t))+'"><s>#</s>'+i(l(t,t))+"</a>\n"},6:function(e,t,n,a,s){return"           <s>#</s>"+e.escapeExpression(e.lambda(t,t))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return'<div class="reading-list-cover">\n  <a class="on-navigate" href="/list/'+d("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+'">\n    <img src="'+d((n.resizeCover||t&&t.resizeCover||u).call(c,null!=t?t.background:t,122,{name:"resizeCover",hash:{},data:s}))+'" >\n  </a>\n</div>\n<div class="reading-list-info">\n  <div class="reading-list-title"><a class="on-navigate" href="/list/'+d("function"==typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)?o.call(c,{name:"id",hash:{},data:s}):o)+'">'+d("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:u)?o.call(c,{name:"name",hash:{},data:s}):o)+'</a></div>\n  <div class="meta">\n'+(null!=(r=n.unless.call(c,null!=t?t.isDesktop:t,{name:"unless",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'    <span class="num-stories">'+d((n.sprintf||t&&t.sprintf||u).call(c,(n.ngettext||t&&t.ngettext||u).call(c,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStories:t,{name:"sprintf",hash:{},data:s}))+'</span>\n    <span class="tags">\n'+(null!=(r=n.each.call(c,null!=t?t.tags:t,{name:"each",hash:{},fn:e.program(3,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"    </span>\n  </div>\n</div>\n"},useData:!0,useDepths:!0})},function(e,t,n){"use strict";var a=l(n(311)),s=l(n(16));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r){r.add("BrowseResults",r.views.IncrementalList.extend({className:"browse-results",template:s.default,containerId:"#browse-results-item-view",constructor:function(e){e=e||{},this.events={"tap    .on-story-preview":r.get("device").is.mobile?"navigateToStory":"onStoryPreview","click  .on-story-preview":"stopEvent"},this.model=e.model,this.filter=e.filter,this.tag=e.tag||null,this.topicModel=e.topicModel||null,this.isStories=!1,-1!==t.indexOf(["hot","rising","new"],this.filter)?(this.itemView=r.views.BrowseStoryItem,this.collection=new r.collections.BrowseTagStories(this.model.get("data").items.stories,{tags:this.tag||this.topicModel.get("name"),filter:this.filter,nextUrl:this.model.get("data").items.nextUrl}),this.isStories=!0):"writers"===this.filter?(this.itemView=r.views.TagModuleWriters,this.collection=new r.collections.DiscoverModuleUsers(this.model.get("data").items.users)):"lists"===this.filter&&(this.itemView=r.views.TagModuleLists,this.collection=new r.collections.DiscoverModuleLists(this.model.get("data").items.lists)),r.views.IncrementalList.prototype.constructor.apply(this,arguments)},initialize:function(){Handlebars.registerPartial("core.item_views.tag_module_stories_large",a.default),this.listenTo(r,"app:component:TagMetaItem:click",this.navigateToTagPage)},renderItem:function(e,t,n){r.views.IncrementalList.prototype.renderItem.apply(this,arguments),n=n||this.collection.indexOf(e),t=t||this.getContainer()},getTemplateData:function(){return{stories:this.isStories}},getItemViewOptions:function(){var e={};return"hot"===this.filter&&(e.showStoryRank=!0),e},onStoryPreview:function(e){l.utils.stopEvent(e);var t=n(e.currentTarget).data("story-id"),a=this.collection.get(t),s=new r.views.BrowseStoryPreview({model:a});this.$("#preview-modal").empty().append(s.render().$el),s.openModal(),this.sendStoryClickTrackingEvent(t)},navigateToStory:function(e){l.utils.stopEvent(e),this.sendStoryClickTrackingEvent(n(e.currentTarget).data("story-id"));var t=n(e.currentTarget).data("story-id"),a=this.collection.get(t);r.router.navigate(l.utils.formatStoryUrl(a.get("url")),{trigger:!0})},navigateToTagPage:function(e){var t=n(e.currentTarget).text().trim();r.router.navigate("/stories/"+encodeURIComponent(t),{trigger:!0})},sendStoryClickTrackingEvent:function(t){e.te.push("event","app","story",null,"click",{storyid:t,page:"tag"})}})),r.mixin(r.views.BrowseResults,"InfiniteScroll")}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<a class="cover cover-home empty-cover-large">\n  <div class="fixed-ratio fixed-ratio-cover"></div>\n</a>\n\n'},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<a class="cover cover-home on-story on-navigate" href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||r).call(i,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n  <div class="fixed-ratio fixed-ratio-cover">\n    <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,92,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.trans||t&&t.trans||r).call(i,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n  </div>\n</a>\n\n<div class="content">\n  <a class="title meta on-story on-navigate" href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||r).call(i,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=t?t.title:t,28,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</a>\n  <a class="category meta on-navigate" href="/stories/'+o((n.slugify||t&&t.slugify||r).call(i,null!=(l=null!=t?t.category:t)?l.name_english:l,{name:"slugify",hash:{},data:s}))+'">'+o(e.lambda(null!=(l=null!=t?t.category:t)?l.name:l,t))+'</a>\n\n  <div class="meta social-meta">\n    <span class="read-count">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+'</span>\n    <span class="vote-count">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+'</span>\n  </div>\n\n  <div class="description">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=t?t.description:t,130,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+"</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.empty:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=r(n(313)),s=r(n(314)),l=r(n(16)),i=r(n(315));function r(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,r){r.add("Browse",r.views.RegionManager.extend({id:"browse-container",template:i.default,subviews:{results:r.views.BrowseResults,dummyReactView:r.views.DummyReactView},events:{"tap    .tab-control":"onSwitchTabs","click  .tab-control":"stopEvent","tap  .on-topic":"onTopicClick","click  .on-topic":"onTopicClick"},constructor:function(e){this.tagTabs=[{moduleType:"hotStoriesForTag",tabValue:"hot",translatedTabName:n.trans("Hot")},{moduleType:"risingStoriesForTag",tabValue:"rising",translatedTabName:n.trans("Rising")},{moduleType:"newStoriesForTag",tabValue:"new",translatedTabName:n.trans("New")},{moduleType:"relatedWritersForTag",tabValue:"writers",translatedTabName:n.trans("Related Writers")},{moduleType:"relatedReadingListsForTag",tabValue:"lists",translatedTabName:n.trans("Related Reading Lists")}],this.categoryTabs=[{moduleType:"hotStoriesForCategory",tabValue:"hot",translatedTabName:n.trans("Hot")},{moduleType:"featuredStoriesForCategory",tabValue:"featured",translatedTabName:n.trans("Featured")},{moduleType:"risingStoriesForCategory",tabValue:"rising",translatedTabName:n.trans("Rising")},{moduleType:"newStoriesForCategory",tabValue:"new",translatedTabName:n.trans("New")}],r.views.RegionManager.prototype.constructor.apply(this,arguments)},initialize:function(e){e=e||{},this.tag=e.tag||null,this.topicModel=e.topicModel,this.rootTopicModel=e.rootTopicModel,this.lastTopicModel=e.lastTopicModel,this.errors=[],this.topic=e.topic||null,this.browseTopicsCollection=e.browseTopicsCollection||null,this.isTopicsLevel=!_.isEmpty(this.topic),this.browseLabel=this.getBrowseLabel(),this.section=e.section||"hot",this.collection=e.collection,this.listenTo(r,"app:component:TagCarouselItem:click",this.navigateToTagPage),r.get("device").is.mobile?Handlebars.registerPartial("mobile.browse.browse_results",l.default):(Handlebars.registerPartial("desktop.browse.browse_results",l.default),Handlebars.registerPartial("core.components.browse_tags",s.default),Handlebars.registerPartial("core.components.browse_header",a.default))},render:function(){var e=this,a=[];return _.defer(function(){var s=e.getTabs(),l=_.findWhere(e.collection.toJSON(),{type:"relatedTagsForTag"});l&&(a=l.data.items.tags.map(function(e){return{id:e,name:e}}));var i=e.isTopicsLevel?e.topic:e.tag,o=i.split(",").reverse();if(_.forEach(o,function(e){a.unshift({id:e,name:e,active:!0})}),1===i.split(",").length&&(a[0].noRemoveIcon=!0),_.isEmpty(e.errors)){var c=t.utils.getCookie("locale");c&&0!==c.trim().length||(c="en_US");var u={tabs:s,relatedTags:{tags:a,withIcon:!0},urlBasePath:"stories/"+encodeURIComponent(e.tag||e.topic),activeTab:e.section,translatedActiveTab:n.trans(e.section.charAt(0).toUpperCase()+e.section.slice(1)),browseLabel:e.browseLabel,isEnglish:"en_US"===c,testGroups:t.testGroups,rootTopic:e.rootTopicModel};e.numStories&&_.extend(u,{numStories:e.numStories}),e.$el.html(e.template(u)),e.renderBrowseRegion("#browse-content"),e.renderBrowseHeader("#browse-header-container")}else r.router.trigger("route:error-404","browse-tag")}),r.trigger("navbar:browse-label:set",this.browseLabel,this.topic),this},renderBrowseRegion:function(e){var t,a="mobile"===n.getDeviceType();if(this.$(e).empty(),this.isTopicsLevel&&"explore"===this.section){var s=[],l=a?"":"?prev="+encodeURIComponent(this.topic),i="/stories/"+encodeURIComponent(this.topic),r=this.collection.findWhere({type:"relatedTagsForTag"});r&&_.each(_.get(r.get("data"),"items.tags",[]),function(e){s.push({key:e,name:e,url:i+encodeURIComponent(",")+e+l})}),a&&(t=new this.subviews.dummyReactView({component:"MenuOptions",componentId:"exploreTags",componentData:{options:s}}))}else{var o=this.collection.findWhere({type:this.collection.getTypeByUrlPath(this.section)});o&&(t=new this.subviews.results({model:o,filter:this.section,tag:this.tag,topicModel:this.topicModel}))}t&&this.setRegion(e,t.render())},renderBrowseHeader:function(e){if(this.$(e).empty(),!("mobile"===n.getDeviceType())){var t=_.findWhere(this.tagTabs,{tabValue:this.section}).moduleType,s={numStories:this.collection.findWhere({type:t}).get("data").items.total||0,activeTab:this.section,translatedActiveTab:n.trans(this.section.charAt(0).toUpperCase()+this.section.slice(1)),tabs:this.getTabs()};this.$el.find(e).html((0,a.default)(s))}},getTabs:function(){for(var e=[],t=this.collection.pluck("type"),n=0;n<this.tagTabs.length;n++)-1!==_.indexOf(t,this.tagTabs[n].moduleType)&&e.push(this.tagTabs[n]);return e},getPrevPageTag:function(){var e,t,n=this.tag?this.tag.split(","):[];if(n.length>1){var a=_.clone(n);a.pop(),e=encodeURIComponent(a.join(","))+this.getPrevRootTopicQuery(),t=n[n.length-2]}else{if(!this.rootTopicModel)return null;e=this.rootTopicModel.get("name"),t=this.rootTopicModel.get("topic")}return{tag:e,label:t}},getPrevRootTopicQuery:function(){return r.get("device").is.mobile?"":this.lastTopicModel?"?prev="+this.lastTopicModel.get("name"):""},getBrowseLabel:function(){var e;if(this.rootTopicModel)e=this.rootTopicModel.get("topic");else if(this.tag){var t=this.tag.split(",")[0];e=t.charAt(0).toUpperCase()+t.slice(1)}else e=this.topicModel.get("topic");return e=n.trans("%s Stories",n.trans(e))},onSwitchTabs:function(e){var t=$(e.currentTarget);this.section=t.data("section"),this.$(".tab-control").removeClass("active"),t.addClass("active");for(var n=this.el.querySelectorAll(".fa-stack.check"),a=0;a<n.length;a++)n[a].classList.add("hidden");t.find(".fa-stack.check").removeClass("hidden"),this.renderBrowseRegion("#browse-content"),this.renderBrowseHeader("#browse-header-container");var s=encodeURIComponent(this.tag||this.topic)+"/";r.router.navigate("/stories/"+s+t.attr("data-section")+this.getPrevRootTopicQuery(),{trigger:!1})},navigateToTagPage:function(e,t){var n=$(t.currentTarget).hasClass("active"),a=this.tag||this.topic,s=n?"/stories/"+encodeURIComponent(this.removeOneTag(a,e)):"/stories/"+encodeURIComponent(a+","+e)+this.getPrevRootTopicQuery();r.router.navigate(s,{trigger:!0})},removeOneTag:function(e,t){var n=e.split(",");return 1!==n.length&&n.splice(n.indexOf(t),1),n.join(",")},onTopicClick:function(t){var n=$(t.target).text();e.te.push("event","browse","topic",null,"click",{topic:n})}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=n.helperMissing;return'              <li>\n                <a href="/'+c(e.lambda(null!=i[1]?i[1].urlBasePath:i[1],t))+"/"+c("function"==typeof(o=null!=(o=n.tabValue||(null!=t?t.tabValue:t))?o:d)?o.call(u,{name:"tabValue",hash:{},data:s}):o)+'" data-section="'+c("function"==typeof(o=null!=(o=n.tabValue||(null!=t?t.tabValue:t))?o:d)?o.call(u,{name:"tabValue",hash:{},data:s}):o)+'" class="tab-control'+(null!=(r=(n.ifequal||t&&t.ifequal||d).call(u,null!=i[1]?i[1].activeTab:i[1],null!=t?t.tabValue:t,{name:"ifequal",hash:{},fn:e.program(2,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                    '+c("function"==typeof(o=null!=(o=n.translatedTabName||(null!=t?t.translatedTabName:t))?o:d)?o.call(u,{name:"translatedTabName",hash:{},data:s}):o)+'\n                    <span class="fa-stack check '+(null!=(r=(n.ifequal||t&&t.ifequal||d).call(u,null!=i[1]?i[1].activeTab:i[1],null!=t?t.tabValue:t,{name:"ifequal",hash:{},fn:e.noop,inverse:e.program(4,s,0,l,i),data:s}))?r:"")+'">\n                      '+(null!=(r=(n.iconify||t&&t.iconify||d).call(u,"fa-circle-empty fa-stack-2x",16,"wp-base-2",{name:"iconify",hash:{},data:s}))?r:"")+"\n                      "+(null!=(r=(n.iconify||t&&t.iconify||d).call(u,"fa-check fa-stack-1x",10,"wp-base-2",{name:"iconify",hash:{},data:s}))?r:"")+"\n                    </span>\n                </a>\n              </li>\n"},2:function(e,t,n,a,s){return" active"},4:function(e,t,n,a,s){return" hidden "},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return' <div class="panel-heading">\n        <h4 class="text-light all-caps" id="header-left">'+d((n.sprintf||t&&t.sprintf||u).call(c,(n.ngettext||t&&t.ngettext||u).call(c,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||u).call(c,null!=t?t.numStories:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'</h4>\n        <div class="button-group relative inline-block">\n          <button class="btn btn-text dropdown-toggle" id="sortby-button" data-toggle="dropdown">\n            <span id="sortby-text">'+d((n.trans||t&&t.trans||u).call(c,"Sort by: ",{name:"trans",hash:{},data:s}))+" "+d("function"==typeof(o=null!=(o=n.translatedActiveTab||(null!=t?t.translatedActiveTab:t))?o:u)?o.call(c,{name:"translatedActiveTab",hash:{},data:s}):o)+'</span>\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu dropdown-menu-right" id="sortby-dropdown">\n'+(null!=(r=n.each.call(c,null!=t?t.tabs:t,{name:"each",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"        </ul>\n      </div>\n    </div>"},useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <li class="col-xs-3">\n      <a href="'+o("function"==typeof(l=null!=(l=n.url||(null!=t?t.url:t))?l:r)?l.call(i,{name:"url",hash:{},data:s}):l)+'" class="on-navigate">'+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+"</a>\n    </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<ul id="explore-tags" class="row">\n'+(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"</ul>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"TagpagePaidStoriesContainer","tagpage-paid-stories",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},3:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.components.browse_tags"],t,{name:"core.components.browse_tags",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:""},5:function(e,t,n,a,s){var l;return'        <div class="browse-results">\n'+(null!=(l=e.invokePartial(a["desktop.browse.browse_results"],t,{name:"desktop.browse.browse_results",data:s,indent:"          ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"        </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="container">\n  <header class="background text-left">\n    <h1> '+c("function"==typeof(i=null!=(i=n.browseLabel||(null!=t?t.browseLabel:t))?i:o)?i.call(r,{name:"browseLabel",hash:{},data:s}):i)+" </h1>\n  </header>\n"+(null!=(l=n.if.call(r,(n.isTestGroup||t&&t.isTestGroup||o).call(r,"PAID_ROW_TAG_PAGES",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'  <div class="tags-container">\n    <div id="refine-by-msg">'+c((n.trans||t&&t.trans||o).call(r,"Refine by tag:",{name:"trans",hash:{},data:s}))+"</div>\n    "+(null!=(l=(n.reactComponent||t&&t.reactComponent||o).call(r,"TagCarousel","relatedTags",{name:"reactComponent",hash:{},data:s}))?l:"")+'\n  </div>\n  <div class="browse-content-container">\n    <div id="browse-header-container">\n'+(null!=(l=e.invokePartial(a["core.components.browse_header"],t,{name:"core.components.browse_header",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'    </div>\n    <main id="browse-content">\n'+(null!=(l=n.if.call(r,null!=t?t.showExploreList:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+"    </main>\n  </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=d(n(317)),s=d(n(17)),l=d(n(318)),i=d(n(3)),r=d(n(9)),o=d(n(2)),c=d(n(10)),u=d(n(319));function d(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,d){d.add("Authentication",d.views.Base.extend({className:"authentication-wrapper",template:u.default,events:{"tap   .on-login":"loginClick","click .on-login":"stopEvent","tap   .on-signup":"onNavigatePage","click .on-signup":"stopEvent","tap   .on-password-forgot":"onPasswordForgot","click .on-password-forgot":"stopEvent","tap   .get-the-app":"onDownloadApp","click .get-the-app":"stopEvent","tap    .on-pw-toggle":"onPasswordToggle","blur     select":"onBlurPicker","shown.bs.dropdown    #auth-header .button-group":"toggleMenu","hidden.bs.dropdown   #auth-header .button-group":"toggleMenu","tap    #language-options li a":"onChangeLanguage","change #language-options":"onChangeLanguage","tap   .scroll-arrow":"onScrollToValues","click .scroll-arrow":"stopEvent","tap   #back-to-top":"onScrollToForm","click #back-to-top":"stopEvent","mouseleave .show-related-tags":"onUnhoverCategory","mouseenter .show-related-tags":"onCategoryHovered","tap .show-related-tags":"onCategoryHovered","click .show-related-tags":"stopEvent"},initialize:function(e){e=e||{page:"signup"},this.options=e,this.options.from=e.from||null,this.timeout=null,this.deviceType=d.get("device")&&d.get("device").is.mobile?"mobile":"desktop","desktop"===this.deviceType&&(this.deviceType=d.get("device")&&d.get("device").is.tablet?"tablet":"desktop",Handlebars.registerPartial("core.header.community_menu",c.default),Handlebars.registerPartial("core.header.search_field",o.default),Handlebars.registerPartial("core.header.discover_menu",r.default),Handlebars.registerPartial("desktop.browse.browse_topics",i.default)),this.options.nextUrl=n.utils.getNextUrl(e.nexturl),this.title=n.utils.trans("Sign in to Wattpad"),Handlebars.registerPartial("core.authentication.auth_headline",l.default),Handlebars.registerPartial("core.authentication.auth_form",s.default),"desktop"===this.deviceType?Handlebars.registerPartial("core.components.get_app",a.default):"tablet"===this.deviceType&&Handlebars.registerPartial("core.components.get_app",a.default)},render:function(a){var s,l,i,r={};if(a=a||{},r[this.options.page]=!0,s=n.utils.getCookie("locale"),l=d.get("supported-languages"),i=n.utils.getCookie("signupFrom"),s&&0!==s.trim().length||(s="en_US"),r.nextUrl=this.options.nextUrl,r.interfaceLang=l.where({locale:s})[0].toJSON(),r.languages=l.toJSON(),r.translatedLangs=n.translatedLangs,r.device=d.get("device"),r.signupFrom=i,r.hybridLayout=this.options.hybridLayout,this.options.hybridLayout&&(r.model=this.options.model),r.notice=n.utils.getParam("notice"),r.model=new d.models.Authsignup({}),r.msg=n.utils.getParam("msg")||n.utils.trans("Please make sure all fields are filled in."),a.isSSR||"signup"!==this.options.page)return this.$el.html(this.template(r)),t.defer(this.afterRender.bind(this)),this;n.utils.redirectToServer(e.location.href)},afterRender:function(){this.$(".on-dob-hover").tooltip({trigger:"click hover manual",title:"We ask for your date of birth so you can have the right Wattpad experience for your age."})},onNavigatePage:function(e){var t=$(e.currentTarget);d.router.navigate(t.attr("href"),{trigger:!0})},onDownloadApp:function(s){if("mobile"===this.deviceType)e.location.href=n.utils.getAppUrl();else{var l=$(s.currentTarget),i=l.data("download-link"),r=l.data("download-text");this.$("#get-app-modal-container").empty().html((0,a.default)({downloadLink:i,downloadText:r}));var o=this.$("#get-app-modal");o.find("#phonenumber").intlTelInput({utilsScript:n.intlTelInputUtilsScript||"/js/intl-tel-input-utils.js",preferredCountries:[],defaultCountry:"us"});var c=t.bind(this.onSendAppLink,this),u=o.find(".on-send-app-link").on("tap",c);o.modal("toggle").on("hide.bs.modal",function e(){u.off("tap",c),o.off("hide.bs.modal",e)})}},toggleMenu:function(e){$(e.currentTarget).find("> button > span").toggleClass("fa-down fa-up")},onPasswordToggle:function(t){var n=$(t.currentTarget),a=n.siblings("input"),s=a.attr("type");e.clearTimeout(this.timeout),"password"===s&&(a.attr("type","text").focus(),n.addClass("active")),"text"===s&&(a.attr("type","password").focus(),n.removeClass("active"))},onSendAppLink:function(a){var s=$("#get-app-modal #phonenumber"),l=s.intlTelInput("isValidNumber");this.model.validate("getApp"),l?l&&(this.model.trigger("attr:valid","getApp"),Promise.resolve($.ajax({type:"POST",url:"/apiv2/send_download_link",data:{to:s.intlTelInput("getNumber")}})).then(function(){var e=$("#get-app-modal .on-send-app-link");e.addClass("sent"),t.delay(function(){e.removeClass("sent"),$("#get-app-modal").modal("hide")},5e3)}).catch(function(t){e.alert(n.utils.trans(t))})):this.model.trigger("attr:invalid","getApp",n.utils.trans("Please enter a valid SMS number."))},onChangeLanguage:function(t){var a="en_US";a=t.currentTarget.selectedOptions?$(t.currentTarget.selectedOptions[0]).data("code"):$(t.currentTarget).data("code"),n.utils.setCookie("locale",a,3650,!0),e.location.reload()},onScrollToValues:function(e){$("html, body").animate({scrollTop:$("#value-props").offset().top},1e3),n.utils.stopEvent(e)},onScrollToForm:function(e){$("html, body").animate({scrollTop:0},1e3),$("#signup-username").focus(),n.utils.stopEvent(e)},setSubElements:function(e){var n,a="";e&&(n=e.className.trim().split(" "),t.each(n,function(e){a+="."+e}),e.setElement($(a.trim())))},loginClick:function(e){n.utils.pushEvent({category:"login-btn",action:"click",label:e.currentTarget.dataset.label||"under_form"}),this.title=n.utils.trans("Sign in to Wattpad"),this.onAuthPrompt(e)},preType:function(){this.changeBg()},currentTimer:null,onCategoryHovered:function(e){this.currentTimer=setTimeout(function(){var t=this.$("#main-browse-navigate .active");$(t.data("id")).addClass("hide"),t.removeClass("active");var n=$(e.target);$(n.data("id")).removeClass("hide"),n.addClass("active")},50)},onUnhoverCategory:function(e){clearTimeout(this.currentTimer)},onPasswordForgot:function(e){var t=$("#login-user").val(),a=e.currentTarget.href.replace(n.siteRoot,"");d.router.navigate(a,!0),$("#forgot-email").prop("value",t)},onBlurPicker:function(e){var t=$(e.currentTarget),n=t.val(),a=t.closest(".form-group").data("attr");null===n&&this.model.validate(a)}})),d.mixin(d.views.Authentication,"ValidationView","FacebookConnect","GoogleAuth","AuthPromptManagement")}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <div class="download-link">\n                <a href="'+o("function"==typeof(l=null!=(l=n.downloadLink||(null!=t?t.downloadLink:t))?l:r)?l.call(i,{name:"downloadLink",hash:{},data:s}):l)+'" rel="nofollow" target="_blank">'+o("function"==typeof(l=null!=(l=n.downloadText||(null!=t?t.downloadText:t))?l:r)?l.call(i,{name:"downloadText",hash:{},data:s}):l)+"</a>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<section class="modal fade" id="get-app-modal" tabindex="-1" role="dialog" aria-labelledby="getAppModalTitle" aria-hidden="true">\n    <div class="modal-dialog"><div class="modal-content">\n\n        <header class="modal-header">\n            <div class="pull-right close" data-dismiss="modal">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove-alt",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</div>\n            <h2 class="modal-title" id="getAppModalTitle">'+o((n.trans||t&&t.trans||r).call(i,"Get the app in seconds.",{name:"trans",hash:{},data:s}))+'</h1>\n            <h3 class="modal-subtitle">'+o((n.trans||t&&t.trans||r).call(i,"It's easy as 1-2-3. Enter your cell phone number and we'll send you a link to install the Wattpad app.",{name:"trans",hash:{},data:s}))+'</h3>\n        </header>\n\n        <div class="modal-body">\n            <div class="form-group has-feedback" data-attr="getApp">\n                <div class="input-group">\n                    <label class="control-label sr-only" for="phonenumber">'+o((n.trans||t&&t.trans||r).call(i,"Enter your phone number",{name:"trans",hash:{},data:s}))+'</label>\n                    <input id="phonenumber" name="phonenumber" class="form-control input-lg on-invalid" type="text">\n\n                    <span class="input-group-btn">\n                        <button class="on-send-app-link btn btn-lg btn-orange">\n                            <span class="hidden-if-sent">'+o((n.trans||t&&t.trans||r).call(i,"Send",{name:"trans",hash:{},data:s}))+'</span>\n                            <span class="shown-if-sent">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-check",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</span>\n                        </button>\n                    </span>\n                </div>\n            </div>\n            <div class="feetext">\n                <small>'+o((n.trans||t&&t.trans||r).call(i,"Standard messaging fees apply",{name:"trans",hash:{},data:s}))+"</small>\n            </div>\n\n"+(null!=(l=n.if.call(i,null!=t?t.downloadLink:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"        </div>\n\n    </div>\n</section>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"    <h1>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Reset password",{name:"trans",hash:{},data:s}))+"</h1>\n"},3:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return"    <h1>"+r((n.trans||t&&t.trans||i).call(l,"Lost your password?",{name:"trans",hash:{},data:s}))+"</h1>\n    <span>"+r((n.trans||t&&t.trans||i).call(l,"Type your username or email below and we'll send you instructions on how to reset it.",{name:"trans",hash:{},data:s}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.reset:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.forgot:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u='            <a class="on-login btn btn-link form-switch" data-form="login" data-label="top-right" rel="nofollow" href="/login';return i=null!=(i=n.nextUrl||(null!=t?t.nextUrl:t))?i:c,r={name:"nextUrl",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.nextUrl||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(u+=l),u+'">\n                '+e.escapeExpression((n.trans||t&&t.trans||c).call(o,"Log in",{name:"trans",hash:{},data:s}))+"\n            </a>\n"},2:function(e,t,n,a,s){return"?nextUrl="+e.escapeExpression(e.lambda(t,t))},4:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u='            <a class="btn btn-link" href="/';return i=null!=(i=n.nextUrl||(null!=t?t.nextUrl:t))?i:c,r={name:"nextUrl",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.nextUrl||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(u+=l),u+'">\n                '+e.escapeExpression((n.trans||t&&t.trans||c).call(o,"Sign up",{name:"trans",hash:{},data:s}))+"\n            </a>\n"},6:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                <li class="col-xs-4 col-sm-3'+(null!=(l=n.if.call(r,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"\">\n                    <a href='#' data-code=\""+c("function"==typeof(i=null!=(i=n.locale||(null!=t?t.locale:t))?i:o)?i.call(r,{name:"locale",hash:{},data:s}):i)+'">'+(null!=(l=n.if.call(r,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+" "+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+"</a>\n                </li>\n"},7:function(e,t,n,a,s){return" selected"},9:function(e,t,n,a,s){var l;return" "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-check",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'<div class="full-screen"></div>\n<div id="auth-header" class="container clearfix">\n    <a href="home">\n        '+o((n.connectImage||t&&t.connectImage||r).call(i,"/logos/wp-logo-orange.png","Wattpad",{name:"connectImage",hash:{klass:"wp-logo",width:123},data:s}))+'\n    </a>\n     \n    <div class="buttons-right">\n'+(null!=(l=n.if.call(i,null!=t?t.signup:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(i,null!=t?t.login:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'        <div class="button-group relative">\n            <button class="btn btn-link dropdown-toggle" data-toggle="dropdown"\n                    role="button" aria-controls="language-options" aria-expanded="false" aria-label="more options">\n                    '+o(c(null!=(l=null!=t?t.interfaceLang:t)?l.name:l,t))+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-down",16,"wp-neutral-1",{name:"iconify",hash:{},data:s}))?l:"")+'\n            </button>\n            <div class="triangle"></div>\n            <ul id="language-options" class="dropdown-menu align-right columns">\n'+(null!=(l=n.each.call(i,null!=t?t.translatedLangs:t,{name:"each",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+'            </ul>\n        </div>\n    </div>\n</div>\n<div class="container">\n    <div class="row">\n        <div class="col-sm-6 col-md-7 center-text">\n            '+o((n.connectImage||t&&t.connectImage||r).call(i,"/landing/hero-devices.png","devices",{name:"connectImage",hash:{id:"phone-image"},data:s}))+'\n            <a href="'+o(c(null!=(l=null!=t?t.appUrl:t)?l.fallback:l,t))+'" role="button" data-toggle="modal" data-target="#get-app-modal" class="get-the-app btn btn-md btn-orange">'+o((n.trans||t&&t.trans||r).call(i,"Get the App",{name:"trans",hash:{},data:s}))+'</a>\n        </div>\n        <div class="col-sm-6 col-md-5 login-page-form-header">\n            <main id="authentication-panel" class="panel panel-transparent">\n                <div class="login-modal-wrapper">\n'+(null!=(l=e.invokePartial(a["core.authentication.auth_form"],t,{name:"core.authentication.auth_form",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'                </div>\n            </main>\n        </div>\n    </div>\n</div>\n\n<div id="get-app-modal-container">\n'+(null!=(l=e.invokePartial(a["core.components.get_app"],t,{name:"core.components.get_app",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(17)),s=l(n(321));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l){l.add("SignUpPrompt",l.views.Base.extend({className:"signup-modal login-modal",template:s.default,events:{"tap    .on-pw-toggle":"onPasswordToggle","tap    .on-close":"onClose","click  .on-close":"stopEvent","tap    .on-password-forgot":"onPasswordForgot","click  .on-password-forgot":"stopEvent","tap    .on-signup":"onSignup","click  .on-signup":"stopEvent","tap    .on-login":"onLogin","click  .on-login":"stopEvent","blur     select":"onBlurPicker"},initialize:function(t){t=t||{},this.nextUrl=n.utils.getNextUrl(t.nextUrl,e.location.href),this.nextUrlFirstPart=t.nextUrlFirstPart,this.title=t.title||null,this.subtitle=t.subtitle||null,this.bulletPoints=t.bulletPoints||null,this.form=t.form||"signup",this.forcedSignup=t.forcedSignup||!1,this.formType=t.formType||"sidebar",this.skipOnboarding=t.skipOnboarding||!1,this.libraryStoryId=t.libraryStoryId||null,Handlebars.registerPartial("core.authentication.auth_form",a.default)},render:function(){this.signupAction="https://"+e.location.hostname+(e.location.port?":"+e.location.port:"")+"/"+this.form;var a={title:this.title,subtitle:this.subtitle,bulletPoints:this.bulletPoints,signup:"signup"===this.form,login:"login"===this.form,forgot:"forgot"===this.form,nextUrl:this.nextUrl,nextUrlFirstPart:this.nextUrlFirstPart,signupFrom:n.utils.getCookie("signupFrom"),signupAction:this.signupAction,formType:this.formType,modal:-1!==this.formType.indexOf("modal"),skipOnboarding:this.skipOnboarding,libraryStoryId:this.libraryStoryId,forcedSignup:this.forcedSignup,model:new l.models.Authsignup({})};return this.$el.html(this.template(a)),this.$el.find("[autofocus]").focus(),t.defer(this.afterRender.bind(this)),this},afterRender:function(){this.$(".on-dob-hover").tooltip({trigger:"click hover manual",title:"We ask for your date of birth so you can have the right Wattpad experience for your age."})},onPasswordToggle:function(t){var n=$(t.currentTarget),a=n.siblings("input"),s=a.attr("type");e.clearTimeout(this.timeout),"password"===s&&(a.attr("type","text").focus(),n.addClass("active")),"text"===s&&(a.attr("type","password").focus(),n.removeClass("active"))},onClose:function(e){n.utils.setCookie("prSu",!0,0,null),$("#generic-modal").modal("hide")},onSignup:function(e){this.title=n.utils.trans("Join Wattpad"),this.form="signup",this.render(),n.utils.stopEvent(e)},onLogin:function(e){this.title=n.utils.trans("Sign in to Wattpad"),this.form="login",this.render(),n.utils.stopEvent(e)},onPasswordForgot:function(e){var t=$("#login-user").val();this.title=n.utils.trans("Lost your password?"),this.subtitle=n.utils.trans("Type your username or email below and we'll send you instructions on how to reset it."),this.form="forgot",this.render(),$("#forgot-email").prop("value",t)},onBlurPicker:function(e){var t=$(e.currentTarget),n=t.val(),a=t.closest(".form-group").data("attr");null===n&&this.model.validate(a)}})),l.mixin(l.views.SignUpPrompt,"ValidationView","FacebookConnect","GoogleAuth")}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.forcedSignup:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l;return"    <span class='close on-close'>\n      "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n    </span>\n"},4:function(e,t,n,a,s){return'    <div class="bookmark">\n        '+e.escapeExpression((n.connectImage||t&&t.connectImage||n.helperMissing).call(null!=t?t:e.nullContext||{},"retargeting/d-bookmark-icon@1x.png","bookmark",{name:"connectImage",hash:{},data:s}))+"\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.modal:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.forcedSignup:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"\n\n"+(null!=(l=e.invokePartial(a["core.authentication.auth_form"],t,{name:"core.authentication.auth_form",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a){a.add("OauthAuthentication",a.views.Base.extend({events:{"tap    .on-pw-toggle":"onPasswordToggle"},initialize:function(e){this.timeout=null},onPasswordToggle:function(t){var n=$(t.currentTarget),a=n.siblings("input"),s=a.attr("type");e.clearTimeout(this.timeout),"password"===s&&(a.attr("type","text").focus(),n.addClass("active")),"text"===s&&(a.attr("type","password").focus(),n.removeClass("active"))}})),a.mixin(a.views.OauthAuthentication,"ValidationView")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(324));!function(e,t,n,s){s.add("UpdatedPolicyNotice",s.views.Base.extend({className:"updated-policy-notice",template:a.default,events:{"tap    .on-continue":"onContinue","click  .on-continue":"stopEvent"},initialize:function(e){this.model=e.model,this.title=e.title||"",this.body=e.body||""},render:function(e){var t={title:this.title,body:this.body};return this.$el.html(this.template(t)),this},showModal:function(){var e=$("#generic-modal");e.find(".modal-body").html(this.render().$el),e.find(".modal-dialog").addClass("updated-policy-notice-modal"),e.modal({backdrop:"static",keyboard:!1})},hideModal:function(){var e=$("#generic-modal");e.modal("hide"),setTimeout(function(){e.find(".modal-dialog").removeClass("updated-policy-notice-modal")},500)},onContinue:function(){this.model.acceptLatestTermsOfService().then(function(e){e||new s.views.ErrorToast({message:n.utils.trans("Sorry, something went wrong. Please try again.")}).render()}),this.hideModal()}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<header class="panel-heading">\n  '+o((n.connectImage||t&&t.connectImage||r).call(i,"/shared/ic_terms.png","paper icon",{name:"connectImage",hash:{width:"55",height:"73",klass:"paper-icon"},data:s}))+"\n  <h4>"+o((n.trans||t&&t.trans||r).call(i,null!=t?t.title:t,{name:"trans",hash:{},data:s}))+'</h4>\n</header>\n\n<div class="panel-body">\n  <p>'+(null!=(l=(n.trans||t&&t.trans||r).call(i,null!=t?t.body:t,{name:"trans",hash:{},data:s}))?l:"")+'</p>\n  <div class="buttons-wrapper">\n      <a href="https://support.wattpad.com/hc/en-us/articles/360000812323-Updates-to-our-Terms-of-Service-and-Privacy-Policy" class="policies-link">  \n        <button class="btn btn-default learn-more"> \n          '+o((n.trans||t&&t.trans||r).call(i,"Learn more",{name:"trans",hash:{},data:s}))+'\n        </button>\n      </a>\n    <button class="btn btn-orange on-continue">'+o((n.trans||t&&t.trans||r).call(i,"Got it",{name:"trans",hash:{},data:s}))+"</button>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("Landing",a.views.DummyReactView.extend({component:"LandingPage",componentId:"landing-page",constructor:function(e){this.componentData={locale:n.utils.getCookie("locale"),page:e.page,model:e.model,mobile:e.mobile};var t={componentData:this.componentData,component:this.component,componentId:this.componentId};a.views.DummyReactView.call(this,t)}})),a.mixin(a.views.Landing,"FacebookConnect","GoogleAuth")}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(327));!function(e,t,n,s,l,i,r){i.add("UserItem",i.views.Base.extend({className:"col-md-3 col-sm-4 col-xs-6 ",template:a.default,events:{"tap  .on-dismiss":"onRemoveFollower"},initialize:function(e){e=e||{},this.showRemove=e.showRemoveFollower,this.listenTo(i,"app:user:follow",this.updateToFollowingButton),this.listenTo(i,"app:user:unfollow",this.updateToFollowButton)},render:function(){var e=t.extend(this.model.toJSON(),{showRemove:this.showRemove}),n=this;return e.disabled=void 0===this.model.get("following"),e.disabled&&Promise.resolve(this.model.determineFollowStatus()).then(function(){e=t.extend(n.model.toJSON(),{showRemove:n.showRemove}),n.$el.html(n.template(e))}),this.$el.html(this.template(e)),this},updateToFollowingButton:function(e){if(this.model.get("username")===e){var t=this.$('.btn-fan[data-target="'+e+'"]');t.removeClass("btn-white").addClass("btn-teal"),t.find(".fa").removeClass("fa-follow fa-wp-base-2-dark").addClass("fa-following fa-wp-neutral-5"),t.find(".truncate").text(l.trans("Following")),this.model.set("following",!0)}},updateToFollowButton:function(e){if(this.model.get("username")===e){var t=this.$('.btn-fan[data-target="'+e+'"]');t.removeClass("btn-teal").addClass("btn-white"),t.find(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-base-2-dark"),t.find(".truncate").text(l.trans("Follow")),this.model.set("following",!1)}},onRemoveFollower:function(){var e=this;this.model.deleteFollower().then(function(){e.model.collection&&e.model.collection.remove(e.model)})},onNavigate:function(){i.router.navigate("/user/"+this.model.get("username"),{trigger:!0})},stopEvent:function(e){l.stopEvent(e)}})),i.mixin(i.views.UserItem,"FollowManager")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'    <button class="btn btn-no-background btn-remove on-dismiss"\n            data-target="'+e.escapeExpression("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"</button>\n"},3:function(e,t,n,a,s){return'    <div class="background background-sm" style="background-image: url( \''+e.escapeExpression((n.profileBackground||t&&t.profileBackground||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.backgroundUrl:t,360,{name:"profileBackground",hash:{},data:s}))+"' );\"></div>\n"},5:function(e,t,n,a,s){var l;return'    <div class="background background-sm" '+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.highlight_colour:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"></div>\n"},6:function(e,t,n,a,s){var l;return'style="background-color: '+e.escapeExpression("function"==typeof(l=null!=(l=n.highlight_colour||(null!=t?t.highlight_colour:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"highlight_colour",hash:{},data:s}):l)+'"'},8:function(e,t,n,a,s){var l;return"          "+e.escapeExpression("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:s}):l)+"\n"},10:function(e,t,n,a,s){var l;return"          "+e.escapeExpression("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"username",hash:{},data:s}):l)+"\n"},12:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||r).call(i,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||r).call(i,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.noop,inverse:e.program(15,s,0),data:s}))?l:"")+"\n"},13:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <a class="btn btn-block btn-md btn-teal on-navigate" href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-user",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"View My Profile",{name:"trans",hash:{},data:s}))+"\n        </a>\n"},15:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='        <button class="btn btn-fan btn-md btn-block '+(null!=(l=n.if.call(o,null!=t?t.following:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.program(18,s,0),data:s}))?l:"")+" ";return i=null!=(i=n.disabled||(null!=t?t.disabled:t))?i:c,r={name:"disabled",hash:{},fn:e.program(20,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.disabled||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'" data-target="'+u("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)?i.call(o,{name:"username",hash:{},data:s}):i)+'" data-following="'+u("function"==typeof(i=null!=(i=n.following||(null!=t?t.following:t))?i:c)?i.call(o,{name:"following",hash:{},data:s}):i)+'" role="button">\n'+(null!=(l=n.if.call(o,null!=t?t.following:t,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.program(24,s,0),data:s}))?l:"")+"        </button>\n"},16:function(e,t,n,a,s){return"btn-teal"},18:function(e,t,n,a,s){return"btn-white"},20:function(e,t,n,a,s){return"disabled"},22:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-following",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'<span class="truncate">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Following",{name:"trans",hash:{},data:s}))+"</span>\n"},24:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-follow",16,"wp-base-2-dark",{name:"iconify",hash:{},data:s}))?l:"")+'<span class="truncate">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Follow",{name:"trans",hash:{},data:s}))+"</span>\n"},26:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"        <div>\n            <h5>"+o("function"==typeof(l=null!=(l=n.numStoriesPublished||(null!=t?t.numStoriesPublished:t))?l:r)?l.call(i,{name:"numStoriesPublished",hash:{},data:s}):l)+'</h5>\n            <small class="x-small">'+o((n.trans||t&&t.trans||r).call(i,"Works",{name:"trans",hash:{},data:s}))+"</small>\n        </div>\n"},28:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.numLists:t,{name:"if",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:""},29:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"        <div>\n            <h5>"+o("function"==typeof(l=null!=(l=n.numLists||(null!=t?t.numLists:t))?l:r)?l.call(i,{name:"numLists",hash:{},data:s}):l)+'</h5>\n            <small class="x-small">'+o((n.trans||t&&t.trans||r).call(i,"Lists",{name:"trans",hash:{},data:s}))+"</small>\n        </div>\n"},31:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return"        <div>\n            <h5>"+r((n.count||t&&t.count||i).call(l,null!=t?t.numFollowing:t,{name:"count",hash:{},data:s}))+'</h5>\n            <small class="x-small">'+r((n.trans||t&&t.trans||i).call(l,"Following",{name:"trans",hash:{},data:s}))+"</small>\n        </div>\n"},33:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return"        <div>\n            <h5>"+r((n.count||t&&t.count||i).call(l,null!=t?t.numFollowers:t,{name:"count",hash:{},data:s}))+'</h5>\n            <small class="x-small">'+r((n.trans||t&&t.trans||i).call(l,"Followers",{name:"trans",hash:{},data:s}))+"</small>\n        </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u="function",d=e.escapeExpression,h='<article class="user-card">\n'+(null!=(l=n.if.call(o,null!=t?t.showRemove:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(o,null!=t?t.backgroundUrl:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+'    <a class="avatar avatar-lg on-navigate" href="/user/'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'">\n        <img src="'+d(typeof(i=null!=(i=n.avatar||(null!=t?t.avatar:t))?i:c)===u?i.call(o,{name:"avatar",hash:{},data:s}):i)+'"></a>\n    <div class="content">\n        <h5><a class="alt-link on-navigate" href="/user/'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'">\n'+(null!=(l=n.if.call(o,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.program(10,s,0),data:s}))?l:"")+"        </a></h5>\n        <small>@"+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+"</small>\n\n\n";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:c,r={name:"isLoggedIn",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s},l=typeof i===u?i.call(o,r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(h+=l),h+"    </div>\n\n    <footer>\n"+(null!=(l=n.if.call(o,null!=t?t.numStoriesPublished:t,{name:"if",hash:{},fn:e.program(26,s,0),inverse:e.program(28,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.if.call(o,null!=t?t.numFollowing:t,{name:"if",hash:{},fn:e.program(31,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(o,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(33,s,0),inverse:e.noop,data:s}))?l:"")+"    </footer>\n\n</article>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(329));!function(e,t,n,s,l,i,r){i.add("UserRowItem",i.views.Base.extend({className:"col-xs-12",template:a.default,events:{"tap    .on-navigate":"onNavigate","click  .on-navigate":"stopEvent","tap    .on-remove-follower":"onRemoveFollower","click  .on-remove-follower":"stopEvent"},initialize:function(e){e=e||{},this.showRemoveFollowersOption=e.showRemoveFollowersOption},render:function(){var e=this.model.toJSON(),n={},a=[],s=this;return e.numStoriesPublished&&a.push(l.sprintf(l.ngettext("%s Work","%s Works",e.numStoriesPublished),[l.count(e.numStoriesPublished)])),e.numLists&&a.push(l.sprintf(l.ngettext("%s Reading List","%s Reading Lists",e.numLists),[l.count(e.numLists)])),a.length<2&&e.numFollowers&&a.push(l.sprintf(l.ngettext("%s Follower","%s Followers",e.numFollowers),[l.count(e.numFollowers)])),n.metadata=a,n.showRemoveFollowersOption=this.showRemoveFollowersOption,e.disabled=void 0===this.model.get("following"),e.disabled&&Promise.resolve(this.model.determineFollowStatus()).then(function(){s.$el.html(s.template(t.extend(n,s.model.toJSON())))}),this.$el.html(this.template(t.extend(n,e))),this},onRemoveFollower:function(e){var t=this,n=this.model.get("name")||this.model.get("username"),a=l.trans("Are you sure you want to remove your follower %s?",n);confirm(a)&&this.model.deleteFollower().then(function(){t.model.collection&&t.model.collection.remove(t.model)})},onNavigate:function(){i.router.navigate("/user/"+this.model.collection.username,{replace:!0}),i.router.navigate("/user/"+this.model.get("username"),{trigger:!0})}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" truncate-width"},3:function(e,t,n,a,s){var l;return" "+e.escapeExpression("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:s}):l)+" "},5:function(e,t,n,a,s){var l;return" "+e.escapeExpression("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"username",hash:{},data:s}):l)+" "},7:function(e,t,n,a,s){return" <li>"+e.escapeExpression(e.lambda(t,t))+"</li> "},9:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div class="follow">\n'+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||r).call(i,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||r).call(i,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.noop,inverse:e.program(12,s,0),data:s}))?l:"")+"\n</div>\n"},10:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'  <a class="btn btn-block btn-teal on-navigate" href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n    '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-user",14,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'\n    <span class="truncate">'+c((n.trans||t&&t.trans||o).call(r,"View My Profile",{name:"trans",hash:{},data:s}))+"</span>\n  </a>\n"},12:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='  <button class="btn btn-fan '+(null!=(l=n.if.call(o,null!=t?t.following:t,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.program(15,s,0),data:s}))?l:"")+" ";return i=null!=(i=n.disabled||(null!=t?t.disabled:t))?i:c,r={name:"disabled",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.disabled||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'" data-target="'+u("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)?i.call(o,{name:"username",hash:{},data:s}):i)+'" data-following="'+u("function"==typeof(i=null!=(i=n.following||(null!=t?t.following:t))?i:c)?i.call(o,{name:"following",hash:{},data:s}):i)+'" role="button">\n'+(null!=(l=n.if.call(o,null!=t?t.following:t,{name:"if",hash:{},fn:e.program(19,s,0),inverse:e.program(21,s,0),data:s}))?l:"")+"  </button>\n\n"+(null!=(l=n.if.call(o,null!=t?t.showRemoveFollowersOption:t,{name:"if",hash:{},fn:e.program(23,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},13:function(e,t,n,a,s){return"btn-teal"},15:function(e,t,n,a,s){return"btn-white"},17:function(e,t,n,a,s){return"disabled"},19:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"      "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-following",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'<span class="truncate">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Following",{name:"trans",hash:{},data:s}))+"</span>\n"},21:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"      "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-follow",16,"wp-base-2-dark",{name:"iconify",hash:{},data:s}))?l:"")+'<span class="truncate">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Follow",{name:"trans",hash:{},data:s}))+"</span>\n"},23:function(e,t,n,a,s){var l;return'  <button class="btn on-remove-follower">\n    '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-remove",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"\n  </button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u="function",d=e.escapeExpression,h=n.blockHelperMissing,p='<div class="pull-left">\n  <a class="avatar avatar-sm3 on-navigate" href="/user/'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'">\n    <img alt="'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'" src="'+d(typeof(i=null!=(i=n.avatar||(null!=t?t.avatar:t))?i:c)===u?i.call(o,{name:"avatar",hash:{},data:s}):i)+'">\n  </a>\n</div>\n\n<div class="user-data pull-left';return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:c,r={name:"isLoggedIn",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l=typeof i===u?i.call(o,r):i,n.isLoggedIn||(l=h.call(t,l,r)),null!=l&&(p+=l),p+='">\n  <a class="alt-link on-navigate fullname" href="/user/'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'">\n    '+(null!=(l=n.if.call(o,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+'\n    <span class="username">@'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+"</span>\n  </a>\n\n  <ul>\n    "+(null!=(l=n.each.call(o,null!=t?t.metadata:t,{name:"each",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"\n  </ul>\n</div>\n\n",i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:c,r={name:"isLoggedIn",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s},l=typeof i===u?i.call(o,r):i,n.isLoggedIn||(l=h.call(t,l,r)),null!=l&&(p+=l),p},useData:!0})},function(e,t,n){"use strict";var a=l(n(15)),s=l(n(331));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r){r.add("ReadingListItem",r.views.Base.extend({className:"reading-list",template:s.default,events:{"mouseover  .on-story-details":"onStoryDetails","mouseleave .popover":"offStoryDetails","mouseleave .panel-body":"offStoryDetails","tap    .send-list-event":"sendListClickTrackingEvent","click  .send-list-event":"stopEvent","tap    .story-item":"sendStoryClickTrackingEvent","click  .story-item":"stopEvent"},initialize:function(){this.collection=this.model.stories(5);var e=this;Promise.resolve(this.collection.fetchNextSet()).then(function(){e.render()}),Handlebars.registerPartial("core.item_views.discover_module_stories_small",a.default)},render:function(){var e=this;return this.$el.html(this.template(this.formatViewData())),t.defer(function(){e.$('[data-toggle="tooltip"]').tooltip()}),this},formatViewData:function(){var e=this.model.toJSON();return t.extend(e,{storyItems:this.collection.toJSON().splice(0,5)}),e},onStoryDetails:function(t){var a=n(t.currentTarget).siblings(".popover");this.offStoryDetails(),a.css("display","block"),e.setTimeout(function(){a.removeClass("faded")},50)},offStoryDetails:function(){this.$(".popover").removeAttr("style").addClass("faded")},sendListClickTrackingEvent:function(){e.te.push("event","profile","reading_list","list","click",{reading_listid:this.collection.listId,username:this.model.get("user").name})},sendStoryClickTrackingEvent:function(t){e.te.push("event","profile","reading_list","story","click",{reading_listid:this.collection.listId,storyid:n(t.currentTarget).data("story-id"),username:this.model.get("user").name})}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i;return'    <div class="story-item hide" data-story-id="'+e.escapeExpression("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:s}):i)+'">\n'+(null!=(l=e.invokePartial(a["core.item_views.discover_module_stories_small"],t,{name:"core.item_views.discover_module_stories_small",hash:{hideAuthor:!0,titleCharLimit:30,isDesktop:!0,coverSize:"cover-md"},data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<header class="panel-heading">\n  <div class="panel-title">\n    <a class="send-list-event on-navigate" href="/list/'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"-"+c((n.slugify||t&&t.slugify||o).call(r,null!=t?t.name:t,{name:"slugify",hash:{},data:s}))+'">'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+"</a>\n    "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-right",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n  </div>\n\n  <ul class="metadata">\n    <li>'+c((n.trans||t&&t.trans||o).call(r,"Reading List",{name:"trans",hash:{},data:s}))+"</li>\n    <li>"+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStories:t,{name:"sprintf",hash:{},data:s}))+'</li>\n  </ul>\n</header>\n\n<div class="panel-body">\n  <div id="preview-modal"></div>\n'+(null!=(l=n.each.call(r,null!=t?t.storyItems:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(333));!function(e,t,n,s,l,i,r){i.add("StoryGridItem",i.views.Base.extend({className:"col-sm-2 col-xs-4 story-item story text-center",template:a.default,render:function(){var e=this.model.toJSON();return e.url=l.formatStoryUrl(this.model.get("url")),e.description&&(e.description=l.sanitizeHTML(e.description)),this.$el.html(this.template(e)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'              <span class="rank">#'+o("function"==typeof(l=null!=(l=n.rank||(null!=t?t.rank:t))?l:r)?l.call(i,{name:"rank",hash:{},data:s}):l)+" in "+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+"</span>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"        <time>"+o((n.trans||t&&t.trans||r).call(i,"Completed",{name:"trans",hash:{},data:s}))+" "+o((n.fromNow||t&&t.fromNow||r).call(i,null!=(l=null!=t?t.lastPublishedPart:t)?l.createDate:l,{name:"fromNow",hash:{},data:s}))+"</time>\n"},5:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"        <time>"+o((n.trans||t&&t.trans||r).call(i,"Last updated",{name:"trans",hash:{},data:s}))+" "+o((n.fromNow||t&&t.fromNow||r).call(i,null!=(l=null!=t?t.lastPublishedPart:t)?l.createDate:l,{name:"fromNow",hash:{},data:s}))+"</time>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<a href="'+(null!=(l=(n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))?l:"")+'" data-index="'+c("function"==typeof(i=null!=(i=n.index||s&&s.index)?i:o)?i.call(r,{name:"index",hash:{},data:s}):i)+'" class="cover cover-sm center-block on-navigate">\n    <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,96,{name:"resizeCover",hash:{},data:s}))+'" aria-hidden="true" alt="'+c((n.trans||t&&t.trans||o).call(r,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n</a>\n<strong><a class="on-navigate" href="'+(null!=(l=(n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))?l:"")+'">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'</a></strong>\n\n<div class="popover bottom">\n    <div class="arrow"></div>\n    <h3 class="popover-title"><a href="'+(null!=(l=(n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))?l:"")+'">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'</a></h3>\n    <div class="popover-content">\n        <div class="meta">\n            <span class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",14,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+'</span>\n            <span class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",14,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+'</span>\n            <span class="comments">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-comment",14,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.commentCount:t,{name:"count",hash:{},data:s}))+"</span>\n        </div>\n        <p>"+c((n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,105,{name:"simpleShorten",hash:{},data:s}))+'</p>\n        <div class="rankings">\n'+(null!=(l=n.each.call(r,null!=t?t.rankings:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'        </div>\n        <span class="rating rating-'+c("function"==typeof(i=null!=(i=n.rating||(null!=t?t.rating:t))?i:o)?i.call(r,{name:"rating",hash:{},data:s}):i)+'" aria-label="'+c((n.getStoryRating||t&&t.getStoryRating||o).call(r,null!=t?t.rating:t,{name:"getStoryRating",hash:{},data:s}))+'."></span>\n'+(null!=(l=n.if.call(r,null!=t?t.completed:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+"    </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(335));!function(e,t,n,s,l,i,r){i.add("StoryGrid",i.views.IncrementalList.extend({className:"story-grid",template:a.default,itemView:i.views.StoryGridItem,events:t.extend({"mouseover  .on-story-details":"onStoryDetails","mouseleave .popover":"offStoryDetails","mouseleave .panel-body":"offStoryDetails"},i.views.IncrementalList.prototype.events),getTemplateData:function(){return{stories:this.collection.toJSON()}},onStoryDetails:function(t){var a=n(t.currentTarget).siblings(".popover");this.offStoryDetails(),a.css("display","block"),e.setTimeout(function(){a.removeClass("faded")},50)},offStoryDetails:function(){this.$(".popover").removeAttr("style").addClass("faded")},render:function(){var e=this;return Promise.resolve(this.collection.fetchNextSet()).then(function(){i.views.IncrementalList.prototype.render.apply(e,arguments)}),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){return'<div class=\'collection panel-body\'>\n\n</div>\n<div class="show-more hidden center-text">\n  <button class="btn btn-link on-showmore"><strong>'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Show More",{name:"trans",hash:{},data:s}))+"</strong></button>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=v(n(18)),l=v(n(337)),i=v(n(338)),r=v(n(339)),o=v(n(19)),c=v(n(340)),u=v(n(341)),d=v(n(342)),h=v(n(343)),p=v(n(344)),m=v(n(345)),f=v(n(346)),g=v(n(347));function v(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,v){v.add("NotificationEvent",v.views.Base.extend({templates:{follow:g.default,follower_approved:f.default,vote:m.default,message:p.default,comment:h.default,inline_comment:h.default,dedicate:d.default,library:u.default,upload:c.default,base:o.default,error:r.default,forum_post:i.default,friend_join:l.default},trackingEvents:{follow:"new_followers",follower_approved:"follow_approved",vote:"votes",message:{default:"profile_posts",replies:"replies",mentions:"mentions",broadcast:"announcements"},comment:{default:"comments",replies:"replies",mentions:"mentions"},inline_comment:{default:"comments",replies:"replies",mentions:"mentions"},dedicate:"dedications",library:"reading_list_adds",upload:"story_updates",friend_join:"friend_joins"},template:null,events:{"click .show-full":"stopEvent","tap  .show-full":"showFullMessage","click .expanded-text":"stopEvent","tap  .expanded-text":"navigateTo","tap .on-notification-click":"navigateAndSendTracking","click .on-notification-click":"stopEvent","tap  .on-delete":"onDeleteComment","click  .on-delete":"stopEvent","tap  .on-report":"onReportComment","click  .on-report":"stopEvent"},reportModalContainer:".comment-report-modal",modalTitle:t.utils.trans("Report a Comment"),requestType:"inappropriate_comments",isMainReportModal:!1,initialize:function(){Handlebars.registerPartial("core.item_views.comment_item_options",s.default),this.template=this.templates[this.model.get("type")]},render:function(){var e=this.model.get("data"),a=this.model.get("type");if(e.createDate=this.model.get("createDate"),e.isRead=this.model.get("isRead"),e.id=this.model.get("id"),e.isNotification=!1,["comment","inline_comment","message"].includes(a)){var s=e.comment||e.message;this.hasMentions=!_.isEmpty(n.getMentions(s.body)),e.hasMentions=this.hasMentions}"message"===a&&(e.toMe=this.model.collection.username===e.message.to.name,e.theirFeed=e.message.from.name===e.message.to.name),this.model.get("children").length>0&&(e.children=this.model.get("children").length+1,e.groupUrl=this.model.get("group_url"));var l="";if("message"===a&&void 0!==e.message){var i=v.get("device");l=e.message.body,i.is.mobile,e.navigateTo="/user/"+e.message.to.name+"/conversations#"+e.message.id}else if(("inline_comment"===a||"comment"===a)&&void 0!==e.comment&&(l=e.comment.body,e.navigateTo=e.comment.deeplink_url.substring(23),e.isCommentNotification=!0,t.utils.currentUser().authenticated())){var r=t.utils.currentUser().get("ambassador")||t.utils.currentUser().get("isSysAdmin"),o=e.comment.user.name===t.utils.currentUser().get("username");e.canDelete=r||o}return e.maxTextLength=465,e.isTruncated=l.length>e.maxTextLength,this.$el.html(this.template(e)),this},showFullMessage:function(e){var t=this.model.get("type");"message"!==t&&"comment"!==t&&"inline_comment"!==t||this.model.get("data").isTruncated&&(this.$el.find(".shown-message").addClass("hidden"),this.$el.find(".show-full").addClass("hidden"),this.$el.find(".full-message").removeClass("hidden").addClass("expanded-text"));n.stopEvent(e)},navigateTo:function(e){var t=this.model.get("type");if("message"===t||"comment"===t||"inline_comment"===t){var n=this.model.get("data");void 0!==n.navigateTo&&v.router.navigate(n.navigateTo,{trigger:!0})}this.sendTrackingEvent()},navigateAndSendTracking:function(e){this.sendTrackingEvent(),v.views.Base.prototype.onNavigate.apply(this,arguments)},sendTrackingEvent:function(){var t=this.trackingEvents[this.model.get("type")],n=this.model.get("data");t&&"object"===(void 0===t?"undefined":a(t))&&(t=this.hasMentions?t.mentions:n.message&&n.message.wasBroadcast?t.broadcast:n.comment&&n.comment.parentId||n.message&&n.message.parentId?t.replies:t.default),e.te.push("event","notifications_feed","item",null,"click",{notification_type:t,storyid:n.story&&n.story.id?n.story.id:null,username:n.message&&n.message.from?n.message.from.name:null,reading_listid:n.list&&n.list.id?n.list.id:null})},onDeleteComment:function(a){n.stopEvent(a);var s=this.model.get("data").comment;if(e.te.push("event","notifications_feed","comment",null,"delete",{commenter_username:s.user.name,commentid:s.id,partid:this.model.get("data").story.part.id}),e.confirm(t.utils.trans("Are you sure you want to delete this comment?"))){var l=new v.models.CommentModel({id:s.id,parentId:null});return Promise.resolve(l.destroy()).then(function(t){e.location.reload()})}},onReportComment:function(t){var n=this.model.get("data").comment;e.te.push("event","notifications_feed","comment",null,"report",{commenter_username:n.user.name,commentid:n.id,partid:this.model.get("data").story.part.id})}})),v.mixin(v.views.NotificationEvent,"ReportManagement","ReportConduct")}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" unread"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.lambda,c=e.escapeExpression,u=n.helperMissing;return'<article class="notification follower panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+c(o(null!=(l=null!=t?t.friend:t)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||u).call(r,null!=(l=null!=t?t.friend:t)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="/user/'+c(o(null!=(l=null!=t?t.friend:t)?l.name:l,t))+'" class="on-notification-click content">\n        <div class="heading">'+(null!=(l=(n.trans||t&&t.trans||u).call(r,"Your Facebook friend <strong>%s</strong> has joined Wattpad",null!=(l=null!=t?t.friend:t)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"</div>\n\n        "+(null!=(l=(n.iconify||t&&t.iconify||u).call(r,"fa-user",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||u).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n    </a>\n</article>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<article class="notification aggregate message panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <div class="on-expand" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        <div class="count">'+c("function"==typeof(i=null!=(i=n.children||(null!=t?t.children:t))?i:o)?i.call(r,{name:"children",hash:{},data:s}):i)+'</div>\n        <div class="content">\n            <div class="heading">'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"There are <strong>%s new comments</strong> on club thread <strong>%s</strong>",null!=t?t.children:t,null!=(l=null!=t?t.discussion:t)?l.discussion:l,{name:"trans",hash:{},data:s}))?l:"")+"</div>\n            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-following",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'<time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:o)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||o).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n        </div>\n    </div>\n</article>\n\n"},2:function(e,t,n,a,s){return" unread"},4:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.lambda,c=e.escapeExpression,u=n.helperMissing;return'\x3c!-- Individual Message --\x3e\n<article class="notification message panel '+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+c(o(null!=(l=null!=t?t.user:t)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||u).call(r,null!=(l=null!=t?t.user:t)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="'+c(o(null!=(l=null!=t?t.discussion:t)?l.url:l,t))+'" class="content">\n        <div class="heading">\n            '+(null!=(l=(n.trans||t&&t.trans||u).call(r,"<strong>%s</strong> commented on club thread <strong>%s</strong>",null!=(l=null!=t?t.user:t)?l.name:l,null!=(l=null!=t?t.discussion:t)?l.discussion:l,{name:"trans",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.iconify||t&&t.iconify||u).call(r,"fa-users",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||u).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n            <p>"+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||u).call(r,null!=(l=null!=t?t.discussion:t)?l.body:l,140,!0,{name:"simpleShorten",hash:{doUrl:!1,doTag:!1},data:s}))?l:"")+"</p>\n        </div>\n    </a>\n</article>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.children:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){return"<pre>\nNot supported!\n</pre>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" unread"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.lambda,c=e.escapeExpression,u=n.helperMissing;return'<article class="notification upload panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||u).call(r,null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="'+c(o(null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.url:l,t))+'" class="on-notification-click content">\n        <div class="heading">\n            '+(null!=(l=(n.trans||t&&t.trans||u).call(r,"<strong>%1$s</strong> updated <strong>%2$s</strong> - <strong>%3$s</strong>",null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.name:l,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))?l:"")+"\n        </div>\n\n        "+(null!=(l=(n.iconify||t&&t.iconify||u).call(r,"fa-story",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||u).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+'</time>\n\n        <div class="cover cover-xxs">\n            <img src="'+c((n.resizeCover||t&&t.resizeCover||u).call(r,null!=(l=null!=t?t.story:t)?l.cover:l,30,{name:"resizeCover",hash:{},data:s}))+'">\n        </div>\n    </a>\n</article>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" unread"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.lambda,c=e.escapeExpression,u=n.helperMissing;return'\x3c!-- Added to Reading List --\x3e\n<article class="notification list panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n      <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||u).call(r,null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="/list/'+c(o(null!=(l=null!=t?t.list:t)?l.id:l,t))+"-"+c((n.slugify||t&&t.slugify||u).call(r,null!=(l=null!=t?t.list:t)?l.name:l,{name:"slugify",hash:{},data:s}))+'" class="on-notification-click content">\n        <div class="heading">\n            '+(null!=(l=(n.trans||t&&t.trans||u).call(r,"<strong>%s</strong> added <strong>%s</strong> to <strong>%s</strong>",null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=t?t.list:t)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n        </div>\n        "+(null!=(l=(n.iconify||t&&t.iconify||u).call(r,"fa-story",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||u).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n    </a>\n</article>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" unread"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.escapeExpression,c=n.helperMissing;return'\x3c!-- Individual Dedication --\x3e\n<article class="notification dedication panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+o(e.lambda(null!=(l=null!=t?t.dedicator:t)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n      <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||c).call(r,null!=(l=null!=t?t.dedicator:t)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||c).call(r,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-notification-click content">\n        <div class="heading">\n          '+(null!=(l=(n.trans||t&&t.trans||c).call(r,"<strong>%s</strong> dedicated <strong>%s - %s</strong> to you",null!=(l=null!=t?t.dedicator:t)?l.name:l,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))?l:"")+"\n        </div>\n        "+(null!=(l=(n.iconify||t&&t.iconify||c).call(r,"fa-dedicate",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <time datetime="'+o("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:c)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+o((n.calendar||t&&t.calendar||c).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+'</time>\n        <div class="cover cover-xxs">\n            <img src="'+o((n.resizeCover||t&&t.resizeCover||c).call(r,null!=(l=null!=t?t.story:t)?l.cover:l,28,{name:"resizeCover",hash:{},data:s}))+'">\n        </div>\n    </a>\n</article>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" unread"},3:function(e,t,n,a,s){var l;return"          "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%1$s</strong> mentioned you in a comment on <strong>%2$s - %3$s</strong>",null!=(l=null!=(l=null!=t?t.comment:t)?l.user:l)?l.name:l,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},5:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.comment:t)?l.parentId:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:""},6:function(e,t,n,a,s){var l;return"          "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%1$s</strong> replied to a comment on <strong>%2$s - %3$s</strong>",null!=(l=null!=(l=null!=t?t.comment:t)?l.user:l)?l.name:l,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},8:function(e,t,n,a,s){var l;return"          "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%1$s</strong> commented on <strong>%2$s - %3$s</strong>",null!=(l=null!=(l=null!=t?t.comment:t)?l.user:l)?l.name:l,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))?l:"")+"\n        "},10:function(e,t,n,a,s){return"expanded-text"},12:function(e,t,n,a,s){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.escapeExpression,c=n.helperMissing;return'\x3c!-- Individual Comment --\x3e\n<article class="notification comment panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n  <a href="/user/'+o(e.lambda(null!=(l=null!=(l=null!=t?t.comment:t)?l.user:l)?l.name:l,t))+'" class="on-navigate avatar avatar-sm2">\n      <img src="'+(null!=(l=(n.resizeAvatar||t&&t.resizeAvatar||c).call(r,null!=(l=null!=(l=null!=t?t.comment:t)?l.user:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))?l:"")+'">\n  </a>\n  <div class="content">\n'+(null!=(l=e.invokePartial(a["core.item_views.comment_item_options"],t,{name:"core.item_views.comment_item_options",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'\n    <a href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||c).call(r,null!=(l=null!=t?t.comment:t)?l.deeplink_url:l,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-notification-click">\n      <div class="heading">\n'+(null!=(l=n.if.call(r,null!=t?t.hasMentions:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+"      </div>\n    </a>\n\n    "+(null!=(l=(n.iconify||t&&t.iconify||c).call(r,"fa-comment",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <time datetime="'+o("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:c)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+o((n.calendar||t&&t.calendar||c).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+'</time>\n\n    <p class="shown-message '+(null!=(l=n.unless.call(r,null!=t?t.isTruncated:t,{name:"unless",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+'">\n        '+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||c).call(r,null!=(l=null!=t?t.comment:t)?l.body:l,null!=t?t.maxTextLength:t,!0,{name:"simpleShorten",hash:{doUrl:!1,doTag:!1},data:s}))?l:"")+'\n      <span class="show-full'+(null!=(l=n.unless.call(r,null!=t?t.isTruncated:t,{name:"unless",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+'"><strong>'+o((n.trans||t&&t.trans||c).call(r,"more",{name:"trans",hash:{},data:s}))+'</strong></span>\n      </p>\n    <p class="hidden full-message">'+(null!=(l=(n.linkify||t&&t.linkify||c).call(r,null!=(l=null!=t?t.comment:t)?l.body:l,{name:"linkify",hash:{},data:s}))?l:"")+"</p>\n  </div>\n</article>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'  <article class="notification aggregate message panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <div class="on-expand" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n      <div class="count">'+c("function"==typeof(i=null!=(i=n.children||(null!=t?t.children:t))?i:o)?i.call(r,{name:"children",hash:{},data:s}):i)+'</div>\n      <div class="content">\n        <div class="heading">\n          '+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"You have %s new announcement","You have %s new announcements",null!=t?t.children:t,{name:"ngettext",hash:{},data:s}),null!=t?t.children:t,{name:"sprintf",hash:{},data:s}))+"\n        </div>\n        "+c((n.connectImage||t&&t.connectImage||o).call(r,"shared/megaphone_grey.png","announcement notification",{name:"connectImage",hash:{height:"11px",width:"17px",id:"megaphone-icon"},data:s}))+'\n        <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:o)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||o).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n      </div>\n    </div>\n  </article>\n\n"},2:function(e,t,n,a,s){return" unread"},4:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.lambda,c=e.escapeExpression,u=n.helperMissing;return'<article class="notification message panel'+(null!=(l=n.if.call(r,null!=(l=null!=t?t.message:t)?l.isReply:l,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||u).call(r,null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <div class="content '+(null!=(l=n.unless.call(r,null!=t?t.isTruncated:t,{name:"unless",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'">\n      <div class="heading">\n        <a href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.message:t)?l.to:l)?l.name:l,t))+'" class="on-navigate">\n'+(null!=(l=n.if.call(r,null!=t?t.hasMentions:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.program(18,s,0),data:s}))?l:"")+"        </a>\n      </div>\n\n"+(null!=(l=n.if.call(r,null!=(l=null!=t?t.message:t)?l.wasBroadcast:l,{name:"if",hash:{},fn:e.program(32,s,0),inverse:e.program(34,s,0),data:s}))?l:"")+'\n      <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||u).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+'</time>\n\n      <p class="shown-message">\n        '+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||u).call(r,null!=(l=null!=t?t.message:t)?l.body:l,null!=t?t.maxTextLength:t,!0,{name:"simpleShorten",hash:{doUrl:!1,doTag:!1},data:s}))?l:"")+'\n        <span class="show-full'+(null!=(l=n.unless.call(r,null!=t?t.isTruncated:t,{name:"unless",hash:{},fn:e.program(36,s,0),inverse:e.noop,data:s}))?l:"")+'"><strong>'+c((n.trans||t&&t.trans||u).call(r,"more",{name:"trans",hash:{},data:s}))+'</strong></span>\n      </p>\n      <p class="hidden full-message">'+(null!=(l=(n.linkify||t&&t.linkify||u).call(r,null!=(l=null!=t?t.message:t)?l.body:l,{name:"linkify",hash:{},data:s}))?l:"")+"</p>\n\n    </div>\n</article>\n"},5:function(e,t,n,a,s){return" reply"},7:function(e,t,n,a,s){return"expanded-text"},9:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.message:t)?l.wasBroadcast:l,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.program(12,s,0),data:s}))?l:""},10:function(e,t,n,a,s){var l;return"              "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%s</strong> mentioned you on their feed",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},12:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.theirFeed:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.program(13,s,0),data:s}))?l:""},13:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.toMe:t,{name:"if",hash:{},fn:e.program(14,s,0),inverse:e.program(16,s,0),data:s}))?l:""},14:function(e,t,n,a,s){var l;return"              "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%s</strong> mentioned you on your feed",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},16:function(e,t,n,a,s){var l;return"              "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%1$s</strong> mentioned you on <strong>%2$s</strong>&#39;s feed",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,null!=(l=null!=(l=null!=t?t.message:t)?l.to:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n            "},18:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.message:t)?l.wasBroadcast:l,{name:"if",hash:{},fn:e.program(19,s,0),inverse:e.program(21,s,0),data:s}))?l:""},19:function(e,t,n,a,s){var l;return"            "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%s</strong> posted a new announcement",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},21:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.toMe:t,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.program(27,s,0),data:s}))?l:""},22:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.message:t)?l.parentId:l,{name:"if",hash:{},fn:e.program(23,s,0),inverse:e.program(25,s,0),data:s}))?l:""},23:function(e,t,n,a,s){var l;return"              "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%s</strong> replied to a message on your feed",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},25:function(e,t,n,a,s){var l;return"              "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%s</strong> posted a message to your feed",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},27:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.message:t)?l.parentId:l,{name:"if",hash:{},fn:e.program(28,s,0),inverse:e.program(30,s,0),data:s}))?l:"")+"          "},28:function(e,t,n,a,s){var l;return"              "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%1$s</strong> replied to a message on %2$s&#39;s feed",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,null!=(l=null!=(l=null!=t?t.message:t)?l.to:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},30:function(e,t,n,a,s){var l;return"              "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"<strong>%1$s</strong> posted a message to %2$s&#39;s feed",null!=(l=null!=(l=null!=t?t.message:t)?l.from:l)?l.name:l,null!=(l=null!=(l=null!=t?t.message:t)?l.to:l)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"\n"},32:function(e,t,n,a,s){return"        "+e.escapeExpression((n.connectImage||t&&t.connectImage||n.helperMissing).call(null!=t?t:e.nullContext||{},"shared/megaphone_grey.png","announcement notification",{name:"connectImage",hash:{height:"11px",width:"17px",id:"megaphone-icon"},data:s}))+"\n"},34:function(e,t,n,a,s){var l;return"        "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-inbox",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},36:function(e,t,n,a,s){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.children:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<article class="notification aggregate vote panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <div class="on-expand" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        <div class="count">'+c("function"==typeof(i=null!=(i=n.children||(null!=t?t.children:t))?i:o)?i.call(r,{name:"children",hash:{},data:s}):i)+'</div>\n        <div class="content">\n            <div class="heading">'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"%s people voted on <strong>%s - %s</strong>",null!=t?t.children:t,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))?l:"")+"</div>\n            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'<time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:o)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||o).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n        </div>\n    </div>\n</article>\n\n"},2:function(e,t,n,a,s){return" unread"},4:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.escapeExpression,c=n.helperMissing;return'<article class="notification vote panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+o(e.lambda(null!=(l=null!=t?t.voter:t)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||c).call(r,null!=(l=null!=t?t.voter:t)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||c).call(r,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-notification-click content">\n        <div class="heading">'+(null!=(l=(n.trans||t&&t.trans||c).call(r,"<strong>%s</strong> voted on <strong>%s - %s</strong>",null!=(l=null!=t?t.voter:t)?l.name:l,null!=(l=null!=t?t.story:t)?l.title:l,null!=(l=null!=(l=null!=t?t.story:t)?l.part:l)?l.title:l,{name:"trans",hash:{},data:s}))?l:"")+"</div>\n        "+(null!=(l=(n.iconify||t&&t.iconify||c).call(r,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'<time datetime="'+o("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:c)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+o((n.calendar||t&&t.calendar||c).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n    </a>\n</article>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.children:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" unread"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.lambda,c=e.escapeExpression,u=n.helperMissing;return'<article class="notification follower panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+c(o(null!=(l=null!=t?t.followed:t)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||u).call(r,null!=(l=null!=t?t.followed:t)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="/user/'+c(o(null!=(l=null!=t?t.followed:t)?l.name:l,t))+'" class="on-notification-click content">\n        <div class="heading">'+(null!=(l=(n.trans||t&&t.trans||u).call(r,"<strong>%s</strong> has approved your follow request",null!=(l=null!=t?t.followed:t)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"</div>\n        "+(null!=(l=(n.iconify||t&&t.iconify||u).call(r,"fa-following",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+'<time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||u).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n    </a>\n</article>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<article class="notification aggregate follower panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <div class="on-expand" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        <div class="count">'+c("function"==typeof(i=null!=(i=n.children||(null!=t?t.children:t))?i:o)?i.call(r,{name:"children",hash:{},data:s}):i)+'</div>\n        <div class="content">\n            <div class="heading">'+(null!=(l=(n.trans||t&&t.trans||o).call(r,"You have <strong>%s new followers</strong>",null!=t?t.children:t,{name:"trans",hash:{},data:s}))?l:"")+"</div>\n            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-following",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'<time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:o)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||o).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n        </div>\n    </div>\n</article>\n\n"},2:function(e,t,n,a,s){return" unread"},4:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=e.lambda,c=e.escapeExpression,u=n.helperMissing;return'<article class="notification follower panel'+(null!=(l=n.unless.call(r,null!=t?t.isRead:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <a href="/user/'+c(o(null!=(l=null!=t?t.follower:t)?l.name:l,t))+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||u).call(r,null!=(l=null!=t?t.follower:t)?l.avatar:l,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <a href="/user/'+c(o(null!=(l=null!=t?t.follower:t)?l.name:l,t))+'" class="on-notification-click content">\n        <div class="heading">'+(null!=(l=(n.trans||t&&t.trans||u).call(r,"<strong>%s</strong> followed you",null!=(l=null!=t?t.follower:t)?l.name:l,{name:"trans",hash:{},data:s}))?l:"")+"</div>\n        "+(null!=(l=(n.iconify||t&&t.iconify||u).call(r,"fa-following",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'<time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:u)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.calendar||t&&t.calendar||u).call(r,null!=t?t.createDate:t,{name:"calendar",hash:{},data:s}))+"</time>\n    </a>\n</article>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.children:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(349));!function(e,t,n,s,l){s.add("NotificationsPage",s.views.RegionManager.extend({id:"notifications",className:"container",template:a.default,events:{"tap .on-expand":"onExpandAggregation","click .on-expand":"stopEvent"},initialize:function(){this.username=t.utils.currentUser().get("username"),this.collection={notifications:new s.collections.Notifications([],{username:this.username}),requests:new s.collections.FollowRequests([],{username:this.username})},Handlebars.registerPartial("core.notifications.notifications",function(){return""}),Handlebars.registerPartial("core.notifications.follow_requests",function(){return""}),Handlebars.registerPartial("core.invite_friends.components.invite_panel",function(){return""})},render:function(){var e,n,a,l=this,i=[],r=t.utils.currentUser().get("isPrivate");return this.$el.html(this.template({hasRequests:!1,testGroups:t.testGroups})),i=[this.collection.notifications.fetchNextSet()],r&&i.push(this.collection.requests.fetchNextSet()),Promise.all(i).then(function(t){e=new s.views.Notifications({collection:l.collection.notifications}),l.$("#notification-feed").empty(),l.setRegion("#notification-feed",e.render()),n=new s.views.InvitePanel({action:"select_from_notifications",content:"invite_notifications"}),l.$(".invite-panel-component").empty(),l.setRegion(".invite-panel-component",n.render()),r&&l.collection.requests.total>0&&(l.$("#follow-requests-col").removeClass("hidden"),a=new s.views.FollowRequests({collection:l.collection.requests}),l.$("#follow-requests").empty(),l.setRegion("#follow-requests",a.render()))}),this},onExpandAggregation:function(e){var n,a=this.$(e.currentTarget).data("id"),l=this,i=this.collection.notifications.get(a),r=i.get("children"),o=new s.collections.Notifications([],{username:this.username,useLocalCache:!1,turnOffPagination:!0});n=o.url()+"?event_ids="+a+",",_.each(r,function(e,t){n+=e,t<r.length-1&&(n+=",")}),o.limit=r.length+1,Promise.resolve(o.fetchNextSet({url:n})).then(function(){o.more=!1;var e=new s.views.Notifications({collection:o}),n="";"follow"===i.get("type")?n=t.utils.trans("You have <strong>%s new followers</strong>",o.limit):"vote"===i.get("type")?n=t.utils.trans("%s people voted on <strong>%s - %s</strong>",o.limit,i.get("data").story.title,i.get("data").story.part.title):"forum_post"===i.get("type")?n=t.utils.trans("There are <strong>%s new comments</strong> on club thread <strong>%s</strong>",o.limit,i.get("data").discussion.discussion):"message"===i.get("type")&&(n=t.utils.sprintf(t.utils.ngettext("You have %s new announcement","You have %s new announcements",o.limit),[o.limit])),l.$("#expand-modal .modal-header > .content > time").html(t.utils.calendar(i.get("createDate"))),l.$("#expand-modal .modal-header > .count").html(o.limit),l.$("#expand-modal .modal-header > .content > .heading").html(n),l.$("#expand-modal .modal-body").html(e.render().$el),l.$("#expand-modal").modal({keyboard:!0}),l.$("#expand-modal").modal("show")})}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="row">\n    <article class="col-sm-7 col-md-8" id="notification-feed-col">\n        <header><h1 class="h3">'+o((n.trans||t&&t.trans||r).call(i,"Notifications",{name:"trans",hash:{},data:s}))+'</h1></header>\n        <main id="notification-feed">\n            <div>'+(null!=(l=e.invokePartial(a["core.notifications.notifications"],t,{name:"core.notifications.notifications",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</div>\n        </main>\n    </article>\n    <article class="col-sm-5 col-md-4'+(null!=(l=n.unless.call(i,null!=t?t.hasRequests:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'" id="follow-requests-col">\n        <header><h1 class="h3">'+o((n.trans||t&&t.trans||r).call(i,"Follower Requests",{name:"trans",hash:{},data:s}))+'</h1></header>\n        <main id="follow-requests">\n            <div>'+(null!=(l=e.invokePartial(a["core.notifications.follow_requests"],t,{name:"core.notifications.follow_requests",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</div>\n        </main>\n    </article>\n    <div class="col-sm-5 col-md-4">\n        <div class="wp-component invite-panel-component">\n'+(null!=(l=e.invokePartial(a["core.invite_friends.components.invite_panel"],t,{name:"core.invite_friends.components.invite_panel",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'        </div>\n    </div>\n</div>\n<div id="expand-modal" class="modal fade" role="dialog" tabindex=\'-1\'>\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header notification aggregate panel">\n                <div class="count"></div>\n                <div class="content">\n                  <div class="heading"></div>\n                  <time></time>\n                </div>\n                <button type="button" class="close btn btn-text" data-dismiss="modal" aria-label="Close">\n                  '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n                </button>\n            </div>\n            <div class="modal-body"></div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-left-align btn-grey btn-block" data-dismiss="modal">'+o((n.trans||t&&t.trans||r).call(i,"Close",{name:"trans",hash:{},data:s}))+"</button>\n            </div>\n        </div>\n    </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(19)),s=l(n(351));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i){l.add("Notifications",l.views.IncrementalList.extend({containerClass:".collection",template:s.default,itemView:l.views.NotificationEvent,initialize:function(){Handlebars.registerPartial("core.notifications.items.notification_base",a.default),this.setCollectionfilter(l.models.NotificationEvent.prototype.isValid)},renderCollection:function(e){var t=l.views.CollectionView.prototype.renderCollection.apply(this,arguments);return 0===this.collection.length?this.$(".empty-message").removeClass("hidden"):this.$(".empty-message").addClass("hidden"),t},getTemplateData:function(){return{notifications:{hasMore:this.collection.hasMore(),hasItems:this.collection.length>0},device:l.get("device")}}})),l.mixin(l.views.Notifications,"InfiniteScroll")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"        "+(null!=(l=e.lambda(null!=(l=null!=t?t.notifications:t)?l.html:l,t))?l:"")+"\n"},3:function(e,t,n,a,s){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="collection">\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.notifications:t)?l.hasItems:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'    <div class="empty-message'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.notifications:t)?l.hasItems:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'">\n'+(null!=(l=e.invokePartial(a["core.notifications.items.notification_base"],t,{name:"core.notifications.items.notification_base",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'    </div>\n</div>\n<div class="show-more center-text'+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.notifications:t)?l.hasMore:l,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <button class="on-showmore">\n        <span class=\'show-more-message\'>\n            <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n        </span>\n        <span class='loading-message hidden'>\n            "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner"},data:s}))?l:"")+"\n            <span> "+o((n.trans||t&&t.trans||r).call(i,"Loading",{name:"trans",hash:{},data:s}))+' ...</span>\n        </span>\n    </button>\n</div>\n<div class="loading-spinner center-text hidden">\n  '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t.device:t,{name:"iconifySpin",hash:{},data:s}))?l:"")+"\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(353)),s=l(n(354));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i){l.add("FollowRequestItem",l.views.Base.extend({className:"follow-request-item",template:{notification:s.default,profile:a.default},events:{"tap   .on-approve":"onApprove","click .on-approve":"stopEvent","tap   .on-ignore":"onIgnore","click .on-ignore":"stopEvent"},initialize:function(e){e=e||{},this.inProfile=!!e.inProfile,this.ignored=!!e.ignored},render:function(){var e=this.inProfile?this.template.profile:this.template.notification,t=this.inProfile?_.extend(this.model.toJSON(),{followerIgnored:this.ignored}):this.model.toJSON();return this.$el.html(e(t)),this},onApprove:function(e){var t=this;this.model.acceptFollowRequest().then(function(){t.model.collection&&t.model.collection.remove(t.model)})},onIgnore:function(e){var t=this;this.model.ignoreFollowRequest().then(function(){t.model.collection&&t.model.collection.remove(t.model)})}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"        <small>"+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"You ignored a follow request from %s. You can always approve the request here at any time.",null!=t?t.username:t,{name:"trans",hash:{},data:s}))?l:"")+"</small>\n"},3:function(e,t,n,a,s){var l;return'            <button class="btn btn-grey on-ignore on-request-addressed">'+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<article class="notification follow-request in-profile">\n    <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <div class="content">\n        <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="heading on-navigate">\n            '+(null!=(l=(n.trans||t&&t.trans||o).call(r,"<strong>%s</strong> wants to follow you",null!=t?t.username:t,{name:"trans",hash:{},data:s}))?l:"")+"\n        </a>\n"+(null!=(l=n.if.call(r,null!=t?t.followerIgnored:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'    </div>\n\n    <footer>\n        <div class="request-btns pull-right">\n            <button class="btn btn-teal on-approve on-request-addressed">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-check",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"</button>\n"+(null!=(l=n.if.call(r,null!=t?t.followerIgnored:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(3,s,0),data:s}))?l:"")+"        </div>\n    </footer>\n</article>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<article class="notification follow-request panel in-notifications">\n    <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="avatar avatar-sm2 on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n    <div class="content">\n        <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="heading on-navigate"><strong>'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'</strong></a>\n    </div>\n\n    <div class="request-btns">\n        <button class="btn btn-circle btn-teal on-approve">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-check",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n        <button class="btn btn-circle btn-grey on-ignore">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</button>\n    </div>\n</article>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(356));!function(e,t,n,s,l){s.add("FollowRequests",s.views.IncrementalList.extend({containerClass:".collection",template:a.default,itemView:s.views.FollowRequestItem,getTemplateData:function(){return{requests:{hasItems:this.collection.length>0,hasMore:this.collection.hasMore()},device:s.get("device")}}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="collection">\n    '+(null!=(l=e.lambda(null!=(l=null!=t?t.requests:t)?l.html:l,t))?l:"")+'\n</div>\n<div class="show-more center-text'+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.requests:t)?l.hasMore:l,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'">\n    <button class="on-showmore">\n        <span class=\'show-more-message\'>\n            <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n        </span>\n        <span class='loading-message hidden'>\n            "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n            <span> "+o((n.trans||t&&t.trans||r).call(i,"Loading",{name:"trans",hash:{},data:s}))+' ...</span>\n        </span>\n    </button>\n</div>\n<div class="loading-spinner center-text hidden">\n  '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t.device:t,{name:"iconifySpin",hash:{},data:s}))?l:"")+"\n</div>\n"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s,l){s.add("CoreProfileActivity",s.views.CoreFeed.extend({className:"activity-feed",events:t.extend({"tap .on-update-feed":"onUpdateFeed","click .on-update-feed":"onUpdateFeed"},s.views.CoreFeed.prototype.events),initialize:function(e){e=e||{},this.setCollectionfilter(s.models.PublicMessage.prototype.isValid),n.utils.currentUser().authenticated()&&"wattpad"!==this.model.get("username").toLowerCase()&&(this.newMessageView=new s.views.NewMessageNew({to:this.model.get("username"),canBroadcast:n.utils.currentUser().get("username")===this.model.get("username"),placeholder:e.placeholder}),this.listenTo(this.newMessageView,"message:new",this.addNewMessage))},render:function(){var e=this;return Promise.all([Promise.resolve(this.collection.fetchNextSet({data:{newest_id:null}})),Promise.resolve(a.currentUser().library().loaded()),Promise.resolve(!this.pinnedItem||this.pinnedItem.fetch())]).then(function(){e.pinnedItem&&e.pinnedItem.get("id")&&e.collection instanceof s.collections.ActivityMessages&&(e.collection.length>=1&&e.collection.first().get("id")===e.pinnedItem.get("id")&&e.collection.remove(e.pinnedItem.id),e.pinnedItemView=new s.views.PinnedItemMessage({model:e.pinnedItem}),e.listenTo(e.pinnedItemView,"pinnedItem:remove",e.removePinnedItem)),s.views.IncrementalList.prototype.render.apply(e,arguments),e.newMessageView&&e.$el.children(".collection").before(e.newMessageView.render().$el),e.pinnedItem&&e.pinnedItemView&&e.$el.children(".collection").before(e.pinnedItemView.render().$el),e.collection.length>0&&"message"===e.collection.at(0).get("type")&&t.defer(function(){e.viewPointers[e.collection.at(0).cid].expand()}),e.postRender()}),this},postRender:function(){},onUpdateFeed:function(e){s.local.clear(this.collection.resource()),s.router.navigate("/user/"+this.model.get("username"),{trigger:!1}),this.collection.reset(),this.render()},addNewMessage:function(e){this.setDirection("up"),this.collection instanceof s.collections.ActivityMessages?(e.set("type",e.type||"newMessage"),e.set("username",this.model.get("username")),e.get("ownername")===n.utils.currentUser().get("username")?this.pinnedItemView&&this.pinnedItemView.model?(this.collection.add(this.pinnedItemView.model.toJSON(),{at:0}),this.pinnedItem=e,this.stopListening(this.pinnedItemView,"pinnedItem:remove",this.removePinnedItem),this.pinnedItemView.undelegateEvents(),this.pinnedItemView=new s.views.PinnedItemMessage({model:this.pinnedItem}),this.$(".pinned-item").html(this.pinnedItemView.render().$el),this.listenTo(this.pinnedItemView,"pinnedItem:remove",this.removePinnedItem)):(e.set("username",this.model.get("username")),e.get("ownername")===n.utils.currentUser().get("username")?(this.pinnedItem=e,this.pinnedItemView=new s.views.PinnedItemMessage({model:this.pinnedItem}),this.$(".collection").before(this.pinnedItemView.render().$el)):this.collection.fetchNextSet()):this.collection.add(e.toJSON())):this.collection.add(new s.models.PublicMessage({id:e.get("eventId"),type:"message",createDate:e.get("createDate"),data:{user:{name:e.get("from").name,avatar:e.get("from").avatar},message:{id:e.get("id"),createDate:e.get("createDate"),body:e.get("body"),to:{name:this.model.get("username"),avatar:this.model.get("avatar")},broadcast:e.get("isBroadcast"),isOffensive:e.get("isOffensive")},highlight_color:"#00B2B2"},username:this.model.get("username")})),this.setDirection("down"),s.local.clear(this.collection.resource())},removePinnedItem:function(e){var t=this;this.collection.remove(e),this.pinnedItem=new s.models.PinnedMessage({username:this.model.get("username"),type:"newMessage"}),Promise.resolve(this.pinnedItem.fetch({fresh:!0})).then(function(){t.pinnedItem.id?(t.collection.first().get("id")===t.pinnedItem.toJSON().id&&t.collection.remove(t.pinnedItem),t.pinnedItemView.undelegateEvents(),t.pinnedItemView=new s.views.PinnedItemMessage({model:t.pinnedItem}),t.$(".pinned-item").replaceWith(t.pinnedItemView.render().$el),t.listenTo(t.pinnedItemView,"pinnedItem:remove",t.removePinnedItem)):t.$(".pinned-item").empty()})}}))}(window,_,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=l(n(359)),s=l(n(360));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("ProfileAbout",o.View.extend({className:"about-info panel panel-default2",template:s.default,partials:{link:a.default},events:{"tap   .on-edit":"onEdit","click .on-edit":"stopEvent"},render:function(){var e=this.model.toJSON(),t=this;e.links=this.getLinkValues(e),e.userFollowings=this.options.following.toJSON(0,14);var a=this.options.following.total;return e.numFollowingMobile=a>14?a-14:null,e.numFollowingTablet=a>3?a-3:null,e.numFollowingDesktop=a>4?a-4:null,e.numFollowingDesktopWide=a>6?a-6:null,e.socialShareSection=this.getSocialShareHTML(),this.$el.html(this.template(e)),e.facebook&&n.ajax({url:"https://graph.facebook.com/"+e.facebook,data:{fields:"link"},cache:!1}).done(function(e){t.renderFacebookUrl(e)}),this},getLinkValues:function(e){var t,n,a;if(!(e.facebook||e.website||e.twitter||e.smashwords))return null;if(t={},n=/^[\w]{3,5}:\/\//i,a=e.name?e.name.split(" ")[0]:e.username,e.facebook&&(t.facebook={},t.facebook.name=i.trans("%s's Facebook profile",a),t.facebook.url="https://www.facebook.com/"+e.facebook),e.twitter&&(t.twitter={},t.twitter.name="@"+e.twitter,t.twitter.url="https://www.twitter.com/"+e.twitter),e.website&&(t.website={},t.website.name=e.website.replace(n,""),t.website.url=e.website.match(n)?e.website:"http://"+e.website),e.smashwords){t.smashwords={};var s=e.smashwords.split("/");t.smashwords.name="smashwords.com/"+s[s.length-1],t.smashwords.url=e.smashwords}return t},getSocialShareHTML:function(){try{var e={username:this.model.get("username"),name:this.model.get("name")||this.model.get("username"),avatarUrl:this.model.get("avatar"),description:this.model.get("description")},t=this.buildSocialShareLinksForProfile(e);return this.getSocialShareTemplateHTML("row",t)}catch(e){return""}},onEdit:function(){r.trigger("app:profile:edit")},renderFacebookUrl:function(e){if(e.link){var t=this.$("li.facebook"),n={name:e.link.replace(/^([\w]{3,5}:\/\/)*(w{3}\.)*/i,""),url:e.link};t.children("a").remove(),t.append(this.partials.link(n))}}})),r.mixin(r.views.ProfileAbout,"SocialSharing")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<a class="alt-link" href="'+o("function"==typeof(l=null!=(l=n.url||(null!=t?t.url:t))?l:r)?l.call(i,{name:"url",hash:{},data:s}):l)+'" target="_blank">\n  '+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+'<span class="sr-only"> (new window)</span></a>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'  <div class="description">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.html_enabled:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"  </div>\n\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"      <pre>"+(null!=(l=(n.preFormat||t&&t.preFormat||r).call(i,(n.linkify||t&&t.linkify||r).call(i,null!=t?t.description:t,{name:"linkify",hash:{sanitization:"unsanitize"},data:s}),{name:"preFormat",hash:{},data:s}))?l:"")+"</pre>\n"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"      <pre>"+(null!=(l=(n.preFormat||t&&t.preFormat||r).call(i,(n.linkify||t&&t.linkify||r).call(i,null!=t?t.description:t,{name:"linkify",hash:{sanitization:"sanitize"},data:s}),{name:"preFormat",hash:{},data:s}))?l:"")+"</pre>\n"},6:function(e,t,n,a,s){var l;return null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:""},7:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'    <div class="no-description">\n      <div>'+r((n.trans||t&&t.trans||i).call(l,"Help people get to know you",{name:"trans",hash:{},data:s}))+'</div>\n      <button class="btn btn-orange on-edit">'+r((n.trans||t&&t.trans||i).call(l,"Add Description",{name:"trans",hash:{},data:s}))+"</button>\n    </div>\n"},9:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'    <li class="location col-xs-12 col-sm-12">\n      <span class="user-meta-info-content">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-location",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+e.escapeExpression("function"==typeof(i=null!=(i=n.location||(null!=t?t.location:t))?i:o)?i.call(r,{name:"location",hash:{},data:s}):i)+"\n      </span>\n    </li>\n"},11:function(e,t,n,a,s){return"("+e.escapeExpression((n.formatDate||t&&t.formatDate||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.createDate:t,{name:"formatDate",hash:{},data:s}))+")"},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'  <hr />\n  <ul id="profile-links" class="list-unstyled row">\n\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.links:t)?l.website:l,{name:"if",hash:{},fn:e.program(14,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.links:t)?l.facebook:l,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.links:t)?l.twitter:l,{name:"if",hash:{},fn:e.program(18,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.links:t)?l.smashwords:l,{name:"if",hash:{},fn:e.program(20,s,0),inverse:e.noop,data:s}))?l:"")+"  </ul>\n"},14:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'    <li class="website col-xs-12 col-sm-12">\n      '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-link",18,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="sr-only">website:</span>\n      <a class="alt-link" href="'+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.website:l)?l.url:l,t))+'" target="_blank" rel="nofollow">\n        '+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.website:l)?l.name:l,t))+"\n      </a>\n    </li>\n"},16:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'    <li class="facebook col-xs-12 col-sm-12">\n      '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-facebook-square",18,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="sr-only">facebook:</span>\n      <a class="alt-link" href="'+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.facebook:l)?l.url:l,t))+'" target="_blank" rel="nofollow">\n        '+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.facebook:l)?l.name:l,t))+"\n      </a>\n    </li>\n"},18:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'    <li class="twitter col-xs-12 col-sm-12">\n      '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-twitter",18,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="sr-only">twitter:</span>\n      <a class="alt-link" href="'+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.twitter:l)?l.url:l,t))+'" target="_blank" rel="nofollow">\n        '+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.twitter:l)?l.name:l,t))+"\n      </a>\n    </li>\n"},20:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'    <li class="smashwords col-xs-12 col-sm-12">\n      '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-link",18,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="sr-only">smashwords:</span>\n      <a class="alt-link" href="'+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.smashwords:l)?l.url:l,t))+'" target="_blank" rel="nofollow">\n        '+r(i(null!=(l=null!=(l=null!=t?t.links:t)?l.smashwords:l)?l.name:l,t))+"\n      </a>\n    </li>\n"},22:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'  <hr />\n  <div id="following-panel">\n    <div class="title">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Following",{name:"trans",hash:{},data:s}))+'</div>\n\n    <div class="users clearfix" data-section="following">\n'+(null!=(l=n.each.call(i,null!=t?t.userFollowings:t,{name:"each",hash:{},fn:e.program(23,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.numFollowingMobile:t,{name:"if",hash:{},fn:e.program(25,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.numFollowingTablet:t,{name:"if",hash:{},fn:e.program(27,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.numFollowingDesktop:t,{name:"if",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.numFollowingDesktopWide:t,{name:"if",hash:{},fn:e.program(31,s,0),inverse:e.noop,data:s}))?l:"")+"    </div>\n  </div>\n"},23:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <a class="avatar avatar-sm2 on-navigate pull-left hide" href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'">\n        <img src="'+o((n.resizeAvatar||t&&t.resizeAvatar||r).call(i,null!=t?t.avatar:t,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n      </a>\n'},25:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <a href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'/following" class="on-nav-item on-navigate num-following pull-left mobile-break hide">+'+o((n.count||t&&t.count||r).call(i,null!=t?t.numFollowingMobile:t,{name:"count",hash:{},data:s}))+"</a>\n"},27:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <a href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'/following" class="on-nav-item on-navigate num-following pull-left tablet-break hide">+'+o((n.count||t&&t.count||r).call(i,null!=t?t.numFollowingTablet:t,{name:"count",hash:{},data:s}))+"</a>\n"},29:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <a href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'/following" class="on-nav-item on-navigate num-following pull-left desktop-break hide">+'+o((n.count||t&&t.count||r).call(i,null!=t?t.numFollowingDesktop:t,{name:"count",hash:{},data:s}))+"</a>\n"},31:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <a href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'/following" class="on-nav-item on-navigate num-following pull-left desktop-wide-break hide">+'+o((n.count||t&&t.count||r).call(i,null!=t?t.numFollowingDesktopWide:t,{name:"count",hash:{},data:s}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='<div class="panel-body">\n'+(null!=(l=n.if.call(o,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+'\n  <ul class="list-unstyled user-meta-info row">\n'+(null!=(l=n.if.call(o,null!=t?t.location:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <li class="date col-xs-12 col-sm-12">\n      <span class="user-meta-info-content">\n        <span>'+u((n.trans||t&&t.trans||c).call(o,"Joined",{name:"trans",hash:{},data:s}))+"</span>"+u((n.fromNow||t&&t.fromNow||c).call(o,null!=t?t.createDate:t,{name:"fromNow",hash:{fullDate:!0},data:s}))+"\n\n        ";return i=null!=(i=n.isAmbassador||(null!=t?t.isAmbassador:t))?i:c,r={name:"isAmbassador",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.isAmbassador||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+"\n      </span>\n    </li>\n  </ul>\n\n"+(null!=(l=n.if.call(o,null!=t?t.links:t,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(o,null!=t?t.userFollowings:t,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.noop,data:s}))?l:"")+'\n  <hr />\n  <div id="profile-share-links">\n    <div class="title">'+u((n.trans||t&&t.trans||c).call(o,"Share profile",{name:"trans",hash:{},data:s}))+"</div>\n    "+(null!=(l="function"==typeof(i=null!=(i=n.socialShareSection||(null!=t?t.socialShareSection:t))?i:c)?i.call(o,{name:"socialShareSection",hash:{},data:s}):i)?l:"")+"\n  </div>\n\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(362));!function(e,t,n,s,l,i){i.add("PinnedMessage",i.views.Base.extend({className:"pinned-message",template:a.default,render:function(){return this.$el.html(this.template(t.extend(this.formatViewData(),this.model.toJSON()))),this},formatViewData:function(){return{isDesktop:i.get("device").isDesktop()}}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"\n"+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return"<header>"+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-pin",22,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+o((n.trans||t&&t.trans||r).call(i,"Last Message",{name:"trans",hash:{},data:s}))+'</header>\n\n<div class="panel panel-default2">\n  <a href="/user/'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'" class="avatar avatar-sm3 pull-left on-navigate">\n    '+o((n.connectAvatar||t&&t.connectAvatar||r).call(i,null!=(l=null!=t?t.from:t)?l.avatar:l,null!=(l=null!=t?t.from:t)?l.name:l,32,{name:"connectAvatar",hash:{},data:s}))+'\n  </a>\n  <a class="username on-navigate" href="/user/'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'">'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'</a>\n\n  <span class="latest-msg-date">'+o((n.fromNow||t&&t.fromNow||r).call(i,null!=t?t.createDate:t,{name:"fromNow",hash:{},data:s}))+"</span>\n\n  <pre>"+(null!=(l=(n.preFormat||t&&t.preFormat||r).call(i,(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=t?t.body:t,200,!0,{name:"simpleShorten",hash:{},data:s}),!0,{name:"preFormat",hash:{},data:s}))?l:"")+'</pre>\n\n  <a class="btn btn-grey on-navigate on-view-conversations" href="/user/'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'/conversations">\n    '+o((n.trans||t&&t.trans||r).call(i,"View all Conversations",{name:"trans",hash:{},data:s}))+"\n  </a>\n</div>\n\n"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'<div class="panel">\n  <hr />\n\n  <div class="section-header">'+o((n.trans||t&&t.trans||r).call(i,"Last Message",{name:"trans",hash:{},data:s}))+'</div>\n\n  <div class="user-info">\n    <a href="/user/'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'" class="avatar avatar-sm3 pull-left on-navigate">\n      '+o((n.connectAvatar||t&&t.connectAvatar||r).call(i,null!=(l=null!=t?t.from:t)?l.avatar:l,null!=(l=null!=t?t.from:t)?l.name:l,32,{name:"connectAvatar",hash:{},data:s}))+'\n    </a>\n    <a class="username on-navigate" href="/user/'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'">'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'</a>\n\n    <span class="latest-msg-date">'+o((n.fromNow||t&&t.fromNow||r).call(i,null!=t?t.createDate:t,{name:"fromNow",hash:{},data:s}))+"</span>\n  </div>\n\n  <pre>"+(null!=(l=(n.preFormat||t&&t.preFormat||r).call(i,(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=t?t.body:t,200,!0,{name:"simpleShorten",hash:{},data:s}),!0,{name:"preFormat",hash:{},data:s}))?l:"")+'</pre>\n\n  <button class="btn btn-grey btn-block btn-left-align on-navigate on-view-conversations" href="/user/'+o(c(null!=(l=null!=t?t.from:t)?l.name:l,t))+'/conversations">\n    '+o((n.trans||t&&t.trans||r).call(i,"View all Conversations",{name:"trans",hash:{},data:s}))+"\n  </button>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.id:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(364));!function(e,t,n,s,l,i,r){i.add("NewPinnedItem",r.View.extend({className:"pinned-item panel panel-default",template:a.default,render:function(){var e=this.model.toJSON();return this.$el.html(this.template({pinnedItem:e})),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<a href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'" class="avatar avatar-sm3 pull-left on-navigate">\n  '+r((n.connectAvatar||t&&t.connectAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.avatar:l,null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,32,{name:"connectAvatar",hash:{},data:s}))+'\n</a>\n<a class="username on-navigate" href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'">'+r(i(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'</a>\n<small class="from-now">'+r((n.fromNow||t&&t.fromNow||c).call(o,null!=(l=null!=t?t.pinnedItem:t)?l.createDate:l,{name:"fromNow",hash:{},data:s}))+'</small>\n\n<pre class="body">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||c).call(o,null!=(l=null!=t?t.pinnedItem:t)?l.body:l,200,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</pre>\n\n<a class="btn btn-md btn-block btn-grey btn-left-align on-navigate" href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.pinnedItem:t)?l.from:l)?l.name:l,t))+'/conversations"> '+r((n.trans||t&&t.trans||c).call(o,"View all conversations",{name:"trans",hash:{},data:s}))+"</a> \n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.pinnedItem:t)?l.id:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(366));!function(e,t,n,s,l,i,r){i.add("ProfileRequest",r.View.extend({className:"follower-request",template:a.default,events:{"tap   .on-request-addressed":"onRequestAddressed","click .on-request-addressed":"stopEvent"},initialize:function(){this.requestItemView=null,Handlebars.registerPartial("core.profile.profile_follow_request_item",function(){return""})},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.renderRequestItem(),this},renderRequestItem:function(){this.requestItemView=new i.views.FollowRequestItem({model:this.model,inProfile:!0,ignored:"ign"===this.model.get("followerRequest")}),this.$el.find(".request-item-container").html(this.requestItemView.render().$el)},setElement:function(e){var t=n(e);r.View.prototype.setElement.call(this,e),this.requestItemView&&this.requestItemView.setElement(t.find("."+this.requestItemView.className.trim().replace(/ /g,".")))},onRequestAddressed:function(e){var t=n(e.currentTarget);this.requestItemView.remove(),t.hasClass("on-approve")?this.remove():(this.model.set("followerRequest","ign"),this.renderRequestItem())}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return"<header>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Follow Request",{name:"trans",hash:{},data:s}))+'</header>\n\n<div class="request-item-container panel panel-default2">\n  <div class="follow-request-item">'+(null!=(l=e.invokePartial(a["core.profile.profile_follow_request_item"],t,{name:"core.profile.profile_follow_request_item",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(4)),s=l(n(368));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("ProfileInteractions",r.views.CoreProfileActivity.extend({template:s.default,partials:{"incremental-list":a.default},initialize:function(e){e=e||{};var t=l.utils.currentUser();this.pinnedItem=e.pinnedItem||null,t.authenticated()&&t.get("username")===this.model.get("username")?e.placeholder=l.utils.trans("Post a Message"):e.placeholder=l.utils.trans("Write to %s",this.model.get("username")),Handlebars.registerPartial("desktop.components.incremental_list",this.partials["incremental-list"]),r.views.CoreProfileActivity.prototype.initialize.apply(this,arguments)},onShowMore:function(e){e&&!this.registered&&(this.registerForScrolling(),this.registered=!0),r.views.CoreProfileActivity.prototype.onShowMore.apply(this,arguments)},getTemplateData:function(){return{count:this.collection.total,containerId:"content",hasMore:this.collection.hasMore,username:this.model.get("username"),pinnedItem:!!this.pinnedItem&&this.pinnedItem.toJSON()}}})),r.mixin(r.views.ProfileInteractions,"InfiniteScroll")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <a class="btn btn-more btn-grey btn-block on-update-feed" href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'">\n    '+o((n.trans||t&&t.trans||r).call(i,"See latest activity.",{name:"trans",hash:{},data:s}))+"\n  </a>\n"},3:function(e,t,n,a,s){return'  <div class="title-wrapper" id="feed-title">\n    <h4 class="title"><span class="title-text">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Recent Activity",{name:"trans",hash:{},data:s}))+"</span></h4>\n  </div>\n"},5:function(e,t,n,a,s){var l;return'<div class="feed-item-new panel pinned-item">\n'+(null!=(l=e.invokePartial(a["core.feed_items.feed_pinned_message"],t,{name:"core.feed_items.feed_pinned_message",data:s,indent:"\t",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c="";return i=null!=(i=n.showActivityOutofDate||(null!=t?t.showActivityOutofDate:t))?i:n.helperMissing,r={name:"showActivityOutofDate",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.showActivityOutofDate||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(c+=l),c+(null!=(l=n.if.call(o,null!=t?t.isFeed:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(o,null!=t?t.shouldRenderPinned:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=e.invokePartial(a["desktop.components.incremental_list"],t,{name:"desktop.components.incremental_list",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(4)),s=l(n(370));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r){r.add("ProfileLists",r.views.IncrementalList.extend({className:"reading-lists",template:s.default,itemView:r.views.ReadingListItem,containerId:"#lists-item-view",events:t.extend({"tap .on-newlist":"onOpenNewListModal","tap .on-create-list":"onOpenNewListModal","tap .on-story-preview":"onStoryPreview","click .on-story-preview":"stopEvent"},r.views.IncrementalList.prototype.events),initialize:function(){Handlebars.registerPartial("desktop.components.incremental_list",a.default)},onStoryPreview:function(e){var t=n(e.currentTarget).data("story-id"),a=new r.models.StoryModel({id:t});Promise.resolve(a.fetch({fresh:!0})).then(function(){var e=new r.views.BrowseStoryPreview({isHome:!0,model:a});self.$("#preview-modal").empty().append(e.render().$el),e.openModal()})},getTemplateData:function(){return{totalLists:this.collection.total,username:this.model.get("username")}},onOpenNewListModal:function(){var e=n("#generic-modal"),t=new r.views.LibraryListCreate;e.find(".modal-body").empty().append(t.render().$el),e.modal("show")}})),r.mixin(r.views.ProfileLists,"InfiniteScroll")}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="panel panel-default2">\n  <header class="panel-heading">\n'+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||o).call(r,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <div class="panel-title">\n      '+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Reading List","%s Reading Lists",null!=t?t.totalLists:t,{name:"ngettext",hash:{},data:s}),null!=t?t.totalLists:t,{name:"sprintf",hash:{},data:s}))+'\n    </div>\n  </header>\n\n  <hr />\n\n  <div class="panel-body">\n    <div id="lists-item-view">'+(null!=(l="function"==typeof(i=null!=(i=n.listsItemViewContent||(null!=t?t.listsItemViewContent:t))?i:o)?i.call(r,{name:"listsItemViewContent",hash:{},data:s}):i)?l:"")+'</div>\n  </div>\n\n  <div class="show-more center-text hidden">\n    <button class="btn btn-grey on-showmore">\n      <span class=\'show-more-message\'>\n        <span>'+c((n.trans||t&&t.trans||o).call(r,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n        <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n      </span>\n      <span class='loading-message hidden'>\n        "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||o).call(r,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n        <span>"+c((n.trans||t&&t.trans||o).call(r,"Loading...",{name:"trans",hash:{},data:s}))+"</span>\n      </span>\n    </button>\n  </div>\n</div>\n\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <a href="/list" class="settings on-navigate">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-settings",24,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-plus",24,"wp-neutral-2","settings on-create-list",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},4:function(e,t,n,a,s){var l;return null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:""},5:function(e,t,n,a,s){return'<div class="panel panel-default2 empty-placeholder">\n  <header class="panel-heading">\n    <div class="panel-title"></div>\n    <div class="panel-subtitle"></div>\n  </header>\n\n  <div class="panel-body">\n    <div class="no-reading-list">\n      <button class="btn btn-md btn-orange on-create-list">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Create Reading List",{name:"trans",hash:{},data:s}))+'</button>\n    </div>\n\n    <div class="story-cover">\n      <div class="fixed-ratio fixed-ratio-cover">\n      </div>\n    </div>\x3c!--\n\n --\x3e<div class="story-cover">\n      <div class="fixed-ratio fixed-ratio-cover">\n      </div>\n    </div>\x3c!--\n\n --\x3e<div class="story-cover">\n      <div class="fixed-ratio fixed-ratio-cover">\n      </div>\n    </div>\x3c!--\n\n --\x3e<div class="story-cover">\n      <div class="fixed-ratio fixed-ratio-cover">\n      </div>\n    </div>\n  </div>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.totalLists:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(372));!function(e,t,n,s,l,i){i.add("ProfileWorks",i.views.IncrementalList.extend({className:"profile-works-content",template:a.default,itemView:i.views.DiscoverModuleStoriesLarge,containerId:"#works-item-view",events:t.extend({"tap    .on-story-preview":"onStoryPreview","click  .on-story-preview":"stopEvent"},i.views.IncrementalList.prototype.events),initialize:function(e){var t=this;Promise.resolve(this.collection.fetchNextSet()).then(function(){t.render(),t.collection.limit=10}).then(this.afterRender.call(this))},afterRender:function(){var e=this;t.defer(function(){e.$('[data-toggle="tooltip"]').tooltip()})},getTemplateData:function(){var e=l.currentUser().get("username")===this.model.get("username");return{name:this.model.get("name")||this.model.get("username"),username:this.model.get("username"),totalWorks:this.collection.total,numPublished:e?this.collection.numPublished:this.collection.total,numDrafts:this.collection.numDrafts}},getItemViewOptions:function(){return{isProfileWorksView:!0,user:{fullname:this.model.get("name")||null,name:this.model.get("username")},descCharLimit:215,titleCharLimit:70}},onStoryPreview:function(t){var a=n(t.currentTarget).data("story-id"),s=new i.views.BrowseStoryPreview({showTagRankings:!0,model:this.collection.get(a)});this.$("#preview-modal").empty().append(s.render().$el),s.openModal(),e.te.push("event","profile","works","story","click",{storyid:a,username:this.collection.username})}})),i.mixin(i.views.ProfileWorks,"InfiniteScroll")}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div id="preview-modal"></div>\n\n<div class="panel panel-default2">\n\n  <header class="panel-heading">\n'+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||o).call(r,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <div class="panel-title">\n      '+(null!=(l=(n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"Story by %s","Stories by %s",null!=t?t.totalWorks:t,{name:"ngettext",hash:{},data:s}),null!=t?t.name:t,{name:"sprintf",hash:{},data:s}))?l:"")+'\n    </div>\n\n    <ul class="metadata">\n      <li>'+c((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Published Story","%s Published Stories",null!=t?t.numPublished:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numPublished:t,{name:"sprintf",hash:{},data:s}))+"</li>\n\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||o).call(r,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'    </ul>\n  </header>\n\n  <div class="panel-body">\n    <div id="works-item-view">'+(null!=(l="function"==typeof(i=null!=(i=n.worksItemViewContent||(null!=t?t.worksItemViewContent:t))?i:o)?i.call(r,{name:"worksItemViewContent",hash:{},data:s}):i)?l:"")+'</div>\n  </div>\n\n  <div class="show-more center-text hidden">\n    <button class="btn btn-grey on-showmore">\n      <span class=\'show-more-message\'>\n        <span>'+c((n.trans||t&&t.trans||o).call(r,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n        <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n      </span>\n      <span class='loading-message hidden'>\n        "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||o).call(r,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n        <span> "+c((n.trans||t&&t.trans||o).call(r,"Loading...",{name:"trans",hash:{},data:s}))+"</span>\n      </span>\n    </button>\n  </div>\n</div>\n"},2:function(e,t,n,a,s){var l;return'    <a href="/myworks" class="settings on-navigate">'+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-settings",24,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n"},4:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.numDrafts:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:""},5:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return"      <li>\n      "+r((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Draft","%s Drafts",null!=t?t.numDrafts:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numDrafts:t,{name:"sprintf",hash:{},data:s}))+" ("+r((n.trans||t&&t.trans||i).call(l,"only visible to you",{name:"trans",hash:{},data:s}))+")\n      </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.totalWorks:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(374));!function(e,t,n,s,l,i,r){i.add("NewPost",r.View.extend({className:"new-post",template:a.default,events:{"focus  textarea":"onTextInputFocus","blur   textarea":"onTextInputBlur","keyup  textarea":"onTextInput","tap    .on-post":"onPost","click  .on-post":"stopEvent",keyup:"onKeyUp"},initialize:function(e){e=e||{},this.placeholder=e.placeholder||"",this.source=e.source||null,t.bindAll(this,"onKeyUp")},render:function(){var e={};return e.avatar=s.utils.currentUser().get("avatar"),e.placeholder=this.placeholder,e.viewId=this.getViewId(),this.$el.html(this.template(e)),this},onTextInputFocus:function(){if(!l.currentUser().authenticated()){(a=n("#inline-comments-modal .inline-comments-modal"))&&a.modal("hide");var t=new i.views.SignUpPrompt({model:new i.models.Authsignup,title:s.utils.trans("Join Wattpad"),subtitle:s.utils.trans("Be part of a global community of readers and writers, all connected through the power of story."),nextUrl:e.location.href});return n("#generic-modal .modal-body").html(t.render().$el),void n("#generic-modal").modal("show")}if(!l.currentUser().attributes.verified_email){var a;(a=n("#inline-comments-modal .inline-comments-modal"))&&a.modal("hide");t=new i.views.PleaseVerifyModal;return n("#generic-modal .modal-body").html(t.render().$el),n("#generic-modal").modal({}),void n(".count-input").blur()}var r=this.$("textarea"),o=this;r.hasClass("active")||(this._setActiveState(),e.setTimeout(function(){o.moveCaretToEnd(r[0])},1))},moveCaretToEnd:function(e){if(e)if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}},onTextInputBlur:function(){var t=this;this.$("textarea").val()||(this.blurTimeout=e.setTimeout(function(){t._setInactiveState()},500))},_setActiveState:function(){this.$("textarea").val(""),this.$("textarea").addClass("active"),this.$(".post-ui").removeClass("hidden").children("button").prop("disabled",!0)},_setInactiveState:function(){this.$("textarea").removeClass("active"),this.$(".post-ui").addClass("hidden")},onTextInput:function(e){var t=this.$("textarea").val().trim(),n=this.$(".post-ui button");""===t?n.prop("disabled",!0):n.prop("disabled",!1)},onPost:function(){},addMention:function(e){var t,a=/^(\@[\w\-]+)\s/i,s="@"+e+" ",l=this.$("textarea").val();t=a.test(l)?l.replace(a.exec(l)[0],s):""!==n.trim(l)&&l!==this.placeholder?s+l:s,this._setActiveState(),this.$("textarea").focus(),this.$("textarea").val(t)},onKeyUp:function(e){27===e.which&&this.$("textarea").blur()},focus:function(){this.$("textarea").trigger("focus")},onPostContentUpdate:function(e){this.$(".on-post").prop("disabled",!e),e?this.$(".post-counter").removeClass("count-error"):this.$(".post-counter").addClass("count-error")},getViewId:function(){return"new-post-"+Date.now()},onError:function(e){this.$(".warning > .text").text(e),this.$(".warning").removeClass("hidden"),this.$(".post-ui button").prop("disabled",!1)}})),i.mixin(i.views.NewPost,"InputCounterManagement")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'        <img src="'+e.escapeExpression("function"==typeof(l=null!=(l=n.avatar||(null!=t?t.avatar:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"avatar",hash:{},data:s}):l)+'">\n'},3:function(e,t,n,a,s){var l;return"        "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-user",26,"wp-neutral-2","vhcenter",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},5:function(e,t,n,a,s){return"sr-only"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="avatar avatar-md">\n'+(null!=(l=n.if.call(r,null!=t?t.avatar:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'</div>\n<div class="message">\n    <label class="control-label '+(null!=(l=(n.supportsPlaceholder||t&&t.supportsPlaceholder||o).call(r,null!=t?t.device:t,{name:"supportsPlaceholder",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'" for="'+c("function"==typeof(i=null!=(i=n.viewId||(null!=t?t.viewId:t))?i:o)?i.call(r,{name:"viewId",hash:{},data:s}):i)+'">'+c("function"==typeof(i=null!=(i=n.placeholder||(null!=t?t.placeholder:t))?i:o)?i.call(r,{name:"placeholder",hash:{},data:s}):i)+'</label>\n    <textarea id="'+c("function"==typeof(i=null!=(i=n.viewId||(null!=t?t.viewId:t))?i:o)?i.call(r,{name:"viewId",hash:{},data:s}):i)+'" class="form-control count-input" data-limit="2000" data-counter="post-counter" data-name="PostContent" role="textbox" aria-multiline="true" placeholder="'+c("function"==typeof(i=null!=(i=n.placeholder||(null!=t?t.placeholder:t))?i:o)?i.call(r,{name:"placeholder",hash:{},data:s}):i)+'"></textarea>\n    <div class="warning hidden">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-warning",14,"wp-lighterror",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="text">'+c((n.trans||t&&t.trans||o).call(r,"There was a problem posting your message, please try again later.",{name:"trans",hash:{},data:s}))+'</span>\n    </div>\n    <div class="post-ui hidden">\n        <button class="btn btn-sm btn-orange pull-right on-post">'+c((n.trans||t&&t.trans||o).call(r,"Post",{name:"trans",hash:{},data:s}))+'</button>\n        <span class="post-counter hidden pull-right"><span></span>/2000</span>\n    </div>\n</div>\n\n'},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(376));!function(e,t,n,s,l,i){i.add("NewMessageNew",i.views.NewPost.extend({className:"message-new new-message-new",template:a.default,broadcastLimit:3,blurTimeout:null,events:t.extend(i.views.NewPost.prototype.events,{"change .on-broadcast-checkbox":"onCheckboxSelected","tap .broadcast-info":"onBroadcastInfo"}),constructor:function(e){(e=e||{}).canBroadcast&&(this.id="broadcast-container"),i.views.NewPost.prototype.constructor.apply(this,arguments)},initialize:function(e){if(i.views.NewPost.prototype.initialize.apply(this,arguments),"string"!=typeof(e=e||{}).to||""===e.to.trim())throw new Error("NewMessageNew View : options.to cannot be null");this.to=e.to,this.parentId=e.parentId||null,this.placeholder=e.placeholder||"",this.canBroadcast=e.canBroadcast||!1,this.autoMention=e.autoMention||null,this.additionalText=e.additionalText||null;try{this.unsent=JSON.parse(localStorage.getItem("unsent-repsonse")),this.unsent=this.unsent.id===this.parentId?this.unsent.body:void 0}catch(e){}},render:function(){var e={};return e.avatar=s.utils.currentUser().get("avatar"),e.canBroadcast=this.canBroadcast,e.placeholder=this.unsent||this.placeholder,this.$el.html(this.template(e)),this.defaultText=this.$("textarea").val(),l.isOperaMini&&this._setActiveState(),t.defer(this.afterRender.bind(this)),this},afterRender:function(){this.canBroadcast&&n(".on-broadcast-info").tooltip({title:l.trans("By using this feature, this message will be sent to all your followers’ notification feeds instead of their newsfeeds. Please note that you can only post up to %s announcements per day.",this.broadcastLimit)})},onBroadcastInfo:function(e){l.stopEvent(e),this.$(".on-broadcast-info").tooltip("toggle")},isBroadCast:function(){return Boolean(this.$("input[type='checkbox']").prop("checked"))},_setActiveState:function(){var t=this.autoMention===s.utils.currentUser().get("username"),n=this.autoMention&&!t?"@"+this.autoMention+" ":"",a=this;this.$("textarea").val(this.unsent||n).addClass("active"),e.setTimeout(function(){a.$(".post-ui").removeClass("hidden").children("button").prop("disabled",!a.unsent)},250)},onTextInputBlur:function(){var t=this;this.$("textarea").val()&&this.$("textarea").val().trim()!=="@"+this.autoMention||(this.blurTimeout=e.setTimeout(function(){t._setInactiveState()},500))},addMention:function(e){i.views.NewPost.prototype.addMention.apply(this,arguments),this.autoMention=e},onCheckboxSelected:function(t){if(e.clearTimeout(this.blurTimeout),this.isBroadCast()){this.onTextInputFocus(),this.$("#broadcast-submit").text(l.trans("Announce"));try{JSON.parse(localStorage.getItem("shownAnnouncementModal"))||(this.showAnnouncementModal(),localStorage.setItem("shownAnnouncementModal",!0))}catch(e){this.showAnnouncementModal()}}else this.onTextInputBlur(),this.$("#broadcast-submit").text(l.trans("Post"))},showAnnouncementModal:function(){var e=new i.views.DummyReactView({component:"AnnouncementModal",componentId:"announcement-modal"});e.render(),n("#generic-modal .modal-body").html(e.$el),n("#generic-modal").modal("show")},onPost:function(t){l.stopEvent(t),this.$(".warning").addClass("hidden");var a,r,o=n.trim(this.$("textarea").val()),c=this.$(t.currentTarget),u=this;if(""!==o){if(s.utils.currentUser().authenticated())localStorage.removeItem("unsent-repsonse"),this.unsent=void 0;else{try{localStorage.setItem("unsent-repsonse",JSON.stringify({body:o,id:this.parentId}))}catch(e){}i.router.navigate("/login?nexturl="+e.location.href,{trigger:!0})}c.prop("disabled",!0),r=new i.models.Message({ownername:this.to}),a={broadcast:this.isBroadCast(),parent_id:this.parentId,body:this.additionalText?o+this.additionalText:o},r.save(a,{success:function(e,t,n){u.trigger("message:new",e),u.$("textarea").val("").blur(),u.$("input[type='checkbox']").prop("checked",!1),u.$("#broadcast-submit").text(l.trans("Post")),c.prop("disabled",!1)},error:function(e,t,n){var a;throw a=t?t.responseJSON?t.responseJSON.error.message:t.statusText:s.utils.trans("There was a problem posting your message, please try again later."),u.onError(a),new Error("MessageNew View | status: "+(n&&n.xhr&&n.xhr.status?n.xhr.status:"none")+" | response: "+(t?JSON.stringify(t):"none")+" | isBroadcast: "+u.isBroadcast())}})}}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'        <img src="'+e.escapeExpression("function"==typeof(l=null!=(l=n.avatar||(null!=t?t.avatar:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"avatar",hash:{},data:s}):l)+'">\n'},3:function(e,t,n,a,s){var l;return"        "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-user",26,"wp-neutral-2","vhcenter",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},5:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'          <div class="broadcast">\n              <input class="on-broadcast-checkbox broadcast-checkbox" type="checkbox">\n              <label class="broadcast-checkbox-label">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Announce this to my followers",{name:"trans",hash:{},data:s}))+"</label>\n              "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-info",14,"wp-wp-neutral-2","on-broadcast-info broadcast-info",{name:"iconify",hash:{},data:s}))?l:"")+"\n          </div>\n"},7:function(e,t,n,a,s){return'id="broadcast-submit"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="avatar avatar-md">\n'+(null!=(l=n.if.call(r,null!=t?t.avatar:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'</div>\n<div class="message new-message-view clearfix">\n    <textarea class="form-control count-input new-textarea" role="textbox" data-limit="2000" data-counter="post-counter" data-name="PostContent" aria-multiline="true">'+c("function"==typeof(i=null!=(i=n.placeholder||(null!=t?t.placeholder:t))?i:o)?i.call(r,{name:"placeholder",hash:{},data:s}):i)+'</textarea>\n    <div class="warning hidden">\n      '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-warning",14,"wp-lighterror",{name:"iconify",hash:{},data:s}))?l:"")+'\n      <span class="text">'+c((n.trans||t&&t.trans||o).call(r,"There was a problem posting your message, please try again later.",{name:"trans",hash:{},data:s}))+'</span>\n    </div>\n    <div class="post-ui hidden">\n'+(null!=(l=n.if.call(r,null!=t?t.canBroadcast:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"        <button "+(null!=(l=n.if.call(r,null!=t?t.canBroadcast:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+' class="btn btn-sm btn-orange btn-right-align on-post pull-right">'+c((n.trans||t&&t.trans||o).call(r,"Post",{name:"trans",hash:{},data:s}))+'</button>\n        <span class="post-counter hidden pull-right"><span></span>/2000</span>\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("CommentNew",a.views.NewPost.extend({title:function(){return t.utils.trans("Join Wattpad")},subtitle:function(){return t.utils.trans("Sign up to vote, comment, and read stories offline.")},onPost:function(e){var n=$.trim(this.$("textarea").val());this.$(".warning").addClass("hidden"),this.$(".post-ui button").prop("disabled",!0),""!==n?t.utils.currentUser().authenticated()?t.utils.currentUser().get("verified_email")?this.createComment(n):this.onError(t.utils.trans("To comment, please verify your account.")):this.onAuthPrompt(e):this.$(".post-ui button").prop("disabled",!1)},createComment:function(e){var n=this,s=new a.models.CommentModel({body:e,paragraphId:this.collection.paragraphId||null,parentId:this.collection.commentId||this.collection.parentId||null,isReply:this.collection.isReply||!1,startPosition:this.collection.startPosition||0,endPosition:this.collection.endPosition||0,partId:this.collection.partId||null}),l={url:this.getUrlFromSource(s),wait:!0,success:this.onSuccess.bind(this),error:function(e,a,s){var l;l=a?a.responseJSON?a.responseJSON.error.message:a.statusText:t.utils.trans("There was a problem posting your message, please try again later."),n.onError(l)}};s.save({},l)},onSuccess:function(e){this.collection.add(e,{at:0}),a.local.clear("part."+this.collection.partId+".comments"),this.collection.trigger("add:new",e),this.$("textarea").val(""),this.$(".post-ui button").prop("disabled",!1),this.onTextInputBlur()},getUrlFromSource:function(e){return this.source&&this.source instanceof a.models.StoryPartModel?"/v4/parts/"+this.source.get("id")+"/comments":e.url()}})),a.mixin(a.views.CommentNew,"AuthPromptManagement")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(379));!function(e,t,n,s,l,i,r){i.add("ErrorToast",i.views.Base.extend({className:"error-toast",template:a.default,events:{"tap  .on-dismiss":"onDismiss"},initialize:function(e,t){var n=s.utils.trans("An error has occurred. We're sorry about that!");this.type="default",this.delay=0,this.error=e.message?e:e.error||{message:n},this.dismissAfterDuration=5e3,t&&(t.type&&(this.type=t.type),t.delay&&(this.delay=t.delay),t.dismissAfterDuration&&(this.dismissAfterDuration=t.dismissAfterDuration))},render:function(){var e={};return e.error=this.error,"dismissable"===this.type&&(this.$el.addClass("dismissable"),e.dismissable=!0),n("#toast-container").append(this.$el.html(this.template(e))),this.showToast(),this},showToast:function(){var t=this,n=this.$el.css("height");this.$el.css({bottom:-1*parseInt(n)+"px"}),e.setTimeout(function(){t.$el.css({bottom:"12px",opacity:"1",position:"relative"}),"default"===t.type&&t.autoDismiss()},1e3*t.delay)},onDismiss:function(t){var n=this;this.$el.css("opacity",0),e.setTimeout(function(){n.remove()},500)},autoDismiss:function(){var t=this;e.setTimeout(function(){t.onDismiss()},this.dismissAfterDuration)}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'<span class="pull-right on-dismiss">\n  '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-remove",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.dismissable:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'<p class="error-msg">\n  '+(null!=(l=e.lambda(null!=(l=null!=t?t.error:t)?l.message:l,t))?l:"")+"\n</p>\n"},useData:!0})},function(e,t,n){"use strict";var a=r(n(381)),s=r(n(382)),l=r(n(383)),i=r(n(384));function r(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,r,o,c,u){c.add("ProfileMain",c.views.RegionManager.extend({className:"user-information row",template:{public:i.default,private:l.default},initialize:function(e){e=e||{},this.isPrivateToMe=e.isPrivateToMe,this.listenTo(this,"scroll-to-element",this.scrollToElement),Handlebars.registerPartial("core.profile.private_profile_disclaimer",s.default),Handlebars.registerPartial("core.profile.theme_settings",a.default),Handlebars.registerPartial("core.signup_prompt",function(){return""})},render:function(){var n="req"===this.model.get("followerRequest")||"ign"===this.model.get("followerRequest"),a=t.extend(this.model.toJSON(),{followerRequested:n,showSubscriptionModal:this.showSubscriptionModal.bind(this)}),s=this.isPrivateToMe?this.template.private:this.template.public;if(this.$el.html(s(a)),n){var l=new c.views.ProfileRequest({model:this.model});this.setRegion("#profile-request",l.render())}if(this.isPrivateToMe)return this;var i=new c.models.PinnedMessage({username:this.model.get("username")}),o={lists:new c.collections.ReadingLists([],{username:this.model.get("username"),limit:2,nonEmpty:!0}),following:new c.collections.ProfileFollowing([],{username:this.model.get("username"),limit:14}),works:new c.collections.ProfileWorks([],{username:this.model.get("username"),limit:3})},u={about:new c.views.ProfileAbout({model:this.model,following:o.following}),lists:new c.views.ProfileLists({model:this.model,collection:o.lists,manualRegistration:!0}),works:new c.views.ProfileWorks({model:this.model,collection:o.works,manualRegistration:!0}),pinnedItem:new c.views.PinnedMessage({model:i})};r.utils.setCookie("signupFrom","user_profile",0,e.location.hostname.replace("www","")),r.utils.currentUser().authenticated()||(u.signup=new c.views.SignUpPrompt({model:new c.models.Authsignup,subtitle:r.utils.trans("Sign up to follow <strong>@%s</strong>",a.username)}),this.setRegion("#authentication-panel",u.signup.render())),this.setRegion("#profile-lists",u.lists),this.setRegion("#profile-works",u.works),this.setRegion("#profile-about",u.about.render());var d=this;Promise.resolve(o.lists.fetchNextSet()).then(function(){u.lists.render()}).then(function(){d.scrollToElementId&&t.delay(function(){d.trigger("scroll-to-element")},500)}),Promise.resolve(o.following.fetchNextSet()).then(function(){u.about.render()});d=this;return Promise.resolve(i.fetch()).then(function(){i.get("id")&&(d.$("#profile-pinned-item").empty(),d.setRegion("#profile-pinned-item",u.pinnedItem),u.pinnedItem.render())}),this},showSubscriptionModal:function(){if(n("#subscription-modal").length){var e=new c.views.SubscriptionModal({model:this.model});this.$("#subscription-modal").empty().append(e.render().$el),e.showModal()}},setElement:function(e){var t,a,s=n(e);for(var l in c.views.RegionManager.prototype.setElement.call(this,e),this.regions)this.regions.hasOwnProperty(l)&&(a=(t=this.regions[l].view).className.trim().replace(/ /g,"."),t.setElement(s.find("."+a)))},setScrollToElementId:function(e,t){this.scrollToElementId=e,t&&this.trigger("scroll-to-element")},scrollToElement:function(){this.scrollToElementId&&n("html, body").animate({scrollTop:this.$("#"+this.scrollToElementId).offset().top-n("#header").height()},500)}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"                    "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Select your premium theme",{name:"trans",hash:{},data:s}))+"\n"},3:function(e,t,n,a,s){return"                    "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Select your theme",{name:"trans",hash:{},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div id="subscription-modal"></div>\n<div id="theme-settings">\n    <div class="about-themes panel panel-default panel-default2">\n        <div class="panel-body">\n            <div class="title">\n'+(null!=(l=n.if.call(i,(n.getCurrentUserAttr||t&&t.getCurrentUserAttr||r).call(i,"premium",{name:"getCurrentUserAttr",hash:{},data:s}),{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"            </div>\n            <hr>\n            "+(null!=(l=(n.reactComponent||t&&t.reactComponent||r).call(i,"ThemeSettings","premium-theme",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n        </div>\n    </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"<br>\n<div>"+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-lock",36,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</div>\n<h4>"+o((n.trans||t&&t.trans||r).call(i,"Private Profile",{name:"trans",hash:{},data:s}))+'</h4>\n<div class="disclaimer">'+o((n.trans||t&&t.trans||r).call(i,"This profile is private. You need to follow this user to see their information.",{name:"trans",hash:{},data:s}))+"</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i;return'<div class="col-sm-4 col-lg-5 follower-request-container">\n    <section id="profile-request">'+(null!=(l="function"==typeof(i=null!=(i=n.requestContent||(null!=t?t.requestContent:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"requestContent",hash:{},data:s}):i)?l:"")+'</section>\n</div>\n<div class="col-sm-8 col-lg-7 profile-disclaimer-container">\n'},3:function(e,t,n,a,s){return'<div class="col-sm-12 profile-disclaimer-container">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.followerRequested:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+(null!=(l=e.invokePartial(a["core.profile.private_profile_disclaimer"],t,{name:"core.profile.private_profile_disclaimer",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.showAdminOptions:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'        <section id="profile-admin" class="bg-danger">\n          <header>\n            <h3>'+o((n.trans||t&&t.trans||r).call(i,"Admin",{name:"trans",hash:{},data:s}))+'</h3>\n          </header>\n\n          <div class="description">\n            '+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.email:l,t))+" ("+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.age:l,t))+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.gender:l,t))+')\n            <hr>\n\n            <a href="https://www.wattpad.com/staff/writer_summary?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'">User Overview Report</a>\n            <hr>\n\n            <a href="http://redash.wattpad.com/queries/1229?p_userid='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'" class="text-danger">\n              Login Date / IP\n            </a>\n            <hr>\n\n            '+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.categories:l,t))+"\n            <hr>\n\n            Programs: <ul>"+(null!=(l=n.each.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.programs:l,{name:"each",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"</ul>\n            <hr>\n\n            Has Mobile App: "+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.mobileApp:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:"")+"\n            <hr>\n\n            Currently Featured: "+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.isFeatured:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:"")+"\n            <hr>\n\n            Is Premium: "+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.isPremium:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:"")+"\n            <hr>\n\n            Wallet Coins: "+(null!=(l=n.each.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.wallet:l,{name:"each",hash:{},fn:e.program(10,s,0),inverse:e.program(12,s,0),data:s}))?l:"")+'\n            <hr>\n\n            <a href="https://admin.wattpad.com/admin/db/users.php?PME_sys_rec='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&PME_sys_operation=Change" class="text-danger">details</a> |\n            <a href="/admin/becomeuser?id='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'" class="text-danger">become user</a> |\n            <a href="https://admin.wattpad.com/admin/user_library?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'" class="text-danger">view library</a>\n            <hr>\n\n            <a href="https://admin.wattpad.com/admin/sendMessagesWattpad.php?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'">Send Message To '+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+' As Wattpad</a>\n            <hr>\n\n            <a href="https://admin.wattpad.com/admin/view_messages_from_wattpad_to_user.php?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'">View Conversation Between Wattpad And '+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'</a>\n            <hr>\n\n            <a href="/admin/ignore_list?id='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&type=ignored" class="text-danger">muted</a> |\n            <a href="/admin/ignore_list?id='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&type=ignoredby" class="text-danger">muted by</a>\n            <hr>\n\n            Activities:\n              <a href="https://admin.wattpad.com/admin/db/comments.php?PME_sys_qf2='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'" class="text-danger">comments</a> |\n              <a href="https://admin.wattpad.com/admin/db/messages.php?PME_sys_qf1='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'" class="text-danger">messages</a> |\n              <a href="https://admin.wattpad.com/admin/user_changes?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'" class="text-danger">change history</a>\n            <hr>\n\n            Stories:\n              <a href="/mystories?display_user='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'" class="text-danger">manage</a> |\n              <a href="/contentreview?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'" class="text-danger">review</a> |\n              <a href="/contentreview?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'&deleted=1&spam=1" class="text-danger">deleted</a> |\n              <a href="https://admin.wattpad.com/admin/restore_all?id='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'" class="text-danger">restore all</a>\n            <hr>\n\n            Timeout:\n'+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.timeout:l,{name:"if",hash:{},fn:e.program(14,s,0),inverse:e.program(16,s,0),data:s}))?l:"")+'            | <a href="/admin/user_timeouts.php?username='+o(c(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.username:l,t))+'" class="text-danger">view history</a>\n            <hr>\n\n'+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.ambassador:l,{name:"if",hash:{},fn:e.program(18,s,0),inverse:e.program(20,s,0),data:s}))?l:"")+"            <hr>\n\n"+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.isAuthor:l,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.program(24,s,0),data:s}))?l:"")+"            <hr>\n\n"+(null!=(l=(n.ifequal||t&&t.ifequal||r).call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.vetted:l,"v",{name:"ifequal",hash:{},fn:e.program(26,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=(n.ifequal||t&&t.ifequal||r).call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.vetted:l,"f",{name:"ifequal",hash:{},fn:e.program(28,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=(n.ifequal||t&&t.ifequal||r).call(i,null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.vetted:l,"c",{name:"ifequal",hash:{},fn:e.program(30,s,0),inverse:e.noop,data:s}))?l:"")+"          </div>\n        </section>\n"},3:function(e,t,n,a,s){var l;return"\n            "+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"\n            "},4:function(e,t,n,a,s){var l;return"<li>"+e.escapeExpression("function"==typeof(l=null!=(l=n.key||s&&s.key)?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:s}):l)+"</ li>"},6:function(e,t,n,a,s){return"Yes"},8:function(e,t,n,a,s){return"No"},10:function(e,t,n,a,s){return e.escapeExpression(e.lambda(null!=t?t.amount:t,t))+" "},12:function(e,t,n,a,s){return" None "},14:function(e,t,n,a,s){var l;return"                "+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.timeout:l,t))+"\n"},16:function(e,t,n,a,s){return"                None\n"},18:function(e,t,n,a,s){var l;return'            IS AMBASSADOR <a href="/admin/userflag.php?flag=moderator&id='+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=clear" class="text-danger">[set non-ambassador]</a>\n'},20:function(e,t,n,a,s){var l;return'            IS <strong>NOT</strong> AMBASSADOR <a href="/admin/userflag.php?flag=moderator&id='+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=set" class="text-danger">[set ambassador]</a>\n'},22:function(e,t,n,a,s){var l;return'            VERIFIED <a href="/admin/userflag.php?flag=author&id='+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=clear" class="text-danger">[set non-verified]</a>\n'},24:function(e,t,n,a,s){var l;return'            NOT VERIFIED <a href="/admin/userflag.php?flag=author&id='+e.escapeExpression(e.lambda(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=set" class="text-danger">[set verified]</a>\n'},26:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'            VETTED: <a href="/admin/user_vetted.php?id='+r(i(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=c" class="text-danger">[set not vetted]</a> <a href="/admin/user_vetted.php?id='+r(i(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=f" class="text-danger">[set failed]</a>\n'},28:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'            FAILED: <a href="/admin/user_vetted.php?id='+r(i(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=v" class="text-danger">[set vetted]</a> <a href="/admin/user_vetted.php?id='+r(i(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=c" class="text-danger">[set not vetted]</a>\n'},30:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'            NOT VETTED: <a href="/admin/user_vetted.php?id='+r(i(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=v" class="text-danger">[set vetted]</a> <a href="/admin/user_vetted.php?id='+r(i(null!=(l=null!=(l=null!=t?t.admin:t)?l.profile:l)?l.id:l,t))+'&action=f" class="text-danger">[set failed]</a>\n'},32:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.isPremiumEligible||(null!=t?t.isPremiumEligible:t))?i:n.helperMissing,r={name:"isPremiumEligible",hash:{},fn:e.program(33,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isPremiumEligible||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},33:function(e,t,n,a,s){var l;return'        <section id="profile-theme">\n'+(null!=(l=e.invokePartial(a["core.profile.theme_settings"],t,{name:"core.profile.theme_settings",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"        </section>\n"},35:function(e,t,n,a,s){var l,i;return'        <section id="authentication-panel" class="panel panel-default2">\n            <div class="signup-modal">\n                '+(null!=(l="function"==typeof(i=null!=(i=n.signupContent||(null!=t?t.signupContent:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"signupContent",hash:{},data:s}):i)?l:"")+"\n            </div>\n        </section>\n"},37:function(e,t,n,a,s){var l,i;return'        <section id="profile-pinned-item">'+(null!=(l="function"==typeof(i=null!=(i=n.pinnedItemContent||(null!=t?t.pinnedItemContent:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"pinnedItemContent",hash:{},data:s}):i)?l:"")+"</section>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u="function",d='<div class="col-sm-12 col-md-4">\n\n'+(null!=(l=n.if.call(o,null!=t?t.admin:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'        <br>\n        <section id="profile-request">'+(null!=(l=typeof(i=null!=(i=n.requestContent||(null!=t?t.requestContent:t))?i:c)===u?i.call(o,{name:"requestContent",hash:{},data:s}):i)?l:"")+'</section>\n        <section id="profile-about">'+(null!=(l=typeof(i=null!=(i=n.aboutContent||(null!=t?t.aboutContent:t))?i:c)===u?i.call(o,{name:"aboutContent",hash:{},data:s}):i)?l:"")+"</section>\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||c).call(o,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(32,s,0),inverse:e.noop,data:s}))?l:"")+"\n";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:c,r={name:"isLoggedIn",hash:{},fn:e.noop,inverse:e.program(35,s,0),data:s},l=typeof i===u?i.call(o,r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+"\n"+(null!=(l=(n.isWattpad||t&&t.isWattpad||c).call(o,null!=t?t.username:t,{name:"isWattpad",hash:{},fn:e.noop,inverse:e.program(37,s,0),data:s}))?l:"")+'    </div>\n\n    <div class="col-sm-8">\n        <br>\n        <section id="profile-works">'+(null!=(l=typeof(i=null!=(i=n.worksContent||(null!=t?t.worksContent:t))?i:c)===u?i.call(o,{name:"worksContent",hash:{},data:s}):i)?l:"")+'</section>\n        <section id="profile-lists">'+(null!=(l=typeof(i=null!=(i=n.listsContent||(null!=t?t.listsContent:t))?i:c)===u?i.call(o,{name:"listsContent",hash:{},data:s}):i)?l:"")+'</section>\n        <section id="profile-message" class="message-user"></section>\n    </div>\n'},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(386));!function(e,t,n,s,l,i,r){i.add("ProfileConversations",i.views.RegionManager.extend({className:"user-activity row",template:a.default,initialize:function(e){e=e||{};var t=s.utils.currentUser();t.authenticated()&&t.get("username")===this.model.get("username")?e.placeholder=s.utils.trans("Post a Message"):e.placeholder=s.utils.trans("Write to %s",this.model.get("username"))},render:function(){var e=this.model.toJSON(),n=this.template,a=this;this.$el.html(n(e));var s=new i.views.ProfileInteractions({model:this.model,pinnedItem:new i.models.PinnedMessage({username:this.model.get("username"),type:"newMessage"}),collection:new i.collections.ActivityMessages([],{username:this.model.get("username"),limit:10}),isMessage:!0});return this.setRegion("#profile-messages",s.render()),t.defer(function(){a.$("#profile-messages [data-toggle=tooltip]").tooltip()}),this},setElement:function(e){var t,a,s=n(e);for(var l in i.views.RegionManager.prototype.setElement.call(this,e),this.regions)this.regions.hasOwnProperty(l)&&(a=(t=this.regions[l].view).className.trim().replace(/ /g,"."),t.setElement(s.find(l+" ."+a)))}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'      <div class="wattpad-empty">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Conversation has been disabled on this profile.",{name:"trans",hash:{},data:s}))+"</div>\n"},3:function(e,t,n,a,s){var l,i;return'      <section id="profile-messages">'+(null!=(l="function"==typeof(i=null!=(i=n.messagesContent||(null!=t?t.messagesContent:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"messagesContent",hash:{},data:s}):i)?l:"")+"</section>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div class="col-sm-8 col-lg-7" id="profile-message-wrapper">\n'+(null!=(l=(n.isWattpad||t&&t.isWattpad||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,{name:"isWattpad",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"</div>"},useData:!0})},function(e,t,n){"use strict";var a=l(n(388)),s=l(n(389));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r){r.add("ProfileFollowersFollowingModal",r.views.IncrementalList.extend({className:"profile-followers-following-modal modal fade",template:s.default,itemView:r.views.UserRowItem,containerId:"#user-row-items",initialize:function(e){e=e||{},this.isMobile=r.get("device").is.mobile,this.showRemoveFollowersOption=!1,e.showFollowing?this.title=i.sprintf("%s %s",[i.format(this.collection.total),i.trans("Following")]):(this.model&&this.model.get("isPrivate")&&this.model.get("username")===l.utils.currentUser().get("username")&&(this.showRemoveFollowersOption=!0),this.title=i.sprintf(i.ngettext("%s Follower","%s Followers",this.collection.total),[i.format(this.collection.total)])),this.isMobile?Handlebars.registerPartial("mobile.profile.profile_follow_modal",a.default):Handlebars.registerPartial("desktop.profile.profile_follow_modal",a.default),this.listenTo(r,"app:user:follow",this.updateToFollowingButton),this.listenTo(r,"app:user:unfollow",this.updateToFollowButton)},showModal:function(){this.$el.modal("show")},getTemplateData:function(){return{isMobile:this.isMobile,title:this.title,hasMore:this.collection.offset<this.collection.total}},getItemViewOptions:function(){return{showRemoveFollowersOption:this.showRemoveFollowersOption}},onShowMore:function(e){e&&i.stopEvent(e),this.$(".show-more-message").addClass("hidden"),this.$(".loading-message").removeClass("hidden");var t=this;Promise.resolve(this.collection.fetchNextSet()).then(function(){t.setupDOM(),t.$(".show-more-message").removeClass("hidden"),t.$(".loading-message").addClass("hidden")})},updateToFollowingButton:function(e){var n=this.collection.findWhere({username:e});if(!t.isEmpty(n)){var a=this.$('.btn-fan[data-target="'+e+'"]');a.removeClass("btn-white").addClass("btn-teal"),a.find(".fa").removeClass("fa-follow fa-wp-base-2-dark").addClass("fa-following fa-wp-neutral-5"),a.find(".truncate").text(i.trans("Following")),n.set("following",!0)}},updateToFollowButton:function(e){var n=this.collection.findWhere({username:e});if(!t.isEmpty(n)){var a=this.$('.btn-fan[data-target="'+e+'"]');a.removeClass("btn-teal").addClass("btn-white"),a.find(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-base-2-dark"),a.find(".truncate").text(i.trans("Follow")),n.set("following",!1)}}})),r.mixin(r.views.ProfileFollowersFollowingModal,"InfiniteScroll","FollowManager")}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="modal-dialog">\n  <div class="modal-content">\n\n    <header class="modal-header">\n      <h1 class="modal-title">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'</h1>\n\n      <div class="close" data-dismiss="modal">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      </div>\n    </header>\n\n    <div class="modal-body">\n      <div id="user-row-items" class="collection row"></div>\n\n      <div class="show-more center-text'+(null!=(l=n.if.call(r,null!=t?t.hasMore:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:"")+'">\n        <button class="btn btn-grey on-showmore" role="button">\n          <span class="show-more-message">\n            <span>'+c((n.trans||t&&t.trans||o).call(r,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-down-small",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n          </span>\n          <span class="loading-message hidden">\n            '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||o).call(r,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n            <span>"+c((n.trans||t&&t.trans||o).call(r,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n          </span>\n        </button>\n      </div> \n    </div>\n\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["mobile.profile.profile_follow_modal"],t,{name:"mobile.profile.profile_follow_modal",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:""},3:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["desktop.profile.profile_follow_modal"],t,{name:"desktop.profile.profile_follow_modal",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:""},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(4));!function(e,t,n,s,l,i,r){i.add("ProfileFollowing",i.views.IncrementalList.extend({className:"user-following row",template:a.default,itemView:i.views.UserItem,getTemplateData:function(){var e={};return e.count=this.collection.total,e.containerId="content",e.emptyMessage=l.trans("This user is not following anyone yet."),e},setElement:function(e){i.views.IncrementalList.prototype.setElement.apply(this,arguments),this.setButtonState()}})),i.mixin(i.views.ProfileFollowing,"InfiniteScroll")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=c(n(392)),s=c(n(393)),l=c(n(394)),i=c(n(395)),r=c(n(396)),o=c(n(20));function c(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,c,u,d,h){d.add("ProfileLayout",d.views.RegionManager.extend({className:"profile-layout",template:r.default,partials:{profile_edit:i.default,profile_mute_modal:l.default,profile_close_modal:s.default,profile_timeout_modal:a.default,user_badges:o.default},events:{"tap   .on-nav-item":"onSectionNavigate","click .on-nav-item":"stopEvent","tap   .on-follow-user":"onFollowUser","click .on-follow-user":"stopEvent","tap   .on-following-request":"onFollowingRequest","tap   .on-follower-request":"onFollowerRequest","touchstart .on-touch":"setTouchState","touchend   .on-touch":"removeTouchState","tap    .on-edit-profile":"onEditProfile","tap    .on-edit-cancel":"onCancelEdit","tap    .on-edit-save":"onSaveEdit","tap    .on-change-invalid-image":"onChangeInvalidImage","tap    .on-mute-user":"onMuteUser","tap    .on-unmute-user":"onUnmuteUser","tap    .on-timeout-user":"onTimeoutUser","tap    .on-close-user-account":"onCloseUserAccount","tap    .on-notice-action":"onNoticeAction","tap    .on-notice-cancel":"onNoticeCancel","tap   .scroll-to-element":"scrollToElement","click .scroll-to-element":"stopEvent","tap   .on-followers":"showFollowersModal","click .on-followers":"stopEvent","tap   .on-view-conversations":"viewAllConversations","click .on-view-conversations":"stopEvent"},sections:{about:{View:d.views.ProfileMain},following:{View:d.views.ProfileFollowing,Collection:d.collections.ProfileFollowing},conversations:{View:d.views.ProfileConversations}},editMode:null,reportModalContainer:".profile-options-modal",requestType:"reported_users",isMainReportModal:!0,modalTitle:c.utils.trans("Report a User"),initialize:function(t){if(t=t||{},this.username=t.username,this.sectionView=null,this.isPrivateToMe=t.isPrivateToMe,this.recentlyUnmuted=t.recentlyUnmuted,this.section=t.section||"about",this.isFollowersSection=!1,this.recentlyUnmuted){var n={className:"unmute",body:c.utils.trans("%s is unmuted. You can mute them at any time from their profile.",t.username)};setTimeout(function(){e.store.dispatch(e.app.components.actions.toggleToast(n))},0)}"followers"===t.section&&(this.section="about",this.isFollowersSection=!0),Handlebars.registerPartial("desktop.profile.profile_mute_modal",this.partials.profile_mute_modal),Handlebars.registerPartial("desktop.profile.profile_close_modal",this.partials.profile_close_modal),Handlebars.registerPartial("desktop.profile.profile_timeout_modal",this.partials.profile_timeout_modal),Handlebars.registerPartial("core.components.user_badges",this.partials.user_badges),this.listenTo(d,"app:profile:edit",this.onEditProfile),this.listenTo(d,"app:user:follow",this.updateToFollowingButton),this.listenTo(d,"app:user:unfollow",this.updateToFollowButton)},render:function(){var e=this.model.toJSON(),n=this;e.name&&(e.name=u.sanitizeHTML(e.name));var a=this.model.isStaff(),s=this.model.isWattpadStar();return a&&(e.ambassador=!1,e.verified=!1),this.$el.html(this.template(t.extend(e,{recentlyUnmuted:this.recentlyUnmuted,isPrivateToMe:this.isPrivateToMe,staff:a,star:s,followingRequested:"req"===this.model.get("followingRequest"),dataModel:this.model,onWalletClick:function(){return u.showBuyCoinsModal("profile")}}))),this.setSection(this.section),t.defer(function(){n.$("header [data-toggle=tooltip]").tooltip(),n.$("nav [data-toggle=tooltip]").tooltip(),n.isFollowersSection&&n.showFollowersModal()}),this},reportMoreInfo:function(){return[{key:"Reported User",val:e.location.href}]},reportUserName:function(){return this.model.get("username")},setElement:function(e){var a=n(e);if(d.views.RegionManager.prototype.setElement.call(this,e),this.sectionView){var s="",l=this.sectionView.className.trim().split(" ");t.each(l,function(e){s+="."+e}),this.sectionView.setElement(a.find(s.trim()))}},setSection:function(e){var t,a,s,l,i=this.$("#page-navigation"),r=this;i.find("nav li").removeClass("active"),i.find("nav li[data-section="+e+"]").addClass("active"),this.clearRegion("#content"),"about"===e?(this.sectionView=new this.sections[e].View({model:this.model,isPrivateToMe:this.isPrivateToMe}),this.setRegion("#content",this.sectionView.render())):"conversations"===e?(this.sectionView=new this.sections[e].View({model:this.model,isPrivateToMe:this.isPrivateToMe}),this.setRegion("#content",this.sectionView.render())):(t=new this.sections[e].Collection([],{username:this.username,limit:12}),this.sectionView=new this.sections[e].View({model:this.model,collection:t}),this.setRegion("#content",this.sectionView),l=this.sectionView.cid,n.when(t.fetchNextSet()).done(function(){l===r.sectionView.cid&&r.sectionView.render()}),this.model.get("username")===u.currentUser().get("username")&&"following"===e&&(a=this.model.get("numFollowing"),s=i.find('li[data-section="following"] span'),t.on("remove",function(){s.html(u.count(a-1))}))),this.section=e,this._setTitle(e)},_setTitle:function(e){var t;if("about"===e)t=this.model.get("name")?this.model.get("name")+" (@"+this.username+")":this.username;else if("conversations"===e){var n=this.username;this.model.get("name")&&(n=this.model.get("name")+" (@"+this.username+")"),t=c.utils.trans("%s's conversations",n)}else"following"===e?t=c.utils.trans("People followed by %s",this.username):"followers"===e&&(t=c.utils.trans("People following %s",this.username));c.utils.setTitle(t)},onSectionNavigate:function(e){var t=n(e.currentTarget),a=t.parent().data("section"),s="about"===a?"/user/"+this.username:"/user/"+this.username+"/"+a;c.utils.currentUser().authenticated()||"conversations"!==a&&"following"!==a?(d.router.navigate(s,{replace:!0}),this.setSection(a),c.utils.pushEvent({},"virtualPageview")):(c.utils.stopEvent(e),this.onAuthPrompt(e),t.hasClass("num-following")&&n(".modal-backdrop").addClass("profile-show"))},viewAllConversations:function(t){u.stopEvent(t),c.utils.currentUser().authenticated()?e.location=n(t.currentTarget).attr("href"):(this.onAuthPrompt(t),n(".modal-backdrop").addClass("profile-show"))},onFollowUser:function(e){if(u.currentUser().authenticated()){var t=this.model.get("numFollowers");t=this.model.get("following")?t-1:t+1,this.$(".followers-count").text(u.count(t)),this.model.set("numFollowers",t)}},updateToFollowingButton:function(e){if(this.model.get("username")===e){var t=this.$('.btn-fan[data-target="'+e+'"]');t.removeClass("btn-white").addClass("btn-teal"),t.find(".fa").removeClass("fa-follow fa-wp-base-2-dark").addClass("fa-following fa-wp-neutral-5"),t.find(".truncate").text(u.trans("Following")),this.model.set("following",!0)}},updateToFollowButton:function(e){if(this.model.get("username")===e){var t=this.$('.btn-fan[data-target="'+e+'"]');t.removeClass("btn-teal").addClass("btn-white"),t.find(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-base-2-dark"),t.find(".truncate").text(u.trans("Follow")),this.model.set("following",!1)}},onFollowingRequest:function(e){var t=this,n=this.$(e.currentTarget),a="req"===this.model.get("followingRequest"),s=a?"unfollow":"follow",l=a?"btn-white":"btn-teal",i=a?u.iconify("fa-follow",16,"wp-base-2")+" "+u.trans("Request"):u.iconify("fa-following-request",16,"wp-neutral-5")+" "+u.trans("Requested"),r=a?"":"req";u.currentUser().authenticated()?(n.removeClass("btn-teal btn-white").addClass(l).html(i),Promise.resolve(c.utils.currentUser().following()[s](this.model)).then(function(){t.model.set("followingRequest",r)})):this.onAuthPrompt(e)},setTouchState:function(e){n(e.currentTarget).addClass("touched")},removeTouchState:function(e){n(e.currentTarget).removeClass("touched")},initEditProfile:function(){var a=this,s=this.model.toJSON();s.aboutCount=s.description.length,this.$el.append(this.partials.profile_edit(s)),t.bindAll(this,"onAvatarSubmit","onBackgroundSubmit","onFileUploadComplete","onFileUploadError"),this.uploadBG=new e.ss.SimpleUpload({url:"/api/v3/users/"+this.username+"/image",name:"file",allowedExtensions:["jpg","jpeg","png","gif"],accept:"image/jpeg, image/png, image/gif",data:{type:"background"},button:this.$("#edit-background button"),maxSize:1024,onSubmit:this.onBackgroundSubmit,onComplete:this.onFileUploadComplete,onExtError:this.onExtentionError,onSizeError:this.onSizeError,onError:this.onFileUploadError}),this.uploadAvatar=new e.ss.SimpleUpload({url:"/api/v3/users/"+this.username+"/image",name:"file",allowedExtensions:["jpg","jpeg","png","gif"],accept:"image/jpeg, image/png, image/gif",data:{type:"avatar"},button:this.$("#edit-avatar button"),maxSize:1024,onSubmit:this.onAvatarSubmit,onComplete:this.onFileUploadComplete,onExtError:this.onExtentionError,onSizeError:this.onSizeError,onError:this.onFileUploadError}),this.inputFields={},this.$('.edit-profile input[type="text"], .edit-profile textarea').each(function(){a.inputFields[n(this).data("field")]=n(this)})},onExtensionError:function(){e.alert(u.trans("The type of file you are trying to upload is not supported."))},onSizeError:function(){e.alert(u.trans("The image you are trying to upload is too large, please upload a file smaller than 1MB."))},onEditProfile:function(){if(!c.utils.currentUser().get("verified_email")){var e=new d.views.PleaseVerifyModal;return n("#generic-modal .modal-body").html(e.render().$el),void n("#generic-modal").modal({})}null===this.editMode&&this.initEditProfile(),this.showEditUI(),this.editMode=!0},onDescriptionUpdate:function(e){this.$(".on-edit-save").prop("disabled",!e),e?this.$(".description-counter").removeClass("count-error"):this.$(".description-counter").addClass("count-error")},onSaveEdit:function(){var t,n,a,s={},l={},i=this;for(t in this.inputFields)this.inputFields.hasOwnProperty(t)&&(n=this.inputFields[t].val())!==(a=this.model.get(t))&&(l[t]=a,s[t]=n);d.local.clear("user."+this.username),this.model.set(s),this.model.save(s,{patch:!0,type:"put"}).fail(function(t,n){i.model.set(l),e.alert(u.trans("Something went wrong, your changes were not saved. ")+(t.responseJSON.message||""))}),this.editMode=!1,this.hideEditUI(),this.setSection("about")},onCancelEdit:function(){var e;for(e in this.hideEditUI(),this.inputFields)this.inputFields.hasOwnProperty(e)&&this.inputFields[e].val(this.model.get(e));this.$(".on-edit-save").prop("disabled",!1),this.resetCount(),this.editMode=!1},showEditUI:function(){n(".edit-profile").removeClass("hidden"),e.setTimeout(function(){n(".edit-profile").removeClass("faded")},80),u.supportsTransition()?(n("#header, .background-lg h3").addClass("faded"),n("#content").addClass("hidden")):n("#header, .background-lg h3, #content").addClass("hidden")},hideEditUI:function(){var t=this.model.get("name"),a=this.model.get("username"),s=this.$(".profile-name").text();t&&s!==t?this.$(".profile-name").text(t):t||s===a||this.$(".profile-name").text(a),u.supportsTransition()?(this.$("#edit-controls, #edit-overlay").on(u.transitionEndStrings,function(){n(this).addClass("hidden").off(u.transitionEndStrings),n("#content").removeClass("hidden"),e.setTimeout(function(){n("#header, .background-lg h3").removeClass("faded")},30)}),this.$(".edit-profile").addClass("faded"),this.$(".edit-profile:not(#edit-controls)").addClass("hidden")):(this.$(".edit-profile").addClass("hidden faded"),n("#content").removeClass("hidden"))},onAvatarSubmit:function(e,t,a){var s,l=n("#edit-avatar");(s={image:this.$(".avatar img"),button:l.find("button"),loading:l.find(".loading, .loading-bg")}).oldSrc=s.image.attr("src"),s.image.attr("src",""),this.uploadValues={type:"avatar",data:s},this.uploadSubmitUI(s)},onBackgroundSubmit:function(e,t,a){var s,l=n("#edit-background");(s={image:n("header.background-lg"),button:n("#edit-background button, #edit-overlay"),loading:l.find(".loading")}).oldSrc=s.image.css("background-image"),s.image.css("background-image",""),this.uploadValues={type:"background",data:s},this.uploadSubmitUI(s)},onFileUploadComplete:function(t,n,a){var s,l,i,r=this.uploadValues.type,o=this.uploadValues.data,c=/\.(\d)+\.(jpe*g|gif|png)/;this.uploadCompleteUI(o),"avatar"===r?(s=o.oldSrc.replace(c,"."+Date.now()+".$2"),o.image.attr("src",s),d.local.clear("user."+this.username),this.model.set("avatar",s)):"background"===r&&("none"===o.oldSrc?(s='url("'+(i=e.location.origin+"/userbgs/"+this.model.get("username")+".1920."+Date.now()+".jpg")+'")',l=i):(s=o.oldSrc.replace(c,"."+Date.now()+".$2"),l=this.model.get("backgroundUrl").replace(c,"."+Date.now()+".$2")),o.image.css("background-image",s),d.local.clear("user."+this.username),this.model.set("backgroundUrl",l))},onFileUploadError:function(t,n,a,s,l,i){e.alert("Error during upload - "+a+":"+s+" - "+l.msg)},uploadSubmitUI:function(e){u.supportsTransition()?e.button.on(u.transitionEndStrings,function(){n(this).off(u.transitionEndStrings).addClass("longfade")}).addClass("faded"):e.button.addClass("faded"),e.loading.each(function(){n(this).removeClass("faded")})},uploadCompleteUI:function(t){u.supportsTransition()?e.setTimeout(function(){t.button.each(function(){n(this).on(u.transitionEndStrings,function(){n(this).off(u.transitionEndStrings).removeClass("longfade")}).removeClass("faded")})},3600):e.setTimeout(function(){t.button.removeClass("faded")},4e3),t.loading.each(function(){n(this).addClass("faded")})},onChangeInvalidImage:function(t){var a=n(t.currentTarget).data("imagetype"),s=this.model.get("username"),l=e.prompt("Why is this being banned? Options: 'copyright' or 'banned content'","copyright OR banned content");l?(this.deleteImage(s,a,l),d.local.clear("user."+s)):e.alert("Banning was cancelled.")},deleteImage:function(t,a,s){Promise.resolve(n.ajax({type:"POST",data:{reason:s},url:"/api/v3/internal/users/"+t+"/"+a})).then(function(t){e.alert("Successfully deleted "+a+"!"),e.location.reload()}).catch(function(t){console.error(t),e.alert("Failed to delete "+a+"."),e.location.reload()})},onMuteUser:function(){var e=this.model.get("username"),t=this;n.ajax({type:"POST",url:"/apiv2/ignoreuser?id="+e+"&action=ignore_user",success:function(){d.local.clear("user."+e);var n=new d.views.MutedProfile({model:t.model,recentlyMuted:!0});d.transitionTo(n,{username:e,hasHeader:!0,hasFooter:!0})}})},onUnmuteUser:function(){var e=this.model.get("username"),t=this;n.ajax({type:"POST",url:"/apiv2/ignoreuser?id="+e+"&action=unignore_user",success:function(){t.$("#profile-more-options .mute").removeClass("hide"),t.$("#profile-more-options .unmute").addClass("hide")}})},onCloseUserAccount:function(t,a){a=a||e;var s=n("#close-reason").val(),l=n("#close-reason option:selected").text();s?a.confirm("You are blocking this user because of "+l+". Are you sure?")?n.ajax({type:"POST",url:"/api/v3/users/"+this.model.get("username")+"/close",data:{reason:s},success:function(e){a.alert("successfully closed user account"),a.location.reload()},error:function(e){a.alert(n.parseJSON(e.responseText).message)}}):a.alert("User has not been blocked"):a.alert("You must select an option")},onTimeoutUser:function(t,a){a=a||e;var s=n("#timeout-duration").val(),l=n("#timeout-reason").val();""===l?a.alert("You must specify a reason"):n.ajax({type:"POST",url:"/v4/users/"+this.model.get("username")+"/timeout",data:{duration:s,reason:l},success:function(e){a.alert("successfully timed-out user"),a.location.reload()},error:function(e){a.alert(n.parseJSON(e.responseText).message)}})},onNoticeAction:function(){e.open("//support.wattpad.com/hc/articles/203154850-The-New-Profile-is-Here-","_blank")},onNoticeCancel:function(){n("body").removeClass("show-notice"),c.utils.setCookie("x-newpro-note",1,60)},scrollToElement:function(e){var t=!0;"about"!==this.section&&(this.setSection("about"),d.router.navigate("/user/"+this.username,{replace:!0}),t=!1),this.sectionView.setScrollToElementId(n(e.currentTarget).data("id"),t)},showFollowersModal:function(e){var t=this,n=new d.collections.ProfileFollowers([],{username:this.username,limit:10});c.utils.currentUser().authenticated()?Promise.resolve(n.fetchNextSet()).then(function(){var e=new d.views.ProfileFollowersFollowingModal({model:t.model,collection:n});t._setTitle("followers"),t.$("#follower-modal").empty().append(e.render().$el),e.showModal(),t.$("#follower-modal").on("hidden.bs.modal",function(){if(t.isFollowersSection){t.isFollowersSection=!1;var n="about"===t.section?"":"/"+t.section;d.router.navigate("/user/"+t.username+n,{replace:!0})}t._setTitle(t.section),e.remove()})}):this.onAuthPrompt(e)}})),d.mixin(d.views.ProfileLayout,"InputCounterManagement","ReportManagement","ReportConduct","AuthPromptManagement","FollowManager")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<section class="modal profile-modal fade" id="userTimeout" tabindex="-1" role="dialog" aria-labelledby="userTimeout" aria-hidden="true">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <header class="modal-header">\n                <div class="pull-right top-right close" data-dismiss="modal">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</div>\n                <h3 class="modal-title" id="myModalLabel">User Time-Out</h3>\n            </header>\n            <div class="modal-body">\n                <p>Duration:</p>\n                <select id="timeout-duration">\n                    <option value="86400">1 Day</option>\n                    <option value="172800">2 Days</option>\n                </select>\n                <p>Reason:</p>\n                <textarea class="form-control" role="textbox" aria-multiline="true" id="timeout-reason" name="timeout-reason" rows="10" cols="46"></textarea>\n            </div>\n            <footer class="modal-footer">\n                <button type="button" class="btn btn-orange on-timeout-user">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Save",{name:"trans",hash:{},data:s}))+"</button>\n            </footer>\n        </div>\n    </div>\n</section>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<section class="modal profile-modal fade" id="userClose" tabindex="-1" role="dialog" aria-labelledby="userClose" aria-hidden="true">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <header class="modal-header">\n                <div class="pull-right top-right close" data-dismiss="modal">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</div>\n                <h3 class="modal-title" id="myModalLabel">Close User Account</h3>\n            </header>\n            <div class="modal-body">\n                <p>Select Reason:</p>\n                <select id="close-reason">\n                    <option value="spam">Spam</option>\n                    <option value="content">Restricted / Banned Content</option>\n                    <option value="copyright">Copyright Infringement</option>\n                    <option value="harassment">Harassment</option>\n                </select>\n            </div>\n            <footer class="modal-footer">\n                <a role="button" href="#" class="btn btn-orange on-close-user-account">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Close Account",{name:"trans",hash:{},data:s}))+"</a>\n            </footer>\n        </div>\n    </div>\n</section>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<section class="modal profile-modal fade" id="userMute" tabindex="-1" role="dialog" aria-labelledby="userModal" aria-hidden="true">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <header class="modal-header">\n                <div class="pull-right top-right close" data-dismiss="modal">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</div>\n                <h3 class="modal-title" id="myModalLabel">Ignore User</h3>\n            </header>\n            <div class="modal-body">\n                <p>Both you and this user will be prevented from:</p>\n                <ul>\n                    <li>Messaging each other</li>\n                    <li>Commenting on each other\'s stories</li>\n                    <li>Dedicating stories to each other</li>\n                    <li>Following and tagging each other</li>\n                </ul>\n                <p><strong>Note:</strong><br />You will still be able to view each other\'s stories.</p>\n            </div>\n            <footer class="modal-footer">\n                <a href="//support.wattpad.com/hc/articles/201463560" class="pull-left"><small>More Info</small></a>\n                <a role="button" href="#" class="btn btn-orange on-mute-user">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Continue",{name:"trans",hash:{},data:s}))+"</a>\n            </footer>\n        </div>\n    </div>\n</section>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c="function";return'<div id="edit-profile" class="hidden edit-profile container">\n    <br><br>\n    <form class="form-horizontal" role="form">\n\n        \x3c!-- Temp remove until v3 API support is updated --\x3e\n        <div class="row form-group location">\n            <label for="update-location" class="control-label col-sm-3">'+o((n.trans||t&&t.trans||r).call(i,"Location",{name:"trans",hash:{},data:s}))+'</label>\n            <div class="col-sm-6">\n                <input id="update-location" type="text" class="form-control" data-field="location" value="'+o(typeof(l=null!=(l=n.location||(null!=t?t.location:t))?l:r)===c?l.call(i,{name:"location",hash:{},data:s}):l)+'" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Enter your location",{name:"trans",hash:{},data:s}))+'">\n            </div>\n        </div>\n\n        <div class="row form-group description">\n            <label for="update-location" class="control-label col-sm-3">'+o((n.trans||t&&t.trans||r).call(i,"About",{name:"trans",hash:{},data:s}))+'</label>\n            <div class="col-sm-6">\n                <textarea id="update-description" class="form-control count-input" data-field="description" data-name="Description" data-limit="2000" data-counter="description-counter" rows="10">'+o(typeof(l=null!=(l=n.description||(null!=t?t.description:t))?l:r)===c?l.call(i,{name:"description",hash:{},data:s}):l)+'</textarea>\n                <div class="description-counter pull-right"><span>'+o(typeof(l=null!=(l=n.aboutCount||(null!=t?t.aboutCount:t))?l:r)===c?l.call(i,{name:"aboutCount",hash:{},data:s}):l)+'</span>/2000</div>\n            </div>\n        </div>\n\n        <div class="row form-group website">\n            <label for="update-website" class="control-label col-sm-3">'+o((n.trans||t&&t.trans||r).call(i,"My Website",{name:"trans",hash:{},data:s}))+'</label>\n            <div class="col-sm-6">\n                <input id="update-website" type="text" class="form-control" data-field="website" value="'+o(typeof(l=null!=(l=n.website||(null!=t?t.website:t))?l:r)===c?l.call(i,{name:"website",hash:{},data:s}):l)+'" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Enter a link to your personal website",{name:"trans",hash:{},data:s}))+'">\n            </div>\n        </div>\n\n        \x3c!--<div class="row form-group facebook">\n            <label for="update-facebook" class="control-label col-sm-3">'+o((n.trans||t&&t.trans||r).call(i,"Link with Facebook",{name:"trans",hash:{},data:s}))+'</label>\n            <div class="col-sm-6">\n                <input id="update-facebook" type="text" class="form-control" data-field="facebook" value="'+o(typeof(l=null!=(l=n.facebook||(null!=t?t.facebook:t))?l:r)===c?l.call(i,{name:"facebook",hash:{},data:s}):l)+'" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Connect with Facebook",{name:"trans",hash:{},data:s}))+'">\n            </div>\n        </div>\n\n        <div class="row form-group twitter">\n            <label for="update-twitter" class="control-label col-sm-3">'+o((n.trans||t&&t.trans||r).call(i,"Link with Twitter",{name:"trans",hash:{},data:s}))+'</label>\n            <div class="col-sm-6">\n                <input id="update-twitter" type="text" class="form-control" data-field="twitter" value="'+o(typeof(l=null!=(l=n.twitter||(null!=t?t.twitter:t))?l:r)===c?l.call(i,{name:"twitter",hash:{},data:s}):l)+'" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Connect with Twitter",{name:"trans",hash:{},data:s}))+'">\n            </div>\n        </div>\n\n        <div class="row form-group smashwords">\n            <label for="update-smashwords" class="control-label col-sm-3">'+o((n.trans||t&&t.trans||r).call(i,"Smashwords",{name:"trans",hash:{},data:s}))+'</label>\n            <div class="col-sm-6">\n                <input id="update-smashwords" type="text" class="form-control" data-field="smashwords" value="'+o(typeof(l=null!=(l=n.smashwords||(null!=t?t.smashwords:t))?l:r)===c?l.call(i,{name:"smashwords",hash:{},data:s}):l)+'" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Add your Smashwords Profile",{name:"trans",hash:{},data:s}))+'">\n            </div>\n        </div>\n        --\x3e\n\n    </form>\n\n    <br>\n    <br>\n    <br>\n</div>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<div id="follower-modal"></div>\n'},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||n.helperMissing).call(i,"PAID_CONTENT",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:""},4:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"WPModal",null!=t?t.username:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},6:function(e,t,n,a,s){return'<header class="background background-lg" style="background-image: url( \''+e.escapeExpression((n.profileBackground||t&&t.profileBackground||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.backgroundUrl:t,1920,{name:"profileBackground",hash:{},data:s}))+"' );\">\n"},8:function(e,t,n,a,s){var l;return'<header class="background background-lg" '+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.highlight_colour:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+">\n"},9:function(e,t,n,a,s){var l;return'style="background-color: '+e.escapeExpression("function"==typeof(l=null!=(l=n.highlight_colour||(null!=t?t.highlight_colour:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"highlight_colour",hash:{},data:s}):l)+'"'},11:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'        <h1 class="profile-name h3" aria-label="'+e.escapeExpression((n.trans||t&&t.trans||o).call(r,"%s's profile",null!=t?t.name:t,{name:"trans",hash:{},data:s}))+'">\n            '+(null!=(l="function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)?l:"")+"\n        </h1>\n"},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'        <h1 class="profile-name h3" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"%s's profile",null!=t?t.username:t,{name:"trans",hash:{},data:s}))+'">\n            '+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+"\n        </h1>\n"},15:function(e,t,n,a,s){return"scroll-to-element"},17:function(e,t,n,a,s){return"on-followers"},19:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'data-toggle="tooltip" data-placement="top" title="'+r((n.format||t&&t.format||i).call(l,null!=t?t.numFollowers:t,{name:"format",hash:{},data:s}))+" "+r((n.trans||t&&t.trans||i).call(l,"Followers",{name:"trans",hash:{},data:s}))+'"'},21:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'      <nav role="navigation"><ul>\n        <li data-section="about" class="'+(null!=(l=n.if.call(r,null!=t?t.active_about:t,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.noop,data:s}))?l:"")+'">\n          <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="on-nav-item">'+c((n.trans||t&&t.trans||o).call(r,"About",{name:"trans",hash:{},data:s}))+'</a>\n        </li>\n        <li data-section="conversations" class="'+(null!=(l=n.if.call(r,null!=t?t.active_activity:t,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.noop,data:s}))?l:"")+'">\n          <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'/conversations" class="on-nav-item">'+c((n.trans||t&&t.trans||o).call(r,"Conversations",{name:"trans",hash:{},data:s}))+'</a>\n        </li>\n        <li data-section="following" class="'+(null!=(l=n.if.call(r,null!=t?t.active_following:t,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.noop,data:s}))?l:"")+'">\n          <a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'/following" class="on-nav-item">'+c((n.trans||t&&t.trans||o).call(r,"Following",{name:"trans",hash:{},data:s}))+"</a>\n        </li>\n      </ul></nav>\n"},22:function(e,t,n,a,s){return"active"},24:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.showAdminOptions:t,{name:"if",hash:{},fn:e.program(25,s,0),inverse:e.program(27,s,0),data:s}))?l:""},25:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'        <a class="btn btn-red" role="button" href="/user/'+e.escapeExpression("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-lock",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</a>\n        <a class="btn btn-red on-change-invalid-image" role="button" href="#" data-imagetype="avatar">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-camera",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+' Avatar\n        </a>\n        <a class="btn btn-red on-change-invalid-image" role="button" href="#" data-imagetype="banner">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-camera",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+" Background\n        </a>\n\n"},27:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'        <a class="btn btn-red" role="button" href="/user/'+e.escapeExpression("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'/admin">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-unlock",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n"},29:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return(null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||r).call(i,"PAID_CONTENT",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(30,s,0),inverse:e.noop,data:s}))?l:"")+'\n        <button class="btn btn-white on-edit-profile">\n          '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-settings",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <span class="hidden-xs">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Edit Profile",{name:"trans",hash:{},data:s}))+"</span>\n        </button>\n"},30:function(e,t,n,a,s){var l;return'            <span class="user-balance">\n                '+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"WalletWithOnboarding","profile",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n            </span>\n"},32:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d="\n"+(null!=(l=n.if.call(o,null!=t?t.isPrivate:t,{name:"if",hash:{},fn:e.program(33,s,0),inverse:e.program(38,s,0),data:s}))?l:"")+"\n          "+(null!=(l=n.if.call(o,null!=t?t.isPrivateToMe:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(53,s,0),data:s}))?l:"")+'\n\n          <div class="button-group inline-block relative">\n\n            '+(null!=(l=n.if.call(o,null!=t?t.isPrivateToMe:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(56,s,0),data:s}))?l:"")+"\n\n";return i=null!=(i=n.isAmbassador||(null!=t?t.isAmbassador:t))?i:c,r={name:"isAmbassador",hash:{},fn:e.noop,inverse:e.program(59,s,0),data:s},l="function"==typeof i?i.call(o,r):i,n.isAmbassador||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'\n            <div class="triangle"></div>\n\n            <ul id="profile-more-options" class="dropdown-menu align-right">\n              '+(null!=(l=n.if.call(o,null!=t?t.isPrivateToMe:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(61,s,0),data:s}))?l:"")+'\n\n              <li><a role="button" href="#" data-toggle="modal" class="on-report" data-gtm="profile|report">\n                '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-warning",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+u((n.trans||t&&t.trans||c).call(o,"Report",{name:"trans",hash:{},data:s}))+" "+u("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)?i.call(o,{name:"username",hash:{},data:s}):i)+"\n              </a></li>\n\n              "+(null!=(l=n.if.call(o,null!=t?t.isPrivateToMe:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(65,s,0),data:s}))?l:"")+"\n            </ul>\n          </div>\n"},33:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.followingRequested:t,{name:"if",hash:{},fn:e.program(34,s,0),inverse:e.program(36,s,0),data:s}))?l:"")+"\n"},34:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'            <button class="btn btn-teal on-following-request" data-action="unfollow"\n                    role="button" aria-pressed="true" data-gtm="profile|unfollow">\n              '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-following-request",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+' <span class="hidden-xs">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Requested",{name:"trans",hash:{},data:s}))+"</span>\n            </button>\n\n"},36:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'            <button class="btn btn-white on-following-request" data-action="follow"\n                  role="button" aria-pressed="false" data-gtm="profile|follow">\n              '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-follow",16,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+' <span class="hidden-xs">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Request",{name:"trans",hash:{},data:s}))+"</span>\n            </button>\n"},38:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='            <button class="btn btn-fan '+(null!=(l=n.if.call(o,null!=t?t.following:t,{name:"if",hash:{},fn:e.program(39,s,0),inverse:e.program(41,s,0),data:s}))?l:"")+" ";return i=null!=(i=n.disabled||(null!=t?t.disabled:t))?i:c,r={name:"disabled",hash:{},fn:e.program(43,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.disabled||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+' on-follow-user" data-target="'+u("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)?i.call(o,{name:"username",hash:{},data:s}):i)+'" data-following="'+u("function"==typeof(i=null!=(i=n.following||(null!=t?t.following:t))?i:c)?i.call(o,{name:"following",hash:{},data:s}):i)+'" data-gtm="'+(null!=(l=n.if.call(o,null!=t?t.following:t,{name:"if",hash:{},fn:e.program(45,s,0),inverse:e.program(47,s,0),data:s}))?l:"")+'">\n'+(null!=(l=n.if.call(o,null!=t?t.following:t,{name:"if",hash:{},fn:e.program(49,s,0),inverse:e.program(51,s,0),data:s}))?l:"")+"            </button>\n"},39:function(e,t,n,a,s){return"btn-teal"},41:function(e,t,n,a,s){return"btn-white"},43:function(e,t,n,a,s){return"disabled"},45:function(e,t,n,a,s){return"profile|unfollow"},47:function(e,t,n,a,s){return"profile|follow"},49:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-following no-right-padding",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'<span class="hidden-xs truncate"> '+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Following",{name:"trans",hash:{},data:s}))+"</span>\n"},51:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-follow no-right-padding",16,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+'<span class="hidden-xs truncate"> '+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Follow",{name:"trans",hash:{},data:s}))+"</span>\n"},53:function(e,t,n,a,s){var l;return null!=(l=(n.isWattpad||t&&t.isWattpad||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.username:t,{name:"isWattpad",hash:{},fn:e.noop,inverse:e.program(54,s,0),data:s}))?l:""},54:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'\n            \n                <a href="/inbox/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="btn btn-white" data-gtm="profile|message">\n\n                    '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-inbox no-right-padding",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n                    <span class="hidden-xs hidden-sm">'+c((n.trans||t&&t.trans||o).call(r,"Message",{name:"trans",hash:{},data:s}))+"</span>\n                </a>\n          "},56:function(e,t,n,a,s){var l,i,r;return i=null!=(i=n.isAmbassador||(null!=t?t.isAmbassador:t))?i:n.helperMissing,r={name:"isAmbassador",hash:{},fn:e.program(57,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isAmbassador||(l=n.blockHelperMissing.call(t,l,r)),null!=l?l:""},57:function(e,t,n,a,s){var l;return'\n              <button class="btn btn-white dropdown-toggle" data-toggle="dropdown"\n                      role="button" aria-controls="profile-more-options" aria-expanded="false" aria-label="more options">\n                '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-more",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n              </button>\n            "},59:function(e,t,n,a,s){var l;return"                "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"ProfileMoreOptionsButton","options",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},61:function(e,t,n,a,s){var l,i,r;return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(62,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l?l:""},62:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'\n              <li class="mute'+(null!=(l=n.if.call(i,null!=t?t.isMuted:t,{name:"if",hash:{},fn:e.program(63,s,0),inverse:e.noop,data:s}))?l:"")+'">\n                <a role="button" href="#" data-toggle="modal" data-target="#userMute" data-gtm="profile|mute">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-mute",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Mute",{name:"trans",hash:{},data:s}))+'</a>\n              </li>\n\n              <li class="unmute'+(null!=(l=n.unless.call(i,null!=t?t.isMuted:t,{name:"unless",hash:{},fn:e.program(63,s,0),inverse:e.noop,data:s}))?l:"")+'">\n                <a role="button" href="#" class="on-unmute-user" data-gtm="profile|unmute">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-unmute",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Undo Mute",{name:"trans",hash:{},data:s}))+"</a>\n              </li>\n              "},63:function(e,t,n,a,s){return" hide"},65:function(e,t,n,a,s){var l,i,r;return i=null!=(i=n.isAmbassador||(null!=t?t.isAmbassador:t))?i:n.helperMissing,r={name:"isAmbassador",hash:{},fn:e.program(66,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isAmbassador||(l=n.blockHelperMissing.call(t,l,r)),null!=l?l:""},66:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'\n                <li><a role="button" href="#" data-toggle="modal" data-target="#userClose" data-gtm="profile|close_account">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove-alt",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Close Account",{name:"trans",hash:{},data:s}))+'</a></li>\n                <li><a role="button" href="#" data-toggle="modal" data-target="#userTimeout" data-gtm="profile|time_out">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-clock",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Time-out",{name:"trans",hash:{},data:s}))+"</a></li>\n              "},68:function(e,t,n,a,s){var l;return"  "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"Toast","unmute-info",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d="function",h=(null!=(l=n.if.call(o,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||c).call(o,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'\n<div id="edit-controls" class="hidden faded edit-profile clearfix">\n    <div class="container">\n        <strong>'+u((n.trans||t&&t.trans||c).call(o,"Currently editing your profile",{name:"trans",hash:{},data:s}))+'</strong>\n        <div class="actions pull-right">\n            <button class="btn btn-orange on-edit-save">'+u((n.trans||t&&t.trans||c).call(o,"Save Changes",{name:"trans",hash:{},data:s}))+'</button>\n            <button class="btn btn-grey on-edit-cancel">'+u((n.trans||t&&t.trans||c).call(o,"Cancel",{name:"trans",hash:{},data:s}))+"</button>\n        </div>\n    </div>\n</div>\n\n"+(null!=(l=n.if.call(o,null!=t?t.backgroundUrl:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:"")+'  <div id="edit-overlay" class="hidden faded edit-profile"></div>\n\n  <div id="edit-background" class="hidden faded edit-profile center-block">\n    <span class="loading faded"></span>\n    <button class="btn btn-glass">'+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-camera",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+" "+u((n.trans||t&&t.trans||c).call(o,"Change Background Image",{name:"trans",hash:{},data:s}))+'</button>\n  </div>\n\n  <div class="avatar avatar-profile center-block">\n    '+(null!=(l=(n.reactComponent||t&&t.reactComponent||c).call(o,"Avatar","display",{name:"reactComponent",hash:{},data:s}))?l:"")+'\n\n    <div id="edit-avatar" class="hidden faded edit-profile">\n      <span class="loading-bg faded"></span>\n      <span class="loading faded"></span>\n      <button>'+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-camera",60,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n    </div>\n  </div>\n\n  <div class="badges">\n'+(null!=(l=n.if.call(o,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.program(13,s,0),data:s}))?l:"")+"    \n"+(null!=(l=e.invokePartial(a["core.components.user_badges"],t,{name:"core.components.user_badges",hash:{badgeSize:"20"},data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'  </div>\n\n  <p id="alias" aria-label="also known as '+u(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===d?i.call(o,{name:"username",hash:{},data:s}):i)+'.">@'+u(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===d?i.call(o,{name:"username",hash:{},data:s}):i)+'</p>\n\n  <div id="edit-name" class="hidden faded edit-profile center-block">\n      <input type="text" class="form-control" data-field="name"\n             value="'+(null!=(l=typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:c)===d?i.call(o,{name:"name",hash:{},data:s}):i)?l:"")+'" placeholder="'+u((n.trans||t&&t.trans||c).call(o,"Full name",{name:"trans",hash:{},data:s}))+'">\n  </div>\n\n  <div class="row header-metadata">\n    <div class="col-xs-4 '+(null!=(l=n.if.call(o,null!=t?t.numStoriesPublished:t,{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:"")+'" data-id="profile-works">\n      <p>'+u((n.count||t&&t.count||c).call(o,null!=t?t.numStoriesPublished:t,{name:"count",hash:{},data:s}))+"</p>\n      <p>"+u((n.npgettext||t&&t.npgettext||c).call(o,"Profile Metadata","Work","Works",null!=t?t.numStoriesPublished:t,{name:"npgettext",hash:{},data:s}))+'</p>\n    </div>\n    <div class="col-xs-4 '+(null!=(l=n.if.call(o,null!=t?t.numLists:t,{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:"")+'" data-id="profile-lists">\n      <p>'+u((n.count||t&&t.count||c).call(o,null!=t?t.numLists:t,{name:"count",hash:{},data:s}))+"</p>\n      <p>"+u((n.npgettext||t&&t.npgettext||c).call(o,"Profile Metadata","Reading List","Reading Lists",null!=t?t.numLists:t,{name:"npgettext",hash:{},data:s}))+'</p>\n    </div>\n    <div class="col-xs-4 '+(null!=(l=n.if.call(o,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:"")+'" '+(null!=(l=(n.greaterThan||t&&t.greaterThan||c).call(o,null!=t?t.numFollowers:t,999,{name:"greaterThan",hash:{},fn:e.program(19,s,0),inverse:e.noop,data:s}))?l:"")+'>\n      <p class="followers-count">'+u((n.count||t&&t.count||c).call(o,null!=t?t.numFollowers:t,{name:"count",hash:{},data:s}))+"</p>\n      <p>"+u((n.npgettext||t&&t.npgettext||c).call(o,"Profile Metadata","Follower","Followers",null!=t?t.numFollowers:t,{name:"npgettext",hash:{},data:s}))+'</p>\n    </div>\n  </div>\n\n  <div id="page-navigation" class="sub-navigation">\n    <div id="edit-navblock" class="hidden faded edit-profile"></div>\n\n    <div class="container">\n      <div class="navigation-content">\n\n'+(null!=(l=n.if.call(o,null!=t?t.isPrivateToMe:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(21,s,0),data:s}))?l:"")+'\n      <div class="actions" role="menu">\n\n';return i=null!=(i=n.isAdmin||(null!=t?t.isAdmin:t))?i:c,r={name:"isAdmin",hash:{},fn:e.program(24,s,0),inverse:e.noop,data:s},l=typeof i===d?i.call(o,r):i,n.isAdmin||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(h+=l),h+"\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||c).call(o,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||c).call(o,null!=t?t.username:t,{name:"isCurrentUser",hash:{},fn:e.noop,inverse:e.program(32,s,0),data:s}))?l:"")+'      </div>\n    </div>\n    </div>\n  </div>\n</header>\n\n<main id="content" class="container" role="main">'+(null!=(l=typeof(i=null!=(i=n.mainContent||(null!=t?t.mainContent:t))?i:c)===d?i.call(o,{name:"mainContent",hash:{},data:s}):i)?l:"")+'</main>\n\n<div class="profile-options-modal">\n'+(null!=(l=e.invokePartial(a["desktop.profile.profile_mute_modal"],t,{name:"desktop.profile.profile_mute_modal",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+(null!=(l=e.invokePartial(a["desktop.profile.profile_close_modal"],t,{name:"desktop.profile.profile_close_modal",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+(null!=(l=e.invokePartial(a["desktop.profile.profile_timeout_modal"],t,{name:"desktop.profile.profile_timeout_modal",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n\n"+(null!=(l=n.if.call(o,null!=t?t.recentlyUnmuted:t,{name:"if",hash:{},fn:e.program(68,s,0),inverse:e.noop,data:s}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("MutedProfile",a.views.DummyReactView.extend({component:"MutedProfile",componentId:"muted-profile",constructor:function(e){this.model=e.model,this.recentlyMuted=e.recentlyMuted||!1;var t={componentData:this.getComponentData(),component:this.component,componentId:this.componentId};a.views.DummyReactView.call(this,t)},getComponentData:function(){return{username:this.model.get("username"),avatar:this.model.get("avatar"),name:this.model.get("name"),backgroundUrl:this.model.get("backgroundUrl"),numLists:this.model.get("numLists"),numStoriesPublished:this.model.get("numStoriesPublished"),numFollowers:this.model.get("numFollowers"),onUnmute:this.onUnmuteUser.bind(this),recentlyMuted:this.recentlyMuted}},onUnmuteUser:function(e){var t=this;$.ajax({type:"POST",url:"/apiv2/ignoreuser?id="+e+"&action=unignore_user",success:function(){var n=t.getComponentData();t.model.set("isMuted",!1);var s=t.model.get("isPrivate"),l=void 0;l=a.get("device").is.mobile?new a.views.UserProfile({model:t.model,section:"about",isPrivateToMe:s}):new a.views.ProfileLayout({model:t.model,section:"about",username:n.username,recentlyUnmuted:!0,isPrivateToMe:s}),a.local.clear("user."+e),a.transitionTo(l,{username:n.username,hasHeader:!0,hasFooter:!0})},error:function(){new a.views.ErrorToast({message:n.utils.trans("There was an error unmuting this user. Please try again.")},{type:"dismissable"}).render()}})}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(399));!function(e,t,n,s,l,i,r,o){i.add("OnboardingStep1",r.View.extend({events:{"click .on-continue":"onContinue","click .opt":"onSelectOpt"},template:a.default,className:"onboarding-wrapper",render:function(){var e={username:s.utils.currentUser().get("username")};return this.$el.html(this.template(e)),this},onSelectOpt:function(e){e.stopPropagation();var a,s=e.target;-1!==s.classList.contains("gender-card")?a=n(s).siblings(".gender-text"):-1!==s.classList.contains("gender-text")?a=n(s):-1!==s.classList.contains("opt")&&(a=n(s).children(".gender-text"));var l=this.$el.find(".gender-text");t.forEach(l,function(e){e.classList.remove("selected")}),a&&a.get(0).classList.add("selected"),this.$(".continue-button").removeClass("disabled")},onSkipStep:function(e){l.stopEvent(e);var t=s.utils.getCookie("nextUrl");t&&"/home"!==t&&"/"===t[0]?i.router.navigate(t):i.router.navigate("/start/2")},onContinue:function(e){l.stopEvent(e);var t,a=s.utils.currentUser(),r=this.$el.find(".selected").attr("value");r&&(r=r.slice(0,1)),t={gender:r},o.resolve(n.ajax({url:"/api/v3/users/"+a.get("username"),type:"PUT",data:t})).then(function(e){s.utils.currentUser().set(e);var t=s.utils.getCookie("nextUrl");t&&"/home"!==t&&"/"===t[0]?i.router.navigate(t,{trigger:!0}):i.router.navigate("/start/2",{trigger:!0})})}})),i.mixin(i.views.OnboardingStep1)}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco,window.Promise)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'<div class="full-screen background-1"></div>\n<div class="container">\n  <div class="onboardingModal step1 modal fade in" role="dialog" data-backdrop="static" data-keyboard="false" style="display:block;">\n    <div class="modal-dialog">\n      <form class="form-horizontal" role="form" method="POST">\n        <div class="modal-content">\n          <div class="modal-header">\n            <center>'+r((n.connectImage||t&&t.connectImage||i).call(l,"/logos/wp-logo-orange.png","Wattpad",{name:"connectImage",hash:{klass:"wp-logo",width:"174"},data:s}))+'</center>\n          </div>\n          <div class="modal-body">\n            <h2 class="text-center" id="personal-greeting"> '+r((n.trans||t&&t.trans||i).call(l,"Hi %s",null!=t?t.username:t,{name:"trans",hash:{},data:s}))+' </h2>\n            <p class="text-center" id="gender-select-copy"> '+r((n.trans||t&&t.trans||i).call(l,"To get the best Wattpad experience, tell us about yourself!",{name:"trans",hash:{},data:s}))+" <br /> "+r((n.trans||t&&t.trans||i).call(l,"Your response will be kept private.",{name:"trans",hash:{},data:s}))+'</p>\n            <div class="gender-selector" id="inputGender">\n              <div class="opt male" value="male">\n                <input id="male-icon" type="radio" name="gender-icon" value="male" />\n                <label class="gender-card male-icon" for="male-icon"></label>\n                <label class="gender-text" for="male-icon" value="male">'+r((n.trans||t&&t.trans||i).call(l,"He",{name:"trans",hash:{},data:s}))+'</label>\n              </div>\n              <div class="opt female" value="female">\n                <input id="female-icon" type="radio" name="gender-icon" value="female" />\n                <label class="gender-card female-icon" for="female-icon"></label>\n                <label class="gender-text" for="female-icon" value="female">'+r((n.trans||t&&t.trans||i).call(l,"She",{name:"trans",hash:{},data:s}))+'</label>\n              </div>\n              <div class="opt other" value="other">\n                  <input id="other-icon" type="radio" name="gender-icon" value="other" />\n                  <label class="gender-card other-icon" for="other-icon"></label>\n                  <label class="gender-text" for="other-icon" value="other">'+r((n.trans||t&&t.trans||i).call(l,"They",{name:"trans",hash:{},data:s}))+'</label>\n              </div>\n          </div>\n          </div>\n          <div class="modal-footer">\n            <center><button class="btn btn-orange on-continue continue-button disabled">'+r((n.trans||t&&t.trans||i).call(l,"Next",{name:"trans",hash:{},data:s}))+"</button></center>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("OnboardingWriterJourney",a.views.DummyReactView.extend({component:"OnboardingWriterJourney",componentId:"onboarding-writer-journey",constructor:function(e){this.componentData={locale:n.utils.getCookie("locale"),username:e.user?e.user.get("username"):""};var t={componentData:this.componentData,component:this.component,componentId:this.componentId};a.views.DummyReactView.call(this,t)}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";var a=l(n(3)),s=l(n(402));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o,c){r.add("OnboardingStep2",o.View.extend({events:{"tap .on-continue":"onContinue","click .on-continue":"stopEvent","tap #search-button":"onSearchButton","click #search-button":"onSearchButton","tap .browse-topics":"onBrowseTopics","click .browse-topics":"onBrowseTopics","tap .browse-topics-mobile":"onBrowseTopicsMobile","click .browse-topics-mobile":"onBrowseTopicsMobile","tap .on-story":"navigateToStory","click .on-story":"navigateToStory"},templates:{page:s.default,topics:a.default},className:"onboarding-wrapper",initialize:function(e){e=e||{},this.user=e.user,Handlebars.registerPartial("desktop.browse.browse_topics",a.default)},render:function(){var e=this,n=r.get("device").is.mobile,a=[],s=new r.collections.BrowseTopics,i=null;if(!n){var o=r.get("supported-languages").get(r.get("language")).get("code");if(t.each(JSON.parse(l.newCurationProfiles),function(e){e.code===o&&(i=e.username)}),i)var u=new r.collections.ReadingLists([],{username:i});else u=new r.collections.ReadingLists([],{username:"wattpadExplorer"})}a.push(this.collection.fetchNextSet()),n||(a.push(u.fetchNextSet()),a.push(s.fetch())),c.all(a).then(function(){return e.$el.html(e.templates.page({stories:t.shuffle(e.collection.toJSON()),newCurationLists:n?null:u.toJSON(),browseTopics:n?null:l.utils.sortByColumns(s.toJSON(),3)})),t.defer(e.afterRender.bind(e)),e})},afterRender:function(){this.initCarousel()},initCarousel:function(){var e={nav:!r.get("device").is.mobile,navText:['<span class="fa fa-left fa-wp-neutral-2 carousel-left"></span>','<span class="fa fa-right fa-wp-neutral-2 carousel-right"></span>'],items:42,autoplay:1e3,lazyLoad:!0,loop:!0,autoWidth:!0};i.rtlLanguage(parseInt(r.get("language"),10))&&t.extend(e,{rtl:!0}),r.get("device").is.mobile?t.extend(e,{responsive:{0:{items:1},300:{items:2},600:{items:3},900:{items:4}}}):t.extend(e,{items:4,autoWidth:!0,margin:30}),n(".owl-carousel").one("initialized.owl.carousel",function(){n(".owl-carousel").removeClass("invisible")}),n(".owl-carousel").owlCarousel(e)},stopEvent:function(e){i.stopEvent(e)},onSearchButton:function(){e.te.push("event","onboarding",null,null,"complete"),r.router.navigate("/search",{trigger:!0})},onBrowseTopics:function(e){n(e.target).siblings(".dropdown-menu").get(0).classList.toggle("open")},onBrowseTopicsMobile:function(){e.te.push("event","onboarding",null,null,"complete"),r.router.navigate("home/browse",{trigger:!0})},navigateToStory:function(t){var a=n(t.target).closest(".story-item").attr("data-storyid");i.stopEvent(t),e.te.push("event","onboarding",null,null,"complete"),r.router.navigate("/story/"+a,{trigger:!0})},navigateToTopic:function(t){var a=n(t.target).text().toLowerCase();i.stopEvent(t),e.te.push("event","onboarding",null,null,"complete"),r.router.navigate("/stories/"+a,{trigger:!0})}})),r.mixin(r.views.OnboardingStep2)}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco,window.Promise)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'              <div class="browse-topics-mobile">\n                <a href="/home/browse" type="button" class="btn btn-lg btn-orange on-navigate" id="browse-button-mobile">\n                  '+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Browse stories",{name:"trans",hash:{},data:s}))+"</a>\n              </div>\n"},3:function(e,t,n,a,s){var l;return'               <div class="browse-topics">\n                  <button id="discover-dropdown" class="btn btn-orange btn-lg dropdown" href="#" data-toggle="dropdown">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Browse stories",{name:"trans",hash:{},data:s}))+"</button>\n"+(null!=(l=e.invokePartial(a["desktop.browse.browse_topics"],t,{name:"desktop.browse.browse_topics",data:s,indent:"                      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"              </div>\n"},5:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                  <div class="story-item" data-storyid=\''+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'\'>\n                    <div class="cover on-story">\n                      <img src="'+c("function"==typeof(i=null!=(i=n.cover||(null!=t?t.cover:t))?i:o)?i.call(r,{name:"cover",hash:{},data:s}):i)+'" class="on-story" alt="'+c((n.trans||t&&t.trans||o).call(r,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n                    </div>\n                    <div class="title on-story">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'</div>\n                    <div class="category">'+c(e.lambda(null!=(l=null!=t?t.categoryObject:t)?l.name:l,t))+'</div>\n\n                    <div class="meta social-meta">\n                      <span class="read-count"> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+' </span>\n                      <span class="vote-count"> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+" </span>\n                    </div>\n                  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="full-screen background-1"></div>\n<div class="container">\n  <div class="onboardingModal step2 modal fade in" role="dialog" data-backdrop="static" data-keyboard="false" style="display:block;">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-header">\n          <center>'+o((n.connectImage||t&&t.connectImage||r).call(i,"logos/wp-logo-orange.png","Wattpad",{name:"connectImage",hash:{klass:"wp-logo",width:"174px"},data:s}))+'</center>\n        </div>\n        <div class="modal-body">\n          <p class="text-center intro">'+o((n.trans||t&&t.trans||r).call(i,"Let's find your first story",{name:"trans",hash:{},data:s}))+'</p>\n        </div>\n        <div class="modal-footer">\n          <div class="search-buttons">\n            <div class="search">\n              <a href="/search" type="button" class="btn btn-lg btn-orange on-navigate" id="search-button">\n                '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-search",16,"wp-neutral-5","wp-search pull-left align-middle",{name:"iconify",hash:{},data:s}))?l:"")+"\n                "+o((n.trans||t&&t.trans||r).call(i,"Search stories",{name:"trans",hash:{},data:s}))+"</a>\n            </div>\n"+(null!=(l=(n.isDevice||t&&t.isDevice||r).call(i,"mobile",{name:"isDevice",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'          </div>\n          <hr class="hr-with-text" data-content='+o((n.trans||t&&t.trans||r).call(i,"or",{name:"trans",hash:{},data:s}))+'>\n          <p id="read-popular-text">'+o((n.trans||t&&t.trans||r).call(i,"Read what's popular",{name:"trans",hash:{},data:s}))+'</p>\n          <div class="stories container-fluid">\n            <div class="owl-carousel invisible">\n'+(null!=(l=n.each.call(i,null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(404));!function(e,t,n,s){s.add("StoryDetails",s.views.Base.extend({template:a.default,className:"story-details",events:{"tap .on-ranking-navigate":"onRankingNavigate","click .on-ranking-navigate":"stopEvent"},render:function(){var t={story:this.model.toJSON()};return t.reportUrl="/help/content?message="+n.utils.urlEncode("I am reporting the following content:\n")+"&story_link="+n.utils.urlEncode(e.location.href),t.story.sourceLink&&(t.story.sourceLink.url&&!t.story.sourceLink.url.match(/^[\w]{4,5}:\/\//i)&&(t.story.sourceLink.url="https://"+t.story.sourceLink.url),t.story.sourceLink.icon=t.story.sourceLink.label.indexOf("Amazon")>-1?"fa-buy":"fa-website"),this.$el.html(this.template(t)),this},stopEvent:function(e){n.utils.stopEvent(e)},onRankingNavigate:function(t){e.te.push("event","story_details","tag_ranking",null,"click",{storyid:this.model.get("id"),tag:this.model.get("tagRankings")[0].name}),this.onNavigate(t)}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.story:t)?l.tagRankings:l,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'\n<div class="tag-ranking">\n  '+o((n.connectImage||t&&t.connectImage||r).call(i,"/shared/ranking-medal.png","ranking",{name:"connectImage",hash:{width:"22",height:"27",klass:"tag-ranking-medal"},data:s}))+"\n  <span>"+(null!=(l=(n.trans||t&&t.trans||r).call(i,"#%1$s in %2$s",(n.sprintf||t&&t.sprintf||r).call(i,"<b>%s</b>",null!=(l=null!=(l=null!=(l=null!=t?t.story:t)?l.tagRankings:l)?l[0]:l)?l.rank:l,{name:"sprintf",hash:{},data:s}),(n.sprintf||t&&t.sprintf||r).call(i,"<b>%s</b>",(n.sanitize||t&&t.sanitize||r).call(i,null!=(l=null!=(l=null!=(l=null!=t?t.story:t)?l.tagRankings:l)?l[0]:l)?l.name:l,{name:"sanitize",hash:{},data:s}),{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+'</span>\n  <a href="'+o(e.lambda(null!=(l=null!=t?t.story:t)?l.url:l,t))+'/rankings" class="on-ranking-navigate">'+o((n.trans||t&&t.trans||r).call(i,"See all rankings",{name:"trans",hash:{},data:s}))+"</a>\n</div>\n"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'  <div>\n    <span data-toggle="tooltip" data-html="true" data-delay=\'{"show": 0, "hide":2000}\' data-placement="auto"\n      title="'+o((n.trans||t&&t.trans||r).call(i,"Story may contain graphic depictions of violence, sexuality, strong language, and/or other mature themes.",{name:"trans",hash:{},data:s}))+" <a target='_blank' href='/guidelines'>"+o((n.trans||t&&t.trans||r).call(i,"Learn more about our content guidelines",{name:"trans",hash:{},data:s}))+'</a>" >\n      '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-info",22,"wp-neutral-2","pull-left",{name:"iconify",hash:{},data:s}))?l:"")+"</span>\n      <span> "+o((n.getStoryRating||t&&t.getStoryRating||r).call(i,null!=(l=null!=t?t.story:t)?l.rating:l,{name:"getStoryRating",hash:{},data:s}))+" </span>\n  </div>\n"},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"<div>"+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,(n.getCopyrightIcon||t&&t.getCopyrightIcon||r).call(i,null!=(l=null!=t?t.story:t)?l.copyright:l,{name:"getCopyrightIcon",hash:{},data:s}),22,"wp-neutral-2","pull-left",{name:"iconify",hash:{},data:s}))?l:"")+" <span> "+e.escapeExpression((n.getCopyright||t&&t.getCopyright||r).call(i,null!=(l=null!=t?t.story:t)?l.copyright:l,{name:"getCopyright",hash:{},data:s}))+" </span></div>\n"},8:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return"<div>"+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.story:t)?l.sourceLink:l)?l.icon:l,22,"wp-base-2-dark","pull-left",{name:"iconify",hash:{},data:s}))?l:"")+'\n  <a class="btn btn-link" href="'+r(i(null!=(l=null!=(l=null!=t?t.story:t)?l.sourceLink:l)?l.url:l,t))+'" target="_blank"> '+r(i(null!=(l=null!=(l=null!=t?t.story:t)?l.sourceLink:l)?l.label:l,t))+" </a>\n</div>\n"},10:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return"<div>"+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-warning",22,"wp-base-2-dark","pull-left",{name:"iconify",hash:{},data:s}))?l:"")+'\n  <a href="'+c("function"==typeof(i=null!=(i=n.reportUrl||(null!=t?t.reportUrl:t))?i:o)?i.call(r,{name:"reportUrl",hash:{},data:s}):i)+'" class="btn btn-link on-navigate">\n    '+c((n.trans||t&&t.trans||o).call(r,"Report this story",{name:"trans",hash:{},data:s}))+"\n  </a>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:"")+"\n\n"+(null!=(l=(n.greaterThan||t&&t.greaterThan||n.helperMissing).call(i,null!=(l=null!=t?t.story:t)?l.rating:l,3,{name:"greaterThan",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.story:t)?l.copyright:l,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.story:t)?l.sourceLink:l)?l.url:l,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.story:t)?l.deleted:l,{name:"unless",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(5));!function(e,t,n,s){s.add("StoriesSimilar",s.views.IncrementalList.extend({template:a.default,events:{"tap .on-story-preview":"onStoryPreview","click .on-story-preview":"stopEvent"},filter:null,className:"stories",itemView:s.views.StoryItem,initialize:function(e){(e=e||{}).is404&&(this.itemView=s.views.RecommendedStoryItemCover),this.fromStoryReading=e.fromStoryReading||!1,this.baseStory=e.currentStory||{},this.alwaysFetch=e.alwaysFetch||!1,this.collection=e.collection||new s.collections.SimilarStories([],{storyId:e.storyId,limit:e.limit||4,baseStory:this.baseStory,showDescription:e.showDescription||!1})},getTemplateData:function(){return{hasStories:this.collection.length>0}},render:function(){var e=this;return Promise.resolve(this.collection.fetch({fresh:this.alwaysFetch})).then(function(){s.views.IncrementalList.prototype.render.apply(e,arguments),e.trigger("postRender")}),this},onStoryPreview:function(n){var a=$(n.currentTarget).data("story-id"),l=this.collection.get(a),i=t.isEmpty(this.baseStory)?null:this.baseStory.get("group").id,r=this;this.fromStoryReading&&e.te.push("event","reading","similar_stories","story","click",{current_storyid:i,storyid:a}),l&&Promise.resolve(l.fetch({fresh:!0})).then(function(){var e=new s.views.BrowseStoryPreview({isHome:!1,model:l});r.$("#preview-modal").empty().append(e.render().$el),e.openModal()})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(407));!function(e,t,n,s,l,i,r){i.add("FeaturedStoryItem",i.views.Base.extend({className:"featured-story-item story-item",template:a.default,render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class=\'cover-container\'>\n  <a class="on-navigate cover cover-md on-story-item" href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||r).call(i,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n      <div class="fixed-ratio fixed-ratio-cover">\n          <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.cover:t,256,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o("function"==typeof(l=null!=(l=n.title||(null!=t?t.title:t))?l:r)?l.call(i,{name:"title",hash:{},data:s}):l)+'">\n      </div>\n  </a>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(409));!function(e,t,n,s,l,i){i.add("BrowseStoryItem",i.views.StoryItem.extend({template:a.default,className:"browse-story-item",initialize:function(e){e=e||{},this.showStoryRank=e.showStoryRank||!1},render:function(){var t=this.model.toJSON();return t.rank=this.showStoryRank?this.model.collection.indexOf(this.model)+1:null,t.app={deviceType:s.utils.getDeviceType(),devicePixelRatio:e.devicePixelRatio,matchMedia:e.matchMedia,msMatchMedia:e.msMatchMedia},this.$el.html(this.template(t)),this.model.get("completed")&&this.$el.addClass("completed"),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"BrowseStoryItem",null!=t?t.id:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},useData:!0})},function(e,t,n){"use strict";var a=i(n(6)),s=i(n(411)),l=i(n(412));function i(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,i){i.add("BrowseStoryPreview",i.views.Base.extend({template:l.default,className:"browse-preview",events:{"tap .on-cover":"onCover","tap .on-start-reading":"onStartReading","tap .on-story-details":"onStoryDetails","click .on-story-details":"stopEvent",keyup:"onKeyUp"},initialize:function(e){e=e||{},this.isHome=e&&e.isHome,this.showTagRankings=e&&e.showTagRankings,t.bindAll(this,"clearLists"),this.listenTo(i,"app:component:TagMetaItem:click",this.navigateToTagPage),this.listenTo(i,"app:component:TagMetaNumNotShown:click",this.onStoryDetails),this.adjustReadButtonCopy(),i.get("device").is.mobile?(Handlebars.registerPartial("core.components.add_to_library_dropdown",function(){return""}),Handlebars.registerPartial("core.components.add_to_library_modal",s.default)):(Handlebars.registerPartial("core.components.add_to_library_dropdown",a.default),Handlebars.registerPartial("core.components.add_to_library_modal",function(){return""}))},render:function(){var e=this.model.toJSON();return e.tagMeta={tags:e.tags},e.showTagRankings=e.tagRankings&&e.tagRankings.length&&this.showTagRankings,this.$el.html(this.template(e)),this},adjustReadButtonCopy:function(){var a=this,s=t.get(e,"wattpad.testGroups.PAID_CONTENT")||!1,l=this.model.get("isPaywalled");if(s&&!1!==l){var i=this.model.get("id"),r=this.model.get("parts")||[],o=t.pluck(r,"id");e.store.dispatch(e.app.components.actions.fetchPaidContentMetadata(i,o)).then(function(){var t=e.store.getState().paidMetadata,s=n.utils.markBlockedParts(t,r);n.utils.isPaidPreview(s)&&a.$(".on-start-reading").text(n.utils.trans("Free Preview"))})}},onAddedToLibrary:function(t){this.isHome&&e.te.push("event","modal","story_details","library","add",{page:this.getPage(),story_id:this.model.get("id")});var a=this.$(this.libraryButton+"[data-story-id='"+t+"']");a.addClass("btn-teal").removeClass("btn-orange"),a.children(".fa").removeClass("fa-plus").addClass("fa-check"),a.children(".text").text(n.utils.trans("In Library"))},onRemovedFromLibrary:function(e){var t=this.$(this.libraryButton+"[data-story-id='"+e+"']");t.addClass("btn-orange").removeClass("btn-teal"),t.children(".fa").addClass("fa-plus").removeClass("fa-check"),t.children(".text").text(n.utils.trans("Add to Library"))},onStoryDetails:function(t){this.isHome&&e.te.push("event","modal","story_details","details","click",{page:this.getPage(),story_id:this.model.get("id")}),i.router.navigate(n.utils.formatStoryUrl(this.model.get("url")),{trigger:!0})},onStartReading:function(a){$(document.body).addClass("modal-open"),this.isHome&&e.te.push("event","modal","story_details","read",{page:this.getPage(),story_id:this.model.get("id")});var s=this.model.get("firstPartId"),l=this.model.get("parts");null!==s||t.isEmpty(l)?Promise.resolve($.get("/apiv2/syncreadingposition",{story_id:s,wp_token:n.utils.getCookie("token")})).then(function(e){var a=t.where(l,{id:parseInt(e.part,10)});a[0]?i.router.navigate(n.utils.formatStoryUrl(a[0].url),{trigger:!0}):i.router.navigate("/"+s,{trigger:!0})}):i.router.navigate(n.utils.formatStoryUrl(l[0].url),{trigger:!0})},onAuthPrompt:function(){$("#preview-modal").modal("hide")},onKeyUp:function(e){27===e.which&&$("#preview-modal").modal("hide")},onCover:function(t){this.isHome&&e.te.push("event","modal","story_details","cover","click",{page:this.getPage(),story_id:this.model.get("id")})},getPage:function(){var e=document.baseURI;return void 0===e&&(e=document.URL),e.indexOf("tags/")>-1?"tag page":e.indexOf("home")>-1?"home":"browse page"},onAddToListsReady:function(t,n){i.get("device").is.mobile?this.$(".addToLibraryModal[data-story-id='"+n+"']").modal({show:!0}):(this.clearLists(),t.parent(".button-group").addClass("open"),t.removeClass("on-lists-add-clicked"),t.addClass("on-dismiss-lists"),$(e.document).one("click.bs.dropdown.data-api",this.clearLists))},clearLists:function(n){var a=!1;if(n&&3===n.which)return!1;var s=null;n&&(s=$(n.target));var l=$(".btn-story-lists");return t.each(l,function(e){var t=$(e);s&&0!==t.parent(".button-group").find(s).length?s&&(a=!0):(t.parent(".button-group").removeClass("open"),t.removeClass("on-dismiss-lists"),t.addClass("on-lists-add-clicked"))}),a&&$(e.document).one("click.bs.dropdown.data-api",this.clearLists),!0},onDismissLists:function(e){var t=$(e.currentTarget).data("story-id"),n=this.$(this.addButton+"[data-story-id='"+t+"']");n.parent(".button-group").removeClass("open"),n.removeClass("on-dismiss-lists"),n.addClass("on-lists-add-clicked")},openModal:t.debounce(function(){this.$(".browse-preview[data-story-id="+this.model.get("id")+"]").modal({show:!0})},50),navigateToTagPage:function(e){var t=$(e.currentTarget).text().trim();i.router.navigate("/stories/"+encodeURIComponent(t),{trigger:!0})}})),i.mixin(i.views.BrowseStoryPreview,"StoryInListsManagement")}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c="function",u=e.escapeExpression;return'<div data-story-id="'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" class="addToLibraryModal modal fade" aria-hidden="true" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <header class="modal-header">\n        <h1 class="modal-title">'+u(typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)===c?i.call(r,{name:"title",hash:{},data:s}):i)+"</h1>\n        <h2>"+u((n.trans||t&&t.trans||o).call(r,"Add to Reading List",{name:"trans",hash:{},data:s}))+'</h2>\n        <div class="close" data-dismiss="modal">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",17,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'\n        </div>\n      </header>\n\n      <div class="modal-body">\n        <ul id="add-to-list" class="lists-menu list-unstyled" data-story-id="'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'"></ul>\n        <ul class="lists-menu list-unstyled">\n          <li><a class="create-list-button" href data-target=".addToLibraryListNameModal[data-story-id='+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+']" data-toggle="modal">\n            '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",14,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+'\n            <span class="reading-list-name">'+u((n.trans||t&&t.trans||o).call(r,"New Reading List",{name:"trans",hash:{},data:s}))+'</span>\n          </a></li>\n        </ul>\n      </div>\n\n    </div>\n  </div>\n</div>\n<div data-story-id="'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" class="addToLibraryListNameModal modal fade" aria-hidden="true" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <header class="modal-header">\n        <h1 class="modal-title">'+u((n.trans||t&&t.trans||o).call(r,"New Reading List",{name:"trans",hash:{},data:s}))+'</h1>\n      </header>\n\n      <div class="modal-body">\n        <div class="inputs">\n          <div class="error-feedback">\n            '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-warning",16,"wp-errorbackground",{name:"iconify",hash:{},data:s}))?l:"")+"\n            "+u((n.trans||t&&t.trans||o).call(r,"Please name your reading list",{name:"trans",hash:{},data:s}))+'\n          </div>\n          <input type="text" class="form-control list-name" placeholder="'+u((n.trans||t&&t.trans||o).call(r,"Enter Reading List name",{name:"trans",hash:{},data:s}))+'">\n        </div>\n      </div>\n      <div class="buttons clearfix">\n        <button type="button" class="btn btn-md btn-grey" data-dismiss="modal">'+u((n.trans||t&&t.trans||o).call(r,"Cancel",{name:"trans",hash:{},data:s}))+'</button>\n        <button type="button" class="on-create-list btn btn-md btn-orange" data-story-id="'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-dismiss="modal">'+u((n.trans||t&&t.trans||o).call(r,"Create",{name:"trans",hash:{},data:s}))+"</button>\n      </div>\n\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"                            "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Free Preview",{name:"trans",hash:{},data:s}))+"\n"},3:function(e,t,n,a,s){return"                            "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Read",{name:"trans",hash:{},data:s}))+"\n"},5:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'                <p class="description">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||r).call(i,null!=t?t.description:t,220,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+'\n                  <a class="on-story-details">  <span class="read-more">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"More",{name:"trans",hash:{},data:s}))+"</span></a>\n                </p>\n"},7:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                    <div class="tag-ranking">\n                      '+c((n.connectImage||t&&t.connectImage||o).call(r,"/shared/ranking-medal.png","ranking",{name:"connectImage",hash:{width:"22",height:"27",klass:"tag-ranking-medal"},data:s}))+"\n                      <span>"+(null!=(l=(n.trans||t&&t.trans||o).call(r,"#%1$s in %2$s",(n.sprintf||t&&t.sprintf||o).call(r,"<b>%s</b>",null!=(l=null!=(l=null!=t?t.tagRankings:t)?l[0]:l)?l.rank:l,{name:"sprintf",hash:{},data:s}),(n.sprintf||t&&t.sprintf||o).call(r,"<b>%s</b>",(n.sanitize||t&&t.sanitize||o).call(r,null!=(l=null!=(l=null!=t?t.tagRankings:t)?l[0]:l)?l.name:l,{name:"sanitize",hash:{},data:s}),{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+'</span>\n                      <a href="'+c("function"==typeof(i=null!=(i=n.url||(null!=t?t.url:t))?i:o)?i.call(r,{name:"url",hash:{},data:s}):i)+'/rankings" class="on-ranking-navigate">'+c((n.trans||t&&t.trans||o).call(r,"See all rankings",{name:"trans",hash:{},data:s}))+"</a>\n                    </div>\n"},9:function(e,t,n,a,s){var l;return"                    "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"TagMeta",null!=t?t.id:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},11:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-check",12,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+' <span class="completed text">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"completed",{name:"trans",hash:{},data:s}))+"</span>\n"},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-more",12,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+' <span class="ongoing text">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"ongoing",{name:"trans",hash:{},data:s}))+"</span>\n"+(null!=(l=n.if.call(i,null!=t?t.modifyDate:t,{name:"if",hash:{},fn:e.program(14,s,0),inverse:e.program(16,s,0),data:s}))?l:"")},14:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'                        <time datetime="'+r((n.fromNow||t&&t.fromNow||i).call(l,null!=t?t.modifyDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+'">\n                            '+r((n.trans||t&&t.trans||i).call(l,"Updated %s",(n.fromNow||t&&t.fromNow||i).call(l,null!=t?t.modifyDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}),{name:"trans",hash:{},data:s}))+"\n                        </time>\n"},16:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.lastPublishedPart:t)?l.createDate:l,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:""},17:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                                <time datetime="'+o((n.fromNow||t&&t.fromNow||r).call(i,null!=(l=null!=t?t.lastPublishedPart:t)?l.createDate:l,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+'">\n                                    '+o((n.trans||t&&t.trans||r).call(i,"Updated %s",(n.fromNow||t&&t.fromNow||r).call(i,null!=(l=null!=t?t.lastPublishedPart:t)?l.createDate:l,{name:"fromNow",hash:{fuzzyTime:!0},data:s}),{name:"trans",hash:{},data:s}))+"\n                                </time>\n"},19:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'                    <div class="mature">\n                        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-info",10,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Mature",{name:"trans",hash:{},data:s}))+"\n                    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="modal fade browse-preview" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n    <div class="modal-content">\n        <div class="modal-header clearfix">\n            <button type="button" class="close close-white" data-dismiss="modal" aria-label="Close">\n                '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",28,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'\n            </button>\n            <button type="button" class="close close-mobile" data-dismiss="modal" aria-label="Close">\n                '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",28,"wp-neutral-1",{name:"iconify",hash:{},data:s}))?l:"")+'\n            </button>\n        </div>\n        <div class="modal-body clearfix">\n            <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-story-details cover cover-lg pull-left on-cover">\n                <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,368,{name:"resizeCover",hash:{},data:s}))+'" alt="'+c((n.trans||t&&t.trans||o).call(r,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n            </a>\n            <div class="content">\n                <h3 class="modal-title"><a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="modal-title on-story-details">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'</a></h3>\n\n                <div class="meta">\n                    <span> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",10,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+" </span>\n                    <span> "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",10,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+" </span>\n                    <span> "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-list",10,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c("function"==typeof(i=null!=(i=n.numParts||(null!=t?t.numParts:t))?i:o)?i.call(r,{name:"numParts",hash:{},data:s}):i)+' </span>\n                </div>\n\n                <div class="actions">\n                    <button class="on-start-reading btn btn-sm btn-inline btn-orange btn-left-align">\n'+(null!=(l=n.if.call(r,null!=t?t.isPaidPreview:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'                    </button>\n                    <div class="button-group relative inline-block">\n                        <button data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" class="btn-story-lists btn btn-sm btn-inline btn-orange btn-left-align btn-right-align">\n                            '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-plus",10,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n\n                        </button>\n"+(null!=(l=e.invokePartial(a["core.components.add_to_library_dropdown"],t,{name:"core.components.add_to_library_dropdown",data:s,indent:"                        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                    </div>\n                </div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.showTagRankings:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+'\n                <div class="info">\n'+(null!=(l=n.if.call(r,null!=t?t.completed:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.program(13,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.mature:t,{name:"if",hash:{},fn:e.program(19,s,0),inverse:e.noop,data:s}))?l:"")+"                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n\n"+(null!=(l=e.invokePartial(a["core.components.add_to_library_modal"],t,{name:"core.components.add_to_library_modal",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(414));!function(e,t,n,s){s.add("BrowseStories",s.views.IncrementalList.extend({template:a.default,filter:null,className:"stories",containerClass:".collection",itemView:s.views.BrowseStoryItem,events:t.extend({"tap .on-story-preview":"onStoryPreview","click .on-story-preview":"stopEvent","tap .on-story-details":"sendEventTracking","tap .on-start-reading":"sendEventTracking"},s.views.IncrementalList.prototype.events),initialize:function(e){var t=this;switch((e=e||{}).filter){case"hot":if(e.category){switch(this.showHotListHeader=!0,this.category=e.category.toJSON(),this.categoryNameForHotListHeader=this.category.name,this.category.id){case 2:this.appendStoriesSuffix=!1;break;case 17:this.categoryNameForHotListHeader=n.utils.trans("Short Stories"),this.appendStoriesSuffix=!1;break;default:this.appendStoriesSuffix=!0}this.collection=new s.collections.BrowseStories([],{category:e.category,filter:"hot",limit:18})}else e.tag&&(this.collection=new s.collections.BrowseTagStories([],{tags:e.tag,filter:"hot",limit:18}));break;case"featured":e.category&&(this.collection=new s.collections.BrowseStories([],{category:e.category,filter:"featured",limit:18}));break;case"rising":e.category?this.collection=new s.collections.BrowseStories([],{category:e.category,filter:"rising",limit:18}):e.tag&&(this.collection=new s.collections.BrowseTagStories([],{tags:e.tag,filter:"top_category",limit:18}));break;case"new":e.category?this.collection=new s.collections.BrowseStories([],{category:e.category,filter:"new",limit:18}):e.tag&&(this.collection=new s.collections.BrowseTagStories([],{tags:e.tag,filter:"new",limit:18}));break;case"recommended":this.collection=new s.collections.RecommendedStories([],{username:n.utils.currentUser().get("username")});break;case"featured404":this.collection=new s.collections.FeaturedStories([],{})}this.device=s.get("device"),Handlebars.registerPartial("core.item_views.browse_story_item",function(){return""}),this.collection.once("sync",function(){t.render()}),this.collection.fetchNextSet()},getTemplateData:function(){return{hasStories:this.collection.length>0,showHotListHeader:this.showHotListHeader||!1,appendStoriesSuffix:this.appendStoriesSuffix||!1,categoryNameForHotListHeader:this.categoryNameForHotListHeader||"",category:this.category||"","user-device":this.device,tags:this.collection.tags,isMobile:this.device.is.mobile}},renderItem:function(e,t,a){s.views.IncrementalList.prototype.renderItem.apply(this,arguments),a=a||this.collection.indexOf(e),t=t||this.$el.children(".collection");var l=n.utils.advertisementAtEveryIndex({hash:{unit:"mobile"===n.utils.getDeviceType()?"leaderboard_mobile":"leaderboard",experience:"browse",parentClass:"ad-wrapper ad-unit"},data:{index:a}});l&&t.append(l)},render:function(){return this.render=function(){return s.views.IncrementalList.prototype.render.apply(this,arguments),this}.bind(this),this},onStoryPreview:function(e){var t=$(e.currentTarget).data("story-id"),n=this.collection.get(t),a=new s.views.BrowseStoryPreview({model:n});this.$("#preview-modal").empty().append(a.render().$el),a.openModal()},sendEventTracking:function(){e.te.push("event","app","story",null,"click",{storyid:this.$("#preview-modal .browse-preview.modal").data("story-id"),page:"category"})},onShowMore:function(e){this.collection.limit=20,s.views.IncrementalList.prototype.onShowMore.apply(this,arguments)}})),s.mixin(s.views.BrowseStories,"InfiniteScroll")}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-right",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:""},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'        <div class="tag-module-tags">\n            <a class="on-navigate" href="/tags/'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+'"><s>#</s>'+o("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:r)?l.call(i,{name:"id",hash:{},data:s}):l)+"</a>\n        </div>\n"},5:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression;return"\n"+(null!=(r=n.if.call(o,null!=t?t.showHotListHeader:t,{name:"if",hash:{},fn:e.program(6,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n<div class='collection'>\n"+(null!=(r=n.each.call(o,null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(11,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'</div>\n\n<div class="show-more center-text hidden">\n    <button class="btn btn-link on-showmore">\n        <span class=\'show-more-message\'>\n            <span>'+u((n.trans||t&&t.trans||c).call(o,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n        </span>\n        <span class='loading-message hidden'>\n            "+(null!=(r=(n.iconifySpin||t&&t.iconifySpin||c).call(o,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?r:"")+"\n            <span> "+u((n.trans||t&&t.trans||c).call(o,"Loading",{name:"trans",hash:{},data:s}))+' ...</span>\n        </span>\n    </button>\n</div>\n\n<div id="preview-modal"></div>\n\n'},6:function(e,t,n,a,s){var l;return"  <div id='hot-list-header'>\n"+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.appendStoriesSuffix:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+"  </div>\n"},7:function(e,t,n,a,s){var l;return"      <p> "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"The Top %1$s: Best %2$s Stories","<span>1000</span>",null!=t?t.categoryNameForHotListHeader:t,{name:"trans",hash:{},data:s}))?l:"")+"</p>\n"},9:function(e,t,n,a,s){var l;return"      <p> "+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"The Top %1$s: Best %2$s","<span>1000</span>",null!=t?t.categoryNameForHotListHeader:t,{name:"trans",hash:{},data:s}))?l:"")+"</p>\n"},11:function(e,t,n,a,s,l,i){var r;return'        <div class="browse-story-item '+(null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.completed:t,{name:"if",hash:{},fn:e.program(12,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=e.invokePartial(a["core.item_views.browse_story_item"],t,{name:"core.item_views.browse_story_item",hash:{showRank:null!=i[1]?i[1].showHotListHeader:i[1]},data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+"        </div>\n"},12:function(e,t,n,a,s){return"completed"},14:function(e,t,n,a,s){return'<p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No stories available.",{name:"trans",hash:{},data:s}))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{};return'<div id="category-tags" class="sub-navigation">\n  '+(null!=(r=n.if.call(o,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n  <div class="scrollable">\n    <div class="collection">\n'+(null!=(r=n.each.call(o,null!=t?t.tags:t,{name:"each",hash:{},fn:e.program(3,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"    </div>\n  </div>\n</div>\n\n"+(null!=(r=n.if.call(o,null!=t?t.hasStories:t,{name:"if",hash:{},fn:e.program(5,s,0,l,i),inverse:e.program(14,s,0,l,i),data:s}))?r:"")},usePartial:!0,useData:!0,useDepths:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(416));!function(e,t,n,s){s.add("FeaturedStories",s.views.IncrementalList.extend({template:a.default,filter:null,className:"stories",containerClass:".collection",itemView:s.views.FeaturedStoryItem,initialize:function(e){e=e||{},this.collection=new s.collections.FeaturedStories([],{limit:e.limit||3}),Handlebars.registerPartial("core.item_views.featured_story_item",function(){return""})},getTemplateData:function(){return{hasStories:this.collection.length>0,"user-device":s.get("device")}},render:function(){var e=this;return Promise.resolve(this.collection.fetchNextSet()).then(function(){s.views.IncrementalList.prototype.render.apply(e,arguments)}),this}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"<div class='collection'>\n"+(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},2:function(e,t,n,a,s){var l;return'\t<div class="browse-story-item '+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.completed:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'">\n'+(null!=(l=e.invokePartial(a["core.item_views.browse_story_item"],t,{name:"core.item_views.browse_story_item",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"  </div>\n"},3:function(e,t,n,a,s){return"completed"},5:function(e,t,n,a,s){return'<p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No stories available.",{name:"trans",hash:{},data:s}))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasStories:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(5,s,0),data:s}))?l:""},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(18)),s=l(n(418));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("CommentItem",r.views.Base.extend({template:s.default,className:"comment",events:{"tap  .on-delete":"onDelete","click  .on-delete":"stopEvent","tap  .on-reply":"onReply","click  .on-reply":"stopEvent","tap  .on-report":"onReport","click  .on-report":"stopEvent"},reportModalContainer:".comment-report-modal",modalTitle:l.utils.trans("Report a Comment"),requestType:"inappropriate_comments",isMainReportModal:!1,initialize:function(e){Handlebars.registerPartial("core.item_views.comment_item_options",a.default),this.isDeeplinkedReply=e.isDeeplinkedReply,this.$el.attr("id","comment-"+this.model.get("id"))},render:function(){var e=this.model.toJSON();if(e.body=i.sanitizeHTML(e.body),l.utils.currentUser().authenticated()){var t=l.utils.currentUser().get("ambassador")||l.utils.currentUser().get("isSysAdmin"),n=!!e.storyAuthor&&e.storyAuthor===l.utils.currentUser().get("username"),a=e.author.name===l.utils.currentUser().get("username");e.canDelete=t||n||a}return e.isCommentNotification=!1,this.$el.html(this.template(e)),this},onDelete:function(t){t.stopPropagation();var n=this.model.get("paragraphId");e.confirm(l.utils.trans("Are you sure you want to delete this comment?"))&&(n?this.model.destroyAndUpdateMarker():this.model.destroy())},reportMoreInfo:function(){var t=this;return[{key:"Comment Author",val:this.model.get("author").name},{key:"Comment Location",val:e.location.href},{key:"Comment Body",val:function(){return i.sanitizeHTML(t.model.get("body"))}},{key:"Comment DeepLink",val:this.model.get("deeplink")}]},onReply:function(t){var a,s,o=this.$(t.currentTarget);if(t.stopPropagation(),!i.currentUser().authenticated()){(u=n("#inline-comments-modal .inline-comments-modal"))&&u.modal("hide");var c=new r.views.SignUpPrompt({model:new r.models.Authsignup,title:l.utils.trans("Join Wattpad"),subtitle:l.utils.trans("Be part of a global community of readers and writers, all connected through the power of story."),nextUrl:e.location.href});return n("#generic-modal .modal-body").html(c.render().$el),void n("#generic-modal").modal("show")}if(!i.currentUser().get("verified_email")){var u;(u=n("#inline-comments-modal .inline-comments-modal"))&&u.modal("hide");c=new r.views.PleaseVerifyModal;return n("#generic-modal .modal-body").html(c.render().$el),void n("#generic-modal").modal({})}if(!this.model.get("isReply")){if(a=o.data("target"),(s=this.$(a)).hasClass("collapsing"))return;if(s.hasClass("collapse")&&s.hasClass("in"))s.collapse("hide"),o.blur();else{o.attr("disabled",!0);var d=this.model.replies(),h=new r.views.Comments({collection:d,chronological:!0,enablePosts:l.utils.currentUser().authenticated(),placeholder:l.utils.trans("Reply to this conversation"),commentIdToHighlight:this.model.commentIdToHighlight,model:this.model});this.listenToOnce(h,"render:done",function(){s.collapse("show"),0===d.length&&s.find("textarea").focus(),s.one("hidden.bs.collapse",function(){h.remove(),d.reset(),r.local.clear(d.resource())}),this.listenTo(d,"add:new",function(){this.updateReplyCount(1)}),this.listenTo(d,"remove",function(){this.updateReplyCount(-1)}),o.attr("disabled",!1)}),s.append(h.render().$el)}}},updateReplyCount:function(e){var t=this.$el.children(".component-wrapper").children("footer").children(".on-reply"),n=t.text().trim(),a=new RegExp(/([0-9]*)([M|K]?)(\s)?(Reply|Replies)/g).exec(n);if(!a[2]){var s=0;a[1].trim().length>0&&(s=parseInt(a[1],10));var r=s+e===0?l.utils.trans("Reply"):l.utils.sprintf(l.utils.ngettext("%s Reply","%s Replies",s+e),[l.utils.count(s+e)]);i.cacheBust(["StoryPartComments"],[{partId:this.model.collection.partId}],this.model.get("id")),t.html(r)}},expand:function(){this.$el.children(".component-wrapper").children("footer").children(".on-reply").trigger("tap")},onReport:function(){var e=this;this.$el.on("shown.bs.modal",function(){e.$(".report-modal.fade.in .modal-title")[0].scrollIntoView(!1)})}})),r.mixin(r.views.CommentItem,"InputCounterManagement","ReportManagement","ReportConduct")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=e.invokePartial(a["core.item_views.comment_item_options"],t,{name:"core.item_views.comment_item_options",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n"+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"CommentItem",null!=t?t.id:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(420)),s=l(n(421));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l){l.add("Comments",l.views.IncrementalList.extend({template:null,className:"comments",itemView:l.views.CommentItem,events:t.extend(l.views.IncrementalList.prototype.events,{"tap .on-add-mention":"onAddMention","click .on-add-mention":"stopEvent","tap .on-return-all-comments":"onReturnToAllComments","click .on-return-all-comments":"stopEvent"}),initialize:function(e){e=e||{},this.chronological=e.chronological||!1,this.commentIdToHighlight=e.commentIdToHighlight,this.enablePosts=e.enablePosts||!1,this.chronological?this.template=s.default:this.template=a.default,this.resetDirection(),this.enablePosts&&(this.newReplyView=new l.views.CommentNew({collection:this.collection,placeholder:e.placeholder||n.utils.trans("Leave a comment"),source:e.source}))},getTemplateData:function(){return{hasComments:this.collection.length>0||this.enablePosts,device:l.get("device"),isDeepLinkView:this.collection.length>0&&this.collection.first().isDeepLink}},render:function(){var e=this;return Promise.resolve(this.collection.fetchNextSet()).then(function(){if(e.renderView(),e.options.source&&e.collection.length>=2){var t=e.options.source.attributes.isMicroPart||!1,a=e.options.source.attributes.anonymousUser||!1?t?"readingshort_comments_loggedout":"readinglong_comments_loggedout":t?"readingshort_comments":"readinglong_comments";$(".comments.right-rail .reading-widget").html(n.utils.advertisement({data:{root:e.options.source.toJSON()},hash:{unit:a,experience:"reading",lazy:!0,storyGroup:e.options.source.toJSON().group,adzerk:!0,tryHb:!0}}))}}).catch(function(){e.renderView()}),this},renderView:function(){return l.views.IncrementalList.prototype.render.apply(this,arguments),this.enablePosts&&this.$(".post-comment").empty().append(this.newReplyView.render().$el),this.trigger("render:done"),this},renderItem:function(e,t){if(0===this.collection.indexOf(e)&&(this.direction=this.chronological?this.directions.down:this.directions.up),l.views.IncrementalList.prototype.renderItem.apply(this,arguments),this.resetDirection(),e.get("id")===this.commentIdToHighlight&&this.model.isDeepLink){var n=this.$el.find("#comment-"+this.commentIdToHighlight);n&&n.addClass("highlight")}},resetDirection:function(){this.direction=this.chronological?this.directions.up:this.directions.down},onAddMention:function(e){n.utils.stopEvent(e);var t=this.$(e.currentTarget).data("id"),a=this.collection.get(t).get("author").name;this.newReplyView&&this.newReplyView.addMention(a)},onReturnToAllComments:function(){this.collection.reset(),this.$(".single-comment-warning").remove(),this.collection.fetchNextSet()}}))}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return(null!=(l=n.if.call(i,null!=t?t.isDeepLinkView:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"    <div class='collection'>\n"+(null!=(l=n.each.call(i,null!=t?t.comments:t,{name:"each",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'    </div>\n    <div class="show-more hidden center-text">\n        <button class="btn on-showmore">\n        <span class=\'show-more-message\'>\n            <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-1\"></span>\n        </span>\n        <span class='loading-message hidden'>\n            "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n            <span> "+o((n.trans||t&&t.trans||r).call(i,"Loading",{name:"trans",hash:{},data:s}))+' ...</span>\n        </span>\n        </button>\n    </div>\n    <div class="loading-spinner center-text hidden">\n        '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t.device:t,{name:"iconifySpin",hash:{},data:s}))?l:"")+"\n    </div>\n"},2:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <div class="single-comment-warning">\n      '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-warning",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" <small>"+o((n.trans||t&&t.trans||r).call(i,"You are viewing a single comment thread.",{name:"trans",hash:{},data:s}))+'</small>\n      <p><button class="btn btn-small btn-white on-return-all-comments">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-left",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Return to all comments",{name:"trans",hash:{},data:s}))+"</button></p>\n    </div>\n"},4:function(e,t,n,a,s){var l,i;return'            <div class="comment" id="comment-'+e.escapeExpression("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:s}):i)+'">\n'+(null!=(l=e.invokePartial(a["core.item_views.comment_item"],t,{name:"core.item_views.comment_item",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </div>\n"},6:function(e,t,n,a,s){return"    <div class='collection'>\n        <p class=\"no-item\">"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No comments listed yet.",{name:"trans",hash:{},data:s}))+"</p>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'\n<div class="post-comment"></div>\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasComments:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(6,s,0),data:s}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="show-more hidden center-text">\n  <button class="btn on-showmore">\n      <span class=\'show-more-message\'>\n          <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more...",{name:"trans",hash:{},data:s}))+"</span>\n      </span>\n      <span class='loading-message hidden'>\n          "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n          <span> "+o((n.trans||t&&t.trans||r).call(i,"Loading",{name:"trans",hash:{},data:s}))+' ...</span>\n      </span>\n  </button>\n</div>\n<div class="loading-spinner center-text hidden">\n  '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t.device:t,{name:"iconifySpin",hash:{},data:s}))?l:"")+"\n</div>\n<div class='collection'>\n"+(null!=(l=n.each.call(i,null!=t?t.comments:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},2:function(e,t,n,a,s){var l,i;return'    <div class="comment" id="comment-'+e.escapeExpression("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:n.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:s}):i)+'">\n'+(null!=(l=e.invokePartial(a["core.item_views.comment_item"],t,{name:"core.item_views.comment_item",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </div>\n"},4:function(e,t,n,a,s){return'<div class="collection">\n  <p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No comments listed yet.",{name:"trans",hash:{},data:s}))+"</p>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasComments:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+'<div class="post-comment"></div>\n'},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(423)),s=l(n(424));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r){r.add("InlineCommentsModal",r.views.IncrementalList.extend({className:"inline-comments-modal modal fade",template:s.default,events:t.extend(r.views.IncrementalList.prototype.events,{"tap .on-return-all-comments":"onReturnToAllComments","click .on-return-all-comments":"stopEvent"}),itemView:r.views.CommentItem,containerId:"#inline-comments",initialize:function(e){e=e||{},this.partRating=e.source.get("rating")||null,this.chronological=!1,this.commentIdToHighlight=e.commentIdToHighlight,this.isDeepLinkedComment=t.get(e.collection.models,"[0].isDeepLink"),Handlebars.registerPartial("core.mixins.show_more",a.default)},showModal:function(){this.$el.modal("show")},onReturnToAllComments:function(){this.collection.reset(),this.$(".single-comment-warning").remove(),this.collection.fetchNextSet()},getTemplateData:function(){return{paragraphText:this.options.collection.paragraphText,storyGroup:this.options.source.get("group"),storyPart:this.options.source.toJSON(),isDeepLinkView:this.isDeepLinkedComment}},render:function(){var e=this;return r.views.IncrementalList.prototype.render.apply(this,arguments),this.isDeepLinkedComment||t.defer(function(){var t=new r.views.CommentNew({collection:e.collection,placeholder:l.utils.trans("Leave a comment"),source:e.source});e.$(".post-comment").empty().append(t.render().$el)}),this},renderItem:function(e,t){if(0===this.collection.indexOf(e)&&(this.direction=this.chronological?this.directions.down:this.directions.up),r.views.IncrementalList.prototype.renderItem.apply(this,arguments),this.resetDirection(),e.get("id")===this.commentIdToHighlight&&this.model.isDeepLink){var n=this.$el.find("#comment-"+this.commentIdToHighlight);n&&n.addClass("highlight")}},resetDirection:function(){this.direction=this.chronological?this.directions.up:this.directions.down}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="show-more center-text'+(null!=(l=n.if.call(i,null!=t?t.hasMore:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:"")+'">\n  <button class="btn on-showmore" role="button">\n    <span class="show-more-message">\n      <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more...",{name:"trans",hash:{},data:s}))+'</span>\n    </span>\n    <span class="loading-message hidden">\n    '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n    <span>"+o((n.trans||t&&t.trans||r).call(i,"Loading...",{name:"trans",hash:{},data:s}))+"</span>\n    </span>\n  </button>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <div class="single-comment-warning">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-warning",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" <small>"+o((n.trans||t&&t.trans||r).call(i,"You are viewing a single comment thread.",{name:"trans",hash:{},data:s}))+'</small>\n        <p><button class="btn btn-small btn-white on-return-all-comments">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-left",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Return to all comments",{name:"trans",hash:{},data:s}))+"</button></p>\n      </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="modal-dialog">\n  <div class="modal-content">\n    <header class="modal-header">\n      <h1 class="modal-title">'+o((n.trans||t&&t.trans||r).call(i,"Comments",{name:"trans",hash:{},data:s}))+'</h1>\n      <div class="close" data-dismiss="modal">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",22,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'\n      </div>\n    </header>\n    <div class="modal-body comments-modal-body">\n'+(null!=(l=n.if.call(i,null!=t?t.isDeepLinkView:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'\n      <div class="paragraph">\n        <div class="paragraph-text">\n        <pre>'+(null!=(l=(n.parseEmbeddedMedia||t&&t.parseEmbeddedMedia||r).call(i,null!=t?t.paragraphText:t,400,{name:"parseEmbeddedMedia",hash:{},data:s}))?l:"")+'</pre>\n        </div>\n        <ul class="paragraph-meta">\n          <li>'+o((n.trans||t&&t.trans||r).call(i,"From %s",null!=(l=null!=t?t.storyPart:t)?l.title:l,{name:"trans",hash:{},data:s}))+'</li>\n          <li><a href="'+o((n.formatStoryUrl||t&&t.formatStoryUrl||r).call(i,null!=(l=null!=t?t.storyGroup:t)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-navigate">'+o(e.lambda(null!=(l=null!=t?t.storyGroup:t)?l.title:l,t))+'</a></li>\n        </ul>\n      </div>\n\n      <div class="post-comment"></div>\n\n      <div id="inline-comments" class=\'collection comments\'></div>\n\n'+(null!=(l=e.invokePartial(a["core.mixins.show_more"],t,{name:"core.mixins.show_more",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </div>\n  </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(426));!function(e,t,n,s,l){s.add("StoryParts",s.views.Base.extend({template:a.default,className:"story-parts",events:{"tap .on-navigate-part":"onNavigatePart","click .on-navigate-part":"stopEvent"},initialize:function(e){this.listenTo(this.model,"reading-position-available",this.onPositionAvailable)},onPositionAvailable:function(e){if(e&&e.part!==this.model.get("firstPartId")||e.position>0){var t=this.$el.find("li[data-part-id='"+e.part+"']"),a=$(t).children("a"),s=n.utils.trans("%s%% Read",(100*e.position).toFixed(2));t.addClass("active"),a.children().remove(),a.append('<small class="pull-right">'+s+"</small>")}},render:function(){var a={};if(a.story=this.model.toJSON(),a.story.parts=this.model.get("parts"),(t.get(e,"wattpad.testGroups.PAID_CONTENT")||!1)&&a.story.isPaywalled){var s=e.store.getState().paidMetadata;a.story.parts=l.markBlockedParts(s,a.story.parts)}return a.story.numParts=this.model.get("numParts"),this.$el.html(this.template(a)),n.utils.currentUser().authenticated()&&this.model.syncPosition(),this},onNavigatePart:function(e){this.onNavigate(e)}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{};return'        <li data-part-id="'+r(i(null!=t?t.id:t,t))+'">\n            <a href="'+r((n.formatStoryUrl||t&&t.formatStoryUrl||n.helperMissing).call(o,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-navigate-part">\n              '+(null!=(l=n.if.call(o,null!=t?t.isBlocked:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n              "+r(i(null!=t?t.title:t,t))+"\n"+(null!=(l=n.if.call(o,null!=t?t.deleted:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(o,null!=t?t.draft:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"            </a>\n        </li>\n"},2:function(e,t,n,a,s){var l;return null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-lock",16,"wp-neutral-2","pull-right",{name:"iconify",hash:{},data:s}))?l:""},4:function(e,t,n,a,s){return'                <span class="deleted-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted",{name:"trans",hash:{},data:s}))+")</span>\n"},6:function(e,t,n,a,s){return'                <span class="draft-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Draft",{name:"trans",hash:{},data:s}))+")</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div>\n    <ul class="table-of-contents">\n'+(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.story:t)?l.parts:l,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"    </ul>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(428));!function(e,t,n,s,l){s.add("StoryAdmin",l.View.extend({className:"dropdown-menu story-admin-dropdown",template:a.default,events:{"tap    .on-options-hot-list-review":"onHotListReview","click  .on-options-hot-list-review":"stopEvent","tap    .on-options-edit-details":"onOptionsEditDetails","click  .on-options-edit-details":"stopEvent","tap    .on-options-edit-part":"onOptionsEditPart","click  .on-options-edit-part":"stopEvent","tap    .on-cover-remove":"onCoverRemove","click  .on-cover-remove":"stopEvent","change #story-language-select":"onLanguageChanged","change #story-category-select":"onCategoryChanged"},initialize:function(e){if(e=e||{},this.reported=!1,!(e.author&&e.author instanceof s.models.User))throw new Error("StoryAdmin View : `options.author` must be defined (`UserModel` reference)");if(this.author=e.author,!(e.story&&e.story instanceof s.models.StoryModel))throw new Error("StoryAdmin View : `options.story` must be defined (`StoryModel` reference)");if(this.story=e.story,e.part&&!(e.part instanceof s.models.StoryPartModel))throw new Error("StoryAdmin View : `options.part` should be a `StoryPartModel` reference");this.part=e.part||null,this.langs=this.getLangs()},render:function(){var n={isAdmin:t.utils.currentUser().get("isSysAdmin"),isStaff:t.utils.currentUser().get("is_staff"),author:this.author.toJSON(),story:this.story.toJSON(),part:this.part?this.part.toJSON():null,languages:this.langs,reportLink:"/help/content?message="+t.utils.urlEncode("I am reporting the following content:\n")+"&story_link="+t.utils.urlEncode(e.location.href),translateLink:"https://translate.google.com/translate?u="+t.utils.urlEncode(e.location.href)+"&tl=en&hl=en&ie=UTF-8",categories:s.get("categories").toJSON()};return this.$el.html(this.template(n)),this.connectMixin(),this},getLangs:function(){var e=[];return _.each(t.supportedLangs,function(t){e.push({id:t.id,name:1!==t.id&&11!==t.id?t.name+" ("+t.nameEnglish+")":t.name})}),e.push({id:11,name:"Other"}),e},onHotListReview:function(t){var n=this.part?this.part.get("id"):this.story.get("firstPartId"),a=this;!1===this.reported&&e.confirm("Are you sure?")&&$.post("/api/v3/story_parts/"+n+"/report").done(function(e){a.successFeedback(".options-row"),a.reported=!0}).fail(function(e){a.failureFeedback(".options-row",a.getErrorMessage(e))})},onOptionsEditDetails:function(e){n.stopEvent(e),s.router.navigate("/myworks/"+this.story.get("id"),{trigger:!0})},onOptionsEditPart:function(e){n.stopEvent(e),s.router.navigate("/mystories?compose=true&id="+this.part.get("id"),{trigger:!0})},onLanguageChanged:function(t){var n=this.$("#story-language-select").val(),a=this.story.get("language"),s="Set the language to "+_.find(this.langs,function(e){return e.id==n}).name+"?",l=this;n!==a&&e.confirm(s)?(this.story.set("language",n),this.saveStory().done(function(e){l.successFeedback(".language-row")}).fail(function(e){l.failureFeedback(".language-row",l.getErrorMessage(e)),l.story.set("language",a),l.$("#story-language-select").val(a)})):this.$("#story-language-select").val(a)},onCategoryChanged:function(t){var n=this.$("#story-category-select").val(),a=this.story.get("categories"),l="Set the category to "+s.get("categories").get(n).get("name")+"?",i=this;n!==a[0]&&e.confirm(l)?(this.story.set("categories",[parseInt(n),a[1]]),this.saveStory().done(function(e){i.successFeedback(".category-row")}).fail(function(e){i.failureFeedback(".category-row",i.getErrorMessage(e)),i.story.set("categories",a),i.$("#story-category-select").val(a[0])})):this.$("#story-category-select").val(a[0])},onCoverRemove:function(){var t=this,n=e.prompt("Why is this cover being removed? Options: 'copyright', 'banned content', 'self harm'");if(n){var a={id:this.story.get("id"),ownerid:this.author.id,req_type:"upload",cover:"",coverDeleteReason:n};$.post("/apiv2/uploadstorygroup",a).done(function(n){t.successFeedback(".cover-row"),e.location.reload()}).fail(function(e){t.failureFeedback(".cover-row",t.getErrorMessage(e))})}else e.alert("Banning was cancelled.")},onFileSelected:function(){var e=this;e.getFile().then(function(t){t&&Promise.resolve($.ajax({type:"POST",url:"/apiv2/updatestorycover",data:{id:e.story.get("id"),image:t.parsed}})).then(function(){e.successFeedback(".cover-row")}).catch(function(){e.failureFeedback(".cover-row")})})},saveStory:function(){var e=this.story.get("categories");return $.post("/api/v3/story_parts/"+this.story.get("firstPartId")+"/moderate",{language:this.story.get("language"),category1:e[0],category2:e[1]?e[1]:0})},getErrorMessage:function(e){return e&&e.responseJSON?e.responseJSON.message:"Error saving changes. Please try again."},successFeedback:function(n){var a=this,s=n+" > .response-status";a.clearFeedback(),this.$(s).html(t.utils.iconify("fa-check",24,"wp-success")),e.setTimeout(function(){a.clearFeedback()},3e3)},failureFeedback:function(n,a){var s=this,l=n+" > .response-status";s.clearFeedback(),this.$(l).html(t.utils.iconify("fa-warning",24,"wp-error-1")),this.$(".error-row > .alert").html(a),this.$(".error-row").removeClass("hidden"),e.setTimeout(function(){s.clearFeedback()},3e3)},clearFeedback:function(){this.$(".error-row").addClass("hidden"),this.$(".response-status").empty()},stopEvent:function(e){t.utils.stopEvent(e)}})),s.mixin(s.views.StoryAdmin,"FileUpload")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"%s yrs old",null!=(l=null!=t?t.author:t)?l.age:l,{name:"trans",hash:{},data:s}))},3:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.author:t)?l.country:l,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:""},4:function(e,t,n,a,s){return"&middot;"},6:function(e,t,n,a,s){var l;return e.escapeExpression(e.lambda(null!=(l=null!=t?t.author:t)?l.country:l,t))},8:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.part:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:""},9:function(e,t,n,a,s){var l,i=e.escapeExpression;return'                <li><a href="/admin/db/text.php?PME_sys_rec='+i(e.lambda(null!=(l=null!=t?t.part:t)?l.id:l,t))+'&PME_sys_operation=Change">'+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Ranking Details",{name:"trans",hash:{},data:s}))+"</a></li>\n"},11:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return(null!=(l=n.if.call(r,null!=t?t.part:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.program(14,s,0),data:s}))?l:"")+'            <li><a href="'+c("function"==typeof(i=null!=(i=n.translateLink||(null!=t?t.translateLink:t))?i:o)?i.call(r,{name:"translateLink",hash:{},data:s}):i)+'">'+c((n.trans||t&&t.trans||o).call(r,"Translate",{name:"trans",hash:{},data:s}))+"</a></li>\n            "+(null!=(l=n.if.call(r,null!=t?t.part:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},12:function(e,t,n,a,s){var l,i=e.escapeExpression;return'            <li><a class="on-options-edit-part" href="/mystories?compose=true&id='+i(e.lambda(null!=(l=null!=t?t.part:t)?l.id:l,t))+'">'+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Edit Story Part",{name:"trans",hash:{},data:s}))+"</a></li>\n"},14:function(e,t,n,a,s){var l,i=e.escapeExpression;return'            <li><a class="on-options-edit-details" href="/myworks/'+i(e.lambda(null!=(l=null!=t?t.story:t)?l.id:l,t))+'">'+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Edit Story Details",{name:"trans",hash:{},data:s}))+"</a></li>\n"},16:function(e,t,n,a,s){var l,i=e.escapeExpression;return'<li><a href="/api/alltext?id='+i(e.lambda(null!=(l=null!=t?t.part:t)?l.id:l,t))+'">'+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Plain Text",{name:"trans",hash:{},data:s}))+"</a></li>"},18:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <li><a href="'+o("function"==typeof(l=null!=(l=n.reportLink||(null!=t?t.reportLink:t))?l:r)?l.call(i,{name:"reportLink",hash:{},data:s}):l)+'">'+o((n.trans||t&&t.trans||r).call(i,"Report Story",{name:"trans",hash:{},data:s}))+'</a></li>\n            <li><a class="on-options-hot-list-review" href="#">'+o((n.trans||t&&t.trans||r).call(i,"Hot List Review",{name:"trans",hash:{},data:s}))+"</a></li>\n"},20:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'        <li class="story-admin-dropdown-row options-row">\n            <strong class="row-name">'+o((n.trans||t&&t.trans||r).call(i,"Paid Story",{name:"trans",hash:{},data:s}))+':</strong>\n            <span class="row-controls"><ul class="option-items">\n                <li><a target="_blank" rel="noopener noreferrer" href="/admin/paid_stories_manager?storyId='+o(e.lambda(null!=(l=null!=t?t.story:t)?l.id:l,t))+'">'+o((n.trans||t&&t.trans||r).call(i,"Manage",{name:"trans",hash:{},data:s}))+'</a></li>\n            </ul></span>\n            <span class="response-status pull-right"></span>\n        </li>\n'},22:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <li class="story-admin-dropdown-row options-row">\n        <strong class="row-name">'+o((n.trans||t&&t.trans||r).call(i,"Download:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls"><ul class="option-items">\n        '+(null!=(l=n.if.call(i,null!=t?t.part:t,{name:"if",hash:{},fn:e.program(23,s,0),inverse:e.noop,data:s}))?l:"")+'\n        <li><a href="/apiv2/storytext?group_id='+o(e.lambda(null!=(l=null!=t?t.story:t)?l.id:l,t))+'&no_format=false&include_deleted=true&include_drafts=true&include_private=true&output=zip">'+o((n.trans||t&&t.trans||r).call(i,"Story Group",{name:"trans",hash:{},data:s}))+"</a></li>\n        </ul></span>\n    </li>\n"},23:function(e,t,n,a,s){var l,i=e.escapeExpression;return'<li><a href="/apiv2/storytext?id='+i(e.lambda(null!=(l=null!=t?t.part:t)?l.id:l,t))+'&no_format=false&include_deleted=true&include_drafts=true&include_private=true&output=zip">'+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Story Part",{name:"trans",hash:{},data:s}))+"</a></li>"},25:function(e,t,n,a,s,l,i){var r;return null!=(r=n.unless.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.story:t)?r.draft:r,{name:"unless",hash:{},fn:e.program(26,s,0,l,i),inverse:e.noop,data:s}))?r:""},26:function(e,t,n,a,s,l,i){var r,o,c,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h=e.escapeExpression,p=n.blockHelperMissing,m='\n    <li class="story-admin-dropdown-row language-row">\n        <strong class="row-name">'+h((n.trans||t&&t.trans||d).call(u,"Language:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls">\n            <select id="story-language-select" class="form-control">\n';return o=null!=(o=n.languages||(null!=t?t.languages:t))?o:d,c={name:"languages",hash:{},fn:e.program(27,s,0,l,i),inverse:e.noop,data:s},r="function"==typeof o?o.call(u,c):o,n.languages||(r=p.call(t,r,c)),null!=r&&(m+=r),m+='            </select>\n        </span>\n        <span class="response-status pull-right"></span>\n    </li>\n    <li class="story-admin-dropdown-row category-row">\n        <strong class="row-name">'+h((n.trans||t&&t.trans||d).call(u,"Category:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls">\n            <select id="story-category-select" class="form-control">\n                <option value="-1">'+h((n.trans||t&&t.trans||d).call(u,"Select a category",{name:"trans",hash:{},data:s}))+"</option>\n",o=null!=(o=n.categories||(null!=t?t.categories:t))?o:d,c={name:"categories",hash:{},fn:e.program(29,s,0,l,i),inverse:e.noop,data:s},r="function"==typeof o?o.call(u,c):o,n.categories||(r=p.call(t,r,c)),null!=r&&(m+=r),m+'            </select>\n        </span>\n        <span class="response-status pull-right"></span>\n    </li>\n    <li class="story-admin-dropdown-row cover-row">\n        <strong class="row-name">'+h((n.trans||t&&t.trans||d).call(u,"Cover:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls">\n            <ul class="option-items">\n                <li>\n                    <div class=\'button\' data-file-upload="drop">\n                        <a class="file-select" role="button" href="#">\n                            '+h((n.trans||t&&t.trans||d).call(u,"Upload",{name:"trans",hash:{},data:s}))+'\n                        </a>\n                        <input accept="image/jpeg, image/png, image/gif" type="file" name="file">\n                    </div>\n                </li>\n                <li><a class="on-cover-remove" href="#">'+h((n.trans||t&&t.trans||d).call(u,"Remove",{name:"trans",hash:{},data:s}))+'</a></li>\n                <li><a href="/banner?id='+h(e.lambda(null!=(r=null!=t?t.story:t)?r.id:r,t))+'">'+h((n.trans||t&&t.trans||d).call(u,"Banner",{name:"trans",hash:{},data:s}))+'</a></li>\n            </ul>\n\n        </span>\n        <span class="response-status pull-right"></span>\n    </li>\n    '},27:function(e,t,n,a,s,l,i){var r;return"                "+(null!=(r=(n.select||t&&t.select||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.id:t,null!=t?t.name:t,null!=(r=null!=i[1]?i[1].story:i[1])?r.language:r,{name:"select",hash:{},data:s}))?r:"")+"\n"},29:function(e,t,n,a,s,l,i){var r;return"                "+(null!=(r=(n.select||t&&t.select||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.id:t,null!=t?t.name:t,null!=(r=null!=(r=null!=i[1]?i[1].story:i[1])?r.categories:r)?r[0]:r,t,{name:"select",hash:{},data:s}))?r:"")+"\n"},31:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'    <li class="story-admin-dropdown-row rating-row">\n        <strong class="row-name">'+o((n.trans||t&&t.trans||r).call(i,"Rating:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls">\n            <ul class="option-items">\n                <li><a href="/admin/community_reports?model_type=2&model_id='+o(c(null!=(l=null!=t?t.story:t)?l.id:l,t))+'">'+o((n.trans||t&&t.trans||r).call(i,"Reports",{name:"trans",hash:{},data:s}))+'</a></li>\n                <li><a href="/admin/story_rating_history.php?story_id='+o(c(null!=(l=null!=t?t.story:t)?l.id:l,t))+(null!=(l=n.if.call(i,null!=t?t.part:t,{name:"if",hash:{},fn:e.program(32,s,0),inverse:e.noop,data:s}))?l:"")+'">'+o((n.trans||t&&t.trans||r).call(i,"History",{name:"trans",hash:{},data:s}))+"</a></li>\n            </ul>\n        </span>\n    </li>\n"},32:function(e,t,n,a,s){var l;return"&part_id="+e.escapeExpression(e.lambda(null!=(l=null!=t?t.part:t)?l.id:l,t))},34:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <li class="story-admin-dropdown-row total-reads-row">\n        <strong class="row-name">'+o((n.trans||t&&t.trans||r).call(i,"Total Reads By Author:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls">\n            <ul class="option-items">\n                <li>'+o(e.lambda(null!=(l=null!=t?t.author:t)?l.totalReads:l,t))+" ("+o((n.count||t&&t.count||r).call(i,null!=(l=null!=t?t.author:t)?l.totalReads:l,{name:"count",hash:{},data:s}))+")</li>\n            </ul>\n        </span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d=e.lambda;return'<div class="author-info clearfix">\n    <span class="avatar avatar-md pull-left">'+u((n.connectAvatar||t&&t.connectAvatar||c).call(o,null!=(r=null!=t?t.author:t)?r.avatar:r,null!=(r=null!=t?t.author:t)?r.username:r,48,{name:"connectAvatar",hash:{},data:s}))+'</span>\n    <span class="author-info-text"><strong>'+u(d(null!=(r=null!=t?t.author:t)?r.username:r,t))+'</strong></span>\n\n    <span class="author-info-text">\n        '+(null!=(r=n.if.call(o,null!=(r=null!=t?t.author:t)?r.age:r,{name:"if",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n        "+(null!=(r=n.if.call(o,null!=(r=null!=t?t.author:t)?r.age:r,{name:"if",hash:{},fn:e.program(3,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n        "+(null!=(r=n.if.call(o,null!=(r=null!=t?t.author:t)?r.country:r,{name:"if",hash:{},fn:e.program(6,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n    </span>\n\n</div>\n<ul class="lists-menu">\n    <li class="story-admin-dropdown-row error-row hidden">\n        <div class="alert alert-danger" role="alert"></div>\n    </li>\n\n    <li class="story-admin-dropdown-row review-row">\n        <strong class="row-name">'+u((n.trans||t&&t.trans||c).call(o,"Review:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls">\n            <ul class="option-items">\n                <li><a href="/contentreview?groupid='+u(d(null!=(r=null!=t?t.story:t)?r.id:r,t))+'">'+u((n.trans||t&&t.trans||c).call(o,"Story",{name:"trans",hash:{},data:s}))+"</a></li>\n"+(null!=(r=n.if.call(o,null!=t?t.isAdmin:t,{name:"if",hash:{},fn:e.program(8,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'            </ul>\n        </span>\n    </li>\n\n    <li class="story-admin-dropdown-row options-row">\n        <strong class="row-name">'+u((n.trans||t&&t.trans||c).call(o,"Options:",{name:"trans",hash:{},data:s}))+'</strong>\n        <span class="row-controls"><ul class="option-items">\n'+(null!=(r=n.if.call(o,null!=t?t.isAdmin:t,{name:"if",hash:{},fn:e.program(11,s,0,l,i),inverse:e.program(18,s,0,l,i),data:s}))?r:"")+'        </ul></span>\n        <span class="response-status pull-right"></span>\n    </li>\n\n'+(null!=(r=n.if.call(o,null!=t?t.isAdmin:t,{name:"if",hash:{},fn:e.program(20,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n"+(null!=(r=n.if.call(o,null!=t?t.isStaff:t,{name:"if",hash:{},fn:e.program(22,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n    "+(null!=(r=n.unless.call(o,null!=(r=null!=t?t.story:t)?r.deleted:r,{name:"unless",hash:{},fn:e.program(25,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n"+(null!=(r=n.if.call(o,null!=t?t.isAdmin:t,{name:"if",hash:{},fn:e.program(31,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n"+(null!=(r=n.if.call(o,null!=t?t.isAdmin:t,{name:"if",hash:{},fn:e.program(34,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"</ul>\n"},useData:!0,useDepths:!0})},function(e,t,n){"use strict";var a=r(n(5)),s=r(n(6)),l=r(n(1)),i=r(n(430));function r(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,r,o){r.add("StoryLanding",r.views.RegionManager.extend({template:i.default,partials:{"core.story_landing.story_details":function(){return""},"core.story_landing.story_parts":function(){return""},"core.collection_views.stories_similar":function(){return""},"core.signup_prompt":function(){return""},"desktop.components.item_views.user_item":function(){return""},"desktop.components.modal.share_embed":l.default,"core.components.add_to_library_dropdown":s.default},events:{"tap   .on-tab-nav":"onSectionNavigate","click .on-tab-nav":"stopEvent","tap .on-story-navigate":"onStoryNavigate","click .on-story-navigate":"stopEvent","tap    .on-dismiss-lists":"onDismissLists","click  .on-dismiss-lists":"stopEvent","tap .share-embed":"onShareEmbed","click .share-embed":"stopEvent","tap .on-sponsor-navigate":"onSponsorNavigate","click .on-sponsor-navigate":"stopEvent","tap .send-author-event":"sendAuthorClickTrackingEvent","click .send-author-event":"stopEvent","tap .send-story-cover-event":"sendSimilarStoryCoverTrackingEvent","click .send-story-cover-event":"stopEvent"},regionTags:{details:"#story-details",content:"#tab-content",similar:".similar-stories",promoted:".promoted-stories",signup:"#authentication-panel"},id:"story-landing",subviews:{details:{view:r.views.StoryDetails},similar:{view:r.views.StoriesSimilar},signup:{view:r.views.SignUpPrompt},promoted:{view:r.views.PromotedStoryItem},parts:{view:r.views.StoryParts}},initialize:function(t){var n=e.matchMedia||e.msMatchMedia;t=t||{};this.section=t.section||"parts",_.bindAll(this,"clearLists"),_.each(this.partials,function(e,t,n){Handlebars.registerPartial(t,e)}),this.model.set("categories",[_.find(this.model.get("categories"),function(e){return e>0})]),this.model.set("categoryLabels",_.reduce(this.model.get("categories"),function(e,t){var n=r.get("categories").get(t);return n&&e.push({name:n.get("name"),name_english:n.get("name_english")}),e},[])),n&&(_.bindAll(this,"onWidthChange"),n("( min-width: 992px )").addListener(this.onWidthChange)),this.listenTo(this.model,"reading-position-available",this.onPositionAvailable),this.listenTo(r,"app:component:TagGridItem:click",this.navigateToTagPage)},onPositionAvailable:function(e){if(e&&e.part!==this.model.get("firstPartId")||e.position>0){var n=_.find(this.model.get("parts"),function(t){return t.id===e.part});n&&this.$(".story-controls > .on-story-navigate").text(t.utils.trans("Continue")).attr("href",t.utils.formatStoryUrl(n.url))}},navigateToTagPage:function(t){var n=$(t.currentTarget).text().trim();e.te.push("event","story_details","tag",null,"click",{storyid:this.model.get("id"),tags:n}),r.router.navigate("/stories/"+encodeURIComponent(n),{trigger:!0})},setElement:function(e){o.View.prototype.setElement.apply(this,arguments),_.each(this.regionTags,function(e){this.regions[e]&&this.regions[e].view&&this.$(e).length>0&&this.regions[e].view.setElement($(this.$(e+" > div")))},this)},render:function(){var a={},s=this,l=r.get("device");this.descCharLimit=l.is.desktop?170:130,a.story=this.model.toJSON(),a.story.firstPart=_.find(a.story.parts,function(e){return e.id===a.story.firstPartId}),a.tagGridTags={tags:[]},_.each(this.model.get("tags"),function(e){a.tagGridTags.tags.push({id:e,name:e})}),a.story.promoted&&(a.story.sponsorName=a.story.sponsorName||a.story.user.username);var i=this.buildSocialShareLinksForStory(this.model);if(a.socialShareHidden=i.splice(3,3),a.socialShareVisible=i,a.active={},a.active[this.section]=!0,a.isLogged=t.utils.currentUser().authenticated(),a.descCharLimit=this.descCharLimit,a.showAdminPanel=t.utils.currentUser().get("isSysAdmin")||t.utils.currentUser().get("ambassador"),a.isAdmin=t.utils.currentUser().get("isSysAdmin"),t.utils.setCookie("signupFrom","story_landing",0,e.location.hostname.replace("www","")),(_.get(e,"wattpad.testGroups.PAID_CONTENT")||!1)&&a.story.isPaywalled){var o=e.store.getState().paidMetadata;a.story.parts=n.markBlockedParts(o,a.story.parts),a.story.isPaidPreview=n.isPaidPreview(a.story.parts)}return this.$el.html(this.template(a)),this.setMain(),this.setSection(this.section),t.utils.currentUser().authenticated()&&"parts"!==this.section&&this.model.syncPosition(),_.defer(function(){s.$(".author-info").children("small").tooltip(),s.$(".meta").children("span").tooltip(),s.$(".story-details [data-toggle=tooltip]").tooltip(),s.initAdminPanel(s.model,"#admin-panel")}),this},setMain:function(){this.$(this.regionTags.details).empty();var e=new this.subviews.details.view({model:this.model});if(this.setRegion(this.regionTags.details,e.render()),!this.model.get("deleted")){this.$(this.regionTags.promoted).empty(),this.promotedStoryView=new this.subviews.promoted.view({storyId:this.model.get("id"),baseStoryCategory:this.model.get("categories")[0],zoneIds:[170406],template:a.default,fromPage:"storyLanding",descCharLimit:this.descCharLimit,promotedEl:".promoted-story-panel"});var n=this;_.defer(function(){n.setRegion(n.regionTags.promoted,n.promotedStoryView.render())}),this.$(this.regionTags.similar).empty(),e=new this.subviews.similar.view({filter:"similar",storyId:this.model.get("id"),limit:10,showDescription:!0}),this.setRegion(this.regionTags.similar,e.render())}if(this.$(this.regionTags.signup).empty(),!t.utils.currentUser().authenticated()){var s=this.model.get("firstPartId"),l=_.find(this.model.get("parts"),function(e){return e.id===s});e=new this.subviews.signup.view({model:new r.models.Authsignup,subtitle:t.utils.trans("Get notified when %s is updated","<strong>"+t.utils.sanitizeHTML(this.model.get("title"))+"</strong>"),nextUrlFirstPart:l&&l.url||null,libraryStoryId:this.model.get("id")}),this.setRegion(this.regionTags.signup,e.render())}},setSection:function(t){var n,a,s=this.$("#story-tabs");if(s.find("nav li").removeClass("active"),s.find("nav li[data-section="+t+"]").addClass("active"),this.section!==t&&(this.clearRegion(this.regionTags.content),a=e.location.pathname,a="parts"===t?a+"/parts":a.replace("/parts",""),r.router.navigate(a,{trigger:!1,replace:!0})),this.section!==t||!this.regions[this.regionTags.content]){switch(t){case"parts":n=new this.subviews.parts.view({model:this.model});break;case"details":n=new this.subviews.details.view({model:this.model})}this.setRegion(this.regionTags.content,n.render()),this.section=t}},onSectionNavigate:function(e){var t=$(e.currentTarget).parent().data("section");this.setSection(t)},onStoryNavigate:function(t){e.te.push("event","story_details","story",null,"read",{storyid:this.model.get("id")}),this.onNavigate(t)},onWidthChange:function(e){e.matches&&"details"===this.section&&this.setSection("parts")},onSponsorNavigate:function(e){var t=$(e.target).data("clickUrl");$.ajax({type:"GET",url:t}),this.onNavigate(e)},buildSocialShareLinksForStory:function(e){return[{name:"embed",icon:"fa-code",nopopup:!0,label:t.utils.trans("Embed Story"),href:t.utils.sprintf("https://embed.wattpad.com/story/%s",[e.get("id")])}]},onAddToListsReady:function(t,n){this.clearLists(),t.parents(".button-group").addClass("open"),t.removeClass("on-lists-add-clicked"),t.addClass("on-dismiss-lists"),$(e.document).one("click.bs.dropdown.data-api",this.clearLists)},clearLists:function(t){var n=!1;if(t&&3===t.which)return!1;var a=null;t&&(a=$(t.target));var s=$(".btn-story-lists");return _.each(s,function(e){var t=$(e);a&&0!==t.parents(".button-group").find(a).length?a&&(n=!0):(t.parents(".button-group").removeClass("open"),t.removeClass("on-dismiss-lists"),t.addClass("on-lists-add-clicked"))}),n&&$(e.document).one("click.bs.dropdown.data-api",this.clearLists),!0},onDismissLists:function(e){var t=$(e.currentTarget);t.parents(".button-group").removeClass("open"),t.removeClass("on-dismiss-lists"),t.addClass("on-lists-add-clicked")},onShareEmbed:function(e){var t=$("#generic-modal"),a=this;n.stopEvent(e),t.find(".modal-dialog").addClass("embed").find(".modal-body").html(this.partials["desktop.components.modal.share_embed"]({id:this.model.get("id"),close:!0}));var s=t.find(".on-select").on("tap",this.onSelectEmbedUrl),l=t.find("iframe");l.attr("src",l.data("href"));t.modal("show").on("hide.bs.modal",function e(){s.off("tap",a.onSelectEmbedUrl),t.off("hide.bs.modal",e)})},onSelectEmbedUrl:function(){var t=e.document.createRange();t.selectNode(e.document.getElementById("embed-url")),e.getSelection().addRange(t)},onSocialShareSelected:function(t){e.te.push("event","story_details","story",null,"share",{storyid:this.model.get("id"),channel:$(t.currentTarget).data("share-channel")})},sendAuthorClickTrackingEvent:function(){e.te.push("event","story_details","author","","click",{storyid:this.model.get("id"),username:this.model.get("user").username})},sendSimilarStoryCoverTrackingEvent:function(t){e.te.push("event","story_details","similar_stories","cover","click",{storyid:$(t.currentTarget).data("story-id"),current_storyid:this.model.get("id")})}})),r.mixin(r.views.StoryLanding,"StoryInListsManagement","SocialSharing","StoryAdminManager")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'            <div class="supported-marker">\n                '+r((n.connectImage||t&&t.connectImage||i).call(l,"paid-content/supported-stories-badge-white.svg","Paid Stories Badge",{name:"connectImage",hash:{},data:s}))+"\n                "+r((n.trans||t&&t.trans||i).call(l,"Paid Story",{name:"trans",hash:{},data:s}))+"\n            </div>\n"},3:function(e,t,n,a,s){return'<span class="deleted-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted",{name:"trans",hash:{},data:s}))+")</span>"},5:function(e,t,n,a,s){return'<span class="draft-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Draft",{name:"trans",hash:{},data:s}))+")</span>"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"            "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-badge-promoted",14,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Promoted by %s",(n.sprintf||t&&t.sprintf||r).call(i,'<a class="lightbold on-sponsor-navigate" href="/user/%s" data-click-url="%s">%s</a>',null!=(l=null!=t?t.story:t)?l.sponsorName:l,null!=(l=null!=t?t.story:t)?l.clickUrl:l,null!=(l=null!=t?t.story:t)?l.sponsorName:l,{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+"\n"},9:function(e,t,n,a,s){return"              <span>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Completed",{name:"trans",hash:{},data:s}))+"</span>\n"},11:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'              <span class="hidden-xs">'+o((n.trans||t&&t.trans||r).call(i,"Ongoing",{name:"trans",hash:{},data:s}))+" - </span> "+o((n.trans||t&&t.trans||r).call(i,"Updated",{name:"trans",hash:{},data:s}))+" "+o((n.fromNow||t&&t.fromNow||r).call(i,null!=(l=null!=(l=null!=t?t.story:t)?l.lastPublishedPart:l)?l.createDate:l,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+"\n"},13:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.story:t)?l.draft:l,{name:"unless",hash:{},fn:e.program(14,s,0),inverse:e.noop,data:s}))?l:""},14:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'\n        <div id="share-tools" class="hidden-xs hidden-sm">\n'+(null!=(l=n.each.call(i,null!=t?t.socialShareVisible:t,{name:"each",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:"")+'          <div class="button-group relative inline-block">\n            <button class="btn btn-no-background dropdown-toggle"\n                    data-toggle="dropdown">'+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(i,"fa-more",24,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n            <div class="triangle"></div>\n            <ul class="dropdown-menu dropdown-menu-right">\n'+(null!=(l=n.each.call(i,null!=t?t.socialShareHidden:t,{name:"each",hash:{},fn:e.program(18,s,0),inverse:e.noop,data:s}))?l:"")+"            </ul>\n          </div>\n        </div>\n      "},15:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'          <a class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,24,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n          </a>\n"},16:function(e,t,n,a,s){return' social-share" rel="nofollow" target="_blank'},18:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'              <li><a class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,20,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:o)?i.call(r,{name:"label",hash:{},data:s}):i)+"\n              </a></li>\n"},20:function(e,t,n,a,s){var l;return e.escapeExpression((n.formatStoryUrl||t&&t.formatStoryUrl||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?t.story:t)?l.firstPart:l)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))},22:function(e,t,n,a,s){var l;return e.escapeExpression((n.formatStoryUrl||t&&t.formatStoryUrl||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=(l=null!=t?t.story:t)?l.parts:l)?l[0]:l)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))},24:function(e,t,n,a,s){return"                            "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Free Preview",{name:"trans",hash:{},data:s}))+"\n"},26:function(e,t,n,a,s){return"                            "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Read",{name:"trans",hash:{},data:s}))+"\n"},28:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.story:t)?l.draft:l,{name:"unless",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:""},29:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u='\n                    <div class="button-group relative inline-block">\n                        <button class="btn btn-orange btn-sm btn-left-align btn-right-align btn-story-lists"\n                                data-story-id="'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.story:t)?l.id:l,t))+'">\n                                '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-plus",9,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n                        </button>\n";return i=null!=(i=n.story||(null!=t?t.story:t))?i:c,r={name:"story",hash:{},fn:e.program(30,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.story||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(u+=l),u+"                    </div>\n                  "},30:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.components.add_to_library_dropdown"],t,{name:"core.components.add_to_library_dropdown",data:s,indent:"                          ",helpers:n,partials:a,decorators:e.decorators}))?l:""},32:function(e,t,n,a,s){var l;return'                    <div id="admin-panel" class="button-group relative inline-block">\n                        <button class="btn btn-red btn-sm dropdown-toggle on-admin-dropdown">'+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-lock",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n                        <div class="triangle"></div>\n                    </div>\n'},34:function(e,t,n,a,s){var l;return'                  <h2 class="description"><pre>'+(null!=(l=(n.linkifyDesc||t&&t.linkifyDesc||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.story:t)?l.description:l,{name:"linkifyDesc",hash:{},data:s}))?l:"")+"</pre></h2>\n"},36:function(e,t,n,a,s){var l;return'                  <h2 class="description"><pre>'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.story:t)?l.description:l,t))+"</pre></h2>\n"},38:function(e,t,n,a,s){return'class="active"'},40:function(e,t,n,a,s){var l;return'                      <div class="story-parts">\n'+(null!=(l=e.invokePartial(a["core.story_landing.story_parts"],t,{name:"core.story_landing.story_parts",data:s,indent:"                        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                      </div>\n"},42:function(e,t,n,a,s){var l;return'            <div id="authentication-panel" class="panel">\n                <div class="signup-modal">\n'+(null!=(l=e.invokePartial(a["core.signup_prompt"],t,{name:"core.signup_prompt",data:s,indent:"                  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                </div>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'<header class="background background-lg" style="background-image: url('+o((n.resizeCoverAsBackground||t&&t.resizeCoverAsBackground||r).call(i,null!=(l=null!=t?t.story:t)?l.cover:l,1920,{name:"resizeCoverAsBackground",hash:{},data:s}))+');">\n    <div class="container">\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.story:t)?l.isPaywalled:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'        <div class="cover cover-lg"><img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=(l=null!=t?t.story:t)?l.cover:l,180,{name:"resizeCover",hash:{},data:s}))+'" height="281" width="180" alt="'+o(c(null!=(l=null!=t?t.story:t)?l.title:l,t))+'"></div>\n\n        <h1>'+o(c(null!=(l=null!=t?t.story:t)?l.title:l,t))+"\n            "+(null!=(l=n.if.call(i,null!=(l=null!=t?t.story:t)?l.deleted:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n            "+(null!=(l=n.if.call(i,null!=(l=null!=t?t.story:t)?l.draft:l,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'</h1>\n\n        <div class="meta">\n            <span data-toggle="tooltip" data-placement="bottom" title="'+o((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Read","%s Reads",null!=(l=null!=t?t.story:t)?l.readCount:l,{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||r).call(i,null!=(l=null!=t?t.story:t)?l.readCount:l,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'">\n              '+o((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Read","%s Reads",null!=(l=null!=t?t.story:t)?l.readCount:l,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||r).call(i,null!=(l=null!=t?t.story:t)?l.readCount:l,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'</span>\n            <span data-toggle="tooltip" data-placement="bottom" title="'+o((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Vote","%s Votes",null!=(l=null!=t?t.story:t)?l.voteCount:l,{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||r).call(i,null!=(l=null!=t?t.story:t)?l.voteCount:l,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'" >\n              '+o((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Vote","%s Votes",null!=(l=null!=t?t.story:t)?l.voteCount:l,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||r).call(i,null!=(l=null!=t?t.story:t)?l.voteCount:l,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+"</span>\n            <span>"+o((n.trans||t&&t.trans||r).call(i,"%s Part Story",null!=(l=null!=t?t.story:t)?l.numParts:l,{name:"trans",hash:{},data:s}))+'</span>\n        </div>\n\n        <div class="promotion-description-story-details">\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.story:t)?l.promoted:l,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'        </div>\n\n        <div class="author-info clearfix">\n            <a href="/user/'+o(c(null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.username:l,t))+'" class="avatar avatar-md pull-left send-author-event on-navigate">\n              '+o((n.connectAvatar||t&&t.connectAvatar||r).call(i,null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.avatar:l,null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.name:l,48,{name:"connectAvatar",hash:{},data:s}))+"\n            </a>\n            <strong>"+o((n.trans||t&&t.trans||r).call(i,"By",{name:"trans",hash:{},data:s}))+' <a class="send-author-event on-navigate" href="/user/'+o(c(null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.username:l,t))+'">'+o(c(null!=(l=null!=(l=null!=t?t.story:t)?l.user:l)?l.username:l,t))+'</a></strong>\n            <small data-toggle="tooltip" data-placement="top"\n                   title="'+o((n.trans||t&&t.trans||r).call(i,"First published:",{name:"trans",hash:{},data:s}))+" "+o((n.fromNow||t&&t.fromNow||r).call(i,null!=(l=null!=(l=null!=t?t.story:t)?l.firstPublishedPart:l)?l.createDate:l,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+'">\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.story:t)?l.completed:l,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.program(11,s,0),data:s}))?l:"")+"            </small>\n        </div>\n\n      "+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.story:t)?l.deleted:l,{name:"unless",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+'\n    </div>\n</header>\n\n<div class="container">\n    <div class="row">\n\n        <main class="col-sm-12 col-md-8">\n            <div class="panel">\n                <div class="story-controls" role="menu">\n                    <a href="'+(null!=(l=n.if.call(i,null!=(l=null!=(l=null!=t?t.story:t)?l.firstPart:l)?l.url:l,{name:"if",hash:{},fn:e.program(20,s,0),inverse:e.program(22,s,0),data:s}))?l:"")+'"}\n                       class="btn btn-orange btn-sm btn-inline on-story-navigate">\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.story:t)?l.isPaidPreview:l,{name:"if",hash:{},fn:e.program(24,s,0),inverse:e.program(26,s,0),data:s}))?l:"")+"                    </a>\n                  "+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.story:t)?l.deleted:l,{name:"unless",hash:{},fn:e.program(28,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.showAdminPanel:t,{name:"if",hash:{},fn:e.program(32,s,0),inverse:e.noop,data:s}))?l:"")+"                </div>\n\n"+(null!=(l=(n.ifequal||t&&t.ifequal||r).call(i,null!=(l=null!=t?t.story:t)?l.id:l,"18024139",{name:"ifequal",hash:{},fn:e.program(34,s,0),inverse:e.program(36,s,0),data:s}))?l:"")+"\n                "+(null!=(l=(n.reactComponent||t&&t.reactComponent||r).call(i,"TagGrid","storyTags",{name:"reactComponent",hash:{},data:s}))?l:"")+'\n\n                <section id="story-tabs">\n                  <header class="tab-menu sub-navigation clearfix">\n                    <nav>\n                      <ul>\n\n                        <li data-section="parts" '+(null!=(l=n.if.call(i,null!=(l=null!=t?t.active:t)?l.parts:l,{name:"if",hash:{},fn:e.program(38,s,0),inverse:e.noop,data:s}))?l:"")+'>\n                      <a href="#" class="on-tab-nav">'+o((n.trans||t&&t.trans||r).call(i,"Table of Contents",{name:"trans",hash:{},data:s}))+'</a>\n                      </li>\n                        <li data-section="details" class="hidden-md hidden-lg">\n                      <a href="#" class="on-tab-nav">'+o((n.trans||t&&t.trans||r).call(i,"Details",{name:"trans",hash:{},data:s}))+'</a>\n                      </li>\n                      </ul>\n                    </nav>\n                  </header>\n                  <div id="tab-content" class="clearfix">\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.active:t)?l.parts:l,{name:"if",hash:{},fn:e.program(40,s,0),inverse:e.noop,data:s}))?l:"")+'                  </div>\n               </section>\n            </div>\n        </main>\n\n        <aside class="col-sm-12 col-md-4">\n'+(null!=(l=n.if.call(i,null!=t?t.isLogged:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(42,s,0),data:s}))?l:"")+"\n            "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,storyGroup:null!=t?t.story:t,experience:"storylanding",parentClass:"ad-unit panel panel-basic",unit:"storylanding_top"},data:s}))?l:"")+'\n            <div id="story-details" class="panel hidden-xs hidden-sm">\n              <div class="story-details">\n'+(null!=(l=e.invokePartial(a["core.story_landing.story_details"],t,{name:"core.story_landing.story_details",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'              </div>\n            </div>\n\n            <div class="panel promoted-story-panel hidden">\n                <div class="panel-heading">\n                    <h4 class="panel-title">'+o((n.trans||t&&t.trans||r).call(i,"Promoted stories",{name:"trans",hash:{},data:s}))+'</h4>\n                </div>\n                <div id="similar-stories" class="promoted-stories panel-body"></div>\n            </div>\n\n            <div class="panel">\n                <div class="panel-heading">\n                    <h4 class="panel-title">'+o((n.trans||t&&t.trans||r).call(i,"You'll also like",{name:"trans",hash:{},data:s}))+'</h4>\n                </div>\n                <div id="similar-stories" class="similar-stories panel-body">\n                    <div class="stories">'+(null!=(l=e.invokePartial(a["core.collection_views.stories_similar"],t,{name:"core.collection_views.stories_similar",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n                </div>\n            </div>\n\n\n        </aside>\n\n    </div>\n    "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,storyGroup:null!=t?t.story:t,experience:"storylanding",parentClass:"ad-unit",unit:"storylanding_bottom"},data:s}))?l:"")+"\n</div>\n"+(null!=(l=(n.reactComponent||t&&t.reactComponent||r).call(i,"WPModal","modal-landing",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(432));!function(e,t,n,s,l){l.add("StoryRanking",l.views.Base.extend({id:"story-ranking",template:a.default,events:{"tap .on-rank-navigate":"onRankNavigate","click .on-rank-navigate":"stopEvent"},className:function(){var e="container";return l.get("device").is.mobile&&(e+=" mobile"),e},initialize:function(){var e=this.model.get("tagRankings").map(function(e){return e.name+"|"+e.rank}).join("|");window.te.push("event","tag_ranking",null,null,"view",{storyid:this.model.get("id"),tags:e})},render:function(){var t=e.cloneDeep(this.model.get("tagRankings")),a=t[0];t.shift();var s=t,i={storyTitle:this.model.get("title"),storyUrl:this.model.get("url"),topRank:a,otherRankings:s,isDesktop:l.get("device").isDesktop(),testGroups:n.testGroups};return this.$el.html(this.template(i)),this},onRankNavigate:function(e){var n=t(e.currentTarget);window.te.push("event","tag_ranking","ranking",null,"click",{storyid:this.model.get("id"),tag:n.data("name"),rank:n.data("rank")}),this.onNavigate(e)}}))}(_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-left",22,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},3:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-left",19,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},5:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<ul>\n  <li class="first">\n      <a href="/stories/'+c((n.urlEncodeWithSpace||t&&t.urlEncodeWithSpace||o).call(r,null!=t?t.name:t,{name:"urlEncodeWithSpace",hash:{},data:s}))+'/hot" class="on-rank-navigate" data-rank="'+c("function"==typeof(i=null!=(i=n.rank||(null!=t?t.rank:t))?i:o)?i.call(r,{name:"rank",hash:{},data:s}):i)+'" data-name="'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'">\n      <span class="rank">\n        <span class="rank-number-symbol">#</span>\n        <span class="rank-number">'+c("function"==typeof(i=null!=(i=n.rank||(null!=t?t.rank:t))?i:o)?i.call(r,{name:"rank",hash:{},data:s}):i)+'</span>\n      </span>\n\n      <span class="rank-tag">'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'</span>\n      <span class="rank-total">\n        '+c((n.trans||t&&t.trans||o).call(r,"out of %s stories",(n.count||t&&t.count||o).call(r,null!=t?t.total:t,{name:"count",hash:{},data:s}),{name:"trans",hash:{},data:s}))+'\n      </span>\n\n      <span class="right-side">\n        '+c((n.connectImage||t&&t.connectImage||o).call(r,"/shared/ranking-medal.png","ranking",{name:"connectImage",hash:{width:"22",height:"27",klass:"tag-ranking-medal"},data:s}))+"\n        "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-right",14,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"\n      </span>\n    </a>\n  </li>\n</ul>\n"},7:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'  <li>\n      <a href="/stories/'+c((n.urlEncodeWithSpace||t&&t.urlEncodeWithSpace||o).call(r,null!=t?t.name:t,{name:"urlEncodeWithSpace",hash:{},data:s}))+'/hot" class="on-rank-navigate" data-rank="'+c("function"==typeof(i=null!=(i=n.rank||(null!=t?t.rank:t))?i:o)?i.call(r,{name:"rank",hash:{},data:s}):i)+'" data-name="'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'">\n      <span class="rank">\n        <span class="rank-number-symbol">#</span>\n        <span class="rank-number">'+c("function"==typeof(i=null!=(i=n.rank||(null!=t?t.rank:t))?i:o)?i.call(r,{name:"rank",hash:{},data:s}):i)+'</span>\n      </span>\n\n      <span class="rank-tag">'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'</span>\n\n      <span class="right-side">\n        <span class="rank-total">\n          '+c((n.trans||t&&t.trans||o).call(r,"out of %s stories",(n.count||t&&t.count||o).call(r,null!=t?t.total:t,{name:"count",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n        </span>\n\n        "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-right",14,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"\n      </span>\n    </a>\n  </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.storyUrl:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-navigate back-to-story">\n'+(null!=(l=n.if.call(r,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"</a>\n<h1>"+c((n.trans||t&&t.trans||o).call(r,"Story Rankings",{name:"trans",hash:{},data:s}))+"</h1>\n\n<h2>"+c("function"==typeof(i=null!=(i=n.storyTitle||(null!=t?t.storyTitle:t))?i:o)?i.call(r,{name:"storyTitle",hash:{},data:s}):i)+"</h2>\n\n<h3>"+c((n.trans||t&&t.trans||o).call(r,"Most Impressive Ranking",{name:"trans",hash:{},data:s}))+"</h3>\n"+(null!=(l=n.with.call(r,null!=t?t.topRank:t,{name:"with",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n<h3>"+c((n.trans||t&&t.trans||o).call(r,"Other Rankings",{name:"trans",hash:{},data:s}))+"</h3>\n<ul>\n"+(null!=(l=n.each.call(r,null!=t?t.otherRankings:t,{name:"each",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"</ul>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(434));!function(e,t,n,s,l){s.add("BaseStoryReadingFunbar",s.views.Base.extend({template:a.default,id:"funbar",className:"clearfix",initialize:function(){this.listenTo(s,"app:story:vote",this.onUpdateVote)},render:function(){return this},onUpdateVote:function(e){e&&e.storyId===this.model.get("id")&&(e.voted?this.voteSelected():this.voteDeselected())},voteSelected:function(){var e=t.utils.iconify("fa-vote",16,"wp-base-1"),n=t.utils.trans("Voted");this.$("#funbar-controls .on-vote .fa-vote").replaceWith(e),this.$("#funbar-controls .on-vote .story-vote").text(n)},voteDeselected:function(){var e=t.utils.iconify("fa-vote",16,"wp-neutral-3"),n=t.utils.trans("Vote");this.$("#funbar-controls .on-vote .fa-vote").replaceWith(e),this.$("#funbar-controls .on-vote .story-vote").text(n)}})),s.mixin(s.views.BaseStoryReadingFunbar,"VoteManagement")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return' data-toggle="dropdown" '},3:function(e,t,n,a,s){return' data-toggle="modal" data-target="#table-of-contents" '},5:function(e,t,n,a,s){var l;return'data-toggle="tooltip" data-placement="bottom" title="'+e.escapeExpression((n.sanitize||t&&t.sanitize||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.group:t)?l.title:l,{name:"sanitize",hash:{},data:s}))+'"'},7:function(e,t,n,a,s){return'<span class="deleted-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted",{name:"trans",hash:{},data:s}))+")</span>"},9:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["desktop.story_reading.table_of_contents"],t,{name:"desktop.story_reading.table_of_contents",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:""},11:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["mobile.story_reading.table_of_contents"],t,{name:"mobile.story_reading.table_of_contents",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:""},13:function(e,t,n,a,s){return'  <div class="preview-alert">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Previewing %s",null!=t?t.title:t,{name:"trans",hash:{},data:s}))+"</div>\n"},15:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:""},16:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.group:t)?l.isPaywalled:l,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:""},17:function(e,t,n,a,s){var l;return'                <div class="button-group relative inline-block">\n                    <div class="wallet-container">\n                        '+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"Wallet",null!=(l=null!=t?t.group:t)?l.id:l,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n                    </div>\n                </div>\n"},19:function(e,t,n,a,s){var l;return'    <div id="admin-panel" class="button-group relative inline-block hidden-mobile">\n        <button class="btn btn-link dropdown-toggle on-admin-dropdown">\n            '+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-lock",16,"wp-base-1-dark",{name:"iconify",hash:{},data:s}))?l:"")+'\n        </button>\n        <div class="triangle"></div>\n    </div>\n'},21:function(e,t,n,a,s){var l;return'    <div class="button-group relative inline-block hidden-mobile">\n\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isPreview:t,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.program(24,s,0),data:s}))?l:"")+"\n    </div>\n"},22:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <button class="btn btn-orange on-publish">'+c((n.trans||t&&t.trans||o).call(r,"Publish",{name:"trans",hash:{},data:s}))+'</button>\n        <a class="on-navigate btn btn-grey on-write" href="/myworks/'+c(e.lambda(null!=(l=null!=t?t.group:t)?l.id:l,t))+"/write/"+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">'+c((n.trans||t&&t.trans||o).call(r,"Back to writing",{name:"trans",hash:{},data:s}))+"</a>\n"},24:function(e,t,n,a,s){var l,i,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'        <a class="btn btn-link" href="/myworks/'+r(e.lambda(null!=(l=null!=t?t.group:t)?l.id:l,t))+"/write/"+r("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:c)?i.call(o,{name:"id",hash:{},data:s}):i)+'">\n          '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-edit",16,"wp-base-1-dark",{name:"iconify",hash:{},data:s}))?l:"")+'\n          <span class="hidden-mobile hidden-xs hidden-sm story-edit">'+r((n.trans||t&&t.trans||c).call(o,"Edit part",{name:"trans",hash:{},data:s}))+"</span>\n        </a>\n"},26:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.group:t)?l.draft:l,{name:"unless",hash:{},fn:e.program(27,s,0),inverse:e.noop,data:s}))?l:""},27:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.isPreview:t,{name:"unless",hash:{},fn:e.program(28,s,0),inverse:e.noop,data:s}))?l:""},28:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u='\n    <div class="button-group relative inline-block">\n        <button class="btn btn-story-lists btn-sm btn-orange" data-story-id="'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.group:t)?l.id:l,t))+'">\n            '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-plus",10,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n        </button>\n";return i=null!=(i=n.group||(null!=t?t.group:t))?i:c,r={name:"group",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.group||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(u+=l),u+"    </div>\n    "},29:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.components.add_to_library_dropdown"],t,{name:"core.components.add_to_library_dropdown",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:""},31:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.draft:t,{name:"unless",hash:{},fn:e.program(32,s,0),inverse:e.noop,data:s}))?l:""},32:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'\n    <div class="button-group relative inline-block">\n        <button class="btn btn-link on-vote" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n'+(null!=(l=n.if.call(r,null!=t?t.voted:t,{name:"if",hash:{},fn:e.program(33,s,0),inverse:e.program(35,s,0),data:s}))?l:"")+'        </button>\n        <div id="vote-tool-tip" data-toggle="tooltip" data-placement="bottom" data-original-title= "'+c((n.trans||t&&t.trans||o).call(r,"There was an error registering your vote",{name:"trans",hash:{},data:s}))+'"></div>\n    </div>\n    '},33:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"            "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+'\n            <span class="hidden-mobile hidden-xs hidden-sm story-vote">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Voted",{name:"trans",hash:{},data:s}))+"</span>\n"},35:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"            "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n            <span class="hidden-mobile hidden-xs hidden-sm story-vote">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Vote",{name:"trans",hash:{},data:s}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div id="funbar-story" class="dropdown">\n  <button id="funbar-part-details" type="button" class="btn btn-toc dropdown-toggle"\n          '+(null!=(l=n.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'>\n      <span class="toc-full">\n        <span class="cover cover-xxs" '+(null!=(l=n.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'>\n          <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=(l=null!=t?t.group:t)?l.cover:l,27,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.sanitize||t&&t.sanitize||r).call(i,null!=(l=null!=t?t.group:t)?l.title:l,{name:"sanitize",hash:{},data:s}))+'">\n        </span>\n\n        <span class="info">\n          <h1 class="title h5">\n            '+o(e.lambda(null!=(l=null!=t?t.group:t)?l.title:l,t))+"\n            "+(null!=(l=n.if.call(i,null!=t?t.deleted:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'\n          </h1>\n          <span class="author h6">'+o((n.trans||t&&t.trans||r).call(i,"by %s",null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,{name:"trans",hash:{},data:s}))+"</span>\n        </span>\n\n        "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-down",20,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n      </span>\n  </button>\n\n"+(null!=(l=n.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.program(11,s,0),data:s}))?l:"")+"  \n</div>\n\n"+(null!=(l=n.if.call(i,null!=t?t.isPreview:t,{name:"if",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+'\n<div id="funbar-controls">\n'+(null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||r).call(i,"PAID_CONTENT",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.showAdminPanel:t,{name:"if",hash:{},fn:e.program(19,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.isAuthor:t,{name:"if",hash:{},fn:e.program(21,s,0),inverse:e.noop,data:s}))?l:"")+"\n    "+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.group:t)?l.deleted:l,{name:"unless",hash:{},fn:e.program(26,s,0),inverse:e.noop,data:s}))?l:"")+"\n    "+(null!=(l=n.unless.call(i,null!=t?t.deleted:t,{name:"unless",hash:{},fn:e.program(31,s,0),inverse:e.noop,data:s}))?l:"")+'\n\n</div>\n\n<div id="funbar-reading-progress">\n  <div id="progressbar"></div>\n  <div id="progresstooltip" data-toggle="tooltip" data-placement=\'bottom\'></div>\n</div>\n'},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(13)),s=l(n(436));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i){l.add("PostToProfileModal",l.views.Base.extend({template:s.default,className:"post-to-profile-modal",initialize:function(e){Handlebars.registerPartial("core.shared.beautify_url",a.default),this.groupUrl=n.siteRoot+"/story/"+this.model.toJSON().group.id,this.newMessageView=new l.views.NewMessageNew({to:e.target,placeholder:n.utils.trans("Write a message..."),canBroadcast:!0,autoMention:e.target,additionalText:"\n\n"+this.groupUrl}),this.listenTo(this.newMessageView,"message:new",this.onSuccess)},render:function(){var e=t.extend(this.model.toJSON().group,{username:this.options.target,isMobile:l.get("device").is.mobile,url:this.groupUrl});return this.$el.html(this.template(e)),this.$(".post-comment").empty().append(this.newMessageView.render().$el),this},onSuccess:function(){this.$(".post-comment").remove(),this.$(".success-message").removeClass("hidden"),n.utils.pushEvent({category:"reading",action:"share:post-to-profile",label:this.model.get("id")})}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<a class="on-navigate" href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'/conversations">'+o((n.trans||t&&t.trans||r).call(i,"View on your profile",{name:"trans",hash:{},data:s}))+"</a>\n        "},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<a class="on-navigate" href="/user/'+o("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:r)?l.call(i,{name:"username",hash:{},data:s}):l)+'/conversations">'+o((n.trans||t&&t.trans||r).call(i,"View on your profile",{name:"trans",hash:{},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="modal-dialog" id="generic-modal">\n  <div class="modal-content">\n    <header class="modal-header">\n      <h2 class="modal-title text-center">'+o((n.trans||t&&t.trans||r).call(i,"Post to Your Profile",{name:"trans",hash:{},data:s}))+'</h1>\n      <div class="close" data-dismiss="modal">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      </div>\n    </header>\n    <div class="modal-body clearfix">\n      <div class="post-comment"></div>\n\n      <div class="success-message text-center hidden">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-check",12,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n        "+o((n.trans||t&&t.trans||r).call(i,"Your message has been posted!",{name:"trans",hash:{},data:s}))+"\n\n        "+(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'      </div>\n\n      <div class="feed-item-new panel">\n'+(null!=(l=e.invokePartial(a["core.shared.beautify_url"],t,{name:"core.shared.beautify_url",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"      </div>\n    </div>\n  </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(438));!function(e,t,n,s,l){s.add("BottomBanner",l.View.extend({template:a.default,className:"bottom-banner-container",events:{"tap .bottom-login":"onAuthModal","click .bottom-login":"stopEvent","tap .bottom-signup":"onAuthModal","click .bottom-signup":"stopEvent","tap .dismiss":"onDismiss","click .dismiss":"stopEvent","tap .on-add-story":"onAddToLibrary","click .on-add-story":"stopEvent"},initialize:function(n){n=n||{},this.image=n.image,this.title=n.bannerTitle,this.showBottomBanner=n.showBottomBanner,this.dismissibleBanner=!t.utils.getCookie("dB"),this.fatBanner=n.fatBanner,this.listenTo(s,"app:story:vote",this.onUpdateVote),this.view=n.view||{},this.openAuthModalOnLoad="#signin-popup"===e.location.hash},render:function(){var n={},a={},l=s.get("device").is.tablet;if(n.showBottomBanner=this.showBottomBanner,n.bottomBannerImage=this.image,n.bottomBannerTitle=this.bannerTitle,n.dismissibleBanner=this.dismissibleBanner,n.fatBanner=this.fatBanner,n.isiOS=s.get("device").is.ios,n.isAndroid=s.get("device").is.android,"/presents"===e.location.pathname&&(n.showBottomBanner=!1),this.$el.html(this.template(n)),this.deepLink){a.source=l?"tabletweb":"mobileweb",a.page=this.deepLinkPage,a.content="mobileweb",a.medium=l?"stickybar_tablet":"stickybar_mobile";var i=t.utils.generateBranchLink(t.utils.getDesktopUrl(),this.deepLink,a),r=this;Promise.resolve(i).then(function(e){var t=e;r.$(".open-app a").attr("href",t.url),r.$(".dismissible a").attr("href",t.url),r.$(".dismissible").addClass("show"),r.$(".nondismissible").addClass("show"),r.$(".bottom-banner a").attr("href",t.url),r.dismissibleBanner&&r.$(".branding").addClass("hidden")})}return _.defer(this.afterRender.bind(this)),this},afterRender:function(){this.openAuthModalOnLoad&&this.onAuthModal()},onAuthModal:function(e){var n=void 0!==e?e.currentTarget.getAttribute("data-form"):"login",a="signup"===n?t.utils.trans("Join Wattpad"):t.utils.trans("Sign in to Wattpad"),l=new s.views.SignUpPrompt({model:new s.models.Authsignup,title:a,subtitle:t.utils.trans("Be part of a global community of readers and writers, all connected through the power of story."),formType:"navbar_modal",form:n,skipOnboarding:!0});$("#generic-modal .modal-body").html(l.render().$el),$("#generic-modal").modal("show")},onAddToLibrary:function(e){t.utils.currentUser().authenticated()||this.onAuthModal(e)},onDismiss:function(e){n.stopEvent(e),this.$(".dismissible").slideUp("50"),this.$(".dismissible").removeClass("show"),this.$(".branding").removeClass("hidden"),t.utils.setCookie("dB",1,0)},setDeepLink:function(e,t){this.deepLink=e.replace("wattpad://",""),this.deepLinkPage=t,this.render()},onUpdateVote:function(e){e&&e.storyId===this.model.get("id")&&(e.voted?this.voteSelected():this.voteDeselected())},voteSelected:function(){var e=t.utils.iconify("fa-vote",16,"wp-base-1"),n=t.utils.trans("Voted");this.$("#funbar-controls .on-vote .fa-vote").replaceWith(e),this.$("#funbar-controls .on-vote .story-vote").text(n)},voteDeselected:function(){var e=t.utils.iconify("fa-vote",16,"wp-neutral-3"),n=t.utils.trans("Vote");this.$("#funbar-controls .on-vote .fa-vote").replaceWith(e),this.$("#funbar-controls .on-vote .story-vote").text(n)},getSharingItems:function(e){var t;e.group.category&&(t=s.get("categories").get(e.group.category).get("name"));var n={group:{id:e.group.id,title:e.group.title,cover:e.group.cover,category:t,description:e.group.description,tags:_.map(e.group.tags,function(e){return{name:e}}).concat([{name:t}]),completed:e.group.completed},part:{id:e.id,title:e.title,url:e.url},user:{twitter:e.group.user.twitter}};return this.buildSocialShareLinksForPart(n)}})),s.mixin(s.views.BottomBanner,"VoteManagement","LibraryManagement","SocialSharing")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.dismissibleBanner:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.fatBanner:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:""},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <div class="bottom-banner nondismissible">\n        <div class="row">\n          <div class="col-xs-12 col-sm-4">\n            <span class="wattpad-logo"></span>\n            <span class="logo-text">'+o((n.trans||t&&t.trans||r).call(i,"Wattpad App - Read, Write, Connect",{name:"trans",hash:{},data:s}))+'</span>\n          </div>\n        </div>\n        <div class="row">\n          <a class="open-app" href="'+o("function"==typeof(l=null!=(l=n.branchLink||(null!=t?t.branchLink:t))?l:r)?l.call(i,{name:"branchLink",hash:{},data:s}):l)+'" data-gtm="Download|bottom_banner|open_app">\n            <span class="open-app-text">'+o((n.trans||t&&t.trans||r).call(i,"Start Reading",{name:"trans",hash:{},data:s}))+'</span>\n          </a>\n        </div>\n        <div class="row login">\n          <a class="on-navigate bottom-login login-text" data-form="login">'+o((n.trans||t&&t.trans||r).call(i,"Log in with Browser",{name:"trans",hash:{},data:s}))+"</a>\n        </div>\n      </div>\n"},5:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <div class="bottom-banner dismissible">\n        <div class="bottom-content"><img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=t?t.bottomBannerImage:t,27,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o((n.sanitize||t&&t.sanitize||r).call(i,null!=t?t.bottomBannerTitle:t,{name:"sanitize",hash:{},data:s}))+'"><span class="bottom-message">'+o((n.trans||t&&t.trans||r).call(i,"Where stories live. Discover now",{name:"trans",hash:{},data:s}))+'</span></div>\n        <div class="bottom-controls">\n          <button class="btn bottom-login" data-form="login">'+o((n.trans||t&&t.trans||r).call(i,"Sign in",{name:"trans",hash:{},data:s}))+'</button><button class="btn bottom-signup" data-form="signup">'+o((n.trans||t&&t.trans||r).call(i,"Sign Up",{name:"trans",hash:{},data:s}))+'</button>\n        </div>\n        <div class="dismiss">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</div>\n      </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.showBottomBanner:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(21));!function(e,t,n,s,l){s.add("PictureViewer",s.views.Base.extend({events:{"tap .on-report-image":"onReportImage","tap .on-dismiss":"onDismiss","click .on-dismiss":"stopEvent","click .on-report-image":"stopEvent","tap .vertical-align-helper":"onTapPicture","click .vertical-align-helper":"stopEvent"},template:a.default,id:"picture-viewer",initialize:function(t){var a;if(t=t||{},this.contents="",this.mediaLink="",this.reportLink="#",t.contents&&(this.contents=t.contents,this.mediaLink=$(this.contents).attr("src"),a=$(t.contents).attr("src")),t.paragraph&&(this.reportLink=n.sprintf("http://www.wattpad.com/help/content/1?story_link=%s&media_link=%s",[e.encodeURIComponent(e.location.href),this.mediaLink])),this.mediaShare=t.mediaShare||[],this.mediaShare[1]){var s=this.mediaShare[1].href;s=this.preparePinterestUrl(a,s),this.mediaShare[1].href=s}this.model=t.partModel||{}},render:function(){var e=s.get("device").isTouchDevice();return this.$el.html(this.template({contents:this.contents,reportLink:this.reportLink,mediaShare:this.mediaShare,isTouchDevice:e})),this},onReportImage:function(e){return n.openPopup($(e.currentTarget).attr("href"),n.trans("Report Story"),700,400)},onDismiss:function(){$("#picture-viewer").one("hidden.bs.modal",function(){$(".modal-backdrop").removeClass("black")}),$("#picture-viewer").modal("hide")},onSharePinterest:function(t){var n=$(t.currentTarget).attr("href");e.open(n)},onTapPicture:function(e){n.stopEvent(e),s.get("device").isTouchDevice()&&$(".icon-wrapper").toggleClass("hidden")}})),s.mixin(s.views.PictureViewer,"MediaSharing")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(441));!function(e,t,n,s,l){s.add("StoryReadingFunbar",s.views.BaseStoryReadingFunbar.extend({isDesktop:!0,events:{"mouseenter #funbar-reading-progress":"openProgressTooltip","mouseleave #funbar-reading-progress":"closeProgressTooltip","tap .on-publish":"onPublish","click .on-publish":"stopEvent"},initialize:function(){Handlebars.registerPartial("desktop.story_reading.table_of_contents",a.default),s.views.BaseStoryReadingFunbar.prototype.initialize.apply(this,arguments)},render:function(){var e=this.model.toJSON(),a=this;this.listenTo(this.model,"reading-progress",this.updateProgress),this.listenTo(this.model,"change:pageNumber",this.pageChanged),e.showAdminPanel=!1,e.isAdmin=!1,e.isDesktop=this.isDesktop,t.utils.currentUser().get("isSysAdmin")&&(e.showAdminPanel=!0,e.isAdmin=!0),t.utils.currentUser().get("ambassador")&&(e.showAdminPanel=!0),t.utils.currentUser().get("username")===e.group.user.username&&(e.isAuthor=!0,e.group.url="/myworks/"+e.group.id+"-"+n.slugify(e.group.title)),e.isPreview=!!this.options&&this.options.isPreview;var s=e.blockedPart||{};return this.model.get("group").isPaywalled&&(e.onWalletClick=n.showBuyCoinsModal.bind(n,"reading",e.group.id,s.id)),this.$el.html(this.template(e)),this.initAdminPanel(this.model,"#admin-panel"),_.defer(function(){a.$("[data-toggle=tooltip]").tooltip()}),this},stopEvent:function(e){n.stopEvent(e)},onAddToListsReady:function(e,t){e.parent(".button-group").addClass("open"),e.removeClass("on-lists-add-clicked"),e.addClass("on-dismiss-lists")},onDismissLists:function(e){var t=$(e.currentTarget).data("story-id"),n=this.$(this.addButton+"[data-story-id='"+t+"']");n.parent(".button-group").removeClass("open"),n.removeClass("on-dismiss-lists"),n.addClass("on-lists-add-clicked")},openProgressTooltip:function(e){this.$("#progresstooltip").tooltip("show")},closeProgressTooltip:function(e){this.$("#progresstooltip").tooltip("hide")},_timeToComplete:function(e,t){var n=e*(1-t)/250;return moment.duration(n,"minutes").humanize()},updateProgress:function(e){100*e>.5?this.$("#progressbar").width(100*e+"%"):this.$("#progressbar").removeAttr("style");var n=this.model.get("wordCount");if(n&&1!==e){var a=t.utils.trans("%s left",this._timeToComplete(n,e));this.$("#progresstooltip").attr("data-original-title",a)}else this.$("#progresstooltip").removeAttr("data-original-title")},pageChanged:function(){this.openProgressTooltip(),_.delay(_.bind(this.closeProgressTooltip,this),1e3)},showPostPublishModal:function(){var e=new s.views.PostPublishModal({model:this.model,links:this.model.get("socialShareVisible")||s.currentView.socialLinks});$("#post-publish-modal").empty().append(e.render().$el),e.showModal()},onPublish:function(){var e=this,t=[],a=this.model.get("group");a.textids=_.pluck(this.model.get("group").parts,"id").join(","),this.publishModel=new s.models.StoryPartCreateModel({id:this.model.get("id"),authorid:n.currentUser().get("id"),title:this.model.get("title"),groupid:this.model.get("group").id,language:this.model.get("language"),copyright:this.model.get("copyright"),category1:this.model.get("group").categories[0],textUrl:this.model.get("text_url"),url:this.model.get("url")});var l;this.storyLabelsModel=new s.models.StoryLabelsModel({storyId:parseInt(a.id)}),l=Promise.resolve(this.storyLabelsModel.fetch()).catch(function(){}),Promise.all([$.get("/apiv2/storytext?id="+this.model.get("id")+"&output=json"),l]).then(function(l){if(e.publishModel.set("text",l.text),a.category&&""!==a.title&&a.title!==n.trans("Untitled Story")&&""!==a.description&&0!==a.tags.length)Promise.resolve(e.publishModel.publish()).then(function(a){var l=n.currentUser().get("username");void 0===a&&0===t.length||(s.local.clear(e.model.resource()),n.cacheBust(["Works"],[{username:l}]),n.cacheBust(["Works"],[{username:l,published:!0}]),$(".draft-tag").addClass("hidden"),$(".on-publish").addClass("hidden"),$(".on-write").addClass("hidden"),$(".preview-alert").addClass("hidden"),e.showPostPublishModal())});else{var i=new s.views.WorksItemDetails({model:new s.models.StoryCreateModel(a),storyLabelsModel:e.storyLabelsModel||null,isPublish:!0,partModel:e.publishModel,isPreview:!0});$("#generic-modal").find(".modal-content .modal-body").html(i.render().$el),$("#generic-modal").addClass("publish-modal").modal("show")}})}})),s.mixin(s.views.StoryReadingFunbar,"StoryAdminManager")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o,c,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h=e.escapeExpression,p='        <li class="';return o=null!=(o=n.active||(null!=t?t.active:t))?o:d,c={name:"active",hash:{},fn:e.program(2,s,0,l,i),inverse:e.noop,data:s},r="function"==typeof o?o.call(u,c):o,n.active||(r=n.blockHelperMissing.call(t,r,c)),null!=r&&(p+=r),p+'">\n            <a class="on-navigate'+(null!=(r=n.if.call(u,null!=t?t.isBlocked:t,{name:"if",hash:{},fn:e.program(4,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'" href="'+h((n.formatStoryUrl||t&&t.formatStoryUrl||d).call(u,null!=t?t.url:t,{name:"formatStoryUrl",hash:{locals:i[1]},data:s}))+'">\n              <div class="part-title">\n                  '+h(e.lambda(null!=t?t.title:t,t))+"\n                  "+(null!=(r=n.if.call(u,null!=t?t.deleted:t,{name:"if",hash:{},fn:e.program(6,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n                  "+(null!=(r=n.if.call(u,null!=t?t.draft:t,{name:"if",hash:{},fn:e.program(8,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n              </div>\n              "+(null!=(r=n.if.call(u,null!=t?t.isBlocked:t,{name:"if",hash:{},fn:e.program(10,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n            </a>\n        </li>\n"},2:function(e,t,n,a,s){return"active"},4:function(e,t,n,a,s){return" blocked"},6:function(e,t,n,a,s){return'<span class="deleted-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted",{name:"trans",hash:{},data:s}))+")</span>"},8:function(e,t,n,a,s){return'<span class="draft-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Draft",{name:"trans",hash:{},data:s}))+")</span>"},10:function(e,t,n,a,s){var l;return null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-lock",16,"wp-neutral-2","pull-right",{name:"iconify",hash:{},data:s}))?l:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression;return'<div class="dropdown-menu pull-left">\n    <div class="toc-header text-center">\n        <h6><a class="on-navigate" href="'+u((n.formatStoryUrl||t&&t.formatStoryUrl||c).call(o,null!=(r=null!=t?t.group:t)?r.url:r,{name:"formatStoryUrl",hash:{},data:s}))+'">'+u(e.lambda(null!=(r=null!=t?t.group:t)?r.title:r,t))+"</a></h6>\n        <small>"+u((n.trans||t&&t.trans||c).call(o,"Table of contents",{name:"trans",hash:{},data:s}))+'</small>\n    </div>\n\n    <ul class="table-of-contents">\n'+(null!=(r=n.each.call(o,null!=(r=null!=t?t.group:t)?r.parts:r,{name:"each",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"    </ul>\n</div>\n"},useData:!0,useDepths:!0})},function(e,t,n){"use strict";var a=l(n(443)),s=l(n(444));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i){l.add("MediaBanner",i.View.extend({events:{"tap .on-video":"onVideoSelected","click .on-video":"stopEvent","tap .on-prev-media":"onPrevMedia","click .on-next-media":"stopEvent","tap .on-next-media":"onNextMedia","click .on-prev-media":"stopEvent","tap .on-carousel-clicked":"onCarouselClicked","click .on-carousel-clicked":"stopEvent","tap .on-show-media-menu":"onShowMediaMenu","click .on-show-media-menu":"stopEvent","mouseleave .background":"onHideMediaMenu","tap .on-remove-video":"onRemoveVideo","click .on-remove-video":"stopEvent","tap .on-remove-image":"onRemovePhoto","click .on-remove-image":"stopEvent","tap .on-add-image":"onAddPhoto","click .on-add-image":"stopEvent","tap .on-add-video":"onAddVideo","click .on-add-video":"stopEvent","keyup .photo-url-field":"onSubmitPhoto","tap .on-submit-photo":"onSubmitPhoto","click .on-submit-photo":"stopEvent","keyup .video-url-field":"onSubmitVideo","tap .on-submit-video":"onSubmitVideo","click .on-submit-video":"stopEvent","tap .media-fields-underlay":"hideMediaFields","click .media-fields-underlay":"stopEvent","paste .video-url-field":"onSubmitVideo","click .on-okay":"stopEvent","tap .on-okay":"onCloseTooltip"},template:a.default,className:"media-container",bannedImageMessaging:s.default,initialize:function(e){e=e||{},this.media=e.media,this.bgCover=e.bgCover,this.model=e.model||new i.Model,this.isEditable=e.isEditable||!1,this.showTips=e.showTips||!1,this.socialLinks=e.socialLinks||!1,this.hasBannedImage=!1,this.coverTimestamp=e.coverTimestamp||"",this.fileUploadLimits=[{type:"image/jpeg",fileSize:1e7,friendlyName:"JPG",friendlySize:"10mb"},{type:"image/png",fileSize:1e7,friendlyName:"PNG",friendlySize:"10mb"},{type:"image/gif",fileSize:3e6,friendlyName:"GIF",friendlySize:"3mb"}]},render:function(){var a={};a.media=this.media,a.bgCover=this.bgCover,a.isEditable=this.isEditable,a.showTips=this.showTips,a.isDesktop=l.get("device").isDesktop(),a.showCover=!a.isEditable||0!==a.media.length,a.showCarousel=a.media.length>1,_.each(a.media,function(e){a.hasVideo=a.hasVideo||e.video||!1,a.hasPhoto=a.hasPhoto||e.photo||!1}),a.media.length>0&&this.socialLinks&&(a.media.facebook=this.socialLinks[0].href,a.media[0].video?a.media.pinterest=n.qsReplace(this.socialLinks[2].href,"media",encodeURIComponent("http://img.youtube.com/vi/"+a.media[0].ref+"/0.jpg")):a.media.pinterest=n.qsReplace(this.socialLinks[2].href,"media",encodeURIComponent(a.media[0].ref))),a.testGroups=t.testGroups,this.$el.html(this.template(a)),this.media.length>1&&this.showNextArrow();var s=this.$('[data-toggle="popover"]');if(s.popover){s.popover({template:'<div class="popover writer-tooltip" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',html:!0})}if(t.testGroups.STORY_IMAGE_MOD&&this.isEditable&&this.media.length){var i=this;e.setTimeout(function(){i.setHeaderImageModerationNotice()},50)}return this},showNextArrow:function(){this.$(".media > .on-next-media").removeClass("invisible")},onPrevMedia:function(e){var t=$(".media > .media-item").index($(".media-item:not(.hidden)"));this.showMedia(t,t-1)},onNextMedia:function(e){var t=$(".media > .media-item").index($(".media-item:not(.hidden)"));this.showMedia(t,t+1)},onCarouselClicked:function(e){var t=$("li.on-carousel-clicked").index($(e.currentTarget)),n=$("li.on-carousel-clicked").index($(e.currentTarget).siblings(".active"));this.showMedia(n,t)},showMedia:function(e,a){var s=e-1==0,l=e+1===this.media.length-1;s&&(this.$(".media > .on-prev-media").addClass("invisible"),this.$(".media > .on-next-media").removeClass("invisible")),l&&(this.$(".media > .on-next-media").addClass("invisible"),this.$(".media > .on-prev-media").removeClass("invisible")),this.$(".media > .media-item:nth-of-type("+(e+1)+")").addClass("hidden"),this.$(".carousel-indicators > li.on-carousel-clicked:nth-of-type("+(e+2)+")").removeClass("active"),this.$(".media > .media-item:nth-of-type("+(a+1)+")").removeClass("hidden"),this.$(".carousel-indicators > li.on-carousel-clicked:nth-of-type("+(a+2)+")").addClass("active"),this.media.length>0&&this.socialLinks&&(this.$("#share-header-media-facebook").attr("href",this.socialLinks[0].href),this.media[a].video?this.$("#share-header-media-pinterest").attr("href",n.qsReplace(this.$("#share-header-media-pinterest").attr("href"),"media",encodeURIComponent("http://img.youtube.com/vi/"+this.media[a].ref+"/0.jpg"))):this.$("#share-header-media-pinterest").attr("href",n.qsReplace(this.$("#share-header-media-pinterest").attr("href"),"media",encodeURIComponent(this.media[a].ref)))),t.testGroups.STORY_IMAGE_MOD&&this.isEditable&&this.media.length>1&&this.hasBannedImage&&this.updateBannedImageMessaging()},updateBannedImageMessaging:function(){var e=$("#header-banned-image-warning");e.hasClass("hidden")?e.removeClass("hidden"):e.addClass("hidden")},onVideoSelected:function(e){var t=$(e.currentTarget),n=$('<iframe width="'+16*t.height()/9+'" height="'+t.height()+'" src="//www.youtube-nocookie.com/embed/'+t.data("youtube")+'?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe>');t.html(n)},onShowMediaMenu:function(e){$(e.currentTarget).siblings(".popover").popover().removeClass("faded").show()},onHideMediaMenu:function(e){this.$(".media-menu").removeAttr("style").addClass("faded")},onAddPhoto:function(e){this.onFileSelect()},onAddVideo:function(e){$(".media-fields-underlay").show(),this.$(".media-item").addClass("hide"),this.$(".media-buttons").addClass("hide"),this.$(".video-url").removeClass("hide"),l.get("device").is.ie||this.$(".video-url-field").focus(),this.hideBannedHeaderImageWarning()},hideBannedHeaderImageWarning:function(){t.testGroups.STORY_IMAGE_MOD&&this.hasBannedImage&&$("#header-banned-image-warning").addClass("hidden")},onRemoveVideo:function(e){l.trigger("works:editor:remove-video")},onRemovePhoto:function(e){this.hideBannedHeaderImageWarning(),t.testGroups.STORY_IMAGE_MOD&&this.hasBannedImage&&l.trigger("works:editor:remove-banned-indicator"),l.trigger("works:editor:remove-image")},onSubmitPhoto:function(e){var t=this.$(".photo-url-field").val();("keyup"==e.type&&13===e.keyCode&&""!==t||"tap"==e.type&&""!==t)&&(l.trigger("works:editor:add-image",t),$(".media-fields-underlay").hide())},onSubmitVideo:function(t){var n=this.$(".video-url-field").val();"paste"==t.type&&(void 0===t.originalEvent.clipboardData&&e.clipboardData&&(t.originalEvent.clipboardData=e.clipboardData),n=t.originalEvent.clipboardData.getData("Text"),this.isYouTubeUrl(n)?(l.trigger("works:editor:add-video",this.extractYouTubeId(n)),$(".media-fields-underlay").hide()):$(".save-indicator").text("Please enter a valid YouTube video link.").addClass("warning")),("keyup"==t.type&&13===t.keyCode||"tap"==t.type)&&(this.isYouTubeUrl(n)?(l.trigger("works:editor:add-video",this.extractYouTubeId(n)),$(".media-fields-underlay").hide()):$(".save-indicator").text("Please enter a valid YouTube video link.").addClass("warning"))},hideMediaFields:function(e){this.$(".media-item").removeClass("hide"),this.$(".media-buttons").removeClass("hide"),this.$(".photo-url").addClass("hide"),this.$(".video-url").addClass("hide"),$(".media-fields-underlay").hide()},stopEvent:function(e){t.utils.stopEvent(e)},isYouTubeUrl:function(e){return-1!==e.indexOf("http://youtu.be/")||-1!==e.indexOf("https://youtu.be/")||-1!==e.indexOf("http://www.youtube.com/watch?v=")||-1!==e.indexOf("https://www.youtube.com/watch?v=")},extractYouTubeId:function(e){var t=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);return t&&11==t[1].length?t[1]:""},onCloseTooltip:function(e){n.stopEvent(e),$(e.currentTarget).parent().parent().parent().addClass("hidden")},onSocialShareSelected:function(t){e.dataLayer.push({event:"ga-event",category:"reading",action:$(t.currentTarget).data("gtm-action"),label:this.model.get("id")}),e.te.push("event","reading","header-media",null,"share",{storyid:this.model.get("group").id,partid:this.model.get("id"),channel:$(t.currentTarget).data("share-channel")})},onAddImage:function(e){this.onFileSelect()},onFileSelected:function(){var e=this;e.getFile().catch(function(e){return l.trigger("works:editor:image-upload-failed",e.message),t.utils.pushEvent({category:"works-writer",action:"image-failed-read"}),Promise.reject()}).then(function(t){if(e.validateImageData(t)){e.$(".story-media-picker").addClass("hidden");var a="image_"+(new Date).getTime(),s=e.fileUploadTarget,l=[5,6,7,8];$('<img id="'+a+'" />').one("load",function(){var i=e.adjustSizes(s,this),r=this.width,o=this.height;t.orientation&&l.indexOf(t.orientation)>-1&&(r=this.height,o=this.width),$(this).attr("data-original-width",r).attr("data-original-height",o);var c=this.src;if(e.isCanvasSupported){var u=$('<img src="'+c+'">')[0],d=document.createElement("canvas"),h=d.getContext("2d");d.width=i.width/4,d.height=i.height/4,h.drawImage(u,0,0,d.width,d.height),c=d.toDataURL()}$(".btn-writer-media.on-add-image").children().replaceWith(n.iconifySpin("fa-loading",25,new n.Device,{hash:{className:"fa-wp-base-1 spinner"}})),$("#"+a).attr("data-media-type","image").attr("data-image-layout","one-horizontal"),e.uploadImage(a,t)})[0].src=t.data}})},validateImageData:function(e){var a=_.findWhere(this.fileUploadLimits,{type:e.metadata.type});if(!a){var s=_.pluck(this.fileUploadLimits,"friendlyName").join(", ");return l.trigger("works:editor:image-invalid-type",n.trans("Your uploaded image is not a valid image type. Allowed types are: %s.",s)),t.utils.pushEvent({category:"works-writer",action:"image-invalid-type"}),!1}return!(e.metadata.size>a.fileSize)||(l.trigger("works:editor:image-too-large",n.trans("Your uploaded %s file is too large. The maximum size for %ss is %s.",a.friendlyName,a.friendlyName,a.friendlySize)),t.utils.pushEvent({category:"works-writer",action:"image-too-large"}),!1)},adjustSizes:function(e,t){var n=_.result(e,"width");if(n<t.width){var a=n/t.width;return{width:n,height:t.height*a}}return{width:t.width,height:t.height}},uploadImage:function(e,a){var s=this;this.imageUploads=this.imageUploads||[],this.imageUploads.push({key:e,progress:0}),Promise.resolve($.ajax({type:"POST",url:t.mediaService+"/story_parts/"+s.model.get("id")+"/images",data:{data:a.parsed}})).then(function(t){_.findWhere(s.imageUploads,{key:e}).progress=1,_.delay(_.bind(s.createImageElement,s),3e3,e,JSON.parse(t))}).catch(function(e){var t;e&&(t=e?JSON.parse(e.responseText).Message:""),l.trigger("works:editor:image-upload-failed",n.trans("There was a problem uploading your image. %s",t))})},createImageElement:function(e,t){this.model.set("photos",t.Urls[0]),this.model.set("photoUrl",t.Urls[0]),this.media.push({photo:!0,ref:this.model.get("photoUrl")}),this.render()},getImageModerationStatus:function(e){return Promise.resolve($.ajax({type:"GET",url:"/v5/image_moderation/result?image_url="+e})).then(function(e){return e.result}).catch(function(e){return"Error fetching image moderation result:"+e.responseText})},setHeaderImageModerationNotice:function(){var e=this;_.each(this.media,function(t,n){if(t.photo){var a=t.ref;e.getImageModerationStatus(a).then(function(t){if("banned"===t){e.hasBannedImage||(e.hasBannedImage=!0);var s=e.$(".media > .image.media-item:nth-of-type("+(n+1)+")");s.find("img").addClass("banned"),s.find(".banned-overlay").removeClass("hidden"),$("#header-banned-image-warning").find(".placeholder").replaceWith(e.bannedImageMessaging({id:"header-writer",src:a,groupId:e.model.get("groupid"),partId:e.model.get("id"),cleanupBannedMessaging:e.removeHeaderBannedMessaging.bind(this)})),s.hasClass("hidden")||$("#header-banned-image-warning").removeClass("hidden")}}).catch(function(e){console.error(e)})}})},removeHeaderBannedMessaging:function(){$("#header-banned-image-warning").replaceWith("<span class='placeholder'></span>")}})),l.mixin(l.views.MediaBanner,"SocialSharing","FileUpload")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'    <div class="media-wrapper">\n'},3:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.media:t)?l.length:l,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:""},4:function(e,t,n,a,s){return'        <div class="media-wrapper">\n'},6:function(e,t,n,a,s){return'        <div class="media-wrapper hidden">\n'},8:function(e,t,n,a,s){return'style="background-color: #827C78;background-image: url('+e.escapeExpression((n.resizeCoverAsBackground||t&&t.resizeCoverAsBackground||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.bgCover:t,1920,{name:"resizeCoverAsBackground",hash:{},data:s}))+');"'},10:function(e,t,n,a,s){return" hasStoryInfo"},12:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{};return(null!=(r=n.if.call(o,null!=t?t.isEditable:t,{name:"if",hash:{},fn:e.program(13,s,0,l,i),inverse:e.program(15,s,0,l,i),data:s}))?r:"")+(null!=(r=n.each.call(o,null!=t?t.media:t,{name:"each",hash:{},fn:e.program(17,s,0,l,i),inverse:e.noop,data:s}))?r:"")+(null!=(r=n.if.call(o,null!=t?t.isEditable:t,{name:"if",hash:{},fn:e.program(34,s,0,l,i),inverse:e.program(36,s,0,l,i),data:s}))?r:"")+(null!=(r=n.if.call(o,null!=t?t.isEditable:t,{name:"if",hash:{},fn:e.program(38,s,0,l,i),inverse:e.noop,data:s}))?r:"")},13:function(e,t,n,a,s){var l;return"                  "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-left",24,"wp-neutral-2","btn btn-link on-prev-media hidden-xs invisible",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},15:function(e,t,n,a,s){var l;return"                  "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-left",24,"wp-neutral-5","btn btn-link on-prev-media hidden-xs invisible",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},17:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{};return(null!=(r=n.if.call(o,null!=t?t.storyInfo:t,{name:"if",hash:{},fn:e.program(18,s,0,l,i),inverse:e.noop,data:s}))?r:"")+(null!=(r=n.if.call(o,null!=t?t.video:t,{name:"if",hash:{},fn:e.program(27,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n"+(null!=(r=n.if.call(o,null!=t?t.photo:t,{name:"if",hash:{},fn:e.program(30,s,0,l,i),inverse:e.noop,data:s}))?r:"")},18:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return'                    <div class="media-item story-info'+(null!=(r=n.if.call(c,s&&s.index,{name:"if",hash:{},fn:e.program(19,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                        <img class= "cover" src="'+d((n.resizeCover||t&&t.resizeCover||u).call(c,null!=t?t.cover:t,140,{name:"resizeCover",hash:{},data:s}))+'" alt="'+d(e.lambda(null!=i[2]?i[2].title:i[2],t))+'"/>\n                        <div class="text">\n                            <p class="item-header">'+d((n.trans||t&&t.trans||u).call(c,"YOU ARE READING",{name:"trans",hash:{},data:s}))+'</p>\n                            <h3 class="item-title">'+d("function"==typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:u)?o.call(c,{name:"title",hash:{},data:s}):o)+'</h3>\n                            <a class="item-category on-navigate" href=\'/stories/'+d((n.slugify||t&&t.slugify||u).call(c,null!=t?t.categoryEnglish:t,{name:"slugify",hash:{},data:s}))+"'>"+d("function"==typeof(o=null!=(o=n.category||(null!=t?t.category:t))?o:u)?o.call(c,{name:"category",hash:{},data:s}):o)+'</a>\n                            <p class="item-description">'+d((n.simpleShorten||t&&t.simpleShorten||u).call(c,null!=t?t.description:t,250,!1,{name:"simpleShorten",hash:{},data:s}))+"</p>\n"+(null!=(r=n.if.call(c,null!=i[1]?i[1].isDesktop:i[1],{name:"if",hash:{},fn:e.program(21,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                        </div>\n"+(null!=(r=n.unless.call(c,null!=i[1]?i[1].isDesktop:i[1],{name:"unless",hash:{},fn:e.program(24,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                    </div>\n"},19:function(e,t,n,a,s){return" hidden"},21:function(e,t,n,a,s,l,i){var r;return'                                <p class="item-tags">\n'+(null!=(r=n.each.call(null!=t?t:e.nullContext||{},null!=(r=null!=i[1]?i[1].group:i[1])?r.tags:r,{name:"each",hash:{},fn:e.program(22,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                                </p>\n"},22:function(e,t,n,a,s){var l=e.lambda,i=e.escapeExpression;return'                                        <span class="tag"><a class="on-navigate" href="/stories/'+i(l(t,t))+'"><s>#</s><strong>'+i(l(t,t))+"</strong></a></span>\n"},24:function(e,t,n,a,s,l,i){var r;return'                            <div class="item-tags">\n                                <div class="collection">\n'+(null!=(r=n.each.call(null!=t?t:e.nullContext||{},null!=(r=null!=i[1]?i[1].group:i[1])?r.tags:r,{name:"each",hash:{},fn:e.program(25,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                                </div>\n                            </div>\n"},25:function(e,t,n,a,s){var l=e.lambda,i=e.escapeExpression;return'                                            <span class="pill"><a class="on-navigate" href="/stories/'+i(l(t,t))+'">'+i(l(t,t))+"</a></span>\n"},27:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                    <div class="media-item video on-video '+(null!=(l=n.if.call(r,s&&s.index,{name:"if",hash:{},fn:e.program(28,s,0),inverse:e.noop,data:s}))?l:"")+'" data-youtube="'+c("function"==typeof(i=null!=(i=n.ref||(null!=t?t.ref:t))?i:o)?i.call(r,{name:"ref",hash:{},data:s}):i)+'">\n                        <img src="https://img.youtube.com/vi/'+c("function"==typeof(i=null!=(i=n.ref||(null!=t?t.ref:t))?i:o)?i.call(r,{name:"ref",hash:{},data:s}):i)+'/0.jpg"/>\n                        <div class="play">\n                            <span class="fa fa-stack-1x triangle-right">&#x25b6;</span>\n                        </div>\n                    </div>\n'},28:function(e,t,n,a,s){return"hidden"},30:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d=e.escapeExpression;return'                    <div class="media-item image '+(null!=(r=n.if.call(c,s&&s.index,{name:"if",hash:{},fn:e.program(28,s,0,l,i),inverse:e.noop,data:s}))?r:"")+' on-full-size-banner">\n                        <img data-index="'+d("function"==typeof(o=null!=(o=n.index||s&&s.index)?o:u)?o.call(c,{name:"index",hash:{},data:s}):o)+'" src="'+d("function"==typeof(o=null!=(o=n.ref||(null!=t?t.ref:t))?o:u)?o.call(c,{name:"ref",hash:{},data:s}):o)+'" alt="'+d(e.lambda(null!=i[2]?i[2].title:i[2],t))+'"/>\n'+(null!=(r=n.if.call(c,(n.isTestGroup||t&&t.isTestGroup||u).call(c,"STORY_IMAGE_MOD",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(31,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                    </div>\n"},31:function(e,t,n,a,s,l,i){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=i[1]?i[1].isEditable:i[1],{name:"if",hash:{},fn:e.program(32,s,0,l,i),inverse:e.noop,data:s}))?r:""},32:function(e,t,n,a,s){var l;return"                                <span class='banned-overlay hidden'>\n                                    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-image-warning",24,"wp-neutral-5","banned-warning",{name:"iconify",hash:{},data:s}))?l:"")+"\n                                </span>\n"},34:function(e,t,n,a,s){var l;return"                    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-right",24,"wp-neutral-2","btn btn-link on-next-media hidden-xs invisible",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},36:function(e,t,n,a,s){var l;return"                    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-right",24,"wp-neutral-5","btn btn-link on-next-media hidden-xs invisible",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},38:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"                    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(i,"fa-settings",48,"wp-neutral-2","fa-4x edit-media on-show-media-menu",{name:"iconify",hash:{},data:s}))?l:"")+'\n                    <div class="popover top faded media-menu">\n                        <div class="arrow"></div>\n                        <div class="popover-content">\n'+(null!=(l=n.if.call(i,null!=t?t.hasVideo:t,{name:"if",hash:{},fn:e.program(39,s,0),inverse:e.program(41,s,0),data:s}))?l:"")+"                            <br />\n"+(null!=(l=n.if.call(i,null!=t?t.hasPhoto:t,{name:"if",hash:{},fn:e.program(43,s,0),inverse:e.program(45,s,0),data:s}))?l:"")+"                        </div>\n                    </div>\n"},39:function(e,t,n,a,s){return'                                <a href="#" class="on-remove-video">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Remove video",{name:"trans",hash:{},data:s}))+"</a>\n"},41:function(e,t,n,a,s){return'                                <a href="#" class="on-add-video">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Add YouTube video",{name:"trans",hash:{},data:s}))+"</a>\n"},43:function(e,t,n,a,s){return'                                <a href="#" class="on-remove-image">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Remove image",{name:"trans",hash:{},data:s}))+"</a> \n"},45:function(e,t,n,a,s){return'                                <a href="#" class="on-add-image">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Add image",{name:"trans",hash:{},data:s}))+"</a>\n"},47:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isEditable:t,{name:"if",hash:{},fn:e.program(48,s,0),inverse:e.noop,data:s}))?l:""},48:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'                    <div class="btn-group media-buttons" role="group">\n                        <button type="button" class="btn btn-white btn-lg btn-writer-media on-add-image">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-image",36,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n                        <button type="button" class="btn btn-white btn-lg btn-writer-media on-add-video">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-video",36,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</button>\n"+(null!=(l=n.if.call(i,null!=t?t.showTips:t,{name:"if",hash:{},fn:e.program(49,s,0),inverse:e.noop,data:s}))?l:"")+"                    </div>\n"},49:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'                            <div class="popover writer-tooltip fade left in" role="tooltip" id="header-media-tooltip" style="top: 59px; left: 322px; display: block;"><div class="arrow"></div><h3 class="popover-title">'+r((n.trans||t&&t.trans||i).call(l,"Add header media",{name:"trans",hash:{},data:s}))+'</h3><div class="popover-content"><div class="main-content">'+r((n.trans||t&&t.trans||i).call(l,"Set the mood for your story by adding multimedia.",{name:"trans",hash:{},data:s}))+'</div><div class="tooltip-footer"><a href="">'+r((n.trans||t&&t.trans||i).call(l,"Learn More",{name:"trans",hash:{},data:s}))+'</a><button class="btn btn-orange on-okay">'+r((n.trans||t&&t.trans||i).call(l,"OK",{name:"trans",hash:{},data:s}))+"</button></div></div></div>\n"},51:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                <div class="media-fields">\n                  <div class="input-group input-group-lg photo-url hide">\n                    <input type="text" name="photoURL" class="photo-url-field form-control" value="'+o("function"==typeof(l=null!=(l=n.photoURL||(null!=t?t.photoURL:t))?l:r)?l.call(i,{name:"photoURL",hash:{},data:s}):l)+'" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Paste image URL",{name:"trans",hash:{},data:s}))+'" />\n                    <span class="input-group-btn">\n                        <button class="btn btn-grey on-submit-photo" type="button">'+o((n.trans||t&&t.trans||r).call(i,"Add",{name:"trans",hash:{},data:s}))+'</button>\n                    </span>\n                  </div>\n                  <div class="input-group input-group-lg video-url hide">\n                    <input type="text" name="videoURL" class="video-url-field form-control" value="'+o("function"==typeof(l=null!=(l=n.videoURL||(null!=t?t.videoURL:t))?l:r)?l.call(i,{name:"videoURL",hash:{},data:s}):l)+'" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Paste YouTube URL",{name:"trans",hash:{},data:s}))+'" />\n                    <span class="input-group-btn">\n                        <button class="btn btn-grey on-submit-video" type="button">'+o((n.trans||t&&t.trans||r).call(i,"Add",{name:"trans",hash:{},data:s}))+"</button>\n                    </span>\n                  </div>\n                </div>\n"},53:function(e,t,n,a,s){var l;return null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.media:t,{name:"each",hash:{},fn:e.program(54,s,0),inverse:e.noop,data:s}))?l:""},54:function(e,t,n,a,s){var l;return'                <li class="on-carousel-clicked '+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},s&&s.index,{name:"if",hash:{},fn:e.noop,inverse:e.program(55,s,0),data:s}))?l:"")+'"></li>\n'},55:function(e,t,n,a,s){return"active"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.lambda,d=e.escapeExpression;return(null!=(r=n.if.call(o,null!=t?t.isEditable:t,{name:"if",hash:{},fn:e.program(1,s,0,l,i),inverse:e.program(3,s,0,l,i),data:s}))?r:"")+'\n    <div class="hover-wrapper"  '+(null!=(r=n.if.call(o,null!=t?t.showCover:t,{name:"if",hash:{},fn:e.program(8,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'>\n        <div class="background-lg media background'+(null!=(r=n.if.call(o,null!=t?t.storyInfoFlag:t,{name:"if",hash:{},fn:e.program(10,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=n.if.call(o,null!=(r=null!=t?t.media:t)?r.length:r,{name:"if",hash:{},fn:e.program(12,s,0,l,i),inverse:e.program(47,s,0,l,i),data:s}))?r:"")+(null!=(r=n.if.call(o,null!=t?t.isEditable:t,{name:"if",hash:{},fn:e.program(51,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n            <ol class="carousel-indicators">\n                <li class="icon-container">'+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-flag",12,"wp-neutral-3 on-report-image-banner",{name:"iconify",hash:{},data:s}))?r:"")+"</li>\n"+(null!=(r=n.if.call(o,null!=t?t.showCarousel:t,{name:"if",hash:{},fn:e.program(53,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n                <li class="icon-container">\n                    <a href="'+d(u(null!=(r=null!=t?t.media:t)?r.facebook:r,t))+'" class="social-share" id="share-header-media-facebook"\n                       data-gtm-action="shareinlinemedia:facebook" data-share-channel="facebook" target="_blank"\n                       title="'+d((n.trans||t&&t.trans||c).call(o,"Share on Facebook",{name:"trans",hash:{},data:s}))+'">\n                        '+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-facebook",12,"wp-neutral-5 on-share-image-banner facebook",{name:"iconify",hash:{},data:s}))?r:"")+'\n                    </a>\n                </li>\n                <li class="icon-container">\n                    <a href="'+d(u(null!=(r=null!=t?t.media:t)?r.pinterest:r,t))+'" class="social-share" id="share-header-media-pinterest"\n                       data-gtm-action="shareinlinemedia:pinterest" data-share-channel="pinterest" target="_blank"\n                       title="'+d((n.trans||t&&t.trans||c).call(o,"Share on Pinterest",{name:"trans",hash:{},data:s}))+'">\n                        '+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-pinterest",12,"wp-neutral-5 on-share-image-banner pinterest",{name:"iconify",hash:{},data:s}))?r:"")+'\n                    </a>\n                </li>\n            </ol>\n        </div>\n    </div>\n    <div class="file-upload hidden">\n        <input accept=".jpeg,image/jpeg, image/png, image/gif" type="file" name="file">\n    </div>\n    <div class="media-fields-underlay"></div>\n</div>\n'},useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"BannedImageMessaging",null!=t?t.id:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},useData:!0})},function(e,t,n){"use strict";var a=g(n(446)),s=g(n(21)),l=g(n(447)),i=g(n(448)),r=g(n(449)),o=g(n(450)),c=g(n(451)),u=g(n(452)),d=g(n(453)),h=g(n(454)),p=g(n(455)),m=g(n(456)),f=g(n(457));function g(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,g,v){g.add("CoreStoryReading",g.views.RegionManager.extend({template:function(){return""},partials:{"core.story_reading.comment-marker":m.default,"core.story_reading.funbar":function(){return""},"core.story_reading.media_banner":function(){return""},"core.story_reading.part_actions":p.default,"core.story_reading.part_comments":h.default,"core.story_reading.part_container_new":d.default,"core.story_reading.part_footer_new":u.default,"core.story_reading.part_header_new":c.default,"core.story_reading.part_navigation":o.default,"core.story_reading.part_recommendations":r.default,"core.story_reading.part_restart":i.default,"core.story_reading.part_similar":l.default,"core.story_reading.picture_viewer":s.default,"core.story_reading.part_text_container":a.default,"core.story_reading.out_of_geo_banner":f.default},regions:{},bannerSignup:!0,isDesktop:null,id:"story-reading",voteButton:".actions > .btn-vote",subviews:{funbar:g.views.StoryReadingFunbar,media:g.views.MediaBanner,comments:g.views.Comments,bottomBanner:g.views.BottomBanner},regionTags:{funbar:"#funbar-container",media:"#media-container",comments:"#comments",bottomBanner:"#bottom-banner-container"},events:{"tap   .share-embed":"onShareEmbed","click .share-embed":"stopEvent","tap    .on-dismiss-lists":"onDismissLists","click  .on-dismiss-lists":"stopEvent","tap   .on-send":"onSendToFriend","click .on-send":"stopEvent","tap   .on-inline-comments-modal":"showInlineCommentsModal","click .on-inline-comments-modal":"stopEvent","keyup .send-input":"onValidateSend","tap    .on-load-more-page":"onLoadNextPage","click  .on-load-more-page":"stopEvent","tap .share-post-to-profile":"showPostToProfileModal","click .share-post-to-profile":"stopEvent","tap .dismiss-geo-banner":"dismissOutOfGeoBanner","click .dismiss-geo-banner":"stopEvent"},initialize:function(e){var n=this;_.each(this.partials,function(e,t){Handlebars.registerPartial(t,e)}),_.bindAll(this,"buyPaidContent","showStoryPaywallModal","onBuyCoins"),this.scrollState={part:{}},this.sync={enabled:!0,last:0,part:0},t.utils.currentUser().authenticated()?(this.listenTo(this.model,"reading-position-available",function(e){n.sync={enabled:!0,last:e}}),this.listenTo(g,"app:story:vote",this.onUpdateVote),this.listenTo(g,"app:story:inlinecomment",this.fetchCommentCounts),this.model.syncPosition()):this.sync.enabled=!1,e.deepLinkModel&&(this.deepLinkModel=e.deepLinkModel,this.listenTo(g,"app:comment:deepLink",this.deepLinkToComment))},showPostToProfileModal:function(e){var a=$("#generic-modal");if(n.stopEvent(e),t.utils.currentUser().authenticated()){if(!t.utils.currentUser().get("verified_email")){var s=new g.views.PleaseVerifyModal;return a.find(".modal-body").html(s.render().$el),void a.modal({})}var l=new g.views.PostToProfileModal({model:this.model,target:n.currentUser().get("username")});a.empty().append(l.render().$el),a.modal("show")}else this.onAuthPrompt(e)},render:function(){var a=this;return this.model.set("isDeepLinkView",!!this.options.deepLinkModel),t.utils.isOperaMini||$(e).on("scroll.screen_"+this.cid,function(e){a.delegateScrollEvent(e)}),_.defer(function(){a.deepLinkModel&&g.trigger("app:comment:deepLink"),a.model.getCommentCountByParagraph().then(function(){a.renderCommentCounts(a.$(".panel.panel-reading > pre p[data-p-id]"))}),n.resizeImages(a.$(".panel-reading pre [data-image-layout=one-horizontal]"),a.$(".panel-reading pre").width()),a.initializeVideoTracking(),a.setOutOfGeoBannerVisibility()}),this.addCopyListener(),this},deepLinkToComment:function(){var e=this.deepLinkModel.get("paragraphId"),n=0!==this.getParagraphById(e).length,a=e&&!n&&this.model.get("pageNumber")+1>=this.model.get("pages");if(e&&!a)try{var s=new g.collections.InlineComments([this.deepLinkModel],{paragraphId:e,partId:this.model.get("id"),storyPart:this.model,limit:10,commentId:this.deepLinkModel.get("id")}),l=new g.views.InlineCommentsModal({source:this.model,collection:s,model:this.deepLinkModel,commentIdToHighlight:this.deepLinkModel.commentIdToHighlight});this.$("#inline-comments-modal").empty().append(l.render().$el),l.showModal(),this.deepLinkModel.isDeeplinkedReply&&_.toArray(l.viewPointers)[0].expand(),this.stopListening(g,"app:comment:deepLink",this.deepLinkToComment)}catch(e){this.$("footer")[0].scrollIntoView(!0),this.$el.find(".on-load-more-page").trigger("tap")}else{s=new g.collections.StoryPartComments([this.deepLinkModel],{storyAuthor:this.model.get("group")?this.model.get("group").user.username:"",partId:this.model.get("id"),limit:10});var i=new g.views.Comments({collection:s,enablePosts:t.utils.currentUser().authenticated(),source:this.model,model:this.deepLinkModel,commentIdToHighlight:this.deepLinkModel.commentIdToHighlight});this.$(this.regionTags.comments).empty(),this.setRegion(this.regionTags.comments,i.renderView()),this.$(i.$el[0]).find(".collection")[0].scrollIntoView(!0),this.deepLinkModel.isDeeplinkedReply&&_.toArray(i.viewPointers)[0].expand(),this.lockScrollUpdate(),this.stopListening(g,"app:comment:deepLink",this.deepLinkToComment)}},getParagraphById:function(e){return this.$(".panel.panel-reading > pre > p[data-p-id="+e+"]")},addCopyListener:function(){$(e).on("copy.screen_"+this.cid,function(){var t=[$(".part-content")[0],$(".inline-comments-modal .paragraph-text")[0]];if(!!_.some(t,function(t){return t&&e.getSelection().containsNode(t,!0)}))return!1})},fetchCommentCounts:function(e){var t=this,n=e?this.getParagraphById(e):this.$(".panel.panel-reading > pre p[data-p-id]");n.length&&this.model.getCommentCountByParagraph().then(function(){t.renderCommentCounts(n)})},renderCommentCounts:function(e){var t=this,n=t.model.get("paragraphs");n&&_.each(e,function(e){var a=$(e),s=a.data("p-id"),l=_.find(n,function(e){return e.id===s});t.renderCommentMarker(a,l?l.commentCount:0)})},renderCommentMarker:function(e,t){var n=$(e),a=this.partials["core.story_reading.comment-marker"];n.children(".comment-marker").remove(),n.append(a({commentCount:t}))},showInlineCommentsModal:_.debounce(function(t){var n=this,a=$(t.target).closest(".on-inline-comments-modal").parent().data("p-id"),s=new g.collections.InlineComments([],{paragraphId:a,storyPart:n.model,limit:10});Promise.resolve(s.fetchNextSet()).then(function(){var e=new g.views.InlineCommentsModal({source:n.model,collection:s});n.$("#inline-comments-modal").empty().append(e.render().$el),e.showModal()}),e.te.push("event","reading","comment","inline","click",{storyid:this.model.get("group").id,partid:this.model.get("id"),paragraphid:a})},800),initializeVideoTracking:function(){var t=this;if(e.onYouTubeIframeAPIReady=function(){t.initializeEmbeddedIframes()},!e.YT){e.YTConfig={host:"https://www.youtube-nocookie.com"};var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}},initializeEmbeddedIframes:function(){var t=this;e.YT&&$("[data-media-type=video] iframe").not(".initialized").each(function(e,n){new YT.Player(n,{events:{onStateChange:function(e){t.trackVideoState(n,e)}}});$(n).addClass("initialized")})},trackVideoState:function(t,n){var a=$(t);n.data!==YT.PlayerState.PLAYING||a.data("playTracked")?n.data===YT.PlayerState.ENDED&&(e.te.push("event","reading","media","video","finished",{partid:this.model.get("id"),videoid:a.data("videoId")}),a.data("playTracked",0)):(e.te.push("event","reading","media","video","play",{partid:this.model.get("id"),videoid:a.data("videoId")}),a.data("playTracked",1))},remove:function(){this.ignoreEvents=!0,$(e).off("scroll.screen_"+this.cid),$(e).off("copy.screen_"+this.cid),$(".panel-reading p img").off("error"),$(".shadow-verify").remove(),g.views.RegionManager.prototype.remove.apply(this,arguments),$("body").removeAttr("ondragstart onselectstart unselectable")},setRegions:function(){var e=!!this.options&&this.options.isPreview;this.$(this.regionTags.funbar).empty();var n=new this.subviews.funbar({model:this.model,isPreview:e});this.setRegion(this.regionTags.funbar,n.render());var a=this.model.get("media");if(a||(a=[],this.model.get("videoId")&&a.push({video:!0,ref:this.model.get("videoId")}),this.model.get("photoUrl")&&a.push({photo:!0,ref:this.model.get("photoUrl")})),this.model.set("media",null),this.$(this.regionTags.media).empty(),n=new this.subviews.media({media:a,bgCover:this.model.get("group").cover,socialLinks:this.socialLinks}),this.setRegion(this.regionTags.media,n.render()),g.get("device").is.desktop&&!t.utils.currentUser().authenticated()&&!this.model.get("group").isAdExempt&&!t.utils.getCookie("dB")){this.$(this.regionTags.bottomBanner).empty();n=new this.subviews.bottomBanner({image:this.model.get("group").cover,title:this.model.get("group").title,showBottomBanner:!0,dismissibleBanner:!0});this.setRegion(this.regionTags.bottomBanner,n.render())}if(this.bannerSignup||t.utils.currentUser().authenticated()||this.model.get("group").isAdExempt){if(this.deepLinkModel)return;var s=new g.collections.StoryPartComments([],{storyAuthor:this.model.get("group")?this.model.get("group").user.username:"",partId:this.model.get("id"),limit:10,initialLimit:2});this.$(this.regionTags.comments).empty(),n=new g.views.Comments({collection:s,enablePosts:t.utils.currentUser().authenticated(),source:this.model}),this.setRegion(this.regionTags.comments,n.render())}},onUpdateVote:function(e){e&&e.storyId===this.model.get("id")&&(e.voted?this.voteSelected():this.voteDeselected(),this.updateMeta(e.voteCount))},voteSelected:function(){var e=t.utils.iconify("fa-vote",16,"wp-base-1"),n=t.utils.trans("Voted");this.$(".actions > .on-vote").html(e+" "+n)},voteDeselected:function(){var e=t.utils.iconify("fa-vote",16,"wp-neutral-2"),n=t.utils.trans("Vote");this.$(".actions > .on-vote").html(e+" "+n)},updateMeta:function(e){this.$(".meta > .reads").html(t.utils.iconify("fa-view",14,"wp-neutral-2")+" "+this.model.get("readCount")),this.$(".meta > .votes").html(t.utils.iconify("fa-vote",14,"wp-neutral-2")+" "+(e||this.model.get("voteCount"))),this.$(".meta > .comments").html(t.utils.iconify("fa-comment",14,"wp-neutral-2")+" "+this.model.get("commentCount"))},getIsBigPart:function(){return this.model.get("pages")>=12},onLoadNextPage:function(e){this.unlockScrollUpdate();var t=parseInt($(e.currentTarget).attr("href").match(/page\/([0-9]+)$/)[1],10);this.loadNextPage(t)},loadNextPage:function(e){if(e>this.model.get("pages"))return this.$(".load-more-page").addClass("hidden"),void this.$(".next-part").removeClass("hidden");var t=this,n=this.scrollState.part[this.scrollState.part.active.id],a=n.page.last.$el,s=(g.get("device"),t.partials["core.story_reading.part_text_container"]);this.model.getPage(e).then(function(l){if(l.get("text")||l.get("paragraphs")&&!_.isEmpty(l.get("paragraphs"))){var i={id:t.model.get("id"),pages:t.model.get("pages"),group:t.model.get("group"),text:l.get("text"),pageNumber:e,firstPage:1===e,lastPage:e>=t.model.get("pages"),isMicroPart:t.model.get("pages")<2,isSmallPart:t.model.get("pages")>=2&&t.model.get("pages")<5,isMediumPart:t.model.get("pages")>=5&&t.model.get("pages")<12,isBigPart:t.getIsBigPart(),isHeightZero:!0},r=$(s(_.extend({},t.model.toJSON(),i)));t.$(".on-load-more-page").attr("href",n.url+"/page/"+(e+1)),a.next(".mobile-cta").length&&(a=a.next(".mobile-cta")),a.after(r.removeClass("height-zero")),t.renderCommentCounts(r.find(".panel.panel-reading > pre p[data-p-id]"));var o=t.$("#inline-comments-modal").is(":empty");t.deepLinkModel&&o&&t.deepLinkToComment(),t.initializeEmbeddedIframes(),$(".panel-reading p img").on("error",_.bind(t.onImageLoadError,t))}else e<=t.model.get("pages")&&(t.$(".load-more-page").removeClass("hidden"),t.$(".next-part").addClass("hidden"))})},setElement:function(){v.View.prototype.setElement.apply(this,arguments),_.each(this.regionTags,function(e){this.regions[e]&&this.regions[e].view&&this.$(e).length>0&&(this.regions[e].view.setElement($(this.$(e+" > div"))),e===this.regionTags.media&&this.regions[e].view.media.length>1&&this.regions[e].view.showNextArrow())},this)},onPageScroll:function(){this.ignoreEvents||this.updateScrollState()},delegateScrollEvent:_.throttle(function(){this.onPageScroll()},200),stopScrollUpdate:function(){this.ignoreEvents=!0,$(e).off("scroll.screen_"+this.cid)},lockScrollUpdate:function(){this.ignoreEvents=!0,$(e).off("scroll.screen_"+this.cid),this.scrollState.part[this.scrollState.part.active.id].page.last.number<this.model.get("pages")&&this.$(".load-more-page").removeClass("hidden")},unlockScrollUpdate:function(t){var n=this;this.ignoreEvents=!1,$(e).on("scroll.screen_"+this.cid,function(e){n.delegateScrollEvent(e)}),this.onPageScroll()},_calculatePercentageRead:function(t){var n=t.data("page-number"),a=this.model.get("pages"),s=t.find(".panel-reading"),l=(n-1)/this.model.get("pages")||0,i=s.offset();if(!s.offset())return 0;var r=e.scrollY-i.top;return l+=(s.height()?r/s.height():0)/a||0,Math.min(1,Math.max(0,l))},updateScrollState:function(e){var n,a,s,l;e=e||!1,s=this.$(".story-part"),l=(n=this.findViewable(s)).find(".page"),a=this.findViewable(l),(_.isEmpty(this.scrollState.part)||this.scrollState.part.active.id!==n.data("part-id"))&&(this.scrollState.part={count:s.length,active:{id:n.data("part-id")}}),this.model.trigger("reading-progress",this._calculatePercentageRead(a)),this.scrollState.part[n.data("part-id")]&&this.scrollState.part[n.data("part-id")].page.active===a.data("page-number")||(this.scrollState.part[n.data("part-id")]={url:n.data("part-url"),page:{count:l.length,active:a.data("page-number"),first:l.first().data("page-number"),last:{number:l.last().data("page-number"),$el:l.last()}}},this.model.set("pageNumber",this.scrollState.part[n.data("part-id")].page.active),this.updateUrl(),this.updateTitle(),e||t.utils.pushEvent({},"virtualPageview"),this.updateSyncPosition(),this.updatePageContent(),1!==a.data("page-number")&&this.sendReadingEvent())},updateUrl:function(){if(t.utils.supportPushState()){var n,a="",s=this.scrollState.part[this.scrollState.part.active.id],l=s.page.active,i=e.location.href.indexOf("/comment");if("121343796"===this.model.get("group").id)n=new URL(e.location.href).search;a+=t.utils.formatStoryUrl(s.url),a+=l>1?"/page/"+l:"",a+=-1!==i?e.location.href.slice(i):"","121343796"===this.model.get("group").id&&(a+=n.length>0?n:""),g.router.navigate(a,{trigger:!1,replace:!0})}},updateTitle:function(){var e,n=this.model.get("group").title,a=this.model.get("title"),s=this.scrollState.part[this.scrollState.part.active.id].page.active,l=n;l+=n!==a?" - "+a:"",s>1&&(l+=" - "+t.utils.trans("Page")+" "+s),e=19===parseInt(g.get("language"),10)?"Đọc Truyện "+l+" - "+this.model.get("group").user.name+" - Wattpad":l,t.utils.setTitle(e)},updatePageContent:function(){var e=this.scrollState.part[this.scrollState.part.active.id],t=e.page.active;t<=this.model.get("pages")&&e.page.last.number===t&&this.loadNextPage(parseInt(t,10)+1)},_calculateSyncPosition:function(){var e=this.scrollState.part[this.scrollState.part.active.id].page.active/this.model.get("pages")||0;return Number(Math.round(e+"e3")+"e-3")},updateSyncPosition:function(){var e=0;this.sync.enabled&&(e=this._calculateSyncPosition())>this.sync.last&&(this.sync.last=e,this.model.syncPosition(e),1===e&&(this.sync.enabled=!1))},sendReadingEvent:function(){var t=this.model.get("group"),a=n.publishedPartsInStory(t);e.te.push("event","reading","progress",null,"next_page",{storyid:t.id,partid:this.model.get("id"),read_percent:this._calculateSyncPosition(),published_parts:a.length})},findViewable:function(t){var n=$(t[0]),a=e.innerHeight/2+e.scrollY;return t.length<2||0===e.scrollY?n:(t.each(function(e){var s=$(this),l=t[e+1]?$(t[e+1]):null;return!(0===(n=s).height()&&l&&l.find(".panel-reading").offset().top>a)&&(!(l&&l.offset().top>a)&&void 0)}),n)},onAddedToLibrary:function(e){var n=this.$(this.libraryButton+"[data-story-id='"+e+"']");n.children(".fa").addClass("fa-check").removeClass("fa-plus"),n.children(".btn-library-text").html(t.utils.trans("In Library"))},onRemovedFromLibrary:function(e){var n=this.$(this.libraryButton+"[data-story-id='"+e+"']");n.children(".fa").removeClass("fa-check").addClass("fa-plus"),n.children(".btn-library-text").html(t.utils.trans("Add to Library"))},onSocialShareSelected:function(n){t.utils.pushEvent({category:"reading",action:$(n.currentTarget).data("gtm-action"),label:this.model.get("id")}),e.te.push("event","reading","story",null,"share",{storyid:this.model.get("group").id,partid:this.model.get("id"),channel:$(n.currentTarget).data("share-channel")})},getDeepLinkPage:function(){return"story-reading"},onSendToFriend:function(a){var s=this.$(".send-input").val().trim(),l=$(".on-send").attr("disabled","disabled");l.text(n.trans("Sending")),Promise.resolve($.ajax({type:"POST",url:"/v4/stories/"+this.model.get("group").id+"/parts/"+this.model.get("id")+"/share",data:{target:s}})).then(function(){$(".on-send").removeAttr("disabled"),l.text(n.trans("Sent")),_.delay(function(){l.text(n.trans("Send to Friend"))},5e3)}).catch(function(n){$(".on-send").removeAttr("disabled"),e.alert(t.utils.trans(n))})},onValidateSend:function(e){var t=$(e.currentTarget).val();t.match(/[0-9-\(\)+]{10,}/)||t.match(/[^<>"']+@[^<>"']+\.[^<>"']{2,}/)?$(".on-send").removeAttr("disabled"):$(".on-send").attr("disabled","disabled")},onImageLoadError:function(n){e.te.push("event","reading","media",null,"empty",{storyid:this.model.get("group").id,partid:this.model.get("id"),image_url:n.currentTarget.getAttribute("src"),user_agent:t.utils.getUserAgent(100)})},onShowFullSizeImage:function(t){if(!$(t.currentTarget).parent().parent().hasClass("author")){var n=$(t.currentTarget).removeAttr("width height").addClass("zoomed-image")[0].outerHTML,a=new g.views.PictureViewer({contents:n,paragraph:$(t.currentTarget).closest("p"),mediaShare:this.mediaShare,partModel:this.model}),s=a.render().$el.html();0===$("#picture-viewer").length?$("#modals").append(s):$("#picture-viewer").replaceWith(s),a.setElement($("#picture-viewer")),e.te.push("event","reading","media",null,"expand",{partid:this.model.get("id")}),$("#picture-viewer").modal(),$(".modal-backdrop").addClass("black")}},onFullSizeBanner:function(t){var n=$(t.currentTarget).html().trim(),a="h="+$(e).height()+"&amp;w="+$(e).width()+"&amp;";n=n.replace(/h=\d+&amp;w=\d+&amp;/,a);var s=new g.views.PictureViewer({contents:n,paragraph:$(t.currentTarget).closest("p")}),l=s.render().$el.html();0===$("#picture-viewer").length?$("#modals").append(l):$("#picture-viewer").replaceWith(l),s.setElement($("#picture-viewer")),e.te.push("event","reading","media",null,"expand",{partid:this.model.get("id")}),$("#picture-viewer").modal(),$(".modal-backdrop").addClass("black")},trackPurchaseFailed:function(t,n,a,s){var l=e.store.getState().wallet;e.te.push("event","paywall","purchase",null,"failed",{page:"reading",storyid:t,partid:n,cost:a,starting_balance:l.amount,part_index:s})},buyPaidContent:function(t,a,s,l){var i=e.store.getState().wallet,r=i.id,o=i.amount;e.te.push("event","paywall","purchase",null,"start",{page:"reading",storyid:a,partid:s,cost:t,starting_balance:o,part_index:l});var c=this.model.get("group").parts||[],u=_.pluck(c,"id");return n.buyPaidContent(r,a,s).then(function(){return e.te.push("event","paywall","purchase",null,"complete",{page:"reading",storyid:a,partid:s,cost:t,starting_balance:o,part_index:l}),n.cacheBustPaidMetadata(a,u)}.bind(this)).catch(function(i){throw this.trackPurchaseFailed(a,s,t,l),n.showToast(i),e.store.dispatch(e.app.components.actions.fetchWalletBalance()),i}.bind(this))},onBuyCoins:function(e){$("#generic-modal").modal("hide");var a=this.model.get("group");setTimeout(function(){n.showBuyCoinsModal("reading",a.id,e.id,t.utils.getAppLink("story-reading",this.model))}.bind(this),500)},showStoryPaywallModal:function(t){var a=this,s=this.model.get("group");e.te.push("event","paywall","author",null,"view",{page:"reading",storyid:parseInt(s.id,10),partid:t.id,author:s.user.name,part_index:n.getIndexForPartId(t.id,s)});var l=new g.views.DummyReactView({component:"StoryPaywallModal",componentId:s.id,componentData:{group:s,authorMessage:s.user.authorMessage,onBuyCoins:function(){return a.onBuyCoins(t)}}});l.render(),$("#generic-modal .modal-body").html(l.$el),$("#generic-modal").modal("show")},processPaidMetadata:function(e,t){var a=this,s=e.id,l=e.group,i=l.parts,r=l.id;e.group.parts=i.map(function(e){var n=t.parts[e.id];if(!n)return e;e.paywalled=n.paywalled,e.isBlocked=n.paywalled&&!n.has_access,e.blockedMessage=n.author_message;var a=_.first(n.price);return a&&(e.price=a.amount),e});var o=_.first(t.stories[r].price);o&&(e.storyPrice=o.amount),e.remainingBlockedParts=_.filter(i,function(e){return e.isBlocked}).length;var c=_.findIndex(i,{id:s}),u=i[c],d=void 0;c<i.length-1&&(d=i[c+1]),e.freePartsUntilPaywall=n.numPartsBetweenCurrentAndPaywall(i,u),e.isPaidPreview=n.isPaidPreview(i),e.currentPartIsBlocked=u.isBlocked,e.blockedPart=e.currentPartIsBlocked?u:d,e.buyPaidContent=this.buyPaidContent,e.showStoryPaywallModal=function(){return a.showStoryPaywallModal(e.blockedPart)}},dismissOutOfGeoBanner:function(){var t=this.model.get("group").id;e.localStorage.setItem("seenGeoBanner:"+t,1),this.setOutOfGeoBannerVisibility()},setOutOfGeoBannerVisibility:function(){var n=this.model.get("group"),a=n.id,s=n.isPaywalled,l=e.localStorage.getItem("seenGeoBanner:"+a),i=t.testGroups.PAID_CONTENT,r=s&&!l&&!i;$("#out-of-geo-banner").toggleClass("hidden",!r)}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div id="sp'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"-pg"+c("function"==typeof(i=null!=(i=n.pageNumber||(null!=t?t.pageNumber:t))?i:o)?i.call(r,{name:"pageNumber",hash:{},data:s}):i)+'"\n     data-page-number="'+c("function"==typeof(i=null!=(i=n.pageNumber||(null!=t?t.pageNumber:t))?i:o)?i.call(r,{name:"pageNumber",hash:{},data:s}):i)+'"\n     class="page col-sm-12 col-md-10 col-lg-8 col-md-offset-1 col-lg-offset-2'+(null!=(l=n.if.call(r,null!=t?t.isHeightZero:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n\n    <div class="panel panel-reading" dir=\''+(null!=(l=n.if.call(r,(n.rtlLanguage||t&&t.rtlLanguage||o).call(r,null!=(l=null!=(l=null!=t?t.group:t)?l.language:l)?l.id:l,{name:"rtlLanguage",hash:{},data:s}),{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+"'>\n        <pre>"+(null!=(l=(n.parseEmbeddedMedia||t&&t.parseEmbeddedMedia||o).call(r,null!=t?t.text:t,720,{name:"parseEmbeddedMedia",hash:{},data:s}))?l:"")+"</pre>\n    </div>\n\n"+(null!=(l=(n.ifequal||t&&t.ifequal||o).call(r,null!=(l=null!=t?t.group:t)?l.id:l,"121343796",{name:"ifequal",hash:{},fn:e.program(8,s,0),inverse:e.program(17,s,0),data:s}))?l:"")+"</div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.cta:t,{name:"if",hash:{},fn:e.program(34,s,0),inverse:e.noop,data:s}))?l:"")+"\n\n\n"},2:function(e,t,n,a,s){return" height-zero "},4:function(e,t,n,a,s){return"rtl"},6:function(e,t,n,a,s){return"ltr"},8:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.firstPage:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.program(11,s,0),data:s}))?l:""},9:function(e,t,n,a,s){var l;return"            "+(null!=(l=(n.advertisement||t&&t.advertisement||n.helperMissing).call(null!=t?t:e.nullContext||{},{name:"advertisement",hash:{storyGroup:null!=t?t.group:t,lazy:!1,experience:"reading",unit:"outstream_video"},data:s}))?l:"")+"\n"},11:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return null!=(l=n.if.call(i,(n.shouldShowReadingAd||t&&t.shouldShowReadingAd||n.helperMissing).call(i,null!=t?t.pageNumber:t,null!=t?t.pages:t,{name:"shouldShowReadingAd",hash:{},data:s}),{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:""},12:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(13,s,0),inverse:e.program(15,s,0),data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o+"        "},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                        "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",adText:(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),parentClass:"reading-widget col-xs-12",experience:"reading",unit:"readinglong_mid_mweb"},data:s}))?l:"")+"\n"},15:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                        "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",adText:(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),parentClass:"reading-widget col-xs-12",experience:"reading",unit:"readinglong_mid_loggedout_mweb"},data:s}))?l:"")+"\n"},17:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.isMicroPart:t,{name:"unless",hash:{},fn:e.program(18,s,0),inverse:e.noop,data:s}))?l:""},18:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||n.helperMissing).call(i,"OUTSTREAM_ELIGIBLE",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(19,s,0),inverse:e.program(28,s,0),data:s}))?l:""},19:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.firstPage:t,{name:"if",hash:{},fn:e.program(20,s,0),inverse:e.program(22,s,0),data:s}))?l:""},20:function(e,t,n,a,s){var l;return"                        "+(null!=(l=(n.advertisement||t&&t.advertisement||n.helperMissing).call(null!=t?t:e.nullContext||{},{name:"advertisement",hash:{storyGroup:null!=t?t.group:t,lazy:!1,experience:"reading",unit:"outstream_video"},data:s}))?l:"")+"\n"},22:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.lastPage:t,{name:"unless",hash:{},fn:e.program(23,s,0),inverse:e.noop,data:s}))?l:""},23:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(24,s,0),inverse:e.program(26,s,0),data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},24:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                                "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",adText:(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),parentClass:"reading-widget col-xs-12",experience:"reading",unit:"readinglong_mid_mweb"},data:s}))?l:"")+"\n"},26:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                                "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",adText:(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),parentClass:"reading-widget col-xs-12",experience:"reading",unit:"readinglong_mid_loggedout_mweb"},data:s}))?l:"")+"\n"},28:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.lastPage:t,{name:"unless",hash:{},fn:e.program(29,s,0),inverse:e.noop,data:s}))?l:""},29:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(30,s,0),inverse:e.program(32,s,0),data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},30:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                            "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",adText:(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),parentClass:"reading-widget col-xs-12",experience:"reading",unit:"readinglong_mid_mweb"},data:s}))?l:"")+"\n"},32:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                            "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",adText:(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),parentClass:"reading-widget col-xs-12",experience:"reading",unit:"readinglong_mid_loggedout_mweb"},data:s}))?l:"")+"\n"},34:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.story_reading.cta"],t,{name:"core.story_reading.cta",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:""},36:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div id="sp'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"-pg"+c("function"==typeof(i=null!=(i=n.pageNumber||(null!=t?t.pageNumber:t))?i:o)?i.call(r,{name:"pageNumber",hash:{},data:s}):i)+'"\n     data-page-number="'+c("function"==typeof(i=null!=(i=n.pageNumber||(null!=t?t.pageNumber:t))?i:o)?i.call(r,{name:"pageNumber",hash:{},data:s}):i)+'"\n     class="page highlighter'+(null!=(l=n.if.call(r,null!=t?t.isHeightZero:t,{name:"if",hash:{},fn:e.program(37,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(r,null!=t?t.firstPage:t,{name:"if",hash:{},fn:e.program(39,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(r,null!=t?t.lastPage:t,{name:"if",hash:{},fn:e.program(41,s,0),inverse:e.noop,data:s}))?l:"")+'">\n\n    <div class="col-xs-10 col-xs-offset-1 col-sm-10 col-sm-offset-1 col-md-7 col-md-offset-1 col-lg-6 col-lg-offset-3 panel panel-reading"\n         dir="'+(null!=(l=n.if.call(r,(n.rtlLanguage||t&&t.rtlLanguage||o).call(r,null!=(l=null!=(l=null!=t?t.group:t)?l.language:l)?l.id:l,{name:"rtlLanguage",hash:{},data:s}),{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.program(6,s,0),data:s}))?l:"")+'">\n        <pre>'+(null!=(l=(n.parseEmbeddedMedia||t&&t.parseEmbeddedMedia||o).call(r,null!=t?t.text:t,720,{name:"parseEmbeddedMedia",hash:{},data:s}))?l:"")+"</pre>\n"+(null!=(l=(n.ifequal||t&&t.ifequal||o).call(r,null!=(l=null!=t?t.group:t)?l.id:l,"121343796",{name:"ifequal",hash:{},fn:e.program(43,s,0),inverse:e.program(46,s,0),data:s}))?l:"")+'    </div>\n\n    <div class="col-xs-10 col-xs-offset-1 col-sm-10 col-sm-offset-1 col-md-4 col-md-offset-0 col-lg-3 col-lg-offset-0 right-rail">\n'+(null!=(l=n.if.call(r,null!=t?t.firstPage:t,{name:"if",hash:{},fn:e.program(50,s,0),inverse:e.program(52,s,0),data:s}))?l:"")+"     </div>\n</div>\n"},37:function(e,t,n,a,s){return" height-zero"},39:function(e,t,n,a,s){return" first-page"},41:function(e,t,n,a,s){return" last-page"},43:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.firstPage:t,{name:"if",hash:{},fn:e.program(44,s,0),inverse:e.noop,data:s}))?l:""},44:function(e,t,n,a,s){var l;return"                "+(null!=(l=(n.advertisement||t&&t.advertisement||n.helperMissing).call(null!=t?t:e.nullContext||{},{name:"advertisement",hash:{storyGroup:null!=t?t.group:t,lazy:!1,experience:"reading",unit:"outstream_video"},data:s}))?l:"")+"\n"},46:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||n.helperMissing).call(i,"OUTSTREAM_ELIGIBLE",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(47,s,0),inverse:e.noop,data:s}))?l:""},47:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.firstPage:t,{name:"if",hash:{},fn:e.program(48,s,0),inverse:e.noop,data:s}))?l:""},48:function(e,t,n,a,s){var l;return"                    "+(null!=(l=(n.advertisement||t&&t.advertisement||n.helperMissing).call(null!=t?t:e.nullContext||{},{name:"advertisement",hash:{storyGroup:null!=t?t.group:t,lazy:!1,experience:"reading",unit:"outstream_video"},data:s}))?l:"")+"\n"},50:function(e,t,n,a,s){var l;return(null!=(l=e.invokePartial(a["core.story_reading.part_similar"],t,{name:"core.story_reading.part_similar",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"\n"},52:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(53,s,0),inverse:e.program(55,s,0),data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},53:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{adTextClass:"panel-title hidden-md hidden-lg",adText:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.lastPage:t,"",(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),{name:"ternary",hash:{},data:s}),storyGroup:null!=t?t.group:t,lazy:!0,tryHb:!0,adzerk:!0,experience:"reading",parentClass:"reading-widget col-xs-12",unit:"readinglong_mid"},data:s}))?l:"")+"\n"},55:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{adTextClass:"panel-title hidden-md hidden-lg",adText:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.lastPage:t,"",(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),{name:"ternary",hash:{},data:s}),storyGroup:null!=t?t.group:t,lazy:!0,tryHb:!0,adzerk:!0,experience:"reading",parentClass:"reading-widget col-xs-12",unit:"readinglong_mid_loggedout"},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return"\n"+(null!=(l=(n.isDevice||t&&t.isDevice||n.helperMissing).call(null!=t?t:e.nullContext||{},"mobile",{name:"isDevice",hash:{},fn:e.program(1,s,0),inverse:e.program(36,s,0),data:s}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"      "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{adTextClass:"panel-title hidden-md hidden-lg",adText:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"",(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),{name:"ternary",hash:{},data:s}),storyGroup:null!=t?t.group:t,lazy:!0,tryHb:!0,adzerk:!0,experience:"reading",parentClass:"reading-widget col-xs-12",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_top","readinglong_top",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"    "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adTextClass:"panel-title hidden-md hidden-lg",adText:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"",(n.trans||t&&t.trans||r).call(i,"Story continues below",{name:"trans",hash:{},data:s}),{name:"ternary",hash:{},data:s}),storyGroup:null!=t?t.group:t,lazy:!0,adzerk:!0,experience:"reading",parentClass:"reading-widget col-xs-12",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_top_loggedout","readinglong_top_loggedout",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},5:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'    <div class="reading-widget hidden-xxs col-xs-12 col-sm-12 col-md-12 col-lg-12 hidden promoted-stories-container">\n      <h4 class="panel-title">'+r((n.trans||t&&t.trans||i).call(l,"Promoted stories",{name:"trans",hash:{},data:s}))+'</h4>\n      <div id="similar-stories" class="promoted-stories"></div>\n    </div>\n    <div class="reading-widget hidden-xxs col-xs-12 col-sm-12 col-md-12 col-lg-12 hidden similar-stories-container">\n      <h4 class="panel-title">'+r((n.trans||t&&t.trans||i).call(l,"You'll also like",{name:"trans",hash:{},data:s}))+'</h4>\n      <div id="similar-stories" class="similar-stories"></div>\n    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'\n<div class="row">\n'+(null!=(l=n.unless.call(i,null!=t?t.anonymousUser:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.anonymousUser:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n\n"+(null!=(l=n.unless.call(i,null!=t?t.isMicroPart:t,{name:"unless",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return"<div class='col-xs-12 col-sm-10 col-sm-offset-1 col-md-7 col-md-offset-1 col-lg-6 col-lg-offset-3'>\n  <header class='panel panel-reading'>\n    <h3 class=\"part-restart-chapter\">"+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h3>  \n    <a href='"+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+"' class='on-navigate restart-part'>\n      <div class='part-title'>\n        "+c((n.trans||t&&t.trans||o).call(r,"Start from the beginning",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-up",12,"wp-neutral-2","up-icon pull-right",{name:"iconify",hash:{},data:s}))?l:"")+"\n      </div>\n    </a>\n  </header>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){return'<div class="discover-module recommended-stories-view"></div>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.nextPage:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l;return'    <a class="on-navigate" href="'+e.escapeExpression((n.formatStoryUrl||t&&t.formatStoryUrl||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.nextPart:t)?l.url:l,{name:"formatStoryUrl",hash:{},data:s}))+'">\n'},4:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <a class="on-load-more-page load-more-page next-up grey" href="'+c("function"==typeof(i=null!=(i=n.nextPage||(null!=t?t.nextPage:t))?i:o)?i.call(r,{name:"nextPage",hash:{},data:s}):i)+'">\n            '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||o).call(r,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{color:"wp-neutral-2"},data:s}))?l:"")+"\n            <span>"+c((n.trans||t&&t.trans||o).call(r,"Load More Pages",{name:"trans",hash:{},data:s}))+"...</span>\n        </a>\n"},6:function(e,t,n,a,s){var l,i=e.escapeExpression,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'        <a href="'+i(e.lambda(null!=(l=null!=t?t.nextPart:t)?l.url:l,t))+'" class="on-navigate next-part-link">\n          <div class="next-up next-part orange'+(null!=(l=n.if.call(r,null!=t?t.nextPage:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'">\n            <span>'+i((n.trans||t&&t.trans||o).call(r,"Continue reading next part",{name:"trans",hash:{},data:s}))+"</span>\n            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-right",16,"wp-neutral-5","next-up-icon",{name:"iconify",hash:{},data:s}))?l:"")+"\n          </div>\n        </a>\n"},7:function(e,t,n,a,s){return" hidden"},9:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'        <div class="next-up next-part orange'+(null!=(l=n.if.call(i,null!=t?t.nextPage:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'">\n            <div class="next-up-title">\n'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.group:t)?l.completed:l,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.program(12,s,0),data:s}))?l:"")+"                <strong>"+e.escapeExpression(e.lambda(null!=(l=null!=t?t.group:t)?l.title:l,t))+"</strong>\n"+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.group:t)?l.completed:l,{name:"unless",hash:{},fn:e.program(14,s,0),inverse:e.noop,data:s}))?l:"")+"            </div>\n        </div>\n"},10:function(e,t,n,a,s){return"                    <div>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Finished Reading",{name:"trans",hash:{},data:s}))+"</div>\n"},12:function(e,t,n,a,s){return"                    <div>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"To be Continued...",{name:"trans",hash:{},data:s}))+"</div>\n"},14:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"                    <div>"+e.escapeExpression((n.trans||t&&t.trans||i).call(l,"Last updated: %s",(n.fromNow||t&&t.fromNow||i).call(l,null!=t?t.modifyDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}),{name:"trans",hash:{},data:s}))+"</div>\n"},16:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.nextPage:t,{name:"unless",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:""},17:function(e,t,n,a,s){return"    </a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"\n"+(null!=(l=n.if.call(i,null!=t?t.nextPart:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'<div id="footer">\n'+(null!=(l=n.if.call(i,null!=t?t.nextPage:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.nextPart:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+"</div>\n"+(null!=(l=n.if.call(i,null!=t?t.nextPart:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'            <div class="supported-marker">\n                '+r((n.connectImage||t&&t.connectImage||i).call(l,"paid-content/supported-stories-badge.svg","Paid Stories Badge",{name:"connectImage",hash:{},data:s}))+"\n                "+r((n.trans||t&&t.trans||i).call(l,"Paid Story",{name:"trans",hash:{},data:s}))+"\n            </div>\n"},3:function(e,t,n,a,s){var l;return null!=(l=(n.greaterThan||t&&t.greaterThan||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.freePartsUntilPaywall:t,-1,{name:"greaterThan",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:""},4:function(e,t,n,a,s){var l;return'                <div class="free-parts-warning">\n'+(null!=(l=(n.ifequal||t&&t.ifequal||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.freePartsUntilPaywall:t,0,{name:"ifequal",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+"                </div>\n"},5:function(e,t,n,a,s){return"                        "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"This is the last free part",{name:"trans",hash:{},data:s}))+"\n"},7:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"                        "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"There is %s more free part","There are %s more free parts",null!=t?t.freePartsUntilPaywall:t,{name:"ngettext",hash:{},data:s}),null!=t?t.freePartsUntilPaywall:t,{name:"sprintf",hash:{},data:s}))+"\n"},9:function(e,t,n,a,s){return'<span class="deleted-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Deleted",{name:"trans",hash:{},data:s}))+")</span>"},11:function(e,t,n,a,s){return'<span class="draft-tag">('+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Draft",{name:"trans",hash:{},data:s}))+")</span>"},13:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                  data-toggle="tooltip" data-placement="bottom" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Read","%s Reads",(n.format||t&&t.format||i).call(l,null!=t?t.readCount:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.readCount:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n'},15:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                  data-toggle="tooltip" data-placement="bottom" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Vote","%s Votes",(n.format||t&&t.format||i).call(l,null!=t?t.voteCount:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.voteCount:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n'},17:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return'                  data-toggle="tooltip" data-placement="bottom" title="'+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Comment","%s Comments",(n.format||t&&t.format||i).call(l,null!=t?t.commentCount:t,{name:"format",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.format||t&&t.format||i).call(l,null!=t?t.commentCount:t,{name:"format",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+'"\n'},19:function(e,t,n,a,s){return" hidden-lg"},21:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'                <li class="story-extra dedication btn btn-link">\n                    '+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Dedicated to",{name:"trans",hash:{},data:s}))+"\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.dedication:t)?l.url:l,{name:"if",hash:{},fn:e.program(22,s,0),inverse:e.program(24,s,0),data:s}))?l:"")+"                </li>\n"},22:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'                        <a href="'+r(i(null!=(l=null!=t?t.dedication:t)?l.url:l,t))+'">'+r(i(null!=(l=null!=t?t.dedication:t)?l.name:l,t))+"</a>\n"},24:function(e,t,n,a,s){var l;return"                        <strong>"+e.escapeExpression(e.lambda(null!=(l=null!=t?t.dedication:t)?l.name:l,t))+"</strong>\n"},26:function(e,t,n,a,s){var l;return null!=(l=(n.isDevice||t&&t.isDevice||n.helperMissing).call(null!=t?t:e.nullContext||{},"mobile",{name:"isDevice",hash:{},fn:e.program(27,s,0),inverse:e.noop,data:s}))?l:""},27:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(28,s,0),inverse:e.program(30,s,0),data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},28:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",parentClass:"header-advertisement col-xs-12",experience:"reading",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_top_mweb","readinglong_top_mweb",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},30:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                    "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,lazy:!0,storyGroup:null!=t?t.group:t,adTextClass:"panel-title",parentClass:"header-advertisement col-xs-12",experience:"reading",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_top_loggedout_mweb","readinglong_top_loggedout_mweb",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="col-sm-12 col-md-7 col-lg-8 col-md-offset-1 col-lg-offset-2">\n    <header class="panel panel-reading text-center">\n'+(null!=(l=n.if.call(r,null!=(l=null!=t?t.group:t)?l.isPaywalled:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(r,null!=t?t.isPaidPreview:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n        <h2>"+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"\n            "+(null!=(l=n.if.call(r,null!=t?t.deleted:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+"\n            "+(null!=(l=n.if.call(r,null!=t?t.draft:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:"")+'</h2>\n\n        <div class="story-stats">\n            <span class="reads"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||o).call(r,null!=t?t.readCount:t,999,{name:"greaterThan",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"                >\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+'\n            </span>\n\n            <span class="votes"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||o).call(r,null!=t?t.voteCount:t,999,{name:"greaterThan",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:"")+"                >\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+'\n            </span>\n\n            <span class="comments on-comments"\n'+(null!=(l=(n.greaterThan||t&&t.greaterThan||o).call(r,null!=t?t.commentCount:t,999,{name:"greaterThan",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:"")+"                >\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-comment",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n                <a href='#'>"+c((n.count||t&&t.count||o).call(r,null!=t?t.commentCount:t,{name:"count",hash:{},data:s}))+'</a>\n            </span>\n        </div>\n\n        <div class="author'+(null!=(l=n.unless.call(r,null!=(l=null!=t?t.nextPart:t)?l.isBlocked:l,{name:"unless",hash:{},fn:e.program(19,s,0),inverse:e.noop,data:s}))?l:"")+'">\n            <a class="on-navigate avatar avatar-sm center-block" href="/user/'+c(e.lambda(null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,t))+'">\n                <img class="on-hover" data-toggle="tooltip" data-placement="right" title="'+c((n.trans||t&&t.trans||o).call(r,"Writer: %s",null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,{name:"trans",hash:{},data:s}))+'" alt="'+c((n.trans||t&&t.trans||o).call(r,"Writer: %s",null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,{name:"trans",hash:{},data:s}))+'" src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.avatar:l,16,{name:"resizeAvatar",hash:{},data:s}))+'">\n            </a>\n            '+(null!=(l=(n.trans||t&&t.trans||o).call(r,"by <a class='on-navigate' href='/user/%s'>%s</a>",null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,{name:"trans",hash:{},data:s}))?l:"")+'</a>\n        </div>\n\n\n        <div class="meta">\n            <ul class="story-extras">\n'+(null!=(l=n.if.call(r,null!=(l=null!=t?t.dedication:t)?l.name:l,{name:"if",hash:{},fn:e.program(21,s,0),inverse:e.noop,data:s}))?l:"")+"            </ul>\n        </div>\n\n"+(null!=(l=(n.ifequal||t&&t.ifequal||o).call(r,null!=(l=null!=t?t.group:t)?l.id:l,"202734220",{name:"ifequal",hash:{},fn:e.program(26,s,0),inverse:e.noop,data:s}))?l:"")+"\n    </header>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'        <div class="paywall-container">\n            '+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"StoryPartPaywall",null!=t?t.id:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n        </div>\n"},3:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c='    <div class="'+(null!=(l=n.if.call(o,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'">\n\n        <div class="row part-content">\n            <div class="col-sm-10 col-sm-offset-1 col-md-7 col-md-offset-1 col-lg-6 col-lg-offset-3 part-col part-navigation">\n'+(null!=(l=n.unless.call(o,null!=(l=null!=t?t.nextPart:t)?l.isBlocked:l,{name:"unless",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+'            </div>\n        </div>\n\n        <div class="row part-content">\n            <div class="col-sm-10 col-sm-offset-1 col-md-7 col-md-offset-1 col-lg-6 col-lg-offset-3 part-col">\n'+(null!=(l=e.invokePartial(a["core.story_reading.part_actions"],t,{name:"core.story_reading.part_actions",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'            </div>\n        </div>\n\n        <div class="row part-content">\n            <div class="col-sm-10 col-sm-offset-1 col-md-7 col-md-offset-1 col-lg-6 col-lg-offset-3 part-col">\n'+(null!=(l=e.invokePartial(a["core.story_reading.part_comments"],t,{name:"core.story_reading.part_comments",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'            </div>\n            <div class="col-xs-10 col-xs-offset-1 col-sm-10 col-sm-offset-1 col-md-4 col-md-offset-0 col-lg-3 col-lg-offset-0 comments right-rail">\n                <div class="reading-widget comments-ad-unit"></div>\n            </div>\n        </div>\n    </div>\n\n'+(null!=(l=n.if.call(o,null!=t?t.anonymousUser:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.program(11,s,0),data:s}))?l:"")+"\n";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(13,s,0),inverse:e.program(15,s,0),data:s},l="function"==typeof i?i.call(o,r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(c+=l),c},4:function(e,t,n,a,s){return"container"},6:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.story_reading.part_navigation"],t,{name:"core.story_reading.part_navigation",data:s,indent:"                    ",helpers:n,partials:a,decorators:e.decorators}))?l:""},8:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isMicroPart:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:""},9:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'                <div class="hidden container promoted-stories-container similar-stories-footer">\n                    <div class="row">\n                        <div class="discover-rows">\n                            <div id="similar-stories" class="promoted-stories">\n                                <div class="section-heading">'+r((n.trans||t&&t.trans||i).call(l,"Promoted stories",{name:"trans",hash:{},data:s}))+'</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="hidden container similar-stories-container similar-stories-footer">\n                    <div class="row">\n                        <div class="discover-rows">\n                            <div id="similar-stories" class="similar-stories">\n                                <div class="section-heading">'+r((n.trans||t&&t.trans||i).call(l,"You'll also like",{name:"trans",hash:{},data:s}))+"</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n"},11:function(e,t,n,a,s){var l;return'        <div class="part-recommendations-container">\n            <div class="row">\n                <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-11 col-md-offset-1 col-lg-11 col-lg-offset-1 discover-rows">\n                    <div class="collection">\n                        <div class="discover-module promoted-recommended-stories-view hidden"></div>\n                        <div class="colWrap no-promoted-section">\n'+(null!=(l=e.invokePartial(a["core.story_reading.part_recommendations"],t,{name:"core.story_reading.part_recommendations",data:s,indent:"                            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n"},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"        "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,storyGroup:null!=t?t.group:t,lazy:!0,experience:"reading",parentClass:"ad-unit",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_bottom","readinglong_bottom",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},15:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"        "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,storyGroup:null!=t?t.group:t,lazy:!0,experience:"reading",parentClass:"ad-unit",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_bottom_loggedout","readinglong_bottom_loggedout",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},17:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c="";return i=null!=(i=n.isLoggedIn||(null!=t?t.isLoggedIn:t))?i:n.helperMissing,r={name:"isLoggedIn",hash:{},fn:e.program(18,s,0),inverse:e.program(20,s,0),data:s},l="function"==typeof i?i.call(o,r):i,n.isLoggedIn||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(c+=l),c+"\n"+(null!=(l=n.unless.call(o,null!=(l=null!=t?t.nextPart:t)?l.isBlocked:l,{name:"unless",hash:{},fn:e.program(22,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <div class="container">\n        <div class="row part-content">\n            <div class="col-sm-10 col-sm-offset-1 col-md-7 col-md-offset-1 col-lg-6 col-lg-offset-3">\n'+(null!=(l=e.invokePartial(a["core.story_reading.part_actions"],t,{name:"core.story_reading.part_actions",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'            </div>\n        </div>\n    </div>\n\n    <div class="container">\n        <div class="row part-content">\n            <div class="col-sm-10 col-sm-offset-1 col-md-7 col-md-offset-1 col-lg-6 col-lg-offset-3">\n'+(null!=(l=e.invokePartial(a["core.story_reading.part_comments"],t,{name:"core.story_reading.part_comments",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </div>\n        </div>\n    </div>\n\n"+(null!=(l=n.if.call(o,null!=t?t.anonymousUser:t,{name:"if",hash:{},fn:e.program(24,s,0),inverse:e.program(26,s,0),data:s}))?l:"")},18:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"        "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,storyGroup:null!=t?t.group:t,lazy:!0,experience:"reading",parentClass:"center-block ad-unit",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_bottom_mweb","readinglong_bottom_mweb",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},20:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"        "+(null!=(l=(n.advertisement||t&&t.advertisement||r).call(i,{name:"advertisement",hash:{tryHb:!0,adzerk:!0,storyGroup:null!=t?t.group:t,lazy:!0,experience:"reading",parentClass:"center-block ad-unit",unit:(n.ternary||t&&t.ternary||r).call(i,null!=t?t.isMicroPart:t,"readingshort_bottom_loggedout_mweb","readinglong_bottom_loggedout_mweb",{name:"ternary",hash:{},data:s})},data:s}))?l:"")+"\n"},22:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.story_reading.part_navigation"],t,{name:"core.story_reading.part_navigation",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:""},24:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'        <div class="hidden promoted-stories-container">\n            <h4 class="section-heading">'+r((n.trans||t&&t.trans||i).call(l,"Promoted stories",{name:"trans",hash:{},data:s}))+'</h4>\n            <div id="similar-stories" class="promoted-stories"></div>\n        </div>\n        <div class="hidden similar-stories-container">\n            <h4 class="section-heading">'+r((n.trans||t&&t.trans||i).call(l,"You'll also like",{name:"trans",hash:{},data:s}))+'</h4>\n            <div id="similar-stories" class="similar-stories"></div>\n        </div>\n'},26:function(e,t,n,a,s){var l;return'        <div class="part-recommendations-container promoted-recommended-stories container hidden">\n            <div class="row">\n                <div class="col-sm-10 col-sm-offset-1 col-md-12 col-md-offset-0 discover-rows">\n                    <div class="collection">\n                        <div class="discover-module promoted-recommended-stories-view"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="part-recommendations-container container">\n            <div class="row">\n                <div class="col-sm-10 col-sm-offset-1 col-md-12 col-md-offset-0 discover-rows">\n                    <div class="collection">\n'+(null!=(l=e.invokePartial(a["core.story_reading.part_recommendations"],t,{name:"core.story_reading.part_recommendations",data:s,indent:"                        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                    </div>\n                </div>\n            </div>\n        </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"<footer>\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.nextPart:t)?l.isBlocked:l,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n\n"+(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:"")+"</footer>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.story_reading.part_header_new"],t,{name:"core.story_reading.part_header_new",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:""},3:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.story_reading.part_restart"],t,{name:"core.story_reading.part_restart",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:""},5:function(e,t,n,a,s){var l;return'        <div class="paywall-container">\n            '+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"StoryPartPaywall",null!=t?t.id:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n        </div>\n"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'        <div class="container">\n            <div oncontextmenu="return false;" class="row part-content">\n                <div class="col-md-1 col-lg-3 hidden-sm hidden-xs'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.nextPart:t)?l.isBlocked:l,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+' left-rail">\n'+(null!=(l=n.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+"                </div>\n\n"+(null!=(l=e.invokePartial(a["core.story_reading.part_text_container"],t,{name:"core.story_reading.part_text_container",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'                <div id="tooltip-container"></div>\n            </div>\n        </div>\n'},8:function(e,t,n,a,s){return" hidden"},10:function(e,t,n,a,s){var l;return'                        <div id="sticky-nav">\n'+(null!=(l=e.invokePartial(a["desktop.story_reading.part_author_info"],t,{name:"desktop.story_reading.part_author_info",data:s,indent:"                            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+(null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.deleted:t,{name:"unless",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:"")+"                        </div>\n"},11:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.components.share_tools"],t,{name:"core.components.share_tools",data:s,indent:"                                ",helpers:n,partials:a,decorators:e.decorators}))?l:""},13:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.story_reading.part_footer_new"],t,{name:"core.story_reading.part_footer_new",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:""},15:function(e,t,n,a,s){var l;return"    "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"WPModal","modal-reading",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<article id="sp'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'"\n         data-part-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'"\n         data-part-url="'+c("function"==typeof(i=null!=(i=n.url||(null!=t?t.url:t))?i:o)?i.call(r,{name:"url",hash:{},data:s}):i)+'"\n         class="story-part">\n    <div id="media-container">\n'+(null!=(l=e.invokePartial(a["core.story_reading.media_banner"],t,{name:"core.story_reading.media_banner",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'    </div>\n\n    <div class="container">\n        <div class="row part-header">\n'+(null!=(l=n.if.call(r,null!=t?t.firstPage:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"        </div>\n    </div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.currentPartIsBlocked:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+"\n"+(null!=(l=n.unless.call(r,null!=t?t.currentPartIsBlocked:t,{name:"unless",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+"</article>\n\n"+(null!=(l=n.if.call(r,(n.isTestGroup||t&&t.isTestGroup||o).call(r,"PAID_ONBOARDING",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(15,s,0),inverse:e.noop,data:s}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'class="container"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div id="comments-container" '+(null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.isDesktop:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'>\n    <div class="row">\n        <div class="col-sm-12 col-md-12 col-lg-12 col-lg-offset-0">\n            <section id="comments">\n                <div class="comments">\n                </div>\n            </section>\n        </div>\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.group:t)?l.draft:l,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u='\n    <div class="button-group relative inline-block">\n        <button class="btn btn-text btn-md dropdown-toggle btn-story-lists" data-story-id="'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.group:t)?l.id:l,t))+'">\n            '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n            <span class="btn-library-text">'+(null!=(l=(n.trans||t&&t.trans||c).call(o,"Add",{name:"trans",hash:{},data:s}))?l:"")+"</span>\n        </button>\n";return i=null!=(i=n.group||(null!=t?t.group:t))?i:c,r={name:"group",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.group||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(u+=l),u+"    </div>\n    "},3:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.components.add_to_library_dropdown"],t,{name:"core.components.add_to_library_dropdown",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:""},5:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.draft:t,{name:"unless",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:""},6:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'\n    <div class="button-group inline-block">\n        <button class="btn btn-text btn-md on-vote footer-vote" data-story-id="'+e.escapeExpression("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n'+(null!=(l=n.if.call(r,null!=t?t.voted:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+'        </button>\n    </div>\n    </div>\n\n    <div class="share-tools scrolling">\n'+(null!=(l=n.each.call(r,null!=t?t.socialShareVisible:t,{name:"each",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:"")+'\n        <div class="button-group relative inline-block more">\n            <button class="btn btn-no-background dropdown-toggle btn-left-align" data-toggle="dropdown">\n                '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-more",18,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n            </button>\n            <div class="triangle"></div>\n            <ul class="dropdown-menu align-right">\n'+(null!=(l=n.each.call(r,null!=t?t.socialShareHidden:t,{name:"each",hash:{},fn:e.program(14,s,0),inverse:e.noop,data:s}))?l:"")+"            </ul>\n        </div>\n    </div>\n"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+'\n                <span class="vote-text">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Voted",{name:"trans",hash:{},data:s}))+"</span>\n"},9:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"                "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n                <span class="vote-text">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Vote",{name:"trans",hash:{},data:s}))+"</span>\n"},11:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'            <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,18,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n            </a>\n"},12:function(e,t,n,a,s){return' social-share" target="_blank'},14:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                    <li>\n                        <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" rel="nofollow" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n                            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,20,"wp-neutral-2","pull-left",{name:"iconify",hash:{},data:s}))?l:"")+" "+c("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:o)?i.call(r,{name:"label",hash:{},data:s}):i)+"\n                        </a>\n                    </li>\n"},16:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'    <a href="'+o((n.addProtocolToUrl||t&&t.addProtocolToUrl||r).call(i,null!=(l=null!=t?t.source:t)?l.url:l,{name:"addProtocolToUrl",hash:{},data:s}))+'" class="btn btn-text btn-md" target="_blank" title="'+o(c(null!=(l=null!=t?t.source:t)?l.label:l,t))+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-link",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o(c(null!=(l=null!=t?t.source:t)?l.label:l,t))+"\n    </a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<div id="part-footer-actions" class="actions" role="menu">\n\n    <div class="footer-actions">\n    '+(null!=(l=n.unless.call(i,null!=(l=null!=t?t.group:t)?l.deleted:l,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n\n    "+(null!=(l=n.unless.call(i,null!=t?t.deleted:t,{name:"unless",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"\n\n"+(null!=(l=n.if.call(i,null!=(l=null!=t?t.source:t)?l.url:l,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")+"\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" hide-marker"},3:function(e,t,n,a,s){return"    "+e.escapeExpression((n.count||t&&t.count||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.commentCount:t,{name:"count",hash:{},data:s}))+"\n"},5:function(e,t,n,a,s){return"    +\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<span class="comment-marker'+(null!=(l=n.unless.call(i,null!=t?t.commentCount:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+' on-inline-comments-modal">\n  <span class="num-comment">\n'+(null!=(l=n.if.call(i,null!=t?t.commentCount:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+"  </span>\n  "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(i,"fa-comment-count",28,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n</span>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" desktop"},3:function(e,t,n,a,s){return" row"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div id="out-of-geo-banner" class="hidden'+(null!=(l=n.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'">\n    <div class="banner-content">\n        <span class="geo-info">\n            '+(null!=(l=(n.trans||t&&t.trans||r).call(i,"You won’t be able to read this whole story since Paid Stories aren’t available in your country yet.",{name:"trans",hash:{},data:s}))?l:"")+'\n        </span>\n        <button class="dismiss-geo-banner btn btn-no-background">\n            '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n        </button>\n    </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=c(n(5)),s=c(n(459)),l=c(n(6)),i=c(n(460)),r=c(n(1)),o=c(n(461));function c(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,c,u){c.add("StoryReading",c.views.CoreStoryReading.extend({template:o.default,isDesktop:!0,partials:_.extend(c.views.CoreStoryReading.prototype.partials,{"core.shared.bottom_banner":function(){return""},"desktop.components.modal.share_embed":r.default,"desktop.story_reading.part_author_info":i.default,"core.components.add_to_library_dropdown":l.default,"core.components.share_tools":s.default,"core.story_reading.cta":function(){return""}}),events:_.extend(c.views.CoreStoryReading.prototype.events,{"mouseenter .on-hover":"onHover","mouseexit  .on-hover":"offHover","tap   .on-comments":"stopEvent","click .on-comments":"onComments","mouseenter .panel-reading [data-media-type=image]":"onImageHoverOn","mouseleave .panel-reading [data-media-type=image]":"onImageHoverOut","tap        .on-report-image":"onReportImage","click      .on-report-image":"stopEvent","tap        .on-report-image-banner":"onReportImageBanner","click      .on-report-image-banner":"stopEvent","tap        .on-ban-image-inline":"onBanImage","click      .on-ban-image-inline":"stopEvent","tap    .panel-reading .fixed-ratio[data-media-type=image] img":"onShowFullSizeImage","click  .panel-reading .fixed-ratio[data-media-type=image] img":"stopEvent","tap    .panel-reading .fixed-ratio[data-media-type=image] .image":"onShowFullSizeImage","click  .panel-reading .fixed-ratio[data-media-type=image] .image":"stopEvent","tap .on-full-size-banner":"onFullSizeBanner","click .on-full-size-banner":"stopEvent","dragstart .page":"detectTextDrag"}),regions:{},subviews:{funbar:c.views.StoryReadingFunbar,media:c.views.MediaBanner,comments:c.views.Comments,bottomBanner:c.views.BottomBanner},detectTextDrag:function(e){this.stopEvent(e)},initialize:function(e){_.bindAll(this,"trackWidgetStoryVisibility"),c.views.CoreStoryReading.prototype.initialize.apply(this,arguments),this.listenTo(c,"app:user:follow",this.onUpdateFollow),this.listenTo(c,"app:user:unfollow",this.onUpdateUnfollow)},render:function(){var s=this;c.views.CoreStoryReading.prototype.render.apply(this,arguments);var l,i=this,r=this.model.toJSON();if((_.get(e,"wattpad.testGroups.PAID_CONTENT")||!1)&&r.group.isPaywalled){var o=e.store.getState().paidMetadata;this.processPaidMetadata(r,o),r.onBuyCoins=function(){return s.onBuyCoins(r.blockedPart)}}r.text=this.options.storyText,r.firstPage=1===r.pageNumber,r.lastPage=r.pageNumber>=r.pages,r.nextPage=r.pageNumber<r.pages?r.url.replace(/\.(com|io)\/(.*)/,".$1/$2/page/"+(r.pageNumber+1)):"",r.isMicroPart=r.pages<2,r.isSmallPart=r.pages>=2&&r.pages<5,r.isMediumPart=r.pages>=5&&r.pages<12,r.isBigPart=r.pages>=12,r.group.category=_.find(r.group.categories,function(e){return e>0}),r.group.category&&(l=c.get("categories").get(r.group.category).get("name"));var d=c.get("device"),h={group:{id:r.group.id,title:r.group.title,cover:r.group.cover,category:l,description:r.group.description,tags:_.map(r.group.tags,function(e){return{name:e}}).concat([{name:l}]),completed:r.group.completed},part:{id:r.id,title:r.title,url:r.url},user:{twitter:r.group.user.twitter}},p=_.findIndex(r.group.parts,{url:r.url});p<r.group.parts.length-1&&(r.nextPart=r.group.parts[p+1]),r.isTablet=d.is.tablet,r.isDesktop=d.is.desktop;var m=this.socialLinks=this.buildSocialShareLinksForPart(h),f=[];f.push(m[0]),f.push(m[2]),r.socialShareHidden=m.splice(4,2),r.socialShareVisible=m,d.is.mobile&&r.socialShareVisible.pop(),r.mediaShare=f,d.is.mobile||r.socialShareHidden.push({name:"report",icon:"fa-warning",label:n.trans("Report Story"),href:n.sprintf("http://www.wattpad.com/help/content?message=I+am+reporting+the+following+content%3A%0A%s&story_link=%s",[e.encodeURIComponent(h.part.url),e.encodeURIComponent(h.part.url)])}),r.anonymousUser=!t.utils.currentUser().authenticated(),_.defer(function(){if(r.currentPartIsBlocked||(i.initAffix(".left-rail",".part-content",128),$(e).on("scroll",function(){i.affixOnScroll()})),i.$(".author [data-toggle=tooltip]").tooltip(),i.$(".meta [data-toggle=tooltip]").tooltip(),!i.model.get("deleted")){r.descCharLimit=r.isDesktop?170:130;var n=new c.views.PromotedStoryItem({storyId:i.model.get("group").id,baseStoryCategory:i.model.get("group").categories[0],zoneIds:r.isMicroPart?[170121]:[155799],template:a.default,fromPage:"storyReading",descCharLimit:r.descCharLimit,promotedEl:".promoted-stories-container"});if(i.setRegion(".promoted-stories",n.render()),i.$(".similar-stories").length){var s=new c.views.StoriesSimilar({filter:"similar",storyId:i.model.get("group").id,limit:r.pages>1?7:2,currentStory:i.model,fromStoryReading:!0,showDescription:!0,alwaysFetch:!0});i.setRegion(".similar-stories",s.render())}if(i.trackedSimilarStoryIds={},$(e).on("scroll",i.trackWidgetStoryVisibility),i.$(".similar-stories-container").removeClass("hidden"),t.utils.currentUser().authenticated()){n=new c.views.PromotedStoryItem({storyId:i.model.get("group").id,baseStoryCategory:i.model.get("group").categories[0],zoneIds:[170121],fromPage:"storyReading",promotedEl:".promoted-recommended-stories-view"});i.setRegion(".promoted-recommended-stories-view",n.render());var l=new c.collections.RecommendedStories([],{username:t.utils.currentUser().get("username"),limit:8});Promise.resolve(l.fetchNextSet()).then(function(){var e={items:{stories:l.toJSON()}},t=new u.Model;t.set("data",e),t.set("type","storiesReadingRecommended");var n=new c.views.DiscoverModule({model:t,experience:"story_reading"});n.setElement($(".recommended-stories-view")),n.render()})}}}),r.isDesktop=this.isDesktop,t.utils.setCookie("signupFrom","story_reading",0,e.location.hostname.replace("www",""));var g=n.publishedPartsInStory(r.group);return e.te.push("event","reading",null,null,"start",{storyid:r.group.id,partid:r.id,published_parts:g.length}),this.$el.html(this.template(r)),this.setRegions(),this.options.isPostPublishModal&&_.defer(function(){i.showPostPublishModal(i.options.isFirstPublish||!1)}),this},showPostPublishModal:function(t){t&&e.te.push("event","modal","story_publish","broadcast_message","view",{storyid:this.model.get("group").id});var n=new c.views.PostPublishModal({model:this.model,links:this.socialLinks.slice(),showBroadcastMessaging:t});this.$("#post-publish-modal").empty().append(n.render().$el),n.showModal()},onAddToListsReady:function(t,n){this.clearLists(),t.parent(".button-group").addClass("open"),t.removeClass("on-lists-add-clicked"),t.addClass("on-dismiss-lists"),$(e.document).one("click.bs.dropdown.data-api",{context:this},this.clearLists)},clearLists:function(t){var n=!1;if(t&&3===t.which)return!1;var a=null;t&&(a=$(t.target));var s=$(".btn-story-lists");if(_.each(s,function(e){var t=$(e);a&&0!==t.parent(".button-group").find(a).length?a&&(n=!0):(t.parent(".button-group").removeClass("open"),t.removeClass("on-dismiss-lists"),t.addClass("on-lists-add-clicked"))}),n){var l=t.data.context;$(e.document).one("click.bs.dropdown.data-api",{context:l},l.clearLists)}return!0},onDismissLists:function(e){var t=$(e.currentTarget);t.parent(".button-group").removeClass("open"),t.removeClass("on-dismiss-lists"),t.addClass("on-lists-add-clicked")},buildSocialShareLinksForPart:function(e){return[{name:"post-to-profile",icon:"fa-user",nopopup:!0,label:t.utils.trans("Post to Your Profile"),href:"/"},{name:"embed",icon:"fa-code",nopopup:!0,label:t.utils.trans("Embed Story"),href:t.utils.sprintf("https://embed.wattpad.com/story/%s",[e.group.id])}]},onShareEmbed:function(e){var t=$("#generic-modal"),a=this;n.stopEvent(e),t.find(".modal-dialog").addClass("embed").find(".modal-body").html(this.partials["desktop.components.modal.share_embed"]({id:this.model.get("group").id,close:!0}));var s=t.find(".on-select").on("tap",this.onSelectEmbedUrl),l=t.find("iframe");l.attr("src",l.data("href"));t.modal("show").on("hide.bs.modal",function e(){s.off("tap",a.onSelectEmbedUrl),t.off("hide.bs.modal",e)})},onSelectEmbedUrl:function(){var t=e.document.createRange();t.selectNode(e.document.getElementById("embed-url")),e.getSelection().addRange(t)},onComments:function(t){var n,a=this;this.lockScrollUpdate(),_.defer(function(){n=a.$("#comments").offset().top,e.scrollTo(e.scrollX,n-Math.min(.5*e.innerHeight))})},onHover:function(e){$(e.currentTarget).tooltip("show")},offHover:function(e){$(e.currentTarget).tooltip("show")},onImageHoverOn:function(e){var t=$(e.currentTarget),n=t.find("img"),a=n.position(),s=n.width(),l=n.height(),i=$(".image-options-container").clone(),r=i.find(".share-pinterest"),o=r.attr("href"),c=n.attr("src");o=this.preparePinterestUrl(c,o),r.attr("href",o),t.append('<div class="image-options">'+i.html()+"</div>");var u=t.find(".image-options");u.css({top:a.top+l,left:a.left}),u.width(s),u.removeClass("hide")},onImageHoverOut:function(e){this.$(".image-options").remove()},onBanImage:function(e){var t=$(e.currentTarget).parents("p").find("img").attr("src"),a=this.model.get("id"),s=this.model.get("meta").url;return Promise.resolve($.ajax({url:"/apiv2/banned_image_notification",type:"POST",data:{storyPartId:a,imageUrl:t,storyPartUrl:s}})).then(function(e){if(!e.success)throw e.error;return n.showToast(n.trans("Image ban notification sent successfully.")),e}).catch(function(e){var t="string"==typeof e?e:n.trans("Something went wrong, please try again.");return n.showToast(t),!1})},onReportImage:function(t){var a=$(t.currentTarget).parents("p").find("img").attr("src"),s=n.sprintf("http://www.wattpad.com/help/content/1?story_link=%s&media_link=%s",[e.encodeURIComponent(e.location.href),a]);return n.openPopup(s,n.trans("Report Story"),700,400)},onReportImageBanner:function(t){var a=$(".on-report-image-banner").parent().parent().siblings(".media-item").children("img").attr("src"),s=n.sprintf("http://www.wattpad.com/help/content/1?story_link=%s&media_link=%s",[e.encodeURIComponent(e.location.href),a]);return n.openPopup(s,n.trans("Report Story"),700,400)},onUpdateFollow:function(e){var t=this.$(this.followButton+"[data-target="+e+"]");t.removeClass("btn-white").addClass("btn-teal"),t.children(".fa").removeClass("fa-follow fa-wp-neutral-2").addClass("fa-following fa-wp-neutral-5"),t.children(".follow-text").text("Following")},onUpdateUnfollow:function(e){var t=this.$(this.followButton+"[data-target="+e+"]");t.removeClass("btn-teal").addClass("btn-white"),t.children(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-neutral-2"),t.children(".follow-text").text("Follow")},trackWidgetStoryVisibility:_.throttle(function(t){var a=$("#similar-stories .on-story-preview"),s=this.model.get("group").id,l=a.filter(":visible").length,i=this;l>0&&l===_.size(i.trackedSimilarStoryIds)?$(e).off("scroll",i.trackWidgetStoryVisibility):_.each(a,function(t){var a=$(t);if(n.isOnScreen(a,1)){var l=a.data("story-id");i.trackedSimilarStoryIds[l]||(e.te.push("event","reading","similar_stories","story","view",{current_storyid:s,storyid:l}),i.trackedSimilarStoryIds[l]=!0)}})},350),remove:function(){$(e).off("scroll",this.trackWidgetStoryVisibility),c.views.CoreStoryReading.prototype.remove.apply(this,arguments)},showFullSizeMedia:function(t,n){var a=$("#picture-viewer");t&&(a.find(".modal-dialog").css({margin:0,width:"100%"}),a.find(".modal-content").css("border","none"),a.find(".modal-body").css("padding",0),a.css({display:"block",width:t.width,height:t.height,left:t.left,top:t.top}),_.delay(function(){if(a.addClass("displayed"),a.find(".modal-dialog").css({margin:"",width:""}),a.find(".modal-content").css("border",""),a.find(".modal-body").css("padding",""),!n){var t=$(e).height(),s=a.find(".zoomed-image");s.data("original-height")>t&&s.css({"max-height":t})}a.css({top:"",left:"",width:"",height:""})}))},onShowFullSizeImage:function(e){c.views.CoreStoryReading.prototype.onShowFullSizeImage.apply(this,arguments);var t=e.currentTarget.getBoundingClientRect();this.showFullSizeMedia(t,!1)},onFullSizeBanner:function(e){c.views.CoreStoryReading.prototype.onFullSizeBanner.apply(this,arguments);var t=e.currentTarget.getBoundingClientRect();this.showFullSizeMedia(t,!0)}})),c.mixin(c.views.StoryReading,"MediaSharing","SocialSharing","AffixElement","VoteManagement","LibraryManagement","StoryInListsManagement","AuthPromptManagement","FacebookConnect","GoogleAuth","FollowManager","LazyAds","Highlighter")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="share-tools vertical hidden-xs hidden-sm">\n    <div class="title">'+o((n.trans||t&&t.trans||r).call(i,"Share",{name:"trans",hash:{},data:s}))+"</div>\n"+(null!=(l=n.each.call(i,null!=t?t.socialShareVisible:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <div class="button-group relative inline-block dropup">\n        <button class="btn btn-no-background dropdown-toggle btn-left-align" data-toggle="dropdown">\n            '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-more",24,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        </button>\n        <div class="triangle"></div>\n        <ul class="dropdown-menu">\n'+(null!=(l=n.each.call(i,null!=t?t.socialShareHidden:t,{name:"each",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'        </ul>\n    </div>\n</div>\n<div class="share-tools horizontal scrolling hidden-xs hidden-sm">\n    <div class="title">'+o((n.trans||t&&t.trans||r).call(i,"Send",{name:"trans",hash:{},data:s}))+'</div>\n    <div class="send-to-friend">\n        <input type="text" class="form-control send-input" id="exampleInputAmount" placeholder="email or mobile #">\n        <button class="btn btn-block btn-teal on-send" type="button" disabled>Send to Friend</button>\n    </div>\n\n    <div class="title">'+o((n.trans||t&&t.trans||r).call(i,"Share",{name:"trans",hash:{},data:s}))+"</div>\n"+(null!=(l=n.each.call(i,null!=t?t.socialShareVisible:t,{name:"each",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <div class="button-group relative inline-block">\n        <button class="btn btn-no-background dropdown-toggle btn-left-align" data-toggle="dropdown">\n            '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-more",24,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        </button>\n        <div class="triangle"></div>\n        <ul class="dropdown-menu">\n'+(null!=(l=n.each.call(i,null!=t?t.socialShareHidden:t,{name:"each",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+"        </ul>\n    </div>\n</div>\n"},2:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'    <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n        "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,24,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n    </a>\n"},3:function(e,t,n,a,s){return' social-share" target="_blank'},5:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'            <li>\n                <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" rel="nofollow" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n                    "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,20,"wp-neutral-2","pull-left",{name:"iconify",hash:{},data:s}))?l:"")+" "+c("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:o)?i.call(r,{name:"label",hash:{},data:s}):i)+"\n                </a>\n            </li>\n"},7:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n            "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,24,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"\n        </a>\n"},9:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                <li>\n                    <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" rel="nofollow" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n                        "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,20,"wp-neutral-2","pull-left",{name:"iconify",hash:{},data:s}))?l:"")+" "+c("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:o)?i.call(r,{name:"label",hash:{},data:s}):i)+"\n                    </a>\n                </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.draft:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.escapeExpression,r=null!=t?t:e.nullContext||{},o=n.helperMissing;return'        <button class="btn btn-fan btn-white" data-target="'+i(e.lambda(null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,t))+'">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-follow",16,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+' <span class="follow-text">'+i((n.trans||t&&t.trans||o).call(r,"Follow",{name:"trans",hash:{},data:s}))+"</span></button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression,o=null!=t?t:e.nullContext||{},c=n.helperMissing;return'<div class="author-info center-text hidden-sm hidden-md">\n    <div class="avatar avatar-lg center-block">\n        <a class="on-navigate" href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,t))+'">\n            <img src="'+r((n.resizeAvatar||t&&t.resizeAvatar||c).call(o,null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.avatar:l,128,{name:"resizeAvatar",hash:{},data:s}))+'">\n        </a>\n    </div>\n    <div class="info">\n        <a class="on-navigate" href="/user/'+r(i(null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,t))+'">\n            <span class="center-block">'+(null!=(l=(n.trans||t&&t.trans||c).call(o,"by <strong>%s</strong>",null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,{name:"trans",hash:{},data:s}))?l:"")+"</span>\n        </a>\n"+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||c).call(o,null!=(l=null!=(l=null!=t?t.group:t)?l.user:l)?l.username:l,{name:"isCurrentUser",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:"")+"    </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return"            "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-warning",22,"wp-error on-ban-image-inline",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'            <a data-gtm-action="share:'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+'" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n                "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,12,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"\n            </a>\n"},4:function(e,t,n,a,s){return' social-share" target="_blank'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div id="funbar-container">\n    <div id="funbar">\n'+(null!=(l=e.invokePartial(a["core.story_reading.funbar"],t,{name:"core.story_reading.funbar",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </div>\n</div>\n\n"+(null!=(l=e.invokePartial(a["core.story_reading.out_of_geo_banner"],t,{name:"core.story_reading.out_of_geo_banner",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+'\n<main id="parts-container-new">\n'+(null!=(l=e.invokePartial(a["core.story_reading.part_container_new"],t,{name:"core.story_reading.part_container_new",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'    <div class="image-options-container hide">\n        <span class="icon-container">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-flag",12,"wp-neutral-3 on-report-image",{name:"iconify",hash:{},data:s}))?l:"")+"</span>\n"+(null!=(l=n.if.call(i,(n.isTestGroup||t&&t.isTestGroup||r).call(i,"STORY_IMAGE_MOD",{name:"isTestGroup",hash:{},data:s}),{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'        <div class="social-icons-container" id="media-share">\n'+(null!=(l=n.each.call(i,null!=t?t.mediaShare:t,{name:"each",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'        </div>\n    </div>\n</main>\n<div id="bottom-banner-container">\n'+(null!=(l=e.invokePartial(a["core.shared.bottom_banner"],t,{name:"core.shared.bottom_banner",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</div>\n\n<div id="post-publish-modal"></div>\n<div id="inline-comments-modal"></div>\n'},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(463)),s=l(n(464));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i){l.add("HighlightTooltip",l.views.Base.extend({events:{"tap .on-open-embed":"onQuoteEmbed","click .on-open-embed":"stopEvent","tap .on-facebook-share":"onFacebookShareQuote","click .on-facebook-share":"stopEvent"},el:".highlight-tooltip",template:s.default,embedModalTemplate:a.default,initialize:function(e){e=e||{},this.quote=e.quoteString,this.storyId=e.storyId,this.url=e.url},render:function(){return $("#tooltip-container").html(this.template({})),this.setElement(".highlight-tooltip"),this},onFacebookShareQuote:function(){var n=this;this.url=t.utils.addSource(this.url,"web","facebook","share_quote"),FB.ui({method:"share",href:this.url,quote:this.quote},function(){t.utils.pushEvent({category:"reading",action:"share:facebookquote",label:n.storyId}),n.remove(),e.getSelection().removeAllRanges()})},onQuoteEmbed:function(e){n.pushEvent({category:"embed",action:"click",label:"quote"});var t=$("#generic-modal"),a={id:this.storyId,quoteText:this.quote,copyExec:!!document.queryCommandSupported&&document.queryCommandSupported("copy")};n.stopEvent(e),t.find(".modal-dialog").addClass("embed").find(".modal-body").html(this.embedModalTemplate(a));t.find(".on-copy").on("tap",this.onCopyEmbedCode);t.modal("show").on("hide.bs.modal",this.closeEmbed)},onCopyEmbedCode:function(){var t=document.querySelector("#embed-url"),a=document.createRange();a.selectNode(t),e.getSelection().removeAllRanges(),e.getSelection().addRange(a),document.execCommand("copy")?($(".on-copy").text(n.trans("Copied!")),n.pushEvent({category:"embed",action:"copy",label:"quote"})):$(".on-copy").text(n.trans("Sorry, unable to copy"))},closeEmbed:function(e){$(this).find(".modal-dialog").removeClass("embed"),this.tooltip.remove()}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'    <button type="button" class="btn btn-link btn-teal on-copy">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Copy Embed Code",{name:"trans",hash:{},data:s}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<button type="button" class="btn btn-link pull-right close" data-dismiss="modal">\n    <span aria-hidden="true" class="fa fa-remove"></span><span class="sr-only">'+c((n.trans||t&&t.trans||o).call(r,"Close",{name:"trans",hash:{},data:s}))+'</span>\n</button>\n<div id="quote-embed-modal">\n    <h4>'+c((n.trans||t&&t.trans||o).call(r,"Embed Preview",{name:"trans",hash:{},data:s}))+'</h4>\n    <iframe id="quote-embed-iframe" src="https://embed.wattpad.com/quote/'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"?quote_text="+c((n.urlEncode||t&&t.urlEncode||o).call(r,null!=t?t.quoteText:t,{name:"urlEncode",hash:{},data:s}))+'"\n            frameborder="0" allowfullscreen=""></iframe>\n    <div class="on-select embed-code">\n      <span id="embed-url">\n          &lt;iframe width="500" height="280" frameborder="0" allowfullscreen=""\n          src="https://embed.wattpad.com/quote/'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+"?quote_text="+c((n.urlEncode||t&&t.urlEncode||o).call(r,null!=t?t.quoteText:t,{name:"urlEncode",hash:{},data:s}))+'"\n          &gt;&lt;/iframe&gt;\n      </span>\n    </div>\n'+(null!=(l=n.if.call(r,null!=t?t.copyExec:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'      <span class="btn btn-default on-open-embed" role="button" href="#">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-code",16,"wp-readinggrey",{name:"iconify",hash:{},data:s}))?l:"")+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Embed",{name:"trans",hash:{},data:s}))+"\n      </span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div class="highlight-tooltip">\n  <div class="highlight-options arrow_box">\n'+(null!=(l=n.if.call(i,null!=t?t.embedQuote:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <span class="btn btn-default on-facebook-share" role="button" href="#">\n      <div class="facebook-quote-icon">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-facebook",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n      </div>\n      "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Share",{name:"trans",hash:{},data:s}))+"\n    </span>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s,l){s=s||(e.wattpad={}),l.router.on("route:userProfile",l.router.filter(["getTranslations","getCategories"],function(t,n,i,r){var o=null;"object"===(void 0===r?"undefined":a(r))&&(r.redirectfrom||r.redirectFrom)&&new l.views.ErrorToast({message:s.utils.trans("We're sorry! The page you requested no longer exists.")+" "+s.utils.trans("So we have brought you to a related page.")},{type:"dismissable"}).render();n=n||"about","object"===(void 0===r?"undefined":a(r))&&r.message&&(r=null),o=new l.models.User({username:t}),e.store&&!e.store.getState().profileData.hasLoadad&&e.store.dispatch(e.app.components.actions.initializeMutedUsers(s.utils.currentUser().get("username"))),Promise.resolve(o.loaded()).then(function(){var a=!o.has("description"),s=o.get("isMuted");if(a&&l.router.navigate("/user/"+t,{trigger:!1,replace:!0}),s){var i=new l.views.MutedProfile({model:o});l.transitionTo(i,{username:t,hasHeader:!0,hasFooter:!0})}else{var r=new l.views.ProfileLayout({model:o,section:a?"about":n,username:t,isPrivateToMe:a});l.transitionTo(r,{username:t,hasHeader:!0,hasFooter:!0})}e.te.push("event","app","page",null,"view",{page:"profile",username:t})},function(){l.router.trigger("route:error-404","user")})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:authentication",s.router.filter(["getTranslations"],function(t){var n;(t=t||"signup",a.utils.isHttp())?a.utils.redirectToServer(e.location.href):(n="signup"===t?new s.views.Landing({model:new s.models["Auth"+t]({}),page:t}):new s.views.Authentication({model:new s.models["Auth"+t]({}),page:t}),s.transitionTo(n,{hideAddressBar:!1,hasHeader:!1,hideAnnouncements:!0}))})),s.router.on("route:oauth-auth",s.router.filter(["getTranslations"],function(e){var t=new s.views.OauthAuthentication({model:new s.models.Authsignup({})});s.transitionTo(t,{hideAddressBar:!1,hasHeader:!1,hideAnnouncements:!0})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:onboardingStep1",s.router.filter(["getTranslations"],function(){var t=new s.views.OnboardingStep1;s.transitionTo(t,{hasHeader:!1,hasFooter:!1}),e.te.push("event","onboarding",null,null,"start",{})})),s.router.on("route:onboardingStep2",s.router.filter(["getCategories","getTranslations"],function(){var e=new s.collections.OnboardingStories(null,{limit:42}),t=a.utils.currentUser(),n=new s.views.OnboardingStep2({collection:e,user:t});s.transitionTo(n,{hasHeader:!1,hasFooter:!1})})),s.router.on("route:onboardingWriterJourney",s.router.filter(["getTranslations"],function(){var e=a.utils.currentUser(),t=new s.views.OnboardingWriterJourney({user:e});s.transitionTo(t,{hasHeader:!1,hasFooter:!1})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.on("route:storyReading",n.router.filter(["getTranslations","getCategories"],function(a,s,l,i,r,o){a=parseInt(a,10);var c,u=new n.models.StoryPartModel({id:a}),d=!(!i||!i.toString().match(/[0-9_]+/)),h=!(!r||!r.toString().match(/[0-9_]+/)),p=[u.fetch()];if(isNaN(a))n.router.trigger("route:error-404","story");else{t.utils.appOn()||(l=l?parseInt(l,10)+1:2),d&&(c=new n.models.CommentModel({id:i},{isDeepLink:!0,commentIdToHighlight:r||i,isDeeplinkedReply:h}),p.push(c.fetch()));var m=Promise.all(p);(_.get(e,"wattpad.testGroups.PAID_CONTENT")||!1)&&(m=m.then(function(){var t=u.get("group");if(t.isPaywalled){var n=t.id,a=t.parts.map(function(e){return e.id});return e.store.dispatch(e.app.components.actions.fetchPaidContentMetadata(n,a))}})),m.then(function(){u.getPage(l||1).then(function(e){u.set("pageNumber",l||1);var a,s=e?e.get("text"):"",i=!(!o||"true"!==o.preview),r=19===parseInt(n.get("language"),10),d=!(!o||"true"!==o.firstPublish),h=!!n.views.WorksWriter&&(n.currentView instanceof n.views.WorksWriter&&!i&&!u.get("draft")),p={};a=r?["Đọc Truyện"+u.get("title"),u.get("group").title,u.get("group").user.name,"Wattpad"].join(" - "):[u.get("title"),u.get("group").title,"Wattpad"].join(" - ");var m={model:u,storyText:s,fromLanding:n.currentView instanceof n.views.StoryLanding,isPreview:i,deepLinkModel:c,isFirstPublish:d,isPostPublishModal:h},f=new n.views.StoryReading(m);if(n.get("device").is.mobile&&(p={footerOptions:{appUrl:t.utils.getAppLink("story-reading",u),report:t.utils.trans("Report Story")}}),n.transitionTo(f,_.extend({pageTitle:a,hasHeader:!0,hasFooter:!0,viewChangedCallback:function(){f.updateScrollState(!0)}},p)),t.utils.shouldSeePaidOnboarding(u.get("group").isPaywalled)){var g=u.get("id");t.utils.showPaidOnboardingAfterDelay(g)}})},function(){n.router.trigger("route:error-404","story")})}}))}(window,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n){t=t||(e.wattpad={}),n.router.on("route:storyRanking",n.router.filter(["getTranslations"],function(e,s,l){if(isNaN(parseInt(e)))n.router.trigger("route:error-404","story");else{if("object"===(void 0===l?"undefined":a(l))&&(l.redirectfrom||l.redirectFrom))new n.views.ErrorToast({message:t.utils.trans("We're sorry! The page you requested no longer exists.")+" "+t.utils.trans("So we have brought you to a related page.")},{type:"dismissable"}).render();var i=new n.models.StoryModel({id:e});Promise.resolve(i.fetch()).then(function(){if(_.isEmpty(i.get("tagRankings")))throw"Story does not have tag rankings";var e=new n.views.StoryRanking({model:i}),a=i.get("title")+(i.get("user")?" - "+i.get("user").name:"");19===parseInt(n.get("language"),10)&&(a="Đọc Truyện "+i.get("title")+" - "+i.get("user").name),n.transitionTo(e,{pageTitle:t.utils.unsanitizeHTML(a),hasHeader:!0,hasFooter:!0})}).catch(function(){n.router.trigger("route:error-404")})}}))}(window,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n){t=t||(e.wattpad={}),n.router.on("route:storyLanding",n.router.filter(["getTranslations","getCategories"],function(s,l,i,r){if(isNaN(parseInt(s)))n.router.trigger("route:error-404","story");else{if("object"===(void 0===r?"undefined":a(r))&&(r.redirectfrom||r.redirectFrom))new n.views.ErrorToast({message:t.utils.trans("We're sorry! The page you requested no longer exists.")+" "+t.utils.trans("So we have brought you to a related page.")},{type:"dismissable"}).render();var o=new n.models.StoryModel({id:s,checkPromotionStatus:t.utils.eligibleForDirectSoldAds()&&!t.utils.currentUser().get("premium"),zoneIds:[127423]}),c=Promise.all([Promise.resolve(o.fetch({data:{include_deleted:t.utils.currentUser().get("isSysAdmin")||t.utils.currentUser().get("ambassador")}})),Promise.resolve(t.utils.currentUser().library().loaded())]);t.testGroups.PAID_CONTENT&&(c=c.then(function(){if(o.get("isPaywalled")){var t=o.get("id"),n=o.get("parts").map(function(e){return e.id});return e.store.dispatch(e.app.components.actions.fetchPaidContentMetadata(t,n))}})),c.then(function(){var a=new n.views.StoryLanding({model:o,section:i}),l=o.get("title")+(o.get("user")?" - "+o.get("user").name:"");if(19===parseInt(n.get("language"),10)&&(l="Đọc Truyện "+o.get("title")+" - "+o.get("user").name+" - Wattpad"),n.transitionTo(a,{pageTitle:t.utils.unsanitizeHTML(l),hasHeader:!0,hasFooter:!0}),t.utils.shouldSeePaidOnboarding(o.get("isPaywalled"))){var r=o.get("id");t.utils.showPaidOnboardingAfterDelay(r)}e.te.push("event","story_details",null,null,"view",{storyid:s}),e.te.push("event","app","page",null,"view",{page:"story_details",storyid:s})},function(){r=r||{},n.router.trigger("route:error-404","story",s)})}}))}(window,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a=a||(e.wattpad={}),s.router.on("route:notifications",s.router.filter(["getTranslations","requireLogin"],function(){var t=new s.views.NotificationsPage;s.transitionTo(t,{hasHeader:!0,hasFooter:!0,pageTitle:"Wattpad - Notifications"}),e.te.push("event","app","page",null,"view",{page:"notifications_feed"})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.on("route:search",n.router.filter(["getTranslations","getCategories"],function(a){a=a||"";var s=new n.collections.BrowseTopics;function l(){var t=new n.views.SearchLanding({query:a?a.trim():"",limits:{users:20,stories:15},browseTopics:s});n.mixin(n.views.SearchLanding,"StickyAds"),n.transitionTo(t,{hasHeader:!0,hasFooter:!0}),a.length?e.te.push("event","app","page",null,"view",{page:"search_results"}):e.te.push("event","app","page",null,"view",{page:"search"})}t.testGroups.NEW_HOME?Promise.resolve(s.fetch()).then(function(){l()}):l()}))}(window,wattpad,window.app)},function(e,t,n){"use strict";var a=c(n(474)),s=c(n(475)),l=c(n(476)),i=c(n(477)),r=c(n(478)),o=c(n(20));function c(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,c){c.add("SearchLanding",c.views.RegionManager.extend({template:r.default,events:{"tap .on-tab-navigate":"onTabNavigation","click .on-tab-navigate":"stopEvent"},initialize:function(e){e=e||{},Handlebars.registerPartial("core.search.partials.search_header",function(){return""}),Handlebars.registerPartial("core.search.partials.results_people",function(){return""}),Handlebars.registerPartial("core.search.partials.results_stories",function(){return""}),Handlebars.registerPartial("core.signup_prompt",function(){return""}),Handlebars.registerPartial("core.components.user_badges",o.default),this.collections={stories:new c.collections.NodeStorySearch([],{searchTerm:e.query,limit:e.limits.stories}),users:new c.collections.NodeUserSearch([],{searchTerm:e.query,limit:e.limits.users})},(t.utils.currentUser()&&t.utils.currentUser().get("isMature")&&null===t.utils.getCookie("msf")||"1"===t.utils.getCookie("msf"))&&(this.collections.stories.mature=!0),0===e.query.indexOf("user:")&&(this.collections.stories.mature=!0),this.query=e.query,this.limits=e.limits,this.resultType=e.resultType,this.browseTopics=e.browseTopics,this.listenTo(c,"navbar:search:query",this.dispatchQuery),this.listenTo(c,"app:component:TagMetaItem:click",this.navigateToTagPage),this.listenTo(c,"app:component:TagMetaNumNotShown:click",this.onStoryDetails),_.defer(function(){c.trigger("navbar:search:disable")}),_.defer(function(){c.trigger("navbar:search:set",e.query,!1)}),this.searchHeader=new c.views.SearchHeader({storyCollection:this.collections.stories,topicCollection:this.browseTopics,searchTerm:this.query})},navigateToTagPage:function(e){t.utils.stopEvent(e);var n=$(e.currentTarget).text().trim();c.router.navigate("/stories/"+encodeURIComponent(n),{trigger:!0})},onStoryDetails:function(e){t.utils.stopEvent(e);var n=$(e.currentTarget).data("story-id"),a=this.collections.stories.get(n);c.router.navigate(t.utils.formatStoryUrl(a.get("url")),{trigger:!0})},render:function(){return this.userSearchResultsView=new c.views.SearchResults({collection:this.collections.users,itemView:this.itemViewFactory(i.default,"Users"),template:l.default,dataKey:"Users",partial:"core.search.partials.results_person_item",manualRegistration:c.get("device").is.mobile&&"people"!==this.resultType}),this.storySearchResultsView=new c.views.SearchResults({collection:this.collections.stories,itemView:this.itemViewFactory(s.default,"Stories"),template:a.default,dataKey:"Stories",partial:"core.search.partials.results_story_item",manualRegistration:c.get("device").is.mobile&&"stories"!==this.resultType}),t.utils.setCookie("signupFrom","search",0,e.location.hostname.replace("www","")),this.signUpPrompt=new c.views.SignUpPrompt({model:new c.models.Authsignup,nextUrl:e.location.href,subtitle:n.trans("Be part of a global community of readers and writers, all connected through the power of story.")}),this.$el.html(this.template({isLogged:n.currentUser().authenticated(),resultType:this.resultType})),this.$("#results-people-region").empty(),this.$("#results-stories").empty(),n.currentUser().authenticated()||this.setRegion("#authentication-panel",this.signUpPrompt.render()),c.get("device").is.mobile?(this.$("#search-header").empty(),this.setRegion("#search-header",this.searchHeader.render())):this.setRegion("#search-controls",this.searchHeader.render()),this.setRegion("#results-people-region",this.userSearchResultsView),this.setRegion("#results-stories",this.storySearchResultsView),this},setElement:function(e){if(Monaco.View.prototype.setElement.apply(this,arguments),c.get("device").is.mobile?this.checkRegion("#search-header"):this.checkRegion("#search-controls"),this.checkRegion("#authentication-panel"),this.checkRegion("#results-people-region"),this.checkRegion("#results-stories"),this.searchHeader&&this.searchHeader.$el.is(":visible")){var t=this.searchHeader.$("#search-field"),n=2*t.val().length;_.defer(function(){t.focus(),t[0].setSelectionRange(n,n)})}},checkRegion:function(e){this.regions[e]&&this.regions[e].view&&this.regions[e].view.setElement(this.$(e+" > div:first-child"))},showEmptySearchViews:function(){this.$("#tabs").addClass("hidden"),this.$(".results").addClass("hidden")},hideEmptySearchViews:function(){this.$("#tabs").removeClass("hidden"),this.$("#results-"+this.resultType).removeClass("hidden")},dispatchQuery:function(e){this.query=e,this.updateHeader(e),this.updateSearch(e),this.updateTitle(e),n.scrollToTop()},updateTitle:function(e){n.setTitle(e.trim())},updateSearch:_.debounce(function(e){this.xhrs&&(!0!==this.xhrs.user&&"pending"===this.xhrs.user.state()&&this.xhrs.user.abort(),!0!==this.xhrs.story&&"pending"===this.xhrs.story.state()&&this.xhrs.story.abort());var t=c.get("device").is.mobile&&!_.isEmpty(e.trim())?"/"+this.resultType:"";c.router.navigate("/search/"+encodeURIComponent(e.trim())+t,{trigger:!1,replace:!1});var n=this.userSearchResultsView.newSearch(new c.collections.NodeUserSearch([],{searchTerm:e,limit:this.limits.users})),a=this.storySearchResultsView.newSearch(new c.collections.NodeStorySearch([],{searchTerm:e,limit:this.limits.stories}));a.complete=this.collections.stories.complete,a.mature=this.collections.stories.mature,a.hot=this.collections.stories.hot,a.age=this.collections.stories.age,a.minParts=this.collections.stories.minParts,a.maxParts=this.collections.stories.maxParts,this.searchHeader.updateCollection(a),this.collections.users=n,this.collections.stories=a;var s=this.collections.users.fetch(),l=this.collections.stories.fetch();this.xhrs={user:s,story:l};var i=this;Promise.all([s,l]).then(function(e){var t=e[0],n=e[1];_.isEmpty(t)&&0===n.total?i.showEmptySearchViews():i.hideEmptySearchViews()})},500),updateHeader:function(e){this.searchHeader.updateQuery(e)},itemViewFactory:function(e,t){return Monaco.View.extend({tagName:"li",className:"list-group-item",template:e,render:function(){var e=this.model.toJSON();return"Stories"===t?(e.tagMeta={tags:e.tags,storyId:e.id,numShown:c.get("device")&&c.get("device").is.mobile?2:3},e.reactName="storyTags-"+e.id):"Users"===t&&0!==e.badges.length&&(e.badges.indexOf("staff")>-1?e.staff=!0:e.badges.indexOf("verified")>-1?e.verified=!0:e.badges.indexOf("star")>-1?e.star=!0:e.badges.indexOf("ambassador")>-1&&(e.ambassador=!0)),this.$el.html(this.template(e)),this}})},onTabNavigation:function(e){var t=$(e.currentTarget);this.resultType=t.data("target"),c.router.navigate("/search/"+encodeURIComponent(this.query)+"/"+this.resultType),this.$("#tabs a").removeClass("active"),t.addClass("active"),this.$(".results").addClass("hidden"),this.$("#results-"+this.resultType).removeClass("hidden"),"stories"===this.resultType?(this.userSearchResultsView.setPaused(!0),this.userSearchResultsView.deregisterFromScrolling(),this.storySearchResultsView.setPaused(!1),this.storySearchResultsView.registerForScrolling()):(this.storySearchResultsView.setPaused(!0),this.storySearchResultsView.deregisterFromScrolling(),this.userSearchResultsView.setPaused(!1),this.userSearchResultsView.registerForScrolling())}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='\n<header class="panel-heading">\n    <h4 class="text-light all-caps" id="header-left">'+u((n.sprintf||t&&t.sprintf||c).call(o,(n.ngettext||t&&t.ngettext||c).call(o,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||c).call(o,null!=t?t.numStories:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+" "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||c).call(o,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"hidden searching"},data:s}))?l:"")+'</h4>\n    <div class="button-group relative inline-block">\n        <button class="btn btn-text '+(null!=(l=n.if.call(o,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+'">\n            '+u((n.trans||t&&t.trans||c).call(o,"Filters",{name:"trans",hash:{},data:s}))+" "+(null!=(l=n.unless.call(o,null!=t?t.isMobile:t,{name:"unless",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"</span>\n        </button>\n"+(null!=(l=n.unless.call(o,null!=t?t.isMobile:t,{name:"unless",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'    </div>\n</header>\n<ul class="list-group">\n'+(null!=(l=n.each.call(o,null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(13,s,0),inverse:e.noop,data:s}))?l:"")+'</ul>\n<footer class="panel-footer light';return i=null!=(i=n.showMore||(null!=t?t.showMore:t))?i:c,r={name:"showMore",hash:{},fn:e.noop,inverse:e.program(15,s,0),data:s},l="function"==typeof i?i.call(o,r):i,n.showMore||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'">\n    <button class="btn btn-block btn-grey on-showmore">\n        <span class="show-more-message">\n            <span>'+u((n.trans||t&&t.trans||c).call(o,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n        </span>\n        <span class='loading-message hidden'>\n            "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||c).call(o,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n            <span> "+u((n.trans||t&&t.trans||c).call(o,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n        </span>\n    </button>\n</footer>\n\n"+(null!=(l=n.if.call(o,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(17,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},2:function(e,t,n,a,s){return"on-show-filter-modal"},4:function(e,t,n,a,s){return'dropdown-toggle" data-toggle="dropdown'},6:function(e,t,n,a,s){return'&nbsp;<span class="caret">'},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'            <div class="triangle"></div>\n            <ul class="dropdown-menu dropdown-menu-right">\n                <li>\n                  <h4>'+o((n.trans||t&&t.trans||r).call(i,"Last Updated",{name:"trans",hash:{},data:s}))+'</h4>\n                  <select id="last-updated-filters">\n                    '+(null!=(l=(n.select||t&&t.select||r).call(i,"any",(n.trans||t&&t.trans||r).call(i,"Anytime",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,"24",(n.trans||t&&t.trans||r).call(i,"Today",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,"168",(n.trans||t&&t.trans||r).call(i,"This Week",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,"720",(n.trans||t&&t.trans||r).call(i,"This Month",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,"8760",(n.trans||t&&t.trans||r).call(i,"This Year",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n                  </select>\n                </li>\n                <li>\n                  <h4>"+o((n.trans||t&&t.trans||r).call(i,"Length",{name:"trans",hash:{},data:s}))+'</h4>\n                  <select id="content-length-filters">\n                    '+(null!=(l=(n.select||t&&t.select||r).call(i,"any",(n.trans||t&&t.trans||r).call(i,"Any Length",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,"1-10",(n.trans||t&&t.trans||r).call(i,"1 - 10 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,"10-20",(n.trans||t&&t.trans||r).call(i,"10 - 20 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,"20-50",(n.trans||t&&t.trans||r).call(i,"20 - 50 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n                    "+(null!=(l=(n.select||t&&t.select||r).call(i,">50",(n.trans||t&&t.trans||r).call(i,"> 50 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n                  </select>\n                </li>\n                <li>\n                    <h4>"+o((n.trans||t&&t.trans||r).call(i,"Content",{name:"trans",hash:{},data:s}))+'</h4>\n                    <a href="#" role="button" class="on-setfilter search-filter'+(null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=(l=null!=t?t.stories:t)?l.filters:l)?l.complete:l,t),{name:"stories.filters.complete",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'" data-filter="complete" >'+o((n.trans||t&&t.trans||r).call(i,"Only show completed",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-empty",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-filled",14,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n                </li>\n"+(null!=(l=n.if.call(i,null!=t?t.isMature:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?l:"")+"            </ul>\n"},9:function(e,t,n,a,s){return" active"},11:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'                <li>\n                    <a href="#" role="button" class="on-setfilter search-filter'+(null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=(l=null!=t?t.stories:t)?l.filters:l)?l.mature:l,t),{name:"stories.filters.mature",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'" data-filter="mature">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Include mature",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-empty",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-filled",14,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+"</a>\n                </li>\n"},13:function(e,t,n,a,s){var l;return'    <li class="list-group-item">\n'+(null!=(l=e.invokePartial(a["core.search.partials.results_story_item"],t,{name:"core.search.partials.results_story_item",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </li>\n"},15:function(e,t,n,a,s){return" hidden"},17:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.components.search_filter_modal"],t,{name:"core.components.search_filter_modal",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:""},19:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(20,s,0),inverse:e.noop,data:s}))?l:""},20:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'  <header class="panel-heading">\n    <h4 class="text-light all-caps">\n      '+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"No results found",{name:"trans",hash:{},data:s}))+"\n      "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"hidden searching"},data:s}))?l:"")+"\n    </h4>\n  </header>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.numStories:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(19,s,0),data:s}))?l:"")+"\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'        <div class="paid-indicator">\n            '+e.escapeExpression((n.connectImage||t&&t.connectImage||n.helperMissing).call(null!=t?t:e.nullContext||{},"paid-content/supported-stories-badge.svg","Paid Stories Badge",{name:"connectImage",hash:{width:"18",height:"18"},data:s}))+"\n            <span>Paid Story</span>\n          </div>\n"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'        <ul class="story-details">\n          <li>'+e.escapeExpression(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+"</li>\n          "+(null!=(l=n.if.call(i,null!=t?t.category:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'\n        </ul>\n        <div class="promotion-description">\n          '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-badge-promoted",11,"wp-base-1",{name:"iconify",hash:{},data:s}))?l:"")+"\n          "+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Promoted by %s",(n.sprintf||t&&t.sprintf||r).call(i,"<b>%s</b>",null!=t?t.sponsorName:t,{name:"sprintf",hash:{},data:s}),{name:"trans",hash:{},data:s}))?l:"")+"\n        </div>\n"+(null!=(l=n.if.call(i,null!=t?t.contest:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")},4:function(e,t,n,a,s){var l;return"<li>"+e.escapeExpression("function"==typeof(l=null!=(l=n.category||(null!=t?t.category:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:s}):l)+"</li>"},6:function(e,t,n,a,s){var l;return'          <div class="contest-status">\n            <span class="label label-info"> '+e.escapeExpression(e.lambda(null!=(l=null!=t?t.contest:t)?l.ctaLabel:l,t))+" </span>\n"+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.contest:t)?l.endDate:l,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"          </div>\n"},7:function(e,t,n,a,s){var l;return'              <span class="contest-end-date">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Ends %s",null!=(l=null!=t?t.contest:t)?l.endDate:l,{name:"trans",hash:{},data:s}))+"</span>\n"},9:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'        <div class="meta">\n          '+(null!=(l=n.if.call(i,null!=t?t.readCount:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")+"\n          "+(null!=(l=n.if.call(i,null!=t?t.voteCount:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+"\n        </div>\n"},10:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+"</small>"},12:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+"</small>"},14:function(e,t,n,a,s){return'<span class="label label-info">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Completed",{name:"trans",hash:{},data:s}))+"</span>&nbsp;&nbsp;"},16:function(e,t,n,a,s){return'<span class="label label-danger">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Mature",{name:"trans",hash:{},data:s}))+"</span>"},18:function(e,t,n,a,s){var l;return"      "+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(null!=t?t:e.nullContext||{},"TagMeta",null!=t?t.reactName:t,{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="results-story-item">\n  <a class="on-result" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n    <div class="cover cover-xs pull-left">\n      <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,80,{name:"resizeCover",hash:{},data:s}))+'" alt="'+c((n.trans||t&&t.trans||o).call(r,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n    </div>\n\n    <div class="content">\n'+(null!=(l=n.if.call(r,null!=t?t.isPaywalled:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'      <h5 class="story-title-heading">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h5>\n"+(null!=(l=n.if.call(r,null!=t?t.promoted:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+"\n      <p>"+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,160,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</p>\n    </div>\n  </a>\n  <div class="bottom-content clearfix">\n    <div class="story-status">\n      '+(null!=(l=n.if.call(r,null!=t?t.completed:t,{name:"if",hash:{},fn:e.program(14,s,0),inverse:e.noop,data:s}))?l:"")+"\n      "+(null!=(l=n.if.call(r,null!=t?t.mature:t,{name:"if",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s}))?l:"")+"\n    </div>\n\n"+(null!=(l=n.if.call(r,null!=t?t.tagMeta:t,{name:"if",hash:{},fn:e.program(18,s,0),inverse:e.noop,data:s}))?l:"")+"  </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'  <header class="panel-heading">\n    <h4 class="text-light all-caps">\n'+(null!=(l=n.if.call(i,null!=t?t.showTotal:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"\n      "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||n.helperMissing).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"hidden searching"},data:s}))?l:"")+'\n    </h4>\n  </header>\n  <ul class="list-group">\n'+(null!=(l=n.each.call(i,null!=t?t.users:t,{name:"each",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"  </ul>\n\n"+(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},2:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return"        "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Profile","%s Profiles",(n.count||t&&t.count||i).call(l,null!=t?t.numUsers:t,{name:"count",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||i).call(l,null!=t?t.numUsers:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+"\n"},4:function(e,t,n,a,s){return"        "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Profiles",{name:"trans",hash:{},data:s}))+"\n"},6:function(e,t,n,a,s){var l;return'      <li class="list-group-item">\n'+(null!=(l=e.invokePartial(a["core.search.partials.results_person_item"],t,{name:"core.search.partials.results_person_item",data:s,indent:"          ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"      </li>\n"},8:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='  <footer class="panel-footer light';return i=null!=(i=n.showMore||(null!=t?t.showMore:t))?i:c,r={name:"showMore",hash:{},fn:e.noop,inverse:e.program(9,s,0),data:s},l="function"==typeof i?i.call(o,r):i,n.showMore||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'">\n    <button class="btn btn-block btn-grey on-showmore">\n      <span class="show-more-message">\n        <span>'+u((n.trans||t&&t.trans||c).call(o,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n        <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n      </span>\n      <span class='loading-message hidden'>\n        "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||c).call(o,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n        <span>"+u((n.trans||t&&t.trans||c).call(o,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n      </span>\n    </button>\n  </footer>\n"},9:function(e,t,n,a,s){return" hidden"},11:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:""},12:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'  <header class="panel-heading">\n    <h4 class="text-light all-caps">\n      '+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"No results found",{name:"trans",hash:{},data:s}))+"\n      "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"hidden searching"},data:s}))?l:"")+"\n    </h4>\n  </header>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.numUsers:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(11,s,0),data:s}))?l:""},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return e.escapeExpression("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:s}):l)},3:function(e,t,n,a,s){var l;return e.escapeExpression("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"username",hash:{},data:s}):l)},5:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return e.escapeExpression((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Work","%s Works",null!=t?t.numStoriesPublished:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStoriesPublished:t,{name:"sprintf",hash:{},data:s}))+"\n        "+(null!=(l=n.if.call(i,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+"\n"},6:function(e,t,n,a,s){return" &middot; "},8:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing;return" "+e.escapeExpression((n.sprintf||t&&t.sprintf||i).call(l,(n.ngettext||t&&t.ngettext||i).call(l,"%s Follower","%s Followers",null!=t?t.numFollowers:t,{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||i).call(l,null!=t?t.numFollowers:t,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+" "},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<a href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'" class="on-result person-result" data-id="'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n    <div class="avatar avatar-md pull-left">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,48,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </div>\n    <div class="content">\n        <div class="name-and-badges">\n            <h5>'+(null!=(l=n.if.call(r,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'</h5>\n            <div class="badges">\n'+(null!=(l=e.invokePartial(a["core.components.user_badges"],t,{name:"core.components.user_badges",hash:{badgeSize:"14"},data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'            </div>\n        </div>\n        <small class="username">@'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'</small>\n        <small class="meta">\n        '+(null!=(l=n.if.call(r,null!=t?t.numStoriesPublished:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+"        "+(null!=(l=n.if.call(r,null!=t?t.numFollowers:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+"\n        </small>\n    </div>\n</a>"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'                    <div id="authentication-panel" class="panel panel-basic">\n                        <div class="signup-modal">\n'+(null!=(l=e.invokePartial(a["core.signup_prompt"],t,{name:"core.signup_prompt",data:s,indent:"                            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                        </div>\n                    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div id="search-page">\n\n    <header id="search-controls" class="background background-lg">\n        <div class="container">\n'+(null!=(l=e.invokePartial(a["core.search.partials.search_header"],t,{name:"core.search.partials.search_header",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'        </div>\n    </header>\n\n    <main class="container">\n        <div class="row">\n            <section class="col-sm-12 col-md-8">\n                <article id="results-stories">\n                    <div class="feed-item-new panel">\n'+(null!=(l=e.invokePartial(a["core.search.partials.results_stories"],t,{name:"core.search.partials.results_stories",data:s,indent:"                        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'                    </div>\n                </article>\n            </section>\n\n            <section class="col-sm-12 col-md-4">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isLogged:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:"")+'                <div id="results-people">\n                    <div id="results-people-region">\n                        <div class="feed-item-new panel">\n'+(null!=(l=e.invokePartial(a["core.search.partials.results_people"],t,{name:"core.search.partials.results_people",data:s,indent:"                          ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                        </div>\n                    </div>\n                </div>\n            </section>\n        </div>\n    </main>\n\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=r(n(480)),s=r(n(481)),l=r(n(482)),i=r(n(483));function r(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,r){r.add("SearchHeader",r.views.RegionManager.extend({className:"container",hasFocus:!0,template:l.default,suggestedSearchesTemplate:s.default,tagTemplate:a.default,browseTopicsTemplate:i.default,events:{"tap .on-toggle-tag":"toggleTag","click .on-toggle-tag":"stopEvent","keyup #search-field":"newSearch","focus #search-field":"focusGained","blur #search-field":"onSearchFieldBlur","tap .on-browse-topic":"onBrowseTopic","click .on-browse-topic":"onBrowseTopic","keydown .on-browse-topic":"onBrowseTopicKeyboard"},resultsContainerClass:".list-group",initialize:function(e){var n=this;e=e||{},this.searchTerm=e.searchTerm,this.storyCollection=e.storyCollection,this.topicCollection=e.topicCollection,this.listenTo(r,"navbar:search:focus",this.focusLost),Handlebars.registerPartial("core.search.partials.suggested_searches",this.suggestedSearchesTemplate),Handlebars.registerPartial("core.search.partials.search_header_tags",this.tagTemplate),this.storyCollection.once("sync",this.updateTags,this),t.testGroups.NEW_HOME&&(Handlebars.registerPartial("core.search.partials.browse_topics",this.browseTopicsTemplate),Promise.resolve(e.topicCollection.fetch()).then(function(){n.topicCollection=e.topicCollection})),localStorage&&!_.isEmpty(localStorage.getItem("recentSearches"))||(this.recommendedSearches=new r.collections.RecommendedSearches),_.isEmpty(this.searchTerm)&&(t.testGroups.NEW_HOME&&this.topicCollection&&this.renderBrowseTopics(),this.recommendedSearches&&this.recommendedSearches.once("sync",this.renderSuggestedSearches,this)),this.listenTo(r,"app:component:TagCarouselItem:click",this.toggleTag)},render:function(){return this.updateTags(),this.$el.html(this.template({stories:this.storyCollection.toJSON(),noResults:0===this.storyCollection.length,relatedTags:{tags:this.storyCollection.tags.toJSON(),withIcon:!0},searchTerm:this.storyCollection.searchTerm,searching:!0,harmMessages:n.harm(this.storyCollection.searchTerm),isMature:n.currentUser().get("isMature"),testGroups:t.testGroups,categories:r.get("categories").toJSON()})),this.listenTo(this.storyCollection,"sync",this.afterCollectionSync),_.isEmpty(this.searchTerm)&&(t.testGroups.NEW_HOME&&_.defer(this.renderBrowseTopics.bind(this)),this.recommendedSearches||_.defer(this.renderSuggestedSearches.bind(this))),this},afterCollectionSync:function(){this.renderTags(),t.testGroups.NEW_HOME&&this.renderBrowseTopics(),this.renderSuggestedSearches()},updateTags:function(){var e=this,t=this.storyCollection.searchTerm.match(/#[^\s]+/gi)||[];this.storyCollection.tags||(this.storyCollection.tags=new Monaco.Collection,this.storyCollection.tags._app=r),_.each(t.reverse(),function(t){t=t.slice(1),e.storyCollection.tags.get(t)?e.storyCollection.tags.get(t).set("active",!0):e.storyCollection.tags.add({id:t,name:t,active:!0},{at:0})})},renderTags:function(){0===this.storyCollection.length?this.$("#tag-holder").html(this.tagTemplate({noResults:!0})):(this.updateTags(),this.$("#tag-holder").html(this.tagTemplate({filtersExpanded:this.filtersExpanded,stories:this.storyCollection.toJSON(),noResults:!1,relatedTags:{tags:this.storyCollection.tags.toJSON(),withIcon:!0},harmMessages:n.harm(this.storyCollection.searchTerm),isMature:n.currentUser().get("isMature"),testGroups:t.testGroups,categories:r.get("categories").toJSON()})),this.storyCollection.searchTerm.trim()===this.$el.find("#search-field").val().trim()&&this.$("#search-field").removeClass("searching"))},renderSuggestedSearches:function(){if(0===this.storyCollection.length){var e=localStorage&&JSON.parse(localStorage.getItem("recentSearches"))||[],n=this.recommendedSearches?this.recommendedSearches.getListOfSearchTerms():[],a=_.isEmpty(e);t.testGroups.NEW_HOME&&a?this.$("#suggested-searches").html(this.suggestedSearchesTemplate({noResults:!1})):this.$("#suggested-searches").html(this.suggestedSearchesTemplate({noResults:!0,showRecentSearches:!a,showPopularSearches:a,suggestedSearchTerms:a?n:e}))}else this.$("#suggested-searches").html(this.suggestedSearchesTemplate({noResults:!1}))},renderBrowseTopics:function(){0===this.storyCollection.length&&this.topicCollection?this.$("#browse-topics").html(this.browseTopicsTemplate({noResults:!0,browseTopics:this.topicCollection.toJSON()})):this.$("#browse-topics").html({noResults:!1})},toggleTag:function(t,n){var a=$(n.currentTarget);a.hasClass("active")?(r.trigger("navbar:search:set",this.$el.find("#search-field").val().trim().replace(" #"+t,"")),a.removeClass("active")):(r.trigger("navbar:search:set",this.$el.find("#search-field").val().trim()+" #"+t),a.addClass("active"),e.te.push("event","search","story","tag","add",{tags:this.$("#search-field").val().match(/#[\w]+(?=\s|$)/g)}))},updateQuery:function(e){this.$el.find("#search-field").addClass("searching").val(e),this.renderTags()},updateCollection:function(e){this.stopListening(this.storyCollection,"sync"),this.storyCollection.off("sync"),this.storyCollection=e,this.listenTo(this.storyCollection,"sync",this.afterCollectionSync)},newSearch:function(e){var t=e.originalEvent;(8===t.keyCode||t.keyCode>45&&!_.contains([91,92,224,225],t.keyCode))&&!t.ctrlKey&&r.trigger("navbar:search:set",this.$("#search-field").val())},focusGained:function(){this.hasFocus=!0},focusLost:function(){this.hasFocus=!1},onSearchFieldBlur:function(e){r.trigger("navbar:search:save",this.$("#search-field").val())},onBrowseTopic:function(t){t.preventDefault();var n=$(t.target).attr("data-name");e.te.push("event","browse","topic",null,"click",{topic:n})},onBrowseTopicKeyboard:function(e){"Enter"===e.key&&this.onBrowseTopic(e)}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.each.call(i,null!=t?t.harmMessages:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.relatedTags:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")},2:function(e,t,n,a,s){var l;return'    <div class="alert-info harm-message h6">'+(null!=(l=e.lambda(t,t))?l:"")+"</div>\n"},4:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <span class="refine-label">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Refine by",{name:"trans",hash:{},data:s}))+":</span>\n    "+(null!=(l=(n.reactComponent||t&&t.reactComponent||r).call(i,"TagCarousel","relatedTags",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.noResults:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return"  <h2>\n"+(null!=(l=n.if.call(i,null!=t?t.showRecentSearches:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+"  </h2>\n\n  <ul>\n"+(null!=(l=n.each.call(i,null!=t?t.suggestedSearchTerms:t,{name:"each",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"</ul>\n"},2:function(e,t,n,a,s){return"    "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Recent Searches",{name:"trans",hash:{},data:s}))+"\n"},4:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.showPopularSearches:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:""},5:function(e,t,n,a,s){return"    "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Popular Searches",{name:"trans",hash:{},data:s}))+"\n  "},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <li>\n      <a href="/search/'+o((n.urlEncodeWithSpace||t&&t.urlEncodeWithSpace||r).call(i,t,{name:"urlEncodeWithSpace",hash:{},data:s}))+'" class="on-navigate">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-search",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o(e.lambda(t,t))+"\n      </a>\n    </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.noResults:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"searching"},3:function(e,t,n,a,s){var l;return'<section id="browse-topics" role="region" aria-label="Browse Topics">\n'+(null!=(l=e.invokePartial(a["core.search.partials.browse_topics"],t,{name:"core.search.partials.browse_topics",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</section>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='<label for="search-field" class="hidden">'+u((n.trans||t&&t.trans||c).call(o,"Search Wattpad for stories and people",{name:"trans",hash:{},data:s}))+'</label>\n\n<input id="search-field" type="search" placeholder="'+u((n.trans||t&&t.trans||c).call(o,"Search Stories & People",{name:"trans",hash:{},data:s}))+'" spellcheck="false" value="'+u("function"==typeof(i=null!=(i=n.searchTerm||(null!=t?t.searchTerm:t))?i:c)?i.call(o,{name:"searchTerm",hash:{},data:s}):i)+'" class="';return i=null!=(i=n.searching||(null!=t?t.searching:t))?i:c,r={name:"searching",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.searching||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'">\n\n<section id="suggested-searches">\n'+(null!=(l=e.invokePartial(a["core.search.partials.suggested_searches"],t,{name:"core.search.partials.suggested_searches",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</section>\n\n"+(null!=(l=n.if.call(o,null!=(l=null!=t?t.testGroups:t)?l.NEW_HOME:l,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+'\n<section id="tag-holder" class="container row">\n'+(null!=(l=e.invokePartial(a["core.search.partials.search_header_tags"],t,{name:"core.search.partials.search_header_tags",data:s,indent:"  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</section>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'    <h2 class="browse-title">\n        '+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(i,"Browse Categories",{name:"trans",hash:{},data:s}))?l:"")+'\n    </h2>\n    <div class="topics-container">\n'+(null!=(l=n.each.call(i,null!=t?t.browseTopics:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"    </div> \n"},2:function(e,t,n,a,s){var l,i=e.lambda,r=e.escapeExpression;return'        <a href="/stories/'+r(i(null!=t?t.name:t,t))+'" class="browse-topic-tile on-browse-topic on-navigate" data-name='+r(i(null!=t?t.name:t,t))+' tabIndex="0"'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.image:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+">\n            "+r(i(null!=t?t.topic:t,t))+"\n        </a>\n"},3:function(e,t,n,a,s){return" style=\"background-image:url('"+e.escapeExpression(e.lambda(null!=t?t.image:t,t))+"')\""},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.noResults:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:""},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(485));!function(e,t,n,s){s.add("SearchResults",s.views.List.extend({templates:{searchResults:{}},events:_.extend({"tap .on-setfilter":"setFilter","click .on-setfilter":"stopEvent","tap    #last-updated-filters li a":"onChangeLastUpdate","change #last-updated-filters":"onChangeLastUpdate","click  #last-updated-filters":"stopEvent","tap    #content-length-filters li a":"onChangeContentLength","change #content-length-filters":"onChangeContentLength","click  #content-length-filters":"stopEvent","tap .on-show-filter-modal":"showFilterModal","click .on-show-filter-modal":"stopEvent","tap .on-result":"onResult","click .on-result":"stopEvent"},s.views.List.prototype.events),className:"feed-item-new panel",containerClass:".list-group",initializeListeners:function(e){e.once("sync",this.render,this),e instanceof s.collections.NodeStorySearch&&this.listenTo(e,"fetchNext:done",this.fetchNextDone)},initialize:function(e){this.advancedFilters={},this.dataKey=e.dataKey,this.templates.searchResults[this.dataKey]=e.template,Handlebars.registerPartial(e.partial,function(){return""}),s.views.List.prototype.initialize.apply(this,arguments),this.initializeListeners(this.collection),_.bindAll(this,"trackViews"),this.initializeTracking(),this.collection.searchTerm.trim().length>0?this.collection.fetch():this.render(),s.get("device").is.mobile&&Handlebars.registerPartial("core.components.search_filter_modal",a.default)},initializeTracking:function(){this.collection instanceof s.collections.NodeStorySearch&&($(e).off("scroll",this.trackViews),this.viewedPromotedStories=[],$(e).on("scroll",this.trackViews))},remove:function(){$(e).off("scroll",this.trackViews),s.views.List.prototype.remove.apply(this,arguments)},render:function(){var e=this.advancedFilters;if(e[this.dataKey.toLowerCase()]=this.collection.toJSON(),e["num"+this.dataKey]=this.collection.total||this.collection.models.length,e.showMore=!!this.collection.hasMore&&this.collection.hasMore(),e.isMature=n.currentUser().get("isMature"),e.isMobile=s.get("device").is.mobile,e.showTotal=!e.isMobile||!e.showMore,this.$el.html(this.templates.searchResults[this.dataKey](e)),this.$el.find(this.containerClass).empty(),this.renderCollection(),this.setButtonState(),this.bindEvents(),this.collection instanceof s.collections.NodeStorySearch){var t=this;_.defer(function(){t.trackViews()})}return this},renderItem:function(e,t,n){s.views.IncrementalList.prototype.renderItem.apply(this,arguments),e instanceof s.models.StoryModel&&(n=n||this.collection.indexOf(e),t=t||this.getContainer())},onChangeContentLength:function(e){this.setFilterGroup(e,"length")},onChangeLastUpdate:function(e){this.setFilterGroup(e,"age")},setFilterGroup:function(e,t){var n,a=e.currentTarget;(n=a.selectedOptions?$(a.selectedOptions[0]).val():$(a).val())&&(this.getContainer().find(".ad-unit").remove(),this.collection.reset(),this.advancedFilters[t]=n,this.$(".fa.searching").removeClass("hidden"),this.collection.setFilter(t,n),this.collection.fetch({reset:!0}))},setFilter:function(e){var t=$(e.currentTarget);t.toggleClass("active"),this.getContainer().find(".ad-unit").remove(),this.collection.reset(),this.collection.setFilter(t.data("filter"),t.hasClass("active")),this.$(".fa.searching").removeClass("hidden"),this.collection.fetch({reset:!0})},showFilterModal:function(e){t.utils.stopEvent(e),s.get("device").is.mobile&&this.$(".search-filter-modal").modal({show:!0})},setButtonState:function(){"function"==typeof this.collection.hasMore&&this.collection.hasMore()?this.$el.find(".on-showmore").parent().removeClass("hidden"):this.$el.find(".on-showmore").parent().addClass("hidden")},fetchNextDone:function(){var e=this.collection.total;if(null!==e){var a=t.utils.count(e),s=n.sprintf(t.utils.ngettext("%s Story","%s Stories",e),[a]);this.$("#header-left").text(s)}else this.$("#header-left").text("");this.$(".fa.searching").addClass("hidden")},newSearch:function(e){return this.stopListening(this.collection),this.collection=e,this.initializeListeners(this.collection),this.initializeTracking(),this.$(".fa.searching").removeClass("hidden"),e},trackViews:_.throttle(function(){var e=this.collection.getPromotedStories(),t=this;_.each(e,function(e){var a=e.id;if(-1==_.indexOf(t.viewedPromotedStories,a)){var s=t.$("ul").find("[data-id='"+a+"']");if(n.isOnScreen(s,.67)){t.viewedPromotedStories.push(a);var l=[e.tracking.impressionUrl];e.tracking.thirdParty&&(l=l.concat(e.tracking.thirdParty.impressionUrls)),_.each(l,function(e){$.ajax({type:"GET",url:e})})}}})},200),onResult:function(t){var n=$(t.currentTarget).data("id");if(this.collection instanceof s.collections.NodeStorySearch){e.te.push("event","search","story",null,"click",{storyid:n,search:$("#search-field").val(),position:this.collection.indexOf(this.collection.get(n))});var a=this.collection.get(n);if(a&&a.get("promoted")){var l=[a.get("tracking").clickUrl];a.get("tracking").thirdParty&&(l=l.concat(a.get("tracking").thirdParty.clickUrls)),_.each(l,function(e){$.ajax({type:"GET",url:e})})}}else e.te.push("event","search","user",null,"click",{userid:n,search:$("#search-field").val(),position:this.collection.indexOf(this.collection.get(n))});this.onNavigate(t)}})),s.mixin(s.views.SearchResults,"InfiniteScroll")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return" active"},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'            <li>\n              <a href="#" role="button" class="on-setfilter search-filter'+(null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=(l=null!=t?t.stories:t)?l.filters:l)?l.mature:l,t),{name:"stories.filters.mature",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'" data-filter="mature">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-empty",17,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-filled",17,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Include mature",{name:"trans",hash:{},data:s}))+"</a>\n            </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="search-filter-modal modal" aria-hidden="true" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <header class="modal-header">\n        <h1 class="modal-title">'+o((n.trans||t&&t.trans||r).call(i,"Search Filters",{name:"trans",hash:{},data:s}))+'</h1>\n        <div class="close" data-dismiss="modal">\n          '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",18,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n        </div>\n      </header>\n      <div class="modal-body">\n        <div>\n          <h4>'+o((n.trans||t&&t.trans||r).call(i,"Last Updated",{name:"trans",hash:{},data:s}))+'</h4>\n          <select id="last-updated-filters">\n            '+(null!=(l=(n.select||t&&t.select||r).call(i,"any",(n.trans||t&&t.trans||r).call(i,"Anytime",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,"24",(n.trans||t&&t.trans||r).call(i,"Today",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,"168",(n.trans||t&&t.trans||r).call(i,"This Week",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,"720",(n.trans||t&&t.trans||r).call(i,"This Month",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,"8760",(n.trans||t&&t.trans||r).call(i,"This Year",{name:"trans",hash:{},data:s}),null!=t?t.age:t,{name:"select",hash:{},data:s}))?l:"")+"\n          </select>\n        </div>\n        <div>\n          <h4>"+o((n.trans||t&&t.trans||r).call(i,"Length",{name:"trans",hash:{},data:s}))+'</h4>\n          <select id="content-length-filters">\n            '+(null!=(l=(n.select||t&&t.select||r).call(i,"any",(n.trans||t&&t.trans||r).call(i,"Any Length",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,"1-10",(n.trans||t&&t.trans||r).call(i,"1 - 10 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,"10-20",(n.trans||t&&t.trans||r).call(i,"10 - 20 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,"20-50",(n.trans||t&&t.trans||r).call(i,"20 - 50 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n            "+(null!=(l=(n.select||t&&t.select||r).call(i,">50",(n.trans||t&&t.trans||r).call(i,"> 50 Parts",{name:"trans",hash:{},data:s}),null!=t?t.length:t,{name:"select",hash:{},data:s}))?l:"")+"\n          </select>\n        </div>\n\n        <h4>"+o((n.trans||t&&t.trans||r).call(i,"Content",{name:"trans",hash:{},data:s}))+'</h4>\n        <ul class="lists-menu list-unstyled" aria-label="'+o((n.trans||t&&t.trans||r).call(i,"Content",{name:"trans",hash:{},data:s}))+'">\n          <li>\n            <a href="#" role="button" class="on-setfilter search-filter'+(null!=(l=n.blockHelperMissing.call(t,e.lambda(null!=(l=null!=(l=null!=t?t.stories:t)?l.filters:l)?l.complete:l,t),{name:"stories.filters.complete",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'" data-filter="complete" >'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-empty",17,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-filled",17,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Only show completed",{name:"trans",hash:{},data:s}))+"</a>\n          </li>\n"+(null!=(l=n.if.call(i,null!=t?t.isMature:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(487));!function(e,t,n,s){s.add("FeedAggregates",Monaco.View.extend({template:a.default,itemView:null,className:"modal-dialog",initialize:function(e){this.itemView=Monaco.View.extend({tagName:"li",template:e.itemTemplate,className:"list-group-item aggregate",initialize:function(){"follow"===this.model.get("type")&&(this.listenTo(s,"app:user:follow",this.onUpdateFollow),this.listenTo(s,"app:user:unfollow",this.onUpdateUnfollow))},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),_.defer(function(){e.$(".panel-body [data-toggle=tooltip]").tooltip()}),this},onAddedToLibrary:function(e){var n=this.$(this.libraryButton+"[data-story-id='"+e+"']");n.children(".fa").removeClass("fa-wp-neutral-2 fa-plus").addClass("fa-wp-neutral-5 fa-check"),n.children(".toggle-triangle").addClass("active"),n.children(".toggle-shadow").addClass("active"),n.attr("title",t.utils.trans("Added to Library")).tooltip("fixTitle")},onRemovedFromLibrary:function(e){var n=this.$(this.libraryButton+"[data-story-id='"+e+"']");n.children(".fa").addClass("fa-wp-neutral-2 fa-plus").removeClass("fa-wp-neutral-5 fa-check"),n.children(".toggle-triangle").removeClass("active"),n.children(".toggle-shadow").removeClass("active"),n.attr("title",t.utils.trans("Add to Library")).tooltip("fixTitle")},onUpdateFollow:function(e){var n=this.$(this.followButton+"[data-target="+e+"]");n.children(".fa").removeClass("fa-follow fa-wp-neutral-2").addClass("fa-following fa-wp-neutral-5"),n.children(".toggle-triangle").addClass("active"),n.children(".toggle-shadow").addClass("active"),n.attr("title",t.utils.trans("Following")).tooltip("fixTitle")},onUpdateUnfollow:function(e){var n=this.$(this.followButton+"[data-target="+e+"]");n.children(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-neutral-2"),n.children(".toggle-triangle").removeClass("active"),n.children(".toggle-shadow").removeClass("active"),n.attr("title",t.utils.trans("Follow")).tooltip("fixTitle")}}),s.mixin(this.itemView,"LibraryManagement","FollowManager"),this.title=e.title},render:function(){var e={};return"dedicate"===this.model.get("type")?(e.username=this.model.get("data").dedicator.name,e.avatar=this.model.get("data").dedicator.avatar):(e.username=this.model.get("data").user.name,e.avatar=this.model.get("data").user.avatar),e.createDate=this.model.get("createDate"),e.title=this.title,this.$el.html(this.template(e)),this.$(".modal-body .list-group").append(new this.itemView({model:this.model}).render().$el),this.collection.each(function(e){this.$(".modal-body .list-group").append(new this.itemView({model:e}).render().$el)},this),this}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<section class="feed-item-new modal-content">\n    <header class="modal-header">\n      <a class="avatar avatar-sm2 on-navigate" href="/user/'+c("function"==typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,36,{name:"resizeAvatar",hash:{},data:s}))+'">\n      </a>\n      <h3 class="h6"> '+(null!=(l="function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)?l:"")+' </h3>\n      <time datetime="'+c("function"==typeof(i=null!=(i=n.createDate||(null!=t?t.createDate:t))?i:o)?i.call(r,{name:"createDate",hash:{},data:s}):i)+'">'+c((n.fromNow||t&&t.fromNow||o).call(r,null!=t?t.createDate:t,{name:"fromNow",hash:{fuzzyTime:!0},data:s}))+'</time>\n      <button type="button" class="close btn btn-text" data-dismiss="modal" aria-label="Close">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      </button>\n    </header>\n    <div class="modal-body">\n      <ul class="list-group">\n\n      </ul>\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-grey btn-block" data-dismiss="modal">'+c((n.trans||t&&t.trans||o).call(r,"Close",{name:"trans",hash:{},data:s}))+"</button>\n    </div>\n</section>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(489));!function(e,t,n,s){s.add("NewsFeed",s.views.CoreFeed.extend({className:"news-feed",template:a.default,events:_.extend({"tap    .on-expand":"onExpandAggregates","click  .on-expand":"stopEvent"},s.views.CoreFeed.prototype.events),getItemView:function(e){switch(e.get("type")){case"message":return s.views.NewFeedItemMessage;case"comment":case"inline_comment":case"library":case"upload":case"vote":case"placeholder":case"dedicate":case"follow":default:return s.views.FeedItem}},initialize:function(){this.setCollectionfilter(s.models.UserEvent.prototype.isValid)},render:function(){var e=this,n=arguments;return Promise.all([Promise.resolve(this.collection.fetchNextSet()),Promise.resolve(t.utils.currentUser().library().loaded())]).then(function(t){s.views.IncrementalList.prototype.render.apply(e,n)}),this},getTemplateData:function(){return{hasFeedItems:this.collection.length>0,hasMoreFeedItems:this.collection.hasMore()}},onExpandAggregates:function(e){var t=$(e.currentTarget).data("id"),n=$(e.currentTarget).parent().siblings("header").children("h3").html(),a=this,l=this.collection.get(t);Promise.resolve($.get(l.get("group_url"),{data:{fields:a.collection.getFieldsString().data.fields}})).then(function(e){var t=new s.collections.NewsFeed([],{username:a.collection.username});t.cacheLocal=!1,t.reset(t.parse(e)),t.limit=e.total,t.total=e.total;var i=s.views.FeedItem.prototype.itemTemplates[l.get("type")],r=new s.views.FeedAggregates({title:n,itemTemplate:i,model:l,collection:t});a.$("#expand-modal").html(r.render().$el),a.$("#expand-modal").modal({keyboard:!0}),a.$("#expand-modal").modal("show")})},stopEvent:function(e){t.utils.stopEvent(e)}})),s.mixin(s.views.NewsFeed,"InfiniteScroll")}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'  <div class="collection">\n  '+(null!=(l="function"==typeof(i=null!=(i=n.feedHtml||(null!=t?t.feedHtml:t))?i:o)?i.call(r,{name:"feedHtml",hash:{},data:s}):i)?l:"")+'\n  </div>\n  <div class="show-more center-text '+(null!=(l=n.if.call(r,null!=t?t.hasMoreFeedItems:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(2,s,0),data:s}))?l:"")+'">\n    <button class="btn btn-link on-showmore">\n        <span class=\'show-more-message\'>\n            <span>'+c((n.trans||t&&t.trans||o).call(r,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n        </span>\n        <span class='loading-message hidden'>\n            "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||o).call(r,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n            <span> "+c((n.trans||t&&t.trans||o).call(r,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n        </span>\n    </button>\n  </div>\n</div>\n"},2:function(e,t,n,a,s){return"hidden"},4:function(e,t,n,a,s){return'  <div>\n    <p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No news for now.",{name:"trans",hash:{},data:s}))+"</p>\n  </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasFeedItems:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+'\n<div id="expand-modal" class="modal fade" role="dialog" tabindex=\'-1\'></div>\n'},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(491));!function(e,t,n,s,l){s.add("RecentlyRead",s.views.Base.extend({template:a.default,initialize:function(){this.collection.once("sync",this.render,this),this.collection.fetch({data:{limit:3}})},render:function(){var e=this.collection.toJSON();return _.forEach(e,function(e){if(e.percentRead=0,e.readingURL=e.url,e.readingPosition&&0!==e.readingPosition.partId){var t=_.findIndex(e.parts,{id:parseInt(e.readingPosition.partId,10)});-1!==t&&(e.percentRead=t/e.parts.length*100,e.percentRead+=1/e.parts.length*100*parseFloat(e.readingPosition.position),e.readingURL=e.parts[t].url)}}),this.$el.html(this.template({recentlyRead:e,hasItems:e.length>0})),this},resource:function(){return"user."+n.currentUser().get("username").get("username")+".recently-read"}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r,o="";return i=null!=(i=n.recentlyRead||(null!=t?t.recentlyRead:t))?i:n.helperMissing,r={name:"recentlyRead",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(null!=t?t:e.nullContext||{},r):i,n.recentlyRead||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(o+=l),o},2:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'      <a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.readingURL:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-navigate library-item">\n          <div class="cover cover-xs">\n              '+c((n.connectCover||t&&t.connectCover||o).call(r,null!=t?t.cover:t,null!=t?t.title:t,50,{name:"connectCover",hash:{},data:s}))+'\n          </div>\n          <div class="content">\n              <h3 class="h6">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h3>\n              <small>"+c(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+'</small>\n              <div class="reading-progress">\n                  <div class="pct-read" style="width:'+c("function"==typeof(i=null!=(i=n.percentRead||(null!=t?t.percentRead:t))?i:o)?i.call(r,{name:"percentRead",hash:{},data:s}):i)+'%"></div>\n              </div>\n              <span class="x-small pull-right">\n'+(null!=(l=n.if.call(r,null!=t?t.percentRead:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+"              </span>\n          </div>\n      </a>\n"},3:function(e,t,n,a,s){return"                  "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Continue reading",{name:"trans",hash:{},data:s}))+"\n"},5:function(e,t,n,a,s){return"                  "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Start reading",{name:"trans",hash:{},data:s}))+"\n"},7:function(e,t,n,a,s){var l;return'        <div id="no-recent-reads">'+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Adding %sstories%s to your library allows you to return to them more easily.","<a href='/stories' class='on-navigate'>","</a>",{name:"trans",hash:{},data:s}))?l:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div class="collection">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasItems:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(493));!function(e,t,n,s,l,i,r){i.add("RecommendedStoryItemCover",i.views.Base.extend({className:"recommended-story-cover story-item",template:a.default,render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class=\'cover-container\'>\n  <a class="on-navigate cover cover-md on-story-item" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n      <div class="fixed-ratio fixed-ratio-cover">\n          <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,256,{name:"resizeCover",hash:{},data:s}))+'" alt="'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'">\n      </div>\n  </a>\n</div>\n<div class="content" data-target="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-type="'+c("function"==typeof(i=null!=(i=n.type||(null!=t?t.type:t))?i:o)?i.call(r,{name:"type",hash:{},data:s}):i)+'">\n    <div class="info">\n        <a class="title meta on-navigate" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.title:t,35,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</a>\n        <a class="username meta on-navigate" href="/user/'+c(e.lambda(null!=(l=null!=t?t.user:t)?l.name:l,t))+'">by '+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=(l=null!=t?t.user:t)?l.name:l,15,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</a>\n    </div>\n\n    <div class="meta social-meta">\n        <span class="read-count"> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",15,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+' </span>\n        <span class="vote-count"> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",15,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+" </span>\n    </div>\n</div>\n\n\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(495));!function(e,t,n,s,l,i,r){i.add("RecommendedStoryItem",i.views.Base.extend({className:"recommended-story",template:a.default,events:{"tap   .btn-dismiss":"onDismiss","click .btn-dismiss":"stopEvent",mouseenter:"onShowControls",mouseleave:"onHideControls"},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),t.defer(function(){e.$(".recommended-story [data-toggle=tooltip]").tooltip()}),this},onAddedToLibrary:function(e){var n=this,a=this.$(this.libraryButton+"[data-story-id='"+e+"']");a.text(s.utils.trans("In Library")),a.attr("title",s.utils.trans("Added to Library")).tooltip("fixTitle"),e===parseInt(this.model.get("id"),10)&&(l.supportsTransition()&&this.$el.addClass("faded"),t.delay(function(){n.model.collection&&n.model.collection.removeAndDismiss(n.model)},300))},onRemovedFromLibrary:function(e){var t=this.$(this.libraryButton+"[data-story-id='"+e+"']");t.text(s.utils.trans("Add")),t.attr("title",s.utils.trans("Add to Library")).tooltip("fixTitle")},onShowControls:function(e){this.$(".on-story-hover").fadeIn(150)},onHideControls:function(e){this.$(".on-story-hover").fadeOut(150)},onDismiss:function(e){n(e.currentTarget).data("story-id")===parseInt(this.model.get("id"),10)&&(l.supportsTransition()&&this.$el.addClass("faded"),this.model.collection&&this.model.collection.removeAndDismiss(this.model))}})),i.mixin(i.views.RecommendedStoryItem,"LibraryManagement")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression,u=e.lambda;return'<div class=\'cover-container\'>\n  <a class="on-navigate cover cover-lg on-story-item" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n      <div class="fixed-ratio fixed-ratio-cover">\n          <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,256,{name:"resizeCover",hash:{},data:s}))+'" alt="'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'">\n      </div>\n  </a>\n\n  <div class="story-overlay on-story-hover" style="display: none;">\n      <div class="overlay-bg"></div>\n      <div class="overlay-container">\n          <button class="btn btn-glass btn-block btn-library btn-left-align" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-toggle="tooltip" title="'+c((n.trans||t&&t.trans||o).call(r,"Add to Library",{name:"trans",hash:{},data:s}))+'">\n              '+c((n.trans||t&&t.trans||o).call(r,"Add",{name:"trans",hash:{},data:s}))+'\n          </button>\n          <a class="btn btn-glass btn-block on-navigate btn-left-align" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n              '+c((n.trans||t&&t.trans||o).call(r,"Read",{name:"trans",hash:{},data:s}))+'\n          </a>\n          <button class="btn btn-glass btn-block btn-left-align btn-dismiss" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-toggle="tooltip" title="'+c((n.trans||t&&t.trans||o).call(r,"Dismiss Recommendation",{name:"trans",hash:{},data:s}))+'">\n              '+c((n.trans||t&&t.trans||o).call(r,"Dismiss",{name:"trans",hash:{},data:s}))+'\n          </button>\n      </div>\n  </div>\n</div>\n\n<div class="content">\n    <div class="info">\n        <strong>'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</strong>\n        <small>"+c(u(null!=(l=null!=t?t.user:t)?l.name:l,t))+'</small>\n    </div>\n    <a href="/user/'+c(u(null!=(l=null!=t?t.user:t)?l.name:l,t))+'" class="avatar avatar-sm on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=(l=null!=t?t.user:t)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(497));!function(e,t,n,s,l,i,r){i.add("RecommendedStories",i.views.CollectionView.extend({className:"recommended-stories-view",containerClass:".collection",itemView:i.views.RecommendedStoryItem,template:a.default,initialize:function(e){if(void 0===(e=e||{}).username)throw new Error("RecommendedStories: options.username is missing (required).");e.is404&&(this.itemView=i.views.RecommendedStoryItemCover),this.collection=new i.collections.RecommendedStories([],{username:e.username,limit:e.limit||10}),this.setCollectionfilter(this.isInRange),this.listenTo(this.collection,"update",this.renderExtraItem)},render:function(){var e=this;return this.$el.html(this.template(s.testGroups||{})),Promise.resolve(this.collection.fetchNextSet()).then(function(){e.bindEvents(),e.renderCollection()}),this},renderCollection:function(){this.collection.models.length>0?i.views.CollectionView.prototype.renderCollection.apply(this,arguments):this.$("span").removeClass("hidden")},isInRange:function(){var e=this.collection.models.indexOf(this);return 0<=e&&e<=3},renderExtraItem:function(){var e=this.getContainer(),t=this.collection.models[3],n={model:t,cvIndex:4};t&&(this.viewPointers[t.cid]=new this.itemView(n),this.viewPointers[t.cid].render(),e[this.direction](this.viewPointers[t.cid].$el))}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<h2><a class="on-navigate" href="/stories">\n  '+o((n.trans||t&&t.trans||r).call(i,"Recommended Stories",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-right",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n</a></h2>\n<div class="collection"></div>\n<span class="hidden">'+o((n.trans||t&&t.trans||r).call(i,"Please check back later for more recommendations.",{name:"trans",hash:{},data:s}))+"</span>\n"},useData:!0})},function(e,t,n){"use strict";var a=l(n(499)),s=l(n(500));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l,i,r,o){r.add("RecommendedFollowItem",o.View.extend({className:"recommended-user",template:{row:s.default,card:a.default},events:{"tap .on-dismiss":"onDismiss","click .on-dismiss":"stopEvent"},initialize:function(e){e=e||{},this.cards=!!e.cards,this.listenTo(r,"app:user:follow",this.onUpdateFollow),this.listenTo(r,"app:user:unfollow",this.onUpdateUnfollow)},getClassName:function(e){return e?"recommended-user-card col-md-3 col-sm-4 col-xs-6":"recommended-user"},render:function(){var e=this.cards?this.template.card:this.template.row;return this.model.get("recommendationHint")&&this.model.set("recommendationHint",i.unsanitizeHTML(this.model.get("recommendationHint"))),this.$el.html(e(this.model.toJSON())),this},onUpdateFollow:function(e){var n=this;this.$(this.followButton+"[data-target="+e+"]").children(".fa").removeClass("fa-follow fa-wp-neutral-2").addClass("fa-following fa-wp-neutral-2");var a=this.model.collection;e===this.model.get("username")&&(i.supportsTransition()&&this.$el.addClass("faded"),t.delay(function(){n.model.collection&&(n.model.collection.remove(n.model),a.trigger("update"))},300))},onUpdateUnfollow:function(e){this.$(this.followButton+"[data-target="+e+"]").children(".fa").removeClass("fa-following fa-wp-neutral-2").addClass("fa-follow fa-wp-neutral-2")},onDismiss:function(e){var a=this;n(e.currentTarget).data("target")===this.model.get("username")&&(i.supportsTransition()&&this.$el.addClass("faded"),t.delay(function(){a.model.collection&&a.model.collection.removeAndDismiss(a.model)},300))}})),r.mixin(r.views.RecommendedFollowItem,"FollowManager")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'    <div class="background background-sm" style="background-image: url( \''+e.escapeExpression((n.profileBackground||t&&t.profileBackground||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.backgroundUrl:t,360,{name:"profileBackground",hash:{},data:s}))+"' );\"></div>\n"},3:function(e,t,n,a,s){var l;return'    <div class="background background-sm" '+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.highlight_colour:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+"></div>\n"},4:function(e,t,n,a,s){var l;return'style="background-color: '+e.escapeExpression("function"==typeof(l=null!=(l=n.highlight_colour||(null!=t?t.highlight_colour:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"highlight_colour",hash:{},data:s}):l)+'"'},6:function(e,t,n,a,s){var l;return e.escapeExpression("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:s}):l)},8:function(e,t,n,a,s){var l;return e.escapeExpression("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"username",hash:{},data:s}):l)},10:function(e,t,n,a,s){return"disabled"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u="function",d=e.escapeExpression,h='<article class="user-card">\n    <button class="btn btn-no-background btn-remove on-dismiss" data-target="'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'">\n        '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-remove",16,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+"\n    </button>\n"+(null!=(l=n.if.call(o,null!=t?t.backgroundUrl:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'    <a class="avatar avatar-lg on-navigate" href="/user/'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'">\n        <img src="'+d(typeof(i=null!=(i=n.avatar||(null!=t?t.avatar:t))?i:c)===u?i.call(o,{name:"avatar",hash:{},data:s}):i)+'"></a>\n    <div class="content">\n        <h5><a class="alt-link on-navigate" href="/user/'+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'">\n          '+(null!=(l=n.if.call(o,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.program(8,s,0),data:s}))?l:"")+"\n        </a></h5>\n        <small>@"+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'</small>\n        <button class="btn btn-block btn-md btn-white on-follow ';return i=null!=(i=n.disabled||(null!=t?t.disabled:t))?i:c,r={name:"disabled",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s},l=typeof i===u?i.call(o,r):i,n.disabled||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(h+=l),h+"\" data-target='"+d(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:c)===u?i.call(o,{name:"username",hash:{},data:s}):i)+'\' role="button" aria-pressed="false">\n            '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-follow",14,"wp-base-2-dark",{name:"iconify",hash:{},data:s}))?l:"")+" "+d((n.trans||t&&t.trans||c).call(o,"Follow",{name:"trans",hash:{},data:s}))+"\n        </button>\n    </div>\n    <footer><span>"+(null!=(l=typeof(i=null!=(i=n.recommendationHint||(null!=t?t.recommendationHint:t))?i:c)===u?i.call(o,{name:"recommendationHint",hash:{},data:s}):i)?l:"")+"</span></footer>\n</article>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return e.escapeExpression("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:s}):l)},3:function(e,t,n,a,s){var l;return e.escapeExpression("function"==typeof(l=null!=(l=n.username||(null!=t?t.username:t))?l:n.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"username",hash:{},data:s}):l)},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c="function",u=e.escapeExpression;return'<a class="on-navigate" href="/user/'+u(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)===c?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n  <div class="avatar avatar-md">\n    <img src="'+u((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=t?t.avatar:t,48,{name:"resizeAvatar",hash:{},data:s}))+'">\n  </div>\n</a>\n\n<div class="content">\n  <a class="name on-navigate" href="/user/'+u(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)===c?i.call(r,{name:"username",hash:{},data:s}):i)+'">\n    <strong>'+(null!=(l=n.if.call(r,null!=t?t.name:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+"</strong>\n  </a>\n  <small>"+(null!=(l=typeof(i=null!=(i=n.recommendationHint||(null!=t?t.recommendationHint:t))?i:o)===c?i.call(r,{name:"recommendationHint",hash:{},data:s}):i)?l:"")+"</small>\n</div>\n\n<div class=\"controls pull-right\">\n  <button class='btn btn-white btn-fan btn-follow on-follow pull-left' data-target='"+u(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)===c?i.call(r,{name:"username",hash:{},data:s}):i)+"'>\n    "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-follow",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n  </button>\n  <button class='btn btn-white btn-dismiss on-dismiss pull-right' data-target='"+u(typeof(i=null!=(i=n.username||(null!=t?t.username:t))?i:o)===c?i.call(r,{name:"username",hash:{},data:s}):i)+"'>\n    "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n  </button>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(502));!function(e,t,n,s,l,i,r){i.add("RecommendedFollow",i.views.CollectionView.extend({className:"recommended-users-view",containerClass:".collection",itemView:i.views.RecommendedFollowItem,template:a.default,itemCount:3,initialize:function(e){var t=this;if(void 0===(e=e||{}).username)throw new Error("RecommendedFollow: options.username is missing (required).");this.cards=!!e.cards,this.itemCount=e.itemCount||3,this.collection=new i.collections.RecommendedUsers([],{username:e.username,limit:e.limit||10}),this.isInRange=this.isInRangeFactory(),this.setCollectionfilter(this.isInRange);var n=Promise.resolve();this.listenTo(this.collection,"update",function(){t.collection.length<t.itemCount+2&&(n=Promise.resolve(t.collection.fetchNextSet())),n.then(function(){t.renderExtraItem()})})},render:function(){var e=this;return this.$el.html(this.template({})),Promise.resolve(this.collection.fetchNextSet()).then(function(){e.bindEvents(),e.renderCollection({cards:e.cards,className:i.views.RecommendedFollowItem.prototype.getClassName(e.cards)})}),this},renderCollection:function(){this.collection.models.length>0?i.views.CollectionView.prototype.renderCollection.apply(this,arguments):this.$("span").removeClass("hidden")},isInRangeFactory:function(){var e=this;return function(){var t=this.collection.models.indexOf(this);return-1<t&&t<e.itemCount}},renderExtraItem:function(){var e=this.getContainer(),t=this.collection.models[2]?this.collection.models[2]:null,n={model:t,cvIndex:3,cards:this.cards,className:this.itemView.prototype.getClassName(!!this.cards)};t&&(this.viewPointers[t.cid]=new this.itemView(n),this.viewPointers[t.cid].render(),e[this.direction](this.viewPointers[t.cid].$el))}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return"<h2>"+r((n.trans||t&&t.trans||i).call(l,"Recommended People",{name:"trans",hash:{},data:s}))+'</h2>\n<div class="collection row">\n</div>\n<span class="checklater hidden">'+r((n.trans||t&&t.trans||i).call(l,"Please check back later for more recommendations.",{name:"trans",hash:{},data:s}))+"</span>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(504));!function(e,t,n,s){s.add("HomeLanding",s.views.RegionManager.extend({template:a.default,id:"logged-in-home",initialize:function(){Handlebars.registerPartial("core.collection_views.recently_read",function(){return""}),Handlebars.registerPartial("core.collection_views.news_feed",function(){return""}),Handlebars.registerPartial("core.collection_views.recommended_stories",function(){return""}),Handlebars.registerPartial("core.collection_views.recommended_follow",function(){return""})},events:{"tap    .on-user-mention":"onNavigate","click  .on-user-mention":"stopEvent"},render:function(){var e=t.utils.currentUser().get("username"),n=new s.collections.NewsFeed,a=new s.views.NewsFeed({collection:n}),l=new s.collections.RecentlyRead([],{username:e}),i=new s.views.RecentlyRead({collection:l}),r=new s.views.RecommendedFollow({username:e}),o=new s.views.RecommendedStories({username:e});return this.$el.html(this.template({currentUser:t.utils.currentUser().toJSON()})),this.$("#news-feed,#current-reads,#recommended-users,#recommended-stories").empty(),this.setRegion("#news-feed",a.render()),this.setRegion("#current-reads",i),this.setRegion("#recommended-users",r.render()),this.setRegion("#recommended-stories",o.render()),this},setElement:function(e){Monaco.View.prototype.setElement.apply(this,arguments),this.regions["#news-feed"]&&this.regions["#news-feed"].view&&this.regions["#news-feed"].view.setElement(this.$("#news-feed > div")),this.regions["#current-reads"]&&this.regions["#current-reads"].view&&this.regions["#current-reads"].view.setElement(this.$("#current-reads > div")),this.regions["#recommended-users"]&&this.regions["#recommended-users"].view&&this.regions["#recommended-users"].view.setElement(this.$("#recommended-users > div")),this.regions["#recommended-stories"]&&this.regions["#recommended-stories"].view&&this.regions["#recommended-stories"].view.setElement(this.$("#recommended-stories > div"))}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="container">\n    <div class="row">\n        <main class="col-sm-8">\n            <div id="recommended-stories">\n                <div class="recommended-stories-view">'+(null!=(l=e.invokePartial(a["core.collection_views.recommended_stories"],t,{name:"core.collection_views.recommended_stories",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+'</div>\n            </div>\n            <div id="recommended-users">\n                <div class="recommended-users-view">'+(null!=(l=e.invokePartial(a["core.collection_views.recommended_follow"],t,{name:"core.collection_views.recommended_follow",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n            </div>\n\n            <h2>"+c((n.trans||t&&t.trans||o).call(r,"Newsfeed",{name:"trans",hash:{},data:s}))+'</h2>\n            <div id="news-feed">\n                <div class="news-feed">\n                    '+(null!=(l="function"==typeof(i=null!=(i=n.feedHtml||(null!=t?t.feedHtml:t))?i:o)?i.call(r,{name:"feedHtml",hash:{},data:s}):i)?l:"")+'\n                </div>\n            </div>\n\n        </main>\n\n        <aside class="col-sm-4">\n            <h2 class="first"><a class="library-list-link on-navigate" href="/library">'+c((n.trans||t&&t.trans||o).call(r,"From your library",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-right",12,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</a></h2>\n            <div id="current-reads" class="library-list sidebar">\n                <div>'+(null!=(l=e.invokePartial(a["core.collection_views.recently_read"],t,{name:"core.collection_views.recently_read",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n            </div>\n        </aside>\n    </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:home_landing",s.router.filter(["getTranslations","requireLogin","getCategories"],function(t){var n=new s.views.HomeLanding;Promise.resolve(a.utils.currentUser().library().loaded()).then(function(){s.transitionTo(n,{hasHeader:!0,hasFooter:!0,pageTitle:a.utils.trans("Home")}),e.te.push("event","app","page",null,"view",{page:"updates"})})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("CoreBrowseStories",a.views.RegionManager.extend({filter:"hot",category:null,tag:"",id:"browse-stories-page",events:{"tap    .on-tab-nav":"onSectionNavigate","click  .on-tab-nav":"stopEvent","tap .on-filter-completed":"onShowCompleted","click .on-filter-completed":"stopEvent"},initialize:function(e){Handlebars.registerPartial("core.collection_views.browse_stories",function(){return""}),Handlebars.registerPartial("core.signup_prompt",function(){return""})},setTabContent:function(){var e=new a.views.BrowseStories({filter:this.filter,category:this.category,tag:this.tag});this.$("#tab-content").empty(),this.clearRegion("#tab-content"),this.setRegion("#tab-content",e.render())},setElement:function(e){Monaco.View.prototype.setElement.apply(this,arguments),this.regions["#tab-content"]&&this.regions["#tab-content"].view&&this.regions["#tab-content"].view.setElement(this.$("#tab-content > div")),this.regions["#authentication-panel"]&&this.regions["#authentication-panel"].view&&this.regions["#authentication-panel"].view.setElement(this.$("#authentication-panel > div"))},onShowCompleted:function(e){var n=$(e.currentTarget);if(n.hasClass("active")){var a=t.utils.iconify("fa-check",16,"wp-base-2-dark");n.removeClass("active"),n.children(".fa").replaceWith(s),n.children(".show-completed-text").removeClass("fa-wp-base-2").addClass("fa-wp-neutral-2"),this.$el.removeClass("completed-only")}else{var s=t.utils.iconify("fa-circle-empty",16,"wp-neutral-3");n.addClass("active"),this.$el.addClass("completed-only"),n.children(".fa").replaceWith(a),n.children(".show-completed-text").removeClass("fa-wp-neutral-2").addClass("fa-wp-base-2")}},onSectionNavigate:function(e){t.utils.stopEvent(e);var n=$(e.currentTarget).parent().data("section");this.setSection(n)},setSection:function(t){var s=this.$("#filter-tabs");s.find("nav li").removeClass("active"),s.find("nav li[data-section="+t+"]").addClass("active");var l=e.location.href.replace(/\/?(rising|hot|new|featured)$/,"");"hot"!==t&&(l+="/"+t),a.router.navigate(n.formatStoryUrl(l),{trigger:!1}),this.filter=t,this.setTabContent()}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";var a=l(n(508)),s=l(n(509));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l){l.add("CoreBrowseCategory",l.views.CoreBrowseStories.extend({template:s.default,events:_.extend({"tap .on-change-category":"onChangeCategory","click .on-change-category":"stopEvent"},l.views.CoreBrowseStories.prototype.events),initialize:function(e){e=e||{},this.category=e.category,this.filter=e.filter||"hot",l.views.CoreBrowseStories.prototype.initialize.apply(this,arguments),l.get("device").is.mobile&&Handlebars.registerPartial("core.components.choose_category_modal",a.default)},render:function(){var a={active:{}},s=t.utils.getCookie("locale");s&&0!==s.trim().length||(s="en_US"),a.isEnglish="en_US"===s,a.active[this.filter]=!0,a.category=this.category.toJSON(),a.categories=l.get("categories").toJSON(),_.forEach(a.categories,function(e){a.category.name==e.name?e.selected=!0:e.selected=!1}),a.dp=e.devicePixelRatio>=2?2:1,a.category.subtitle=n.categorySubtitle(a.category),this.$el.html(this.template(a)),this.setTabContent()},onChangeCategory:function(e){if(l.get("device").is.mobile)this.$(".choose-category-modal").modal({show:!0});else{var a=$(e.currentTarget).data("category"),s=l.get("categories").find(function(e,n,s){return t.utils.slugify(e.get("name_english"))===a.toLowerCase()});l.router.navigate("/stories/"+a),this.category=s,this.filter="hot",t.utils.setTitle(n.trans("%s Stories and Books Free",s.get("name_english"))),this.render()}}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression;return'          <li class="col-xs-6 lists-menu list-unstyled'+(null!=(r=(n.ifequal||t&&t.ifequal||c).call(o,null!=t?t.id:t,null!=(r=null!=i[1]?i[1].category:i[1])?r.id:r,{name:"ifequal",hash:{},fn:e.program(2,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n            <a class="on-navigate" href="/stories/'+u((n.slugify||t&&t.slugify||c).call(o,null!=t?t.name_english:t,{name:"slugify",hash:{},data:s}))+'">'+u(e.lambda(null!=t?t.name:t,t))+"</a>\n          </li>\n"},2:function(e,t,n,a,s){return" active"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=n.helperMissing;return'<div data-category-id="'+o(e.lambda(null!=(r=null!=t?t.category:t)?r.id:r,t))+'" class="choose-category-modal modal" aria-hidden="true" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <header class="modal-header">\n        <h1 class="modal-title">'+o((n.trans||t&&t.trans||u).call(c,"Categories",{name:"trans",hash:{},data:s}))+'</h1>\n        <div class="close" data-dismiss="modal">\n          '+(null!=(r=(n.iconify||t&&t.iconify||u).call(c,"fa-remove",18,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?r:"")+'\n        </div>\n      </header>\n      <div class="modal-body">\n        <ul class="lists-menu list-unstyled" aria-label="'+o((n.trans||t&&t.trans||u).call(c,"Categories",{name:"trans",hash:{},data:s}))+'">\n'+(null!=(r=n.each.call(c,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0,useDepths:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'                    <li class="col-xs-6"><a class="on-change-category" data-category="'+c((n.slugify||t&&t.slugify||o).call(r,null!=t?t.name_english:t,{name:"slugify",hash:{},data:s}))+'" href="#"> '+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+"\n"+(null!=(l=n.if.call(r,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"                    </a></li>\n"},2:function(e,t,n,a,s){var l;return"                            "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-check",18,"wp-base-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},4:function(e,t,n,a,s){return' class="active"'},6:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'                      <li data-section="featured"'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.active:t)?l.featured:l,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'>\n                        <a href="/stories/'+o((n.slugify||t&&t.slugify||r).call(i,null!=(l=null!=t?t.category:t)?l.name_english:l,{name:"slugify",hash:{},data:s}))+'/featured" class="on-tab-nav">'+o((n.trans||t&&t.trans||r).call(i,"Featured",{name:"trans",hash:{},data:s}))+"</a>\n                      </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'<div class="container">\n    <header class="background background-lg text-left category-banner">\n        <div class="category-header">\n            <h2 class="title">'+o((n.trans||t&&t.trans||r).call(i,"Category",{name:"trans",hash:{},data:s}))+'</h2>\n            <div class="dropdown">\n                <a href=\'#\' data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    <h1 class="h2">'+o(c(null!=(l=null!=t?t.category:t)?l.name:l,t))+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-down-small",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</h1>\n                </a>\n                <div class="triangle"></div>\n                <ul class="dropdown-menu columns" role="menu">\n'+(null!=(l=n.each.call(i,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'                </ul>\n            </div>\n            <h2 class="subtitle">'+o(c(null!=(l=null!=t?t.category:t)?l.subtitle:l,t))+'</h2>\n        </div>\n    </header>\n    <div id="filter-tabs" class="sub-navigation">\n        <div class="container">\n            <nav class="pull-left" role="navigation">\n                <ul>\n                    <li data-section="hot"'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.active:t)?l.hot:l,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'>\n                        <a href="/stories/'+o((n.slugify||t&&t.slugify||r).call(i,null!=(l=null!=t?t.category:t)?l.name_english:l,{name:"slugify",hash:{},data:s}))+'" class="on-tab-nav">'+o((n.trans||t&&t.trans||r).call(i,"Hot",{name:"trans",hash:{},data:s}))+"</a>\n                    </li>\n"+(null!=(l=n.if.call(i,null!=t?t.isEnglish:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(6,s,0),data:s}))?l:"")+'                    <li data-section="rising"'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.active:t)?l.rising:l,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'>\n                        <a href="/stories/'+o((n.slugify||t&&t.slugify||r).call(i,null!=(l=null!=t?t.category:t)?l.name_english:l,{name:"slugify",hash:{},data:s}))+'/rising" class="on-tab-nav">'+o((n.trans||t&&t.trans||r).call(i,"Rising",{name:"trans",hash:{},data:s}))+'</a>\n                    </li>\n                    <li data-section="new"'+(null!=(l=n.if.call(i,null!=(l=null!=t?t.active:t)?l.new:l,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+'>\n                        <a href="/stories/'+o((n.slugify||t&&t.slugify||r).call(i,null!=(l=null!=t?t.category:t)?l.name_english:l,{name:"slugify",hash:{},data:s}))+'/new" class="on-tab-nav">'+o((n.trans||t&&t.trans||r).call(i,"New",{name:"trans",hash:{},data:s}))+'</a>\n                    </li>\n                </ul>\n            </nav>\n            <div class="actions pull-right" role="menu">\n                <div class="show-completed"><a href="#" role="button" class="on-filter-completed"> '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-circle-empty",11,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+' <span class="show-completed-text fa-wp-neutral-2">'+o((n.trans||t&&t.trans||r).call(i,"Only show completed",{name:"trans",hash:{},data:s}))+'</span></a></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<main id="tab-content" class="container">\n    <div class="stories">\n'+(null!=(l=e.invokePartial(a["core.collection_views.browse_stories"],t,{name:"core.collection_views.browse_stories",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </div>\n</main>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s,l){l.router.on("route:browse-category",l.router.filter(["getTranslations","getCategories"],function(t,n,i){var r,o,c=n||"hot";"object"===(void 0===i?"undefined":a(i))&&(i.redirectfrom||i.redirectFrom)&&new l.views.ErrorToast({message:s.utils.trans("We're sorry! The page you requested no longer exists.")+" "+s.utils.trans("So we have brought you to a related page.")},{type:"dismissable"}).render();t&&""!==t.trim()?(o=(o=l.get("categories").find(function(e,n,a){return s.utils.slugify(e.get("name_english"))===t.toLowerCase()}))||l.get("categories").at(0),r=new l.views.CoreBrowseCategory({category:o,filter:c})):r=new l.views.DiscoverLanding,l.transitionTo(r,{hasHeader:!0,hasFooter:!0,pageTitle:o?s.utils.trans("%s Stories and Books Free",o.get("name")):"Discover"}),e.te.push("event","app","page",null,"view",{page:"category",tags:o||"discover"})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s,l){l.router.on("route:browse-tag",l.router.filter(["getTranslations","getCategories"],function(t,n,i){"object"===(void 0===i?"undefined":a(i))&&(i.redirectfrom||i.redirectFrom)&&new l.views.ErrorToast({message:s.utils.trans("We're sorry! The page you requested no longer exists.")+" "+s.utils.trans("So we have brought you to a related page.")},{type:"dismissable"}).render();var r,o,c=null,u=null,d=null,h=null,p=new l.collections.BrowseTopics;Promise.resolve(p.fetch()).then(function(){u=p.findWhere({name:t});var e=t.split(",")[0],a=t.split(",").slice(-1)[0];d=p.findWhere({name:e});var i=p.findWhere({name:a});u?(t=null,c=u.get("name"),o=u.get("topic"),h=new l.collections.TagModules([],{tags:c})):(o=t.split(",").map(function(e){return"#"+e}).join(" "),h=new l.collections.TagModules([],{tags:t})),Promise.resolve(h.fetchNextSet()).then(function(){r=new l.views.Browse({tag:t,topic:c,topicModel:u,collection:h,rootTopicModel:d,lastTopicModel:i,browseTopicsCollection:p,section:n}),l.transitionTo(r,{hasHeader:!0,hasFooter:!0,pageTitle:s.utils.trans("%s Stories",o)})},function(){l.router.trigger("route:error-404","browse-tag")})},function(){l.router.trigger("route:error-404","browse-tag")}),e.te.push("event","app","page",null,"view",{page:"tag_page",tags:t,filter:n||null})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({"contests/wattys2019":["contest_form",{}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:contest_form",s.router.filter(["getTranslations"],function(e){var t,n,a;e&&(t=e.success,n=e.storyId,a=e.hasAddedWattysTag);var l=new s.views.DummyReactView({component:"ContestForm",componentId:"contest-form",componentData:{storyId:n,success:"true"===t,hasAddedWattysTag:"true"===a,isStandalonePage:!0}});s.transitionTo(l,{hasHeader:!1,hasFooter:!1})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(515));!function(e,t,n,s,l){s.add("DiscoverStories",s.views.Base.extend({id:"discover-landing",template:a.default,events:{"tap .on-story-preview":"onStoryPreview","click .on-story-preview":"stopEvent"},initialize:function(e){e=e||{},this.setElement(e.el),e.placeholder&&this.collection.once("sync",this.render,this),this.collection.fetch()},render:function(){var t={panels:this.collection.getPanelGroup(),dp:e.devicePixelRatio>=2?2:1};return t.panels.length>0&&(t.mobilePanels=[{story:this.collection.at(0).toJSON()},{story:this.collection.at(1).toJSON()}]),this.$(".loading-placeholder").addClass("hidden").after($(this.template(t)).find(".story-grid")),this},onStoryPreview:function(e){var t=$(e.currentTarget).data("story-id"),a=this.collection.get(t),l=$("#preview-modal"),i=new s.views.BrowseStoryPreview({model:a});if(!l.length)return s.router.navigate(n.formatStoryUrl(a.get("url")),{trigger:!0});l.empty().append(i.render().$el),i.openModal()}})),s.mixin(s.views.DiscoverStories,"LibraryManagement")}(window,wattpad,wattpad.utils,window.app,_)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{};return'        --\x3e<div class="story-grid-panel '+e.escapeExpression("function"==typeof(i=null!=(i=n.class||(null!=t?t.class:t))?i:n.helperMissing)?i.call(r,{name:"class",hash:{},data:s}):i)+'">\x3c!--\n\n'+(null!=(l=n.each.call(r,null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+"\n        --\x3e</div>\x3c!--\n"},2:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'            --\x3e<a href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'" class="on-story-preview cover cover-lg" data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n                <div class="fixed-ratio fixed-ratio-cover">\n                    <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,230,{name:"resizeCover",hash:{},data:s}))+'" alt="'+c((n.trans||t&&t.trans||o).call(r,"%1$s by %2$s",null!=t?t.title:t,null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+'">\n                </div>\n            </a>\x3c!--\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="discover-stories-desktop" data-type="discover-stories" data-url="'+c("function"==typeof(i=null!=(i=n.url||(null!=t?t.url:t))?i:o)?i.call(r,{name:"url",hash:{},data:s}):i)+'" data-cache="'+c("function"==typeof(i=null!=(i=n.cache||(null!=t?t.cache:t))?i:o)?i.call(r,{name:"cache",hash:{},data:s}):i)+'">\n    <h2 class="story-grid-title">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h2>\n    <h3><small>"+c("function"==typeof(i=null!=(i=n.subtitle||(null!=t?t.subtitle:t))?i:o)?i.call(r,{name:"subtitle",hash:{},data:s}):i)+'</small></h3>\n\n    <div class="story-grid">\x3c!--\n'+(null!=(l=n.each.call(r,null!=t?t.panels:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"    --\x3e</div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(517));!function(e,t,n,s,l){s.add("DiscoverLists",s.views.Base.extend({template:a.default,initialize:function(e){e=e||{},this.setElement(e.el),e.placeholder&&this.collection.once("sync",this.render,this),this.collection.fetch(),this.listenTo(s,"app:user:follow",this.onUpdateFollow),this.listenTo(s,"app:user:unfollow",this.onUpdateUnfollow)},render:function(){var e={lists:l.take(this.collection.toJSON(),3)};return this.$(".loading-placeholder").addClass("hidden").after($(this.template(e)).find(".reading-list-grid")),this},onUpdateFollow:function(e){this.$(this.followButton+"[data-target="+e+"]").children(".fa").removeClass("fa-follow fa-wp-neutral-2").addClass("fa-following fa-wp-neutral-2")},onUpdateUnfollow:function(e){this.$(this.followButton+"[data-target="+e+"]").children(".fa").removeClass("fa-following fa-wp-neutral-2").addClass("fa-follow fa-wp-neutral-2")}})),s.mixin(s.views.DiscoverLists,"FollowManager")}(window,wattpad,wattpad.utils,window.app,_)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d=e.lambda,h='     --\x3e<div class="reading-list-grid-panel reading-list-card">\n            <div class="content">\n                <a href="/list/'+u("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:c)?i.call(o,{name:"id",hash:{},data:s}):i)+'"><h5>'+u((n.simpleShorten||t&&t.simpleShorten||c).call(o,null!=t?t.name:t,46,{name:"simpleShorten",hash:{},data:s}))+"</h5>\x3c!--\n";return i=null!=(i=n.sample_covers||(null!=t?t.sample_covers:t))?i:c,r={name:"sample_covers",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.sample_covers||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(h+=l),h+'                --\x3e</a>\n            </div>\n            <footer>\n                <a href="/user/'+u(d(null!=(l=null!=t?t.user:t)?l.name:l,t))+'" class="user-link on-navigate">\n                    <img src="'+u(d(null!=(l=null!=t?t.user:t)?l.avatar:l,t))+'" class="avatar avatar-md">\n                    <h5 class="h3">'+u(d(null!=(l=null!=t?t.user:t)?l.name:l,t))+"</h5>\n                    <div class=\"controls\">\n                        <button class='btn btn-white btn-fan btn-follow on-follow btn-icon-only' data-target='"+u(d(null!=(l=null!=t?t.user:t)?l.name:l,t))+"'>\n                            "+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-follow",22,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"\n                        </button>\n                    </div>\n                </a>\n            </footer>\n        </div>\x3c!--\n"},2:function(e,t,n,a,s){return'                    --\x3e<div class="sample-cover">\n                    <img src="'+e.escapeExpression((n.resizeCover||t&&t.resizeCover||n.helperMissing).call(null!=t?t:e.nullContext||{},t,96,{name:"resizeCover",hash:{},data:s}))+'" class="cover cover-sm">\n                    </div>\x3c!--\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="discover-reading_lists_with_users-desktop" data-type="discover-reading_lists_with_users" data-url="'+c("function"==typeof(i=null!=(i=n.url||(null!=t?t.url:t))?i:o)?i.call(r,{name:"url",hash:{},data:s}):i)+'" data-cache="'+c("function"==typeof(i=null!=(i=n.cache||(null!=t?t.cache:t))?i:o)?i.call(r,{name:"cache",hash:{},data:s}):i)+'">\n    <h2 class="story-grid-title">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</h2>\n    <h3><small>"+c("function"==typeof(i=null!=(i=n.subtitle||(null!=t?t.subtitle:t))?i:o)?i.call(r,{name:"subtitle",hash:{},data:s}):i)+'</small></h3>\n\n    <div class="reading-list-grid">\x3c!--\n'+(null!=(l=n.each.call(r,null!=t?t.lists:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"    --\x3e</div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=i(n(519)),s=i(n(520)),l=i(n(521));function i(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,i){i.add("DiscoverLanding",i.views.RegionManager.extend({template:l.default,partials:{"core.discover.discover_categories":s.default,"core.discover.discover_tags":a.default,"core.collection_views.recommended_follow":function(){return""},"core.signup_prompt":function(){return""}},id:"discover-landing",events:{},initialize:function(e){e=e||{},_.each(this.partials,function(e,t){Handlebars.registerPartial(t,e)})},render:function(){var a=n.currentUser(),s={panelGroups:[]};if(n.appOn()){for(var l=this.collection.toJSON(),r=0;r<l.length;r++)"stories"!==l[r].listType&&"reading_lists_with_users"!==l[r].listType||s.panelGroups.push({placeholder:!0,placeholderType:l[r].listType,title:n.PanelBuilder.linkifyTitle(l[r].title,l[r].elements),subtitle:l[r].subtitle,url:l[r].url,cache:l[r].id}),2===r&&s.panelGroups.push({title:n.trans("Suggested Tags"),tags:a.get("recommendedTags")});s.panelGroups[0].layout=n.PanelBuilder.Layouts.FourUpInside,s.panelGroups[1].layout=n.PanelBuilder.Layouts.FourUpNone,s.categories=i.get("categories").toJSON(),s.currentUser=n.currentUser().get("username"),s.onboarding=!0,t.utils.setCookie("signupFrom","discover",0,e.location.hostname.replace("www","")),this.$el.html(this.template(s)),this.bindDiscoveryPanelGroups()}var o=new i.views.SignUpPrompt({model:new i.models.Authsignup,subtitle:t.utils.trans("Sign Up"),sideWay:!0});if(this.setRegion("#authentication-panel",o.render()),a.get("username")){var c=new i.views.RecommendedFollow({username:a.get("username"),cards:!0,itemCount:4});this.setRegion("#recommended-users",c.render())}return this},bindDiscoveryPanelGroups:function(){var e=this;e.subViews=e.subViews||[],this.$("[data-type=discover-stories]").each(function(){var t=$(this);e.subViews.push(new i.views.DiscoverStories({el:this,placeholder:t.data("placeholder"),collection:new i.collections.DiscoverCollection([],{url:t.data("url"),cache:t.data("cache"),layout:t.data("layout")})}))}),this.$("[data-type=discover-reading_lists_with_users]").each(function(){var t=$(this);e.subViews.push(new i.views.DiscoverLists({el:this,placeholder:t.data("placeholder"),model:e.model,collection:new i.collections.DiscoverListsCollection([],{url:t.data("url"),cache:t.data("cache"),layout:t.data("layout")})}))})},setElement:function(e){Monaco.View.prototype.setElement.apply(this,arguments),this.regions["#recommended-users"]&&this.regions["#recommended-users"].view&&this.regions["#recommended-users"].view.setElement(this.$("#recommended-users > div")),this.regions["#authentication-panel"]&&this.regions["#authentication-panel"].view&&this.regions["#authentication-panel"].view.setElement(this.$("#authentication-panel > div")),this.bindDiscoveryPanelGroups()}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l=e.lambda,i=e.escapeExpression;return'        <div class="col-xs-6 col-md-4">\n          <a href="/stories/'+i(l(t,t))+'" class="discover-tag on-navigate">'+i(l(t,t))+"</a>\n        </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{};return'<div data-type="discover-tags" class="discover-tags">\n    <h2>'+e.escapeExpression("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:n.helperMissing)?i.call(r,{name:"title",hash:{},data:s}):i)+'</h2>\n\n    <div class="row">\n'+(null!=(l=n.each.call(r,null!=t?t.tags:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"    </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'        <div class="col-xs-6 col-md-4">\n            <a href="/stories/'+o((n.slugify||t&&t.slugify||r).call(i,null!=t?t.name_english:t,{name:"slugify",hash:{},data:s}))+'" class="discover-category on-navigate">'+o("function"==typeof(l=null!=(l=n.name||(null!=t?t.name:t))?l:r)?l.call(i,{name:"name",hash:{},data:s}):l)+"</a>\n        </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<div data-type="discover-categories" class="discover-categories">\n    <h2>'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Browse Categories",{name:"trans",hash:{},data:s}))+'</h2>\n\n    <div class="row">\n'+(null!=(l=n.each.call(i,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"    </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <div class="container">\n        <header class="background background-lg text-left" style="background-image: url(//a.wattpad.com/img/category-banners/browse-category-header.png);">\n             <div id="authentication-panel">\n                <div class="signup-modal">\n'+(null!=(l=e.invokePartial(a["core.signup_prompt"],t,{name:"core.signup_prompt",data:s,indent:"                  ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'                </div>\n            </div>\n            <div id="sign-up-header">\n                <h1>'+o((n.trans||t&&t.trans||r).call(i,"Discover Stories",{name:"trans",hash:{},data:s}))+"</h1>\n                <p>"+o((n.trans||t&&t.trans||r).call(i,"Read books and stories free on Wattpad. Choose from millions of titles about romance, fanfiction, fantasy, science fiction, non fiction, teen fiction, and more.",{name:"trans",hash:{},data:s}))+'</p>\n            </div>\n            <div class="overlay"></div>\n        </header>\n    </div>\n'},3:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.panels:t,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(i,null!=t?t.lists:t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(i,null!=t?t.placeholder:t,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(i,null!=t?t.tags:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:"")},4:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["desktop.discover.discover_stories"],t,{name:"desktop.discover.discover_stories",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:""},6:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["desktop.discover.discover_lists"],t,{name:"desktop.discover.discover_lists",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:""},8:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o="function",c=e.escapeExpression;return'            <div class="discover-'+c(typeof(l=null!=(l=n.placeholderType||(null!=t?t.placeholderType:t))?l:r)===o?l.call(i,{name:"placeholderType",hash:{},data:s}):l)+'-desktop" data-placeholder="true" data-type="discover-'+c(typeof(l=null!=(l=n.placeholderType||(null!=t?t.placeholderType:t))?l:r)===o?l.call(i,{name:"placeholderType",hash:{},data:s}):l)+'" data-url="'+c(typeof(l=null!=(l=n.url||(null!=t?t.url:t))?l:r)===o?l.call(i,{name:"url",hash:{},data:s}):l)+'" data-cache="'+c(typeof(l=null!=(l=n.cache||(null!=t?t.cache:t))?l:r)===o?l.call(i,{name:"cache",hash:{},data:s}):l)+'" data-layout="'+c(typeof(l=null!=(l=n.layout||(null!=t?t.layout:t))?l:r)===o?l.call(i,{name:"layout",hash:{},data:s}):l)+'">\n                <h2 class="story-grid-title">'+c(typeof(l=null!=(l=n.title||(null!=t?t.title:t))?l:r)===o?l.call(i,{name:"title",hash:{},data:s}):l)+"</h2>\n                <h3><small>"+c(typeof(l=null!=(l=n.subtitle||(null!=t?t.subtitle:t))?l:r)===o?l.call(i,{name:"subtitle",hash:{},data:s}):l)+'</small></h3>\n                <div class="loading-placeholder">'+c((n.trans||t&&t.trans||r).call(i,"Loading...",{name:"trans",hash:{},data:s}))+"</div>\n            </div>\n"},10:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.discover.discover_tags"],t,{name:"core.discover.discover_tags",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:""},12:function(e,t,n,a,s){var l;return'    <div id="recommended-users" class="clearfix">\n        <div class="recommended-users-view">'+(null!=(l=e.invokePartial(a["core.collection_views.recommended_follow"],t,{name:"core.collection_views.recommended_follow",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"</div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.unless.call(i,null!=t?t.currentUser:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'\n<div class="container">\n'+(null!=(l=n.each.call(i,null!=t?t.panelGroups:t,{name:"each",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.currentUser:t,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=e.invokePartial(a["core.discover.discover_categories"],t,{name:"core.discover.discover_categories",data:s,indent:"    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'\n    </div>\n</div>\n\n<div id="preview-modal"></div>\n'},usePartial:!0,useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:discover",s.router.filter(["getTranslations","getCategories"],function(){var e=new s.collections.Discover,t=new s.views.DiscoverLanding({collection:e});Promise.resolve(e.fetch()).then(function(){s.transitionTo(t,{hasHeader:!0,hasFooter:!0,pageTitle:a.utils.trans("Discover")})})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(524));!function(e,t,n,s){s.add("LibraryReadingListStoryItem",Monaco.View.extend({className:"list-group-item",tagName:"li",template:a.default,initialize:function(e){e=e||{},this.isOwner=e.isOwner||!1,this.listId=e.id||null},render:function(){var e=this.model.toJSON();return e.list={isOwner:this.isOwner,listId:this.listId},this.$el.html(this.template(e)),this}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'<span class="label label-info">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Completed",{name:"trans",hash:{},data:s}))+"</span>&nbsp;&nbsp;"},3:function(e,t,n,a,s){return'<span class="label label-danger">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Mature",{name:"trans",hash:{},data:s}))+"</span>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'\n<div class="clearfix" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n    <div class="drag-handle on-edit-show pull-left">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-menu",28,"wp-neutral-2","fa-xl",{name:"iconify",hash:{},data:s}))?l:"")+'</div>\n    <a class="cover cover-sm pull-left on-navigate" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">\n        <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,80,{name:"resizeCover",hash:{},data:s}))+'">\n    </a>\n\n    <div class="circular-checkbox on-check-story fa-stack pull-right on-edit-show" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        <span class="circle-empty vhcenter">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-circle-empty",30,"wp-neutral-3 vhcenter",{name:"iconify",hash:{},data:s}))?l:"")+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-circle-empty",26,"wp-neutral-5 vhcenter",{name:"iconify",hash:{},data:s}))?l:"")+'</span>\n        <span class="checked-in vhcenter">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-circle-filled",22,"wp-base-2 vhcenter",{name:"iconify",hash:{},data:s}))?l:"")+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-check",17,"wp-neutral-5 vhcenter",{name:"iconify",hash:{},data:s}))?l:"")+'</span>\n    </div>\n\n    <div class="content">\n        <h5><a class="on-navigate" href="'+c((n.formatStoryUrl||t&&t.formatStoryUrl||o).call(r,null!=t?t.url:t,{name:"formatStoryUrl",hash:{},data:s}))+'">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'</a></h5>\n        <div class="meta">\n          <small class="reads">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+'</small>\n          <small class="votes">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+'</small>\n          <small class="numParts">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-list",14,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.numParts:t,{name:"count",hash:{},data:s}))+'</small>\n        </div>\n\n        <p class="on-edit-hide">'+(null!=(l=(n.simpleShorten||t&&t.simpleShorten||o).call(r,null!=t?t.description:t,320,!1,{name:"simpleShorten",hash:{},data:s}))?l:"")+'</p>\n\n        <div class="story-status on-edit-hide">\n            '+(null!=(l=n.if.call(r,null!=t?t.completed:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n            "+(null!=(l=n.if.call(r,null!=t?t.mature:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"\n        </div>\n    </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=r(n(22)),s=r(n(526)),l=r(n(527)),i=r(n(528));function r(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,r){r.add("CoreLibraryReadingList",r.views.IncrementalList.extend({template:i.default,partials:{sidebar:l.default,meta:s.default,listModal:a.default},id:"reading-list",containerClass:".list-group",itemView:r.views.LibraryReadingListStoryItem,events:_.extend({"tap .on-delete-list":"onDeleteList","click .on-delete-list":"stopEvent","tap .on-edit-list":"onToggleEditUI","click .on-edit-list":"stopEvent","tap .on-done-edit":"onDoneEditList","click .on-done-edit":"stopEvent","tap .on-batch-remove":"onBatchRemove","click .on-batch-remove":"stopEvent","tap .on-batch-add":"onShowBatchAddModal","click .on-batch-add":"stopEvent","tap .on-check-story":"onSelected","click .on-check-story":"stopEvent","tap .on-select-all":"onSelectAll","click .on-select-all":"stopEvent","tap .list-group-item":"sendStoryClickTrackingEvent","click .list-group-item":"stopEvent"},r.views.IncrementalList.prototype.events),initialize:function(e){if(!(e=e||{}).model)throw new Error("Invalid Reading List provided to LibraryReadingList view.");this.collection=this.model.stories(),this.selectedStoryIDs=[],this.inEditMode=!1;var t="core.library.reading_list_details.library_reading_list_";Handlebars.registerPartial(t+"sidebar",this.partials.sidebar),Handlebars.registerPartial(t+"meta",this.partials.meta),Handlebars.registerPartial(t+"story_item",function(){return""}),Handlebars.registerPartial("core.mixins.lists_modal",this.partials.listModal),Handlebars.registerPartial("core.signup_prompt",function(){return""}),this.listenTo(r,"app:user:follow",this.updateToFollowingButton),this.listenTo(r,"app:user:unfollow",this.updateToFollowButton),this.collection.once("sync",this.render,this),this.collection.fetchNextSet(),this.signUpPrompt=new r.views.SignUpPrompt({model:new r.models.Authsignup,subtitle:n.trans("Get notified when your favorite stories are updated.")}),this.$el.html(this.template({isLogged:n.currentUser().authenticated()})),n.currentUser().authenticated()||this.signUpPrompt.render()},getItemViewOptions:function(){return{isOwner:this.model.get("user").name===t.utils.currentUser().get("username"),id:this.model.get("id")}},getTemplateData:function(){var e={list:this.model.toJSON(),hasStories:this.collection.total>0,noStories:0===this.collection.total,isOwner:this.model.get("user").name===t.utils.currentUser().get("username"),testGroups:t.testGroups},n={id:this.model.get("id"),cover:this.model.get("cover"),author:this.model.get("user").name,name:this.model.get("name")};return e.socialLinks=this.buildSocialShareLinksForReadingList(n),e},onShowMore:function(e){e&&n.stopEvent(e),this.$(".show-more-message").addClass("hidden"),this.$(".loading-message").removeClass("hidden");var t=this;Promise.resolve(this.collection.fetchNextSet()).then(function(){t.setupDOM(),t.inEditMode&&(t.$(".list-group .on-edit-show").show(),t.$(".list-group .on-edit-hide").hide()),t.$(".show-more-message").removeClass("hidden"),t.$(".loading-message").addClass("hidden")})},onSocialShareSelected:function(t){e.te.push("event","library","reading_list",null,"share",{reading_listid:this.model.get("id"),channel:$(t.currentTarget).data("share-channel")})},getContainer:function(){return this.containerClass?this.$(this.containerClass):this.$el},onSelected:function(e){var t=this.$(e.currentTarget).find(".checked-in"),n=this.getSelectedStoryID(t);this.toggleInput(t,n),this.selectedStoryIDs.length>=this.collection.total?this.$(".select-all .checked-in").show():this.$(".select-all .checked-in").hide()},toggleInput:function(e,t,n){"show"===(n=n||("none"===e.css("display")?"show":"hide"))?(e.show(),this.selectStoryID(t)):(e.hide(),this.unselectStoryID(t))},selectStoryID:function(e){_.includes(this.selectedStoryIDs,e)||this.selectedStoryIDs.push(e),this.showNumberOfSelectedStories(this.selectedStoryIDs.length)},unselectStoryID:function(e){this.selectedStoryIDs=_.without(this.selectedStoryIDs,e),this.showNumberOfSelectedStories(this.selectedStoryIDs.length)},getSelectedStoryID:function(e){return $(e).parent().data("id")},showNumberOfSelectedStories:function(e){e?(this.$(".num-selected").text(t.utils.trans("%s Selected",e)),this.$("#btn-batch-add, #btn-batch-remove").removeAttr("disabled"),this.$(".list-controls").slideDown()):this.$(".list-controls").slideUp()},onSelectAll:function(e){var t=this.$(".select-all .checked-in");t.toggle();var n=this,a=t.is(":visible");this.$(".list-group-item .checked-in").each(function(e,t){n.toggleInput($(this),n.getSelectedStoryID(t),a?"show":"hide")})},onShowBatchAddModal:function(e){var t=new r.views.LibraryBatchAddStories({stories:this.selectedStoryIDs,currentListId:this.model.get("id")});this.$el.append(t.$el)},onBatchRemove:function(n){var a=this,s=this.selectedStoryIDs.map(function(e){return a.collection.get(e)});e.confirm(t.utils.trans("Are you sure you want to remove these stories?"))&&a.collection.remove(s,{success:function(){a.model.set("numStories",a.model.get("numStories")-s.length),_.each(a.selectedStoryIDs,function(e){a.unselectStoryID(e)})},error:function(n){console.error(n),e.alert(t.utils.trans("The stories could not be removed. Please contact Wattpad support to resolve this problem."))}})},onToggleEditUI:function(){this.inEditMode=!this.inEditMode,this.$(".on-edit-show, .on-edit-hide").each(function(){$(this).toggle()})},hideEditUI:function(){this.$(".list-name > span").text(this.model.get("name")),this.onToggleEditUI(),this.$(".list-controls").hide(),this.$("#reading-list-meta").replaceWith((0,s.default)({list:this.model.toJSON()}))},onDoneEditList:function(){var e=this,t=this.$("#list-name-input").val().trim(),n=this.model.get("name").trim();if(!_.isEmpty(t)&&t.toLowerCase()!==n.toLowerCase())return e.model.set("name",t),Promise.resolve(this.model.save()).then(function(){e.hideEditUI()}).catch(function(t){console.error(t),e.model.set("name",n)});e.hideEditUI()},onDragEnd:function(){var n=this.DragAndSort.element,a=this.model.get("id");r.local.clear("reading-list."+a+".stories"),Promise.resolve($.ajax({type:"PUT",url:"/api/v3/lists/"+a+"/stories/"+n.children().data("id")+"/position",data:{pos:n.index()}})).catch(function(n){console.error(n),e.alert(t.utils.trans("This story could not be re-ordered. Please contact Wattpad support to resolve this problem."))})},onDeleteList:function(){e.confirm(t.utils.trans("Are you sure you want to delete this reading list?"))&&(n.cacheBust(["ReadingLists"],[{username:t.utils.currentUser().get("username")}],this.model.get("id")),this.model.destroy({success:function(e,t){r.router.navigate("/list",{trigger:!0})},error:function(n,a){console.error(a),void 0!==a&&1008===a.responseJSON.error_code?e.alert(t.utils.trans("This is your default list; it cannot be deleted")):e.alert(t.utils.trans("We could not delete this reading list. Please contact us to resolve this problem."))}}))},updateToFollowingButton:function(e){var t=this.$(".btn-fan");t.removeClass("btn-white").addClass("btn-teal"),t.find(".fa").removeClass("fa-follow fa-wp-base-2-dark").addClass("fa-following fa-wp-neutral-5"),this.$(".created-by-user").text(n.trans("Selected by %s",e))},updateToFollowButton:function(e){var t=this.$(".btn-fan");t.removeClass("btn-teal").addClass("btn-white"),t.find(".fa").removeClass("fa-following fa-wp-neutral-5").addClass("fa-follow fa-wp-base-2-dark"),this.$(".created-by-user").text(n.trans("Follow %s",e))},sendStoryClickTrackingEvent:function(t){e.te.push("event","reading_list","story",null,"click",{reading_listid:this.collection.listId,storyid:$(t.currentTarget).find("div.clearfix").data("id")})}})),r.mixin(r.views.CoreLibraryReadingList,"InfiniteScroll","DragAndSort","SocialSharing","FollowManager","FacebookConnect","GoogleAuth")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<ul class="meta on-edit-hide" id="reading-list-meta">\n    <li>'+o((n.trans||t&&t.trans||r).call(i,"Reading List",{name:"trans",hash:{},data:s}))+"</li>\n    <li>"+o((n.sprintf||t&&t.sprintf||r).call(i,(n.ngettext||t&&t.ngettext||r).call(i,"%s Story","%s Stories",(n.count||t&&t.count||r).call(i,null!=(l=null!=t?t.list:t)?l.numStories:l,{name:"count",hash:{},data:s}),{name:"ngettext",hash:{},data:s}),(n.count||t&&t.count||r).call(i,null!=(l=null!=t?t.list:t)?l.numStories:l,{name:"count",hash:{},data:s}),{name:"sprintf",hash:{},data:s}))+"</li>\n</ul>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=e.escapeExpression;return'                <div class="list-name-controls on-edit-show">\n                    <div class="input-group">\n                        <input id="list-name-input" type="text" class="form-control"\n                        placeholder="'+i((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Enter a name for this list",{name:"trans",hash:{},data:s}))+'" value="'+i(e.lambda(null!=(l=null!=t?t.list:t)?l.name:l,t))+'">\n                    </div>\n                </div>\n'},3:function(e,t,n,a,s){var l=e.lambda,i=e.escapeExpression;return'                        <span class="tag"><a href="/stories/'+i(l(t,t))+'">#'+i(l(t,t))+"</a></span>\n"},5:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'    <div class="edit-toolbar">\n        <button class="btn btn-md btn-orange on-edit-list on-edit-hide"><span>'+r((n.trans||t&&t.trans||i).call(l,"Edit",{name:"trans",hash:{},data:s}))+'</span></button>\n        <button class="btn btn-md btn-orange on-done-edit on-edit-show"><span>'+r((n.trans||t&&t.trans||i).call(l,"Done",{name:"trans",hash:{},data:s}))+'</span></button>\n        <button class="btn btn-md btn-red on-delete-list on-edit-show">'+r((n.trans||t&&t.trans||i).call(l,"Delete List",{name:"trans",hash:{},data:s}))+"</button>\n    </div>\n"},7:function(e,t,n,a,s){var l,i,r,o=e.lambda,c=e.escapeExpression,u=null!=t?t:e.nullContext||{},d=n.helperMissing,h='        <div class="follow">\n            <a href="/user/'+c(o(null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,t))+'" class="avatar avatar-md on-navigate">\n                <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||d).call(u,null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.avatar:l,40,{name:"resizeAvatar",hash:{},data:s}))+'" alt="'+c(o(null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,t))+'">\n            </a>\n            <ul>\n                <li>'+c((n.trans||t&&t.trans||d).call(u,"Like these stories?",{name:"trans",hash:{},data:s}))+"</li>\n\n"+(null!=(l=n.if.call(u,null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.following:l,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.program(10,s,0),data:s}))?l:"")+'            </ul>\n\n            <button class="btn btn-fan '+(null!=(l=n.if.call(u,null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.following:l,{name:"if",hash:{},fn:e.program(12,s,0),inverse:e.program(14,s,0),data:s}))?l:"")+" ";return i=null!=(i=n.disabled||(null!=t?t.disabled:t))?i:d,r={name:"disabled",hash:{},fn:e.program(16,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(u,r):i,n.disabled||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(h+=l),h+'" data-target="'+c(o(null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,t))+'" data-following="'+c(o(null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.following:l,t))+'" role="button" aria-pressed="false">\n'+(null!=(l=n.if.call(u,null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.following:l,{name:"if",hash:{},fn:e.program(18,s,0),inverse:e.program(20,s,0),data:s}))?l:"")+"            </button>\n        </div>\n"},8:function(e,t,n,a,s){var l;return'                <li class="created-by-user">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Selected by %s",null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+"</li>\n"},10:function(e,t,n,a,s){var l;return'                <li class="created-by-user">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Follow %s",null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,{name:"trans",hash:{},data:s}))+"</li>\n"},12:function(e,t,n,a,s){return"btn-teal"},14:function(e,t,n,a,s){return"btn-white"},16:function(e,t,n,a,s){return"disabled"},18:function(e,t,n,a,s){var l;return"                    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-following",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},20:function(e,t,n,a,s){var l;return"                    "+(null!=(l=(n.iconify||t&&t.iconify||n.helperMissing).call(null!=t?t:e.nullContext||{},"fa-follow",16,"wp-base-2-dark",{name:"iconify",hash:{},data:s}))?l:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression,c=e.lambda;return'<div class="reading-list-sidebar col-xs-12">\n    <div class="clearfix">\n        <div class="cover cover-reading-list col-xs-5 col-sm-12 pull-right">\n            <img src="'+o((n.resizeCover||t&&t.resizeCover||r).call(i,null!=(l=null!=t?t.list:t)?l.cover:l,368,{name:"resizeCover",hash:{},data:s}))+'" alt="'+o(c(null!=(l=null!=t?t.list:t)?l.name:l,t))+'">\n        </div>\n        <div class="reading-list-info col-xs-7 col-sm-12">\n            <h1 class="h2 list-name on-edit-hide"><span>'+o(c(null!=(l=null!=t?t.list:t)?l.name:l,t))+"</span></h1>\n\n"+(null!=(l=n.if.call(i,null!=t?t.isOwner:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"\n"+(null!=(l=e.invokePartial(a["core.library.reading_list_details.library_reading_list_meta"],t,{name:"core.library.reading_list_details.library_reading_list_meta",data:s,indent:"            ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+'            <div class="taglist on-edit-hide">\n'+(null!=(l=n.each.call(i,null!=(l=null!=t?t.list:t)?l.tags:l,{name:"each",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:"")+"            </div>\n        </div>\n    </div>\n\n"+(null!=(l=n.if.call(i,null!=t?t.isOwner:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'\n    <div class="col-xs-12 on-edit-hide">\n'+(null!=(l=(n.isCurrentUser||t&&t.isCurrentUser||r).call(i,null!=(l=null!=(l=null!=t?t.list:t)?l.user:l)?l.name:l,{name:"isCurrentUser",hash:{},fn:e.noop,inverse:e.program(7,s,0),data:s}))?l:"")+"\n        "+(null!=(l=(n.reactComponent||t&&t.reactComponent||r).call(i,"SocialSharing","sidebar",{name:"reactComponent",hash:{},data:s}))?l:"")+"\n    </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'    <div class="page-controls clearfix" role="menu">\n        <a href="/list" class="pull-left btn btn-sm btn-text on-navigate">'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-left",12,"fa-text-grey",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"My reading lists",{name:"trans",hash:{},data:s}))+'</a>\n        <div class="pull-right page-status">\n            '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-unlock",14,"fa-mediumgrey",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.trans||t&&t.trans||r).call(i,"Public",{name:"trans",hash:{},data:s}))+"\n        </div>\n    </div>\n"},3:function(e,t,n,a,s){var l;return'            <div id="authentication-panel" class="panel panel-basic">\n                <div class="signup-modal">\n'+(null!=(l=e.invokePartial(a["core.signup_prompt"],t,{name:"core.signup_prompt",data:s,indent:"                    ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"                </div>\n            </div>\n"},5:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression;return'            <div class="panel feed-item-new">\n                <div class="select-all on-edit-show">\n                    <div class="circular-checkbox fa-stack pull-right on-select-all">\n                        <span class="circle-empty">'+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-circle-empty",30,"wp-neutral-3 vhcenter",{name:"iconify",hash:{},data:s}))?r:"")+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-circle-empty",26,"wp-neutral-5 vhcenter",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                        <span class="checked-in">'+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-circle-filled",22,"wp-base-2 vhcenter",{name:"iconify",hash:{},data:s}))?r:"")+(null!=(r=(n.iconify||t&&t.iconify||c).call(o,"fa-check",17,"wp-neutral-5 vhcenter",{name:"iconify",hash:{},data:s}))?r:"")+'</span>\n                    </div>\n\n                    <span class="text pull-right on-select-all">'+u((n.trans||t&&t.trans||c).call(o,"Select All",{name:"trans",hash:{},data:s}))+'</span>\n                </div>\n\n                <ul class="list-group" data-drag="true">\n'+(null!=(r=n.each.call(o,null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(6,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'                </ul>\n\n                <div class="show-more center-text hidden">\n                    <button class="btn btn-link on-showmore">\n                    <span class="show-more-message">\n                        <span>'+u((n.trans||t&&t.trans||c).call(o,"Show more",{name:"trans",hash:{},data:s}))+'</span>\n                        <span class="fa fa-down-small fa-wp-neutral-2"></span>\n                    </span>\n                    <span class="loading-message hidden">\n                        '+(null!=(r=(n.iconifySpin||t&&t.iconifySpin||c).call(o,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?r:"")+"\n                        <span> "+u((n.trans||t&&t.trans||c).call(o,"Loading",{name:"trans",hash:{},data:s}))+" ...</span>\n                    </span>\n                    </button>\n                </div>\n            </div>\n"},6:function(e,t,n,a,s,l,i){var r;return'                    <li class="list-group-item">\n'+(null!=(r=n.with.call(null!=t?t:e.nullContext||{},{name:"with",hash:{list:i[1]},fn:e.program(7,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"                    </li>\n"},7:function(e,t,n,a,s){var l;return null!=(l=e.invokePartial(a["core.library.reading_list_details.library_reading_list_story_item"],t,{name:"core.library.reading_list_details.library_reading_list_story_item",data:s,indent:"                            ",helpers:n,partials:a,decorators:e.decorators}))?l:""},9:function(e,t,n,a,s){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.noStories:t,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?l:""},10:function(e,t,n,a,s){var l;return'            <div class="text-center">\n'+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.isOwner:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.program(13,s,0),data:s}))?l:"")+"            </div>\n            "},11:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return"                    <p>"+r((n.trans||t&&t.trans||i).call(l,"No stories yet. Go add some!",{name:"trans",hash:{},data:s}))+"</p>\n                    "+r((n.connectImage||t&&t.connectImage||i).call(l,"/shared/add_to_reading_list.png",(n.trans||t&&t.trans||i).call(l,"Add a story to your reading list",{name:"trans",hash:{},data:s}),{name:"connectImage",hash:{klass:"add-to-list",height:"153"},data:s}))+"\n                    <p>"+r((n.trans||t&&t.trans||i).call(l,'Look for the "+" button to add a story to your reading list.',{name:"trans",hash:{},data:s}))+"</p>\n"},13:function(e,t,n,a,s){return"                    <p>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"This reading list is currently empty.",{name:"trans",hash:{},data:s}))+"</p>\n"},15:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'    <div class="list-controls">\n        <span class="num-selected vcenter"></span>\n        <button id="btn-batch-remove" class="btn btn-lightgrey btn-md on-batch-remove pull-right" disabled> '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-trash",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n        <button id="btn-batch-add" class="btn btn-lightgrey btn-md on-batch-add pull-right" disabled> '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-plus",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+"</button>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o,c,u=null!=t?t:e.nullContext||{},d='\n<div class="container">\n'+(null!=(r=n.if.call(u,null!=t?t.isOwner:t,{name:"if",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'\n    <div class="row">\n\n        <aside class="col-xs-12 col-sm-5 col-md-4 clearfix">\n'+(null!=(r=e.invokePartial(a["core.library.reading_list_details.library_reading_list_sidebar"],t,{name:"core.library.reading_list_details.library_reading_list_sidebar",data:s,indent:"           ",helpers:n,partials:a,decorators:e.decorators}))?r:"")+"\n";return o=null!=(o=n.isLogged||(null!=t?t.isLogged:t))?o:n.helperMissing,c={name:"isLogged",hash:{},fn:e.noop,inverse:e.program(3,s,0,l,i),data:s},r="function"==typeof o?o.call(u,c):o,n.isLogged||(r=n.blockHelperMissing.call(t,r,c)),null!=r&&(d+=r),d+'        </aside>\n\n        <main class="col-xs-12 col-sm-7 col-md-8">\n'+(null!=(r=n.if.call(u,null!=t?t.hasStories:t,{name:"if",hash:{},fn:e.program(5,s,0,l,i),inverse:e.program(9,s,0,l,i),data:s}))?r:"")+"        </main>\n    </div>\n\n"+(null!=(r=n.if.call(u,null!=t?t.isOwner:t,{name:"if",hash:{},fn:e.program(15,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"</div>\n"},usePartial:!0,useData:!0,useDepths:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(530));!function(e,t,n,s){s.add("LibraryListCard",s.views.Base.extend({className:"reading-list-item-row",template:a.default,events:{"tap .on-delete-list":"onDelete","click .on-delete-list":"stopEvent"},active:!1,render:function(){var e=this.model.toJSON();return e.socialLinks=this.buildSocialShareLinksForReadingList(_.clone(e,{author:n.currentUser().get("username")}),"list"),e.testGroups=t.testGroups,this.$el.html(this.template(e)),this},onDelete:function(){e.confirm(t.utils.trans("Are you sure you want to delete this reading list?"))&&this.model.destroy()}})),s.mixin(s.views.LibraryListCard,"SocialSharing")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l=e.lambda,i=e.escapeExpression;return'            <span class="tag on-navigate"><a href="/stories/'+i(l(t,t))+'">#'+i(l(t,t))+"</a></span>\n"},3:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <li><a role="button" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-placement="top" title="'+c((n.trans||t&&t.trans||o).call(r,"This is your default list; it cannot be deleted",{name:"trans",hash:{},data:s}))+'" class="disabled">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-info",20,"wp-neutral-2 vcenter",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"Primary List",{name:"trans",hash:{},data:s}))+"\n        </a></li>\n"},5:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <li><a role="button" href="#" data-toggle="modal" data-target="#delete-modal"\n        data-stop-details="true" data-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" class="on-delete-list">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-trash",20,"wp-neutral-2 vcenter",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.trans||t&&t.trans||o).call(r,"Delete List",{name:"trans",hash:{},data:s}))+"\n        </a></li>\n"},7:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'        <li><a role="button" class="share-'+c("function"==typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)?i.call(r,{name:"name",hash:{},data:s}):i)+(null!=(l=n.unless.call(r,null!=t?t.nopopup:t,{name:"unless",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?l:"")+'" '+c("function"==typeof(i=null!=(i=n.socialSharingAttributes||(null!=t?t.socialSharingAttributes:t))?i:o)?i.call(r,{name:"socialSharingAttributes",hash:{},data:s}):i)+">\n          "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,null!=t?t.icon:t,20,"wp-neutral-2 vcenter",{name:"iconify",hash:{},data:s}))?l:"")+" "+c("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:o)?i.call(r,{name:"label",hash:{},data:s}):i)+"\n        </a></li>\n"},8:function(e,t,n,a,s){return' social-share" rel="nofollow" target="_blank'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c="function",u=e.escapeExpression;return'\n<div class="reading-list-item row panel" role="listitem" data-id="'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n  <div class="drag-handle vcenter">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-menu",28,"wp-neutral-2","fa-xl",{name:"iconify",hash:{},data:s}))?l:"")+'</div>\n\n  <div class="story-wrapper vcenter">\n    <div class="cover cover-sm vcenter" aria-hidden="true">\n      <a class="on-navigate" href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        <img src="'+u((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,70,{name:"resizeCover",hash:{},data:s}))+'" alt="'+u(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)===c?i.call(r,{name:"name",hash:{},data:s}):i)+'" />\n      </a>\n    </div>\n    <div class="story-info vcenter">\n      <h3 class="story-title" aria-label="'+u((n.trans||t&&t.trans||o).call(r,"Story Item",{name:"trans",hash:{},data:s}))+": "+u(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)===c?i.call(r,{name:"name",hash:{},data:s}):i)+'.">\n      <a class="on-show-details on-navigate" href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        <strong>'+u(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:o)===c?i.call(r,{name:"name",hash:{},data:s}):i)+'</strong>\n      </a>\n      </h3>\n      <a class="on-show-details on-navigate" href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-href="/list/'+u(typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)===c?i.call(r,{name:"id",hash:{},data:s}):i)+'">\n        <small>'+u((n.sprintf||t&&t.sprintf||o).call(r,(n.ngettext||t&&t.ngettext||o).call(r,"%s Story","%s Stories",null!=t?t.numStories:t,{name:"ngettext",hash:{},data:s}),null!=t?t.numStories:t,{name:"sprintf",hash:{},data:s}))+'</small>\n      </a>\n      <div class="taglist">\n'+(null!=(l=n.each.call(r,null!=t?t.tags:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'      </div>\n    </div>\n  </div>\n\n\n  <div class="dropdown">\n    <button class="btn btn-white dropdown-toggle" data-toggle="dropdown" role="button">\n        '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-more",18,"wp-neutral-2","fa-l",{name:"iconify",hash:{},data:s}))?l:"")+'\n    </button>\n    <div class="triangle"></div>\n    <ul class="dropdown-menu align-right" role="menu">\n'+(null!=(l=n.if.call(r,null!=t?t.featured:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+(null!=(l=n.each.call(r,null!=t?t.socialLinks:t,{name:"each",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+"     </ul>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(532));!function(e,t,n,s){s.add("LibraryListsControls",Monaco.View.extend({template:a.default,events:{"tap .on-newlist":"onOpenNewListModal"},render:function(){return this.$el.html(this.template({islist:!0})),this},onOpenNewListModal:function(){var e=$("#generic-modal"),t=new s.views.LibraryListCreate;e.find(".modal-body").empty().append(t.render().$el),e.modal("show")}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-lock",14,"fa-mediumgrey",{name:"iconify",hash:{},data:s}))?l:"")+" "+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Private",{name:"trans",hash:{},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<button class="btn btn-orange on-newlist">'+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"New Reading List",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-plus",13,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n\n<div class="pull-right page-status">\n'+(null!=(l=n.unless.call(i,null!=t?t.islist:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n\n\n\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(534));!function(e,t,n,s){s.add("LibraryListsLanding",s.views.List.extend({template:a.default,className:"library-lists-landing",containerClass:".reading-list-tab",itemView:s.views.LibraryListCard,initialize:function(){Handlebars.registerPartial("core.library.library_reading_list_item",function(){return""}),this.listenTo(this.collection,"sync",this.render),this.collection.fetchNextSet()},getTemplateData:function(){return{hasLists:this.collection.total>0}},onDragEnd:function(){var e=this.DragAndSort.element;n.cacheBust("ReadingLists",[{username:n.currentUser().get("username")}]),Promise.resolve($.ajax({type:"PUT",url:"/api/v3/users/"+n.currentUser().get("username")+"/lists/"+e.children().first().data("id")+"/position",data:{pos:e.index()}})).catch(function(e){console.error(e)})}})),s.mixin(s.views.LibraryListsLanding,"InfiniteScroll","DragAndSort")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.lists:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:""},2:function(e,t,n,a,s){var l;return'    --\x3e<div class="reading-list-item-row">\n'+(null!=(l=e.invokePartial(a["core.library.library_reading_list_item"],t,{name:"core.library.library_reading_list_item",data:s,indent:"        ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </div>\x3c!--\n"},4:function(e,t,n,a,s){return"    --\x3e<p>"+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"You currently have no reading lists.",{name:"trans",hash:{},data:s}))+"</p>\x3c!--\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'\n<div class="reading-list-tab container col-md-12 col-sm-12" id="reading-list-tab" data-drag="true">\x3c!--\n'+(null!=(l=n.if.call(i,null!=t?t.hasLists:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")+'--\x3e</div>\n\n\n<div class="show-more center-text hidden">\n  <button class="btn btn-link on-showmore">\n  <strong>'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(i,"Show More",{name:"trans",hash:{},data:s}))+"</strong>\n  </button>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(7)),s=l(n(22));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l){l.add("LibraryBatchAddStories",l.views.Base.extend({templates:{modal:s.default,item:a.default},events:{"tap .on-modify-list":"onModifyList","click .on-modify-list":"stopEvent","tap .fa-remove-alt":"onDestroyModal","click .fa-remove-alt":"stopEvent"},initialize:function(e){var n=this;e=e||{},this.stories=e.stories,this.currentListId=e.currentListId,this.readingLists=new l.collections.ReadingLists([],{username:t.utils.currentUser().get("username"),limit:30}),Promise.resolve(this.readingLists.fetchNextSet()).then(function(){n.render()})},onDestroyModal:function(){this.$(".modal").modal("hide"),$(".modal-backdrop").remove(),this.remove(),Backbone.View.prototype.remove.call(this)},render:function(){this.$el.html(this.templates.modal());var e=this.$(".lists-menu");return _.each(this.readingLists.models,function(t){if(t.get("id")!==this.currentListId){var n={id:t.get("id"),name:t.get("name"),hideStatus:!1};e.append(this.templates.item(n)),this.listenTo(t,"stories:adding",function(e){this.onListAdding(e)}),this.listenTo(t,"stories:added",function(e){this.onListAdded(e)})}},this),this.$(".modal").modal("show"),this},onModifyList:function(n){var a=$(n.currentTarget).data("list-id"),s=this.readingLists.get(a),i=[];_.each(this.stories,function(e){i.push(new l.models.StoryModel({id:e}))}),s.trigger("stories:adding",n.currentTarget),s.stories().add(i,{success:function(){s.trigger("stories:added",n.currentTarget),l.local.clear(s.resource()),l.local.clear(s.stories().resource())},error:function(){e.alert(t.utils.trans("The stories could not be added. Please contact Wattpad support to resolve this problem.")),$(n.currentTarget).children(".status").addClass("hidden")}})},onListAdded:function(e){var t=$(e).children(".status");t.children(".spinner").addClass("hidden"),t.children(".check").removeClass("hidden"),t.parent().addClass("disabled")},onListAdding:function(e){$(e).children(".status").children(".spinner").removeClass("hidden")}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(537));!function(e,t,n,s){s.add("LibraryLanding",s.views.RegionManager.extend({template:a.default,events:{"tap .tab-control":"onSwitchTabs","click .tab-control":"stopEvent"},initialize:function(e){if(e=e||{},Handlebars.registerPartial("core.library.library_controls",function(){return""}),Handlebars.registerPartial("core.library.library_controls.library_lists_controls",function(){return""}),Handlebars.registerPartial("core.library.library_listing",function(){return""}),Handlebars.registerPartial("core.library.library_lists_landing",function(){return""}),this.active=e.section||"current-reads",!_.contains(["current-reads","archive","reading-lists"],this.active))throw new Error("Invalid Section Supplied to LibraryLanding View");this.setCollection(this.active)},setCollection:function(e){switch(e){case"current-reads":this.collection=new s.collections.NodeLibrary;break;case"archive":this.collection=new s.collections.Archive;break;case"reading-lists":var n=t.utils.currentUser().get("username");this.collection=new s.collections.ReadingLists([],{username:n})}},getListView:function(){var e="LibraryListing";return this.collection instanceof s.collections.ReadingLists&&(e="LibraryListsLanding"),new s.views[e]({collection:this.collection})},getControlsView:function(){var e="LibraryControls";return this.collection instanceof s.collections.ReadingLists&&(e="LibraryListsControls"),new s.views[e]({collection:this.collection})},render:function(){return this.libraryControlsView=this.getControlsView(),this.$el.html(this.template({islibrary:"current-reads"===this.active,isarchive:"archive"===this.active,islist:"reading-lists"===this.active})),this.setRegion("#library-controls",this.libraryControlsView.render()),this.setRegion("#tab-content",this.getListView()),this},setElement:function(e){Monaco.View.prototype.setElement.apply(this,arguments),this.checkRegion("#tab-content"),this.checkRegion("#library-controls")},checkRegion:function(e){this.regions[e]&&this.regions[e].view&&(this.regions[e].view.setElement(this.$(e+" > div")),"#tab-content"===e&&this.regions["#tab-content"].view.setButtonState())},onSwitchTabs:function(e){var t=$(e.currentTarget),n=t.data("section"),a=t.attr("href");this.setCollection(n),this.setRegion("#tab-content",this.getListView()),this.setRegion("#library-controls",this.getControlsView().render());var l=this.$(".tab-control");l.parent().removeClass("active"),l.filter('[data-section="'+n+'"]').parent().addClass("active"),s.router.navigate(a,{trigger:!1})}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"active"},3:function(e,t,n,a,s){var l;return"            <div>\n"+(null!=(l=e.invokePartial(a["core.library.library_controls.library_lists_controls"],t,{name:"core.library.library_controls.library_lists_controls",data:s,indent:"              ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </div>\n"},5:function(e,t,n,a,s){var l;return"            <div>\n"+(null!=(l=e.invokePartial(a["core.library.library_controls"],t,{name:"core.library.library_controls",data:s,indent:"              ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </div>\n"},7:function(e,t,n,a,s){var l;return'              <div class="library-lists-landing">\n'+(null!=(l=e.invokePartial(a["core.library.library_lists_landing"],t,{name:"core.library.library_lists_landing",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"              </div>\n"},9:function(e,t,n,a,s){var l;return"              <div>\n"+(null!=(l=e.invokePartial(a["core.library.library_listing"],t,{name:"core.library.library_listing",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"              </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d=n.blockHelperMissing,h='\n <div id="library-landing-page">\n    <div class="container">\n        <header>\n            <h1>'+u((n.trans||t&&t.trans||c).call(o,"Library",{name:"trans",hash:{},data:s}))+'</h1>\n        </header>\n        <div class="sub-navigation">\n            <div class="container">\n                <nav class="pull-left" role="navigation">\n                    <ul>\n                        <li class="';return i=null!=(i=n.islibrary||(null!=t?t.islibrary:t))?i:c,r={name:"islibrary",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.islibrary||(l=d.call(t,l,r)),null!=l&&(h+=l),h+='">\n                            <a class="tab-control" data-section="current-reads" href="/library">'+u((n.trans||t&&t.trans||c).call(o,"Current reads",{name:"trans",hash:{},data:s}))+'</a>\n                        </li>\n                        <li class="',i=null!=(i=n.isarchive||(null!=t?t.isarchive:t))?i:c,r={name:"isarchive",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.isarchive||(l=d.call(t,l,r)),null!=l&&(h+=l),h+='">\n                            <a class="tab-control" data-section="archive" href="/archive">'+u((n.trans||t&&t.trans||c).call(o,"Archive",{name:"trans",hash:{},data:s}))+'</a>\n                        </li>\n                        <li class="',i=null!=(i=n.islist||(null!=t?t.islist:t))?i:c,r={name:"islist",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.islist||(l=d.call(t,l,r)),null!=l&&(h+=l),h+'">\n                            <a class="tab-control" data-section="reading-lists" href="/list">'+u((n.trans||t&&t.trans||c).call(o,"Reading Lists",{name:"trans",hash:{},data:s}))+'</a>\n                        </li>\n                    </ul>\n                </nav>\n            </div>\n        </div>\n    </div>\n    <div class="container">\n        <div id="library-controls" class="page-controls clearfix" role="menu">\n'+(null!=(l=n.if.call(o,null!=t?t.islist:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+'        </div>\n\n        <main id="tab-content">\n'+(null!=(l=n.if.call(o,null!=t?t.islist:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.program(9,s,0),data:s}))?l:"")+'        </main>\n    </div>\n</div>\n<div id="preview-modal"></div>\n'},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=l(n(539)),s=l(n(540));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l){l.add("LibraryCard",Monaco.View.extend({className:"library-story-item",templates:{card:s.default,modal:a.default},initialize:function(){_.bindAll(this,["archive","unarchive","discard","removeView"])},setElement:function(){Monaco.View.prototype.setElement.apply(this,arguments),this.model&&this.$("a,button,.on-story-hover,.on-story-preview").data("cid",this.model.cid)},render:function(){var e=this.model.toJSON(),t=e.readingPosition;return this.model.collection instanceof l.collections.Archive?e.archived=!0:(t.position>0||t.partId!==e.parts[0].id)&&(e.hasStarted=!0),this.$el.html(this.templates.card(e)),this.$("a,button,.on-story-hover,.on-story-preview").data("cid",this.model.cid),this},deactivate:function(){this.$(".on-story-hover").fadeOut(150)},activate:function(){this.$(".on-story-hover").fadeIn(150)},preview:function(){$("#preview-modal").html(this.templates.modal(this.model.toJSON())).modal("show").find("button").data("cid",this.model.cid)},read:function(){l.router.navigate(n.formatStoryUrl(_.findWhere(this.model.get("parts"),{id:parseInt(this.model.get("readingPosition").partId)}).url),{trigger:!0})},details:function(){l.router.navigate(n.formatStoryUrl(this.model.get("url")),{trigger:!0})},archive:function(){return new l.collections.Archive([],{user:n.currentUser()}).addStory(this.model).then(this.removeView)},unarchive:function(){return new l.collections.Archive([],{user:n.currentUser()}).removeStory(this.model,!0).then(this.removeView)},discard:function(){return this.model.collection.removeStory(this.model).then(this.removeView)},removeView:function(e){if(!0===e||_.contains(e.success,this.model.id))return this.$el.fadeOut(500,function(){$(this).remove()}),e}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'        <span class="rating label label-info">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Mature",{name:"trans",hash:{},data:s}))+"</div>\n"},3:function(e,t,n,a,s){return'        <span class="status label label-info">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Completed",{name:"trans",hash:{},data:s}))+"</span>\n"},5:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'        <time datetime="'+r((n.fromNow||t&&t.fromNow||i).call(l,null!=t?t.modifyDate:t,{name:"fromNow",hash:{},data:s}))+'">\n            '+r((n.trans||t&&t.trans||i).call(l,"Updated %s",(n.fromNow||t&&t.fromNow||i).call(l,null!=t?t.modifyDate:t,{name:"fromNow",hash:{},data:s}),{name:"trans",hash:{},data:s}))+"\n        </time>\n"},7:function(e,t,n,a,s){var l,i=e.escapeExpression;return'        <pre class="description"> '+i((n.simpleShorten||t&&t.simpleShorten||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.description:t,500,!1,{name:"simpleShorten",hash:{},data:s}))+' </pre>\n        <div class="meta tags related">\n            <span class="tag">'+i(e.lambda(null!=(l=null!=t?t.categoryObject:t)?l.name:l,t))+"</span>\n        </div>\n"},9:function(e,t,n,a,s){return'        <button type="button" class="on-unarchive-story btn btn-block btn-grey">\n            '+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Unarchive",{name:"trans",hash:{},data:s}))+"\n        </button>\n\n"},11:function(e,t,n,a,s){return'        <button type="button" class="on-archive-story btn btn-block btn-grey">\n            '+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Archive",{name:"trans",hash:{},data:s}))+"\n        </button>\n\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<div class="modal-content" style="background-image: url('+c((n.resizeCoverAsBackground||t&&t.resizeCoverAsBackground||o).call(r,null!=t?t.cover:t,640,{name:"resizeCoverAsBackground",hash:{},data:s}))+');">\n    <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-remove",20,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'\n        </button>\n        <h4 class="modal-title">'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+'</h4>\n        <div class="username">'+c((n.trans||t&&t.trans||o).call(r,"by %s",null!=(l=null!=t?t.user:t)?l.name:l,{name:"trans",hash:{},data:s}))+"</div>\n"+(null!=(l=n.if.call(r,null!=t?t.mature:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+(null!=(l=n.if.call(r,null!=t?t.completed:t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s}))?l:"")+'        <div class="meta tags">\n            <span> '+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-view",13,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+" </span>\n            <span> "+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-vote",13,"wp-neutral-3",{name:"iconify",hash:{},data:s}))?l:"")+" "+c((n.count||t&&t.count||o).call(r,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+' </span>\n            <span class="tag pull-right">'+c(e.lambda(null!=(l=null!=t?t.categoryObject:t)?l.name:l,t))+'</span>\n        </div>\n    </div>\n    <div class="modal-body">\n'+(null!=(l=n.if.call(r,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'\n        <button type="button" class="on-story-details btn btn-block btn-grey">\n            '+c((n.trans||t&&t.trans||o).call(r,"Story Details",{name:"trans",hash:{},data:s}))+"\n        </button>\n\n"+(null!=(l=n.if.call(r,null!=t?t.archived:t,{name:"if",hash:{},fn:e.program(9,s,0),inverse:e.program(11,s,0),data:s}))?l:"")+'    </div>\n    <div class="modal-footer">\n        <button type="button" class="btn btn-block btn-grey" data-dismiss="modal">'+c((n.trans||t&&t.trans||o).call(r,"Close",{name:"trans",hash:{},data:s}))+"</button>\n    </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'                  <button class="btn btn-block btn-glass btn-left-align on-read">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Continue Reading",{name:"trans",hash:{},data:s}))+"</button>\n"},3:function(e,t,n,a,s){return'                  <button class="btn btn-block btn-glass  btn-left-align on-read">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Start Reading",{name:"trans",hash:{},data:s}))+"</button>\n"},5:function(e,t,n,a,s){return'                  <button class="btn btn-block btn-glass btn-left-align on-unarchive-story">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Unarchive",{name:"trans",hash:{},data:s}))+"</button>\n"},7:function(e,t,n,a,s){return'                  <button class="btn btn-block btn-glass btn-left-align on-archive-story">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Archive",{name:"trans",hash:{},data:s}))+"</button>\n"},9:function(e,t,n,a,s){return'    <span class="percentage-read">\n        <span class="percentage-position" style="width:'+e.escapeExpression((n.calcPercentRead||t&&t.calcPercentRead||n.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.parts:t,null!=t?t.readingPosition:t,{name:"calcPercentRead",hash:{},data:s}))+'%"></span>\n    </span>\n'},11:function(e,t,n,a,s){return'          <span class="label label-primary">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Updated",{name:"trans",hash:{},data:s}))+"</span>\n\n"},13:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"          <span> "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-view",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.readCount:t,{name:"count",hash:{},data:s}))+" </span>\n          <span> "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-vote",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+" "+o((n.count||t&&t.count||r).call(i,null!=t?t.voteCount:t,{name:"count",hash:{},data:s}))+" </span>\n\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression,u=e.lambda;return'\n<div class="on-story-preview cover cover-lg">\n    <div class="fixed-ratio fixed-ratio-cover">\n        <img src="'+c((n.resizeCover||t&&t.resizeCover||o).call(r,null!=t?t.cover:t,256,{name:"resizeCover",hash:{},data:s}))+'">\n\n        <div class="story-overlay on-story-hover" style="display: none;">\n            <div class="overlay-bg"></div>\n\n            <div class="quick-controls clearfix">\n                <button class="btn btn-text on-delete-story">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-trash",20,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</button>\n            </div>\n\n            <div class="overlay-container">\n'+(null!=(l=n.if.call(r,null!=t?t.hasStarted:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'                <button class="btn btn-block btn-glass btn-left-align on-details">'+c((n.trans||t&&t.trans||o).call(r,"Details",{name:"trans",hash:{},data:s}))+"</button>\n"+(null!=(l=n.if.call(r,null!=t?t.archived:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?l:"")+'                  <button data-story-id="'+c("function"==typeof(i=null!=(i=n.id||(null!=t?t.id:t))?i:o)?i.call(r,{name:"id",hash:{},data:s}):i)+'" class="btn btn-block btn-glass btn-left-align on-reading-list btn-story-lists on-lists-add-clicked">'+c((n.trans||t&&t.trans||o).call(r,"Add to List",{name:"trans",hash:{},data:s}))+"</button>\n            </div>\n\n        </div>\n    </div>\n</div>\n"+(null!=(l=n.unless.call(r,null!=t?t.archived:t,{name:"unless",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?l:"")+'\n<div class="content">\n    <div class="info">\n        <strong>'+c("function"==typeof(i=null!=(i=n.title||(null!=t?t.title:t))?i:o)?i.call(r,{name:"title",hash:{},data:s}):i)+"</strong>\n        <small>"+c(u(null!=(l=null!=t?t.user:t)?l.name:l,t))+'</small>\n    </div>\n    <a href="/user/'+c(u(null!=(l=null!=t?t.user:t)?l.name:l,t))+'" class="avatar avatar-sm on-navigate">\n        <img src="'+c((n.resizeAvatar||t&&t.resizeAvatar||o).call(r,null!=(l=null!=t?t.user:t)?l.avatar:l,32,{name:"resizeAvatar",hash:{},data:s}))+'">\n    </a>\n\n    <div class="meta">\n'+(null!=(l=n.if.call(r,null!=t?t.updated:t,{name:"if",hash:{},fn:e.program(11,s,0),inverse:e.program(13,s,0),data:s}))?l:"")+"    </div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(542));!function(e,t,n,s){s.add("LibraryControls",Monaco.View.extend({template:a.default,render:function(){return this.$el.html(this.template({})),this}}))}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return"    "+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-lock",14,"fa-mediumgrey",{name:"iconify",hash:{},data:s}))?l:"")+" <span>"+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Private",{name:"trans",hash:{},data:s}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return'<div class="pull-left">\n    <div style="height: 35px;"></div>\n</div>\n\n<div class="pull-right page-status">\n'+(null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.islist:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=i(n(544)),s=i(n(545)),l=i(n(546));function i(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,i){i.add("LibraryListing",i.views.List.extend({template:l.default,partials:{errorTemplate:s.default,inactiveStoriesWarning:a.default},itemView:i.views.LibraryCard,containerClass:".collection",activeCard:null,events:function(){var e={};return i.get("device").is.desktop?(e["mouseenter .on-story-preview"]="activateCard",e["mouseleave .on-story-preview"]="deactivateCard"):(e["tap .on-story-preview"]="toggleCard",e["click .on-story-preview"]="stopEvent"),t.testGroups.INACTIVE_STORIES&&(e["tap .on-inactive-stories"]="onShowInactiveStories",e["click .on-inactive-stories"]="stopEvent"),e["tap .on-read"]="readCard",e["click .on-read"]="stopEvent",e["tap .on-details"]="detailsCard",e["click .on-details"]="stopEvent",e["tap .on-archive-story"]="archiveCard",e["click .on-archive-story"]="stopEvent",e["tap .on-unarchive-story"]="unarchiveCard",e["click .on-unarchive-story"]="stopEvent",e["tap .on-delete-story"]="deleteCard",e["click .on-delete-story"]="stopEvent",_.extend(e,i.views.List.prototype.events)},initialize:function(){Handlebars.registerPartial("core.library.library_story_item",function(){return""}),_.bindAll(this,["createErrors","checkForErrors","confirm"]),this.collection.once("sync",this.render,this),this.collection.fetchNextSet({fresh:!0}),t.testGroups.INACTIVE_STORIES&&"current-reads"===this.collection.libraryType&&this.listenToOnce(this.collection,"fetchNext:done",this.showInactiveStoriesWarning)},getTemplateData:function(){return{hasStories:this.collection.length>0}},getActiveCard:function(e){var t=$(e.currentTarget);return t.hasClass("on-story-preview")||(t=t.parents(".on-story-preview")),this.viewPointers[t.data("cid")]},activateCard:function(e){this.toggleCard("activate",e)},deactivateCard:function(e){this.toggleCard("deactivate",e),this.closeReadingListSelector()},readCard:function(e){this.getActiveCard(e).read()},detailsCard:function(e){this.getActiveCard(e).details()},archiveCard:function(e){this.getActiveCard(e).archive().then(this.checkForErrors).then(this.cacheBust)},unarchiveCard:function(e){this.getActiveCard(e).unarchive().then(this.checkForErrors).then(this.cacheBust)},deleteCard:function(e){var t=this.getActiveCard(e);this.confirm(n.trans("Are you sure you want to remove this story from your library/archive?")).then(t.discard).then(this.cacheBust)},toggleCard:function(e,t){var n=this.getActiveCard(t||e);t?n[e]():(n[n.active?"deactivate":"activate"](),n.active=!n.active)},cacheBust:function(){return n.cacheBust(["NodeLibrary","Archive"],[{},{}])},confirm:function(t){return e.confirm(t)?Promise.resolve():Promise.reject()},checkForErrors:function(e){var t=[];t.push.apply(t,this.createErrors(e.failed.notFound,n.trans('The story "%s" could not be found.'))),t.push.apply(t,this.createErrors(e.failed.notInLibrary,n.trans('The story "%s", was not found in your library.'))),t.push.apply(t,this.createErrors(e.failed.notInArchive,n.trans('The story "%s", was not found in your archive.'))),t.push.apply(t,this.createErrors(e.failed.notMoved,n.trans('The story "%s" was not moved. Please try again later.'))),t.length&&$("#generic-modal").html(this.partials.errorTemplate({errors:t})).modal("show")},showInactiveStoriesWarning:function(){var e=t.utils.currentUser().get("username"),n=this,a=$.ajax({type:"GET",url:"/v4/users/"+e+"/library/inactive"});Promise.resolve(a).then(function(e){e.stories.length>0&&n.$el.append(n.partials.inactiveStoriesWarning({stories:e.stories}))})},onShowInactiveStories:function(){var e=t.utils.currentUser().get("username"),n=$.ajax({type:"DELETE",url:"/v4/users/"+e+"/library/inactive"});return this.$el.find(".inactive-stories").modal("show"),Promise.resolve(n)},createErrors:function(e,t){var a=this;return _.map(e,function(e){return n.sprintf(t,[a.collection.get(e).get("title")])})}})),i.mixin(i.views.LibraryListing,"InfiniteScroll","ReadingList")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"            <li>"+e.escapeExpression(e.lambda(null!=t?t.title:t,t))+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"\n<h3>"+o((n.trans||t&&t.trans||r).call(i,"Some stories are no longer available",{name:"trans",hash:{},data:s}))+'</h3>\n<a class="on-inactive-stories" role="button">'+o((n.trans||t&&t.trans||r).call(i,"Learn more",{name:"trans",hash:{},data:s}))+'</a>\n\n<div class="inactive-stories modal fade" role="dialog">\n  <div class="modal-dialog" id="generic-modal">\n    <div class="modal-content">\n      <h3 class="modal-title text-center">'+o((n.trans||t&&t.trans||r).call(i,"Unavailable Stories",{name:"trans",hash:{},data:s}))+'</h3>\n      <div class="close" data-dismiss="modal">\n        '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-remove",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n      </div>\n      <div class="modal-body clearfix">\n        <p>'+o((n.trans||t&&t.trans||r).call(i,"The following stories are no longer available because they were unpublished or deleted",{name:"trans",hash:{},data:s}))+":</p>\n        <ul>\n"+(null!=(l=n.each.call(i,null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"                  <li>"+e.escapeExpression(e.lambda(t,t))+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r,o=null!=t?t:e.nullContext||{},c=n.helperMissing,u=e.escapeExpression,d='<div class="modal-dialog">\n    <div class="modal-content">\n        <header class="modal-header">\n            <div class="pull-right close" data-dismiss="modal">\n              '+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-remove-alt",16,"wp-neutral-2",{name:"iconify",hash:{},data:s}))?l:"")+'\n            </div>\n            <h2 class="modal-title" id="publish-modal-label">'+u((n.trans||t&&t.trans||c).call(o,"An Error has Occurred",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconify||t&&t.iconify||c).call(o,"fa-warning",24,"wp-error-1",{name:"iconify",hash:{},data:s}))?l:"")+'</h2>\n        </header>\n\n        <div class="modal-body">\n          '+u("function"==typeof(i=null!=(i=n.error_msg||(null!=t?t.error_msg:t))?i:c)?i.call(o,{name:"error_msg",hash:{},data:s}):i)+"\n            <ul>\n";return i=null!=(i=n.errors||(null!=t?t.errors:t))?i:c,r={name:"errors",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s},l="function"==typeof i?i.call(o,r):i,n.errors||(l=n.blockHelperMissing.call(t,l,r)),null!=l&&(d+=l),d+'            </ul>\n        </div>\n\n        <div class="modal-footer">\n            <button class="btn btn-orange" data-dismiss="modal">'+u((n.trans||t&&t.trans||c).call(o,"Close",{name:"trans",hash:{},data:s}))+"</button>\n        </div>\n    </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return"    <div class='collection'>\x3c!--\n"+(null!=(l=n.each.call(i,null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'--\x3e</div>\n\n    <div class="show-more center-text hidden">\n        <button class="btn btn-link on-showmore">\n            <span class=\'show-more-message\'>\n                <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n                <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n            </span>\n            <span class='loading-message hidden'>\n                "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n                <span> "+o((n.trans||t&&t.trans||r).call(i,"Loading",{name:"trans",hash:{},data:s}))+' ...</span>\n            </span>\n        </button>\n    </div>\n\n    <div class="modal fade" id="preview-modal"></div>\n\n'},2:function(e,t,n,a,s){var l;return'    --\x3e<div class="library-story-item">\n'+(null!=(l=e.invokePartial(a["core.library.library_story_item"],t,{name:"core.library.library_story_item",data:s,indent:"      ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"    </div>\x3c!--\n"},4:function(e,t,n,a,s){return'    <p class="no-item">'+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"No stories available.",{name:"trans",hash:{},data:s}))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return"\n"+(null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.hasStories:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(4,s,0),data:s}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(548));!function(e,t,n,s){s.add("LibraryListCreate",s.views.Base.extend({template:a.default,events:{"tap .on-createlist":"onCreateList"},constructor:function(){this.model=new s.models.ReadingList,this.model.set("action","create"),s.views.Base.prototype.constructor.apply(this,arguments)},render:function(){return this.$el.html(this.template({})),this},onCreateList:function(){var e=this;this.model.save().done(function(){n.cacheBust("ReadingLists",{username:n.currentUser().get("username")}),s.router.navigate("list/"+e.model.get("id"),{trigger:!0})})}})),s.mixin(s.views.LibraryListCreate,"ValidationView")}(window,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression;return'<button type="button" class="btn btn-link pull-right close" data-dismiss="modal">\n    <span aria-hidden="true" class="fa fa-remove"></span><span class="sr-only">Close</span>\n</button>\n<div id="reading-list-create">\n    <h4>'+c((n.trans||t&&t.trans||o).call(r,"Create a Reading List",{name:"trans",hash:{},data:s}))+"</h4>\n    <h5>"+c((n.trans||t&&t.trans||o).call(r,"Give your Reading List a name. It helps to be specific.",{name:"trans",hash:{},data:s}))+'</h5>\n\n    <div class="form-group has-feedback" data-attr="name">\n        <label class="sr-only" for="reading-list-name">'+c((n.trans||t&&t.trans||o).call(r,"Reading List Name",{name:"trans",hash:{},data:s}))+' </label>\n        <input id="reading-list-name" class="form-control" type="text" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"e.g. Best Fantasy books",{name:"trans",hash:{},data:s}))+'">\n      '+(null!=(l="function"==typeof(i=null!=(i=n.validationElements||(null!=t?t.validationElements:t))?i:o)?i.call(r,{name:"validationElements",hash:{},data:s}):i)?l:"")+'\n    </div>\n    <div class="clearfix">\n        <button class="btn btn-orange pull-right on-createlist" data-dismiss="modal">Create List</button>\n        <button class="btn pull-right" data-dismiss="modal">Close</button>\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:library-current-reads",s.router.filter(["getTranslations","getCategories"],function(){var t=new s.views.LibraryLanding({section:"current-reads"}),n={hasHeader:!0,hasFooter:!0,pageTitle:a.utils.trans("Library - Current Reads")};s.get("device").is.android&&(n.footerOptions={appUrl:a.utils.getAppLink("library")}),s.transitionTo(t,n),e.te.push("event","app","page",null,"view",{page:"library"})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:library-archive",s.router.filter(["getTranslations","getCategories"],function(){var e=new s.views.LibraryLanding({section:"archive"});s.transitionTo(e,{hasHeader:!0,hasFooter:!0,pageTitle:a.utils.trans("Library - Archive")})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:library-reading-lists",s.router.filter(["getTranslations","getCategories"],function(t){var n;if(isNaN(t))n=new s.views.LibraryLanding({section:"reading-lists"}),s.transitionTo(n,{hasHeader:!0,hasFooter:!0,pageTitle:a.utils.trans("Library - Reading Lists")});else{var l=new s.models.ReadingList({id:t});Promise.resolve(l.fetch()).then(function(){n=new s.views.CoreLibraryReadingList({model:l}),s.transitionTo(n,{hasHeader:!0,hasFooter:!0,pageTitle:l.get("name")+" - "+l.get("user").name}),e.te.push("event","app","page",null,"view",{page:"reading_list",reading_listid:t})},function(){s.router.trigger("route:error-404","list")})}}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";var a=l(n(553)),s=l(n(554));function l(e){return e&&e.__esModule?e:{default:e}}!function(e,t,n,l){l.add("GetMobile",l.views.Base.extend({id:"get-mobile-page",template:s.default,events:{"tap   .on-login":"onAuthPrompt","click .on-login":"stopEvent","tap   .on-signup":"onNavigatePage","click .on-signup":"stopEvent","tap   .on-password-forgot":"onNavigatePage","click .on-password-forgot":"stopEvent","tap    .on-pw-toggle":"onPasswordToggle","click  .on-pw-toggle":"stopEvent","submit #send-link":"onSendAppLink"},initialize:function(e){this.timeout=null,this.deviceType=l.get("device")&&l.get("device").is.mobile?"mobile":"desktop",this.title=n.utils.trans("Sign in to Wattpad")},render:function(e){var t,s,i,r,o={};if(e=e||{},r=l.get("device"),t=n.utils.getCookie("locale"),s=l.get("supported-languages"),t&&0!==t.trim().length||(t="en_US"),i=s.where({locale:t})[0].toJSON(),o={downloadAppUrl:n.utils.getAppUrl("getmobile"),appUrl:n.utils.getAllAppUrls("getmobile"),googlePlayImage:this._googlePlayImage(i.code),languageCode:i.code,device:r},r.is.ios?(o.ratingsText=n.utils.trans("84,000+ 5 star ratings"),o.appStoreImage="homepages/appstore_dark.png",o.mobileOS="iOS"):r.is.windows?(o.ratingsText="",o.appStoreImage="homepages/windows_appstore.png",o.mobileOS="windows"):(o.ratingsText=n.utils.trans("1,000,000+ 5 star ratings"),o.appStoreImage=o.googlePlayImage,o.mobileOS="Android"),Handlebars.registerPartial("core.getmobile.values",a.default),r.isDesktop()&&n.utils.modernizr("video")&&"en_US"==t){var c=document.createElement("source");c.type="video/mp4",c.src=n.utils.connectAsset("/img/getmobile/video_480.mp4");var u=document.createElement("source");u.type="video/webm",u.src=n.utils.connectAsset("/img/getmobile/video_480.webm");var d=document.createElement("video");d.loop=!0,d.appendChild(c),d.appendChild(u),d.addEventListener("loadeddata",function(){$("#iphone").append(d),d.play()},!1)}return this.$el.html(this.template(o)),this},onPasswordToggle:function(t){var n=$(t.currentTarget),a=n.siblings("input"),s=a.attr("type");e.clearTimeout(this.timeout),"password"===s&&(a.attr("type","text").focus(),n.addClass("active")),"text"===s&&(a.attr("type","password").focus(),n.removeClass("active"))},onSendAppLink:function(a){var s=$("#send-link #sendTo");t.delay(function(){if(s.parent().hasClass("valid")){var a=$("#send-link .on-send-app-link");a.addClass("sending"),Promise.resolve($.ajax({type:"POST",url:"/apiv2/send_download_link",data:{to:s.val()}})).then(function(){a.removeClass("sending"),a.addClass("sent"),t.delay(function(){a.removeClass("sent")},5e3)}).catch(function(t){a.removeClass("sending"),e.alert(n.utils.trans(t))})}},200),n.utils.stopEvent(a)},_googlePlayImage:function(e){switch(e.toLowerCase()){case"ar":return"homepages/googleplay/ar.png";case"cs":return"homepages/googleplay/cs.png";case"de":return"homepages/googleplay/de.png";case"es":return"homepages/googleplay/es.png";case"fr":return"homepages/googleplay/fr.png";case"id":return"homepages/googleplay/id.png";case"it":return"homepages/googleplay/it.png";case"pl":return"homepages/googleplay/pl.png";case"pt":case"pt_pt":case"pt_br":return"homepages/googleplay/pt.png";case"ro":return"homepages/googleplay/ro.png";case"ru":return"homepages/googleplay/ru.png";case"sk":return"homepages/googleplay/sk.png";case"sv":return"homepages/googleplay/sv.png";case"tr":return"homepages/googleplay/tr.png";case"vi":return"homepages/googleplay/vi.png";case"en":default:return"homepages/googleplay/en.png"}}})),l.mixin(l.views.GetMobile,"ValidationView","AuthPromptManagement")}(window,_,wattpad,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'<div class="valueprops-container container-fluid">\n  <div class="valueprops">\n    <div class="row row-centered">\n      <div class="valueprop col-sm-4">\n        <h2 id="offline"> '+r((n.trans||t&&t.trans||i).call(l,"Go offline",{name:"trans",hash:{},data:s}))+" </h2>\n        "+r((n.trans||t&&t.trans||i).call(l,"Read stories anytime, anywhere, right on your phone or tablet.",{name:"trans",hash:{},data:s}))+'\n      </div>\n      <div class="valueprop col-sm-4">\n        <h2 id="social"> '+r((n.trans||t&&t.trans||i).call(l,"Read socially",{name:"trans",hash:{},data:s}))+" </h2>\n        "+r((n.trans||t&&t.trans||i).call(l,"Inline commenting lets you share thoughts and interact with the story.",{name:"trans",hash:{},data:s}))+'\n      </div>\n    </div>\n  </div>\n  <div class="valueprops">\n    <div class="row row-centered">\n      <div class="valueprop col-sm-4">\n        <h2 id="write"> '+r((n.trans||t&&t.trans||i).call(l,"Write stories",{name:"trans",hash:{},data:s}))+" </h2>\n        "+r((n.trans||t&&t.trans||i).call(l,"Whatever story you want to tell, there is a reader waiting for you on Wattpad.",{name:"trans",hash:{},data:s}))+'\n      </div>\n      <div class="valueprop col-sm-4">\n        <h2 id="updates"> '+r((n.trans||t&&t.trans||i).call(l,"Get updates",{name:"trans",hash:{},data:s}))+" </h2>\n        "+r((n.trans||t&&t.trans||i).call(l,"Receive real-time notifications as your favorite stories unfold.",{name:"trans",hash:{},data:s}))+"\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return"sr-only"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i,r=null!=t?t:e.nullContext||{},o=n.helperMissing,c=e.escapeExpression,u=e.lambda;return'<main id="getapp" class="container-fluid">\n  <div class="row">\n    <div class="col-sm-7 col-md-6">\n      <div id="text">\n        <div class="h1-container">\n          <h1>\n            '+c((n.trans||t&&t.trans||o).call(r,"Take stories with you.",{name:"trans",hash:{},data:s}))+'\n          </h1>\n        </div>\n\n        <form id="send-link" class="form-inline" method="post">\n          <div class="cta-text">'+c((n.trans||t&&t.trans||o).call(r,"Get the app in seconds:",{name:"trans",hash:{},data:s}))+'</div>\n\n          <div class="form-group has-feedback" data-attr="getMobile">\n            <label class="control-label '+(null!=(l=(n.supportsPlaceholder||t&&t.supportsPlaceholder||o).call(r,null!=t?t.device:t,{name:"supportsPlaceholder",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'" for="sendTo">'+c((n.trans||t&&t.trans||o).call(r,"enter email or phone number",{name:"trans",hash:{},data:s}))+'</label>\n            <input id="sendTo" class="form-control input-md enable" type="text" name="sendTo" placeholder="'+c((n.trans||t&&t.trans||o).call(r,"enter email or phone number",{name:"trans",hash:{},data:s}))+'">\n            '+(null!=(l="function"==typeof(i=null!=(i=n.validationElements||(null!=t?t.validationElements:t))?i:o)?i.call(r,{name:"validationElements",hash:{},data:s}):i)?l:"")+'\n          </div>\n          <button type="submit" class="btn btn-md btn-orange on-send-app-link">\n            <span class="hidden-if-sent">'+c((n.trans||t&&t.trans||o).call(r,"Send Link",{name:"trans",hash:{},data:s}))+'</span>\n            <span class="shown-if-sent">'+(null!=(l=(n.iconify||t&&t.iconify||o).call(r,"fa-check",16,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+'</span>\n            <span class="shown-if-sending">'+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||o).call(r,"fa-loading",16,null!=t?t.device:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+'</span>\n          </button>\n          <div class="tinytext">'+c((n.trans||t&&t.trans||o).call(r,"Standard messaging fees apply.",{name:"trans",hash:{},data:s}))+'</div>\n        </form>\n        <div class="row" id="download-row">\n          <div class="col-sm-4">\n            <a href="'+c(u(null!=(l=null!=t?t.appUrl:t)?l.android:l,t))+'" data-gtm="Download|getmobile|Android" target="_blank">\n              '+c((n.connectImage||t&&t.connectImage||o).call(r,null!=t?t.googlePlayImage:t,"Google Play",{name:"connectImage",hash:{},data:s}))+'\n            </a>\n          </div>\n          <div class="col-sm-4">\n            <a href="'+c(u(null!=(l=null!=t?t.appUrl:t)?l.ios:l,t))+'" data-gtm="Download|getmobile|iOS" target="_blank">\n              '+c((n.connectImage||t&&t.connectImage||o).call(r,"homepages/appstore_dark.png","App Store",{name:"connectImage",hash:{klass:"footer-appstore"},data:s}))+'\n            </a>\n          </div>\n          <div class="col-sm-4">\n            <a href="'+c(u(null!=(l=null!=t?t.appUrl:t)?l.windows:l,t))+'" data-gtm="Download|getmobile|windows" target="_blank">\n              '+c((n.connectImage||t&&t.connectImage||o).call(r,"homepages/windows_appstore.png","Windows Store",{name:"connectImage",hash:{klass:"windows-appstore"},data:s}))+'\n            </a>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <div id="devices" class="col-sm-5 col-md-6">\n      <div id="nexus7"></div>\n      <div id="iphone" class="'+c("function"==typeof(i=null!=(i=n.languageCode||(null!=t?t.languageCode:t))?i:o)?i.call(r,{name:"languageCode",hash:{},data:s}):i)+'"></div>\n    </div>\n  </div>\n</main>\n'+(null!=(l=e.invokePartial(a["core.getmobile.values"],t,{name:"core.getmobile.values",data:s,helpers:n,partials:a,decorators:e.decorators}))?l:"")},usePartial:!0,useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:getmobile",s.router.filter(["getTranslations"],function(){var e=new s.views.GetMobile({model:new s.models.GetMobile({})});s.transitionTo(e,{hideAddressBar:!1,hasHeader:!0,hasFooter:!0})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.add({"home(/:section)":["home.index",{regexp:{section:/browse/}}]})}(window,window.wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:home.index",s.router.filter(["requireLogin","getTranslations","getCategories"],function(t){var n=s.get("device").is.mobile,l=s.experiments.get("newhomepaid"),i="variation_personalized"===l.current||"variation_position2"===l.current;"unknown"===l.variationLoki||a.testGroups.NEW_HOME||l.selected();var r=i||a.testGroups.NEW_HOME||a.testGroups.HOMESLICE?new s.views.NewHome:new s.views.HomeIndex({section:n&&t?t:null});s.transitionTo(r,{hasHeader:!0,hasFooter:!0,pageTitle:a.utils.trans("Home")}),e.te.push("event","app","page",null,"view",{page:"home"})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict"},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(560));!function(e,t,n,s){s.add("HomeIndex",s.views.RegionManager.extend({id:"home-index",template:a.default,subviews:{discover:s.views.DiscoverRows},events:{"tap .tab-control":"onTabNavigation","click .tab-control":"stopEvent"},initialize:function(e){e=e||{},this.section=e.section||"home",this.homeCollection=new s.collections.Home},render:function(){return this.$el.html(this.template({onBrowse:"browse"===this.section,isMobile:s.get("device").is.mobile,testGroups:t.testGroups})),this.renderRegion("#home-content"),_.defer(function(){$("#announcements-container .spielbergo").length&&$("#announcements-container").removeClass("hide")}),this},renderRegion:function(e){var t=this;if("home"===this.section){var a=new this.subviews.discover({collection:this.homeCollection});0===this.homeCollection.length?Promise.resolve(this.homeCollection.fetchNextSet(n.appOn()?{}:{fresh:!0})).then(function(){t.$(e).empty(),t.setRegion(e,a.render())}):(this.$(e).empty(),this.setRegion(e,a.render()))}else if("browse"===this.section){(a=new s.views.BrowseTopics).render(),this.listenToOnce(a,"render:done",function(){t.$(e).empty(),t.setRegion(e,a)})}},onTabNavigation:function(e){var t=$(e.currentTarget);this.section=t.data("section"),this.$(".tab-control").removeClass("active"),t.addClass("active"),this.renderRegion("#home-content"),s.router.navigate(t.find("a").attr("href"),{trigger:!1})}}))}(window,wattpad,wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<nav>\n  <ul>\n    <li data-section="browse" class="tab-control'+(null!=(l=n.if.call(i,null!=t?t.onBrowse:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n      <a href="/home/browse">'+o((n.trans||t&&t.trans||r).call(i,"Browse",{name:"trans",hash:{},data:s}))+'</a>\n    </li>\n    <li data-section="home" class="tab-control'+(null!=(l=n.unless.call(i,null!=t?t.onBrowse:t,{name:"unless",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'">\n      <a href="/home">'+o((n.trans||t&&t.trans||r).call(i,"Recommended",{name:"trans",hash:{},data:s}))+"</a>\n    </li>\n  </ul>\n</nav>\n"},2:function(e,t,n,a,s){return" active"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'\n<main id="home-content">\n  <div class="load-container">\n    '+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||n.helperMissing).call(i,"fa-loading",49,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{color:"wp-neutral-3"},data:s}))?l:"")+"\n  </div>\n</main>\n"},useData:!0})},function(e,t,n){"use strict";app.router.add({"checkout(/)":["checkout",{}],"manage_payment(/)":["managePayment",{}]})},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("SubscriptionCheckout",a.views.DummyReactView.extend({component:"SubscriptionPurchaser",componentId:"subscription-purchaser",constructor:function(){var e=n.utils.getCookie("locale");this.componentData={locale:e,sendStripeToken:this.sendStripeToken.bind(this),createSubscription:this.createSubscription.bind(this),username:s.getCurrentUserAttr("username")};var t={componentData:this.componentData,component:this.component,componentId:this.componentId};a.views.DummyReactView.call(this,t)},sendStripeToken:function(e,t){return Promise.resolve()},createSubscription:function(e){return new Promise(function(e,t){setTimeout(e,5e3)})}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a,s){a=a||(e.wattpad={}),s.router.on("route:checkout",s.router.filter(["getTranslations","requireLogin"],function(e){var n=t.get(a,".testGroups.WEB_PAYMENTS")||!1,l=s.get("device").isDesktop();if(t.every([n,l])){var i=new s.views.SubscriptionCheckout({});s.transitionTo(i,{hasHeader:!0,hasFooter:!0})}else a.utils.redirectToCSR("/home")}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("NewHome",a.views.DummyReactView.extend({component:"Home",componentId:"new-home-landing",constructor:function(){var e={componentData:this.componentData,component:this.component,componentId:this.componentId};a.views.DummyReactView.call(this,e)}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";app.router.add({inbox:["inbox"]}),app.router.add({"inbox/:activeThread":["inbox",{regexp:{activeThread:/[\w\-]+/}}]})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:inbox",s.router.filter(["getTranslations","requireLogin"],function(t){var n=a.utils.currentUser(),l=t?e.app.components.actions.resetConversation():e.app.components.actions.resetThreads();e.store.dispatch(l);var i=new s.views.DummyReactView({component:"Inbox",componentId:"inbox",componentData:{username:n.get("username"),avatar:n.get("avatar")}});s.transitionTo(i,{hasHeader:!0,hasFooter:!0})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";app.router.add({"catalog/:catalog":["catalog",{regexp:{catalog:/[\w\-]+/}}]})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:catalog",s.router.filter(["getTranslations"],function(e){var t=new s.views.DummyReactView({component:"Catalog",componentId:"catalog",componentData:{catalog:e}});s.transitionTo(t,{hasHeader:!0,hasFooter:!0})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("ManagePayment",a.views.DummyReactView.extend({component:"ManagePayment",componentId:"user",showCancelModal:function(e){var t=new a.views.DummyReactView({component:"CancelSubscriptionModal",componentId:"PaymentManagement",componentData:{cancelDate:e,cancelSubscription:this.cancelSubscription.bind(this)}});t.render(),$("#generic-modal .modal-body").html(t.$el),$("#generic-modal").modal("show")},cancelSubscription:function(){return console.log("Making cancel subscription API request..."),new Promise(function(e,t){setTimeout(function(){console.log("Subscription successfully cancelled"),e()},500)})},updatePaymentInformation:function(e,t){return Promise.resolve()},constructor:function(){var e=n.user;this.componentData={isPremium:e.premium,showCancelModal:this.showCancelModal.bind(this),updatePaymentInformation:this.updatePaymentInformation.bind(this),username:e.username,locale:n.utils.getCookie("locale")};var t={componentData:this.componentData,component:this.component,componentId:this.componentId};a.views.DummyReactView.call(this,t)}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t,n,a,s){a=a||(e.wattpad={}),s.router.on("route:managePayment",s.router.filter(["getTranslations","requireLogin"],function(e){var t=new s.views.ManagePayment;s.transitionTo(t,{hasHeader:!0,hasFooter:!0})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.add({"invite-friends":["invite-friends.index",{}]})}(window,window.wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:invite-friends.index",s.router.filter(["requireLogin","getTranslations","getCategories"],function(){s.transitionTo(new s.views.InviteFriendsIndex,{hasHeader:!0,hasFooter:!0,pageTitle:a.utils.trans("Invite your friends to Wattpad")})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(574));!function(e,t,n,s){s.add("InviteFriendsIndex",s.views.RegionManager.extend({template:a.default,regionMethod:"replaceWith",id:"invite-friends",className:"push-container",initialize:function(){_.bindAll(this,"facebookConnected"),Handlebars.registerPartial("core.invite_friends.components.invite_panel",function(){return""}),n.currentUser().get("facebook")&&_.delay(this.facebookConnected,1)},render:function(){return this.$el.html(this.template({hasFacebook:!!n.currentUser().get("facebook")})),this.setRegion(".invite-panel-component",new s.views.InvitePanel({action:"select_from_nav",content:"invite_nav"})),this},facebookConnected:function(){this.setRegion("#find-facebook-friends",new s.views.FacebookFriends)},setElement:function(e){$(e);s.views.RegionManager.prototype.setElement.call(this,e),this.attachRegions()}})),s.mixin(s.views.InviteFriendsIndex,"FacebookConnect")}(window,window.wattpad,window.wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'                                <span class="spinner" style="display: inline-block">\n                                    '+e.escapeExpression((n.trans||t&&t.trans||r).call(i,"Finding your friends...",{name:"trans",hash:{},data:s}))+" "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{color:"wp-neutral-5"},data:s}))?l:"")+"\n                                </span>\n"},3:function(e,t,n,a,s){return"                                "+e.escapeExpression((n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Connect with Facebook",{name:"trans",hash:{},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="container">\n    <div class="row">\n        <div id="find-facebook-friends" class="col-md-8">\n            <div class="wp-panel facebook-friends-panel">\n                <div class="wp-hero vcenter">\n                    <div>\n                        <h1 class="h2"><strong> '+o((n.trans||t&&t.trans||r).call(i,"Reading is better with friends",{name:"trans",hash:{},data:s}))+'</strong></h1>\n                        <h2 class="h5"><strong> '+o((n.trans||t&&t.trans||r).call(i,"Connect with Facebook to see who's on Wattpad",{name:"trans",hash:{},data:s}))+'</strong></h2>\n                        <button class="btn btn-lg btn-facebook-link">\n                            '+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-facebook-square",18,"wp-neutral-5",{name:"iconify",hash:{},data:s}))?l:"")+"\n"+(null!=(l=n.if.call(i,null!=t?t.hasFacebook:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'                        </button>\n                        <div class="alert alert-danger hidden" role="alert"><span>'+(null!=(l=(n.iconify||t&&t.iconify||r).call(i,"fa-warning",16,"wp-lighterror",{name:"iconify",hash:{},data:s}))?l:"")+'</span><span class="errorMessage"></span></div>\n                    </div>\n                </div>\n                <div class="blurred-avatars">\n                    '+o((n.connectImage||t&&t.connectImage||r).call(i,"/invite-friends/img_blurred_friends.png",(n.trans||t&&t.trans||r).call(i,"Invite Your Facebook Friends",{name:"trans",hash:{},data:s}),{name:"connectImage",hash:{size:"653x236"},data:s}))+'\n                </div>\n            </div>\n        </div>\n        <div class=col-md-4>\n            <div class="wp-component invite-panel-component">\n'+(null!=(l=e.invokePartial(a["core.invite_friends.components.invite_panel"],t,{name:"core.invite_friends.components.invite_panel",data:s,indent:"                ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </div>\n        </div>\n    </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(576));!function(e,t,n,s){s.add("InvitePanel",s.views.Base.extend({template:a.default,className:"wp-component invite-panel-component",events:{"tap .provider-facebook":"onFacebookProvider","tap .provider-twitter":"onTwitterProvider","tap .provider-mailto":"onMailtoProvider","click .invite-providers > li":"stopEvent","focus .provider-email > input":"clearMessage","tap .provider-email > button":"onEmailProvider","click .provider-email > button":"stopEvent"},initialize:function(e){e=e||{},this.action=e.action,this.content=e.content},render:function(){return this.$el.html(this.template({})),this},clearMessage:function(){this.$(".email-message").text("")},onEmailProvider:function(){var e=this,t=this.$(".provider-email > button, .provider-email > input"),a=this.$(".provider-email > input"),l=this.$(".provider-email > button"),i=a.val();if(null!==i.match(/^[a-zA-Z0-9_\.\'\+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-\.]+$/)){t.attr("disabled","disabled"),l.children().toggle();var r=new s.models.UserInvite({emails:i});this.attachErrorHandlers(r),this.trackEvent("email"),Promise.resolve(r.save()).then(function(){e.$(".email-message").text(n.trans("You have successfully sent an invite")).removeClass("warning"),_.delay(function(){e.$(".email-message").text("")},3e3),a.val("")}).catch(function(){}).then(function(){l.children().toggle(),t.removeAttr("disabled"),e.detachErrorHandlers(r)})}else this.$(".email-message").text(n.trans("The email address is invalid.")).addClass("warning")},onFacebookProvider:function(){var e=this;this.trackEvent("facebook"),Promise.resolve(this.createShareLink("facebook")).then(function(t){e.facebookSend(t.url)})},onTwitterProvider:function(){var e=this;this.trackEvent("twitter"),Promise.resolve(this.createShareLink("twitter")).then(function(t){e.twitterShare({text:n.trans("Follow me on Wattpad! Username %s",n.currentUser().get("username")),url:t.url})})},onMailtoProvider:function(){this.trackEvent("email"),Promise.resolve(this.createShareLink("email")).then(function(t){var a=n.trans("Follow me on Wattpad!"),s=encodeURIComponent(t.url),l=n.trans("Follow me on Wattpad, a free, one-of-a-kind social reading and writing app. My username is: %s%%0A\n%s",n.currentUser().get("username"),s);e.location.href="mailto:?to=&subject="+a+"&body="+l})},createShareLink:function(e){var t=n.currentUser().get("username"),a="https://www.wattpad.com/user/"+t,s="wattpad://user/"+t,l={source:"web",medium:e,campaign:"invitefriends",content:"sharing",page:this.content,desktopRedirect:!0};return n.generateBranchLink(a,s,l)},trackEvent:function(n){t.utils.pushEvent({category:"invite_friends",action:this.action,label:n});var a={source:"web",medium:n,campaign:"invitefriends",content:"invite-friends",page:this.content};e.te.push("event","app","invite_friends",null,"deeplink",a)}})),s.mixin(s.views.InvitePanel,"FacebookConnect","TwitterConnect")}(window,window.wattpad,window.wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'<div class="wp-panel">\n    <div class="wp-hero vcenter form-inline">\n        <div>\n            <h3><strong> '+o((n.trans||t&&t.trans||r).call(i,"Who's missing out?",{name:"trans",hash:{},data:s}))+"</strong></h3>\n            <h6><strong> "+o((n.trans||t&&t.trans||r).call(i,"Invite them to Wattpad",{name:"trans",hash:{},data:s}))+'</strong></h6>\n            <div class="invite-email">\n                '+o((n.connectImage||t&&t.connectImage||r).call(i,"/invite-friends/ic_invite_wattpad@2x.png",(n.trans||t&&t.trans||r).call(i,"Invite your friends to Wattpad",{name:"trans",hash:{},data:s}),{name:"connectImage",hash:{size:"124x127"},data:s}))+'\n            </div>\n            <div class="provider-email">\n                <input type="text" placeholder="'+o((n.trans||t&&t.trans||r).call(i,"Email address",{name:"trans",hash:{},data:s}))+'" class="form-control">\n                <button class="btn btn-orange btn-md">\n                    <span>'+o((n.trans||t&&t.trans||r).call(i,"Invite",{name:"trans",hash:{},data:s}))+'</span>\n                    <span class="spinner">'+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{},data:s}))?l:"")+'</span>\n                </button>\n            </div>\n            <div class="email-message"></div>\n        </div>\n    </div>\n    <ul class="invite-providers">\n        <li class="provider-facebook">\n            '+o((n.connectImage||t&&t.connectImage||r).call(i,"/invite-friends/ic_invite_fb@2x.png",(n.trans||t&&t.trans||r).call(i,"Facebook Logo",{name:"trans",hash:{},data:s}),{name:"connectImage",hash:{height:"42",width:"42"},data:s}))+'\n            <strong>Facebook</strong>\n            <span class="fa fa-right"></span>\n        </li>\n        <li class="provider-twitter">\n            '+o((n.connectImage||t&&t.connectImage||r).call(i,"/invite-friends/ic_invite_twitter@2x.png",(n.trans||t&&t.trans||r).call(i,"Twitter Logo",{name:"trans",hash:{},data:s}),{name:"connectImage",hash:{height:"42",width:"42"},data:s}))+'\n            <strong>Twitter</strong>\n            <span class="fa fa-right"></span>\n        </li>\n        <li class="provider-mailto">\n            '+o((n.connectImage||t&&t.connectImage||r).call(i,"/invite-friends/ic_invite_email@2x.png",(n.trans||t&&t.trans||r).call(i,"Email Logo",{name:"trans",hash:{},data:s}),{name:"connectImage",hash:{height:"42",width:"42"},data:s}))+"\n            <strong>"+o((n.trans||t&&t.trans||r).call(i,"Email",{name:"trans",hash:{},data:s}))+'</strong>\n            <span class="fa fa-right"></span>\n        </li>\n    </ul>\n    <div class="consent">'+o((n.trans||t&&t.trans||r).call(i,"We won't contact anyone without your consent.",{name:"trans",hash:{},data:s}))+"</div>\n</div>\n"},useData:!0})},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(578));!function(e,t,n,s){s.add("FacebookFriends",s.views.CollectionView.extend({template:a.default,className:"col-md-8 clearfix",id:"find-facebook-friends",events:{"tap .btn-invite":"onFacebookInvite","click .btn-invite":"stopEvent"},itemView:s.views.UserItem,initialize:function(){this.iCanHazErrors(),this.collection=new s.collections.FacebookFriends,this.facebookConnected()},facebookConnected:function(){var e=this;return Promise.resolve(this.collection.fetch()).then(function(){e.render()}).catch(function(){e.hasFailed?e.render():(e.hasFailed=!0,e.getPermissions())})},render:function(){this.$el.html(this.template({hasItems:!!this.collection.length})),this.renderCollection()},onFacebookInvite:function(){var e=this;t.utils.pushEvent({category:"invite_friends",action:"select_from_nav",label:"facebook"});var a=n.generateBranchLink("https://www.wattpad.com/signup",this.getDeepLink(),{source:"mobileweb",medium:"invite-friends-facebook",content:"sharing",page:this.getDeepLinkPage()});Promise.resolve(a).then(function(t){e.facebookSend(t.url)})}})),s.mixin(s.views.FacebookFriends,"FacebookConnect")}(window,window.wattpad,window.wattpad.utils,window.app)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l=null!=t?t:e.nullContext||{},i=n.helperMissing,r=e.escapeExpression;return'    <div class="wp-panel no-results">\n        <div class="wp-hero vcenter">\n            <div>\n                <h2><strong>'+r((n.trans||t&&t.trans||i).call(l,"Your Facebook friends aren't on Wattpad yet.",{name:"trans",hash:{},data:s}))+'</strong></h2>\n                <button class="btn btn-lg btn-invite">\n                    <span class="fa fa-facebook-square"></span>\n                    '+r((n.trans||t&&t.trans||i).call(l,"Invite them",{name:"trans",hash:{},data:s}))+"\n                </button>\n            </div>\n        </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l;return(null!=(l=n.unless.call(null!=t?t:e.nullContext||{},null!=t?t.hasItems:t,{name:"unless",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+'<div class="collection"></div>\n'},useData:!0})},function(e,t,n){"use strict";window.mobileApp=window.mobileApp||{},window.mobileApp.config=function(e,t,n,a){if(null!==a&&void 0!==a){var s=(n=n||e.wattpad||(e.wattpad={})).utils||(n.utils={});e.app||(e.app=a),a.set("default-language","1");var l=new a.collections.Languages(n.supportedLangs);a.set("supported-languages",l);var i=!!(n&&n.utils&&n.utils.getCookie)&&s.getCookie("locale");i=null===i||!1===i?"en_US":i;var r=l.find(function(e){return e.get("locale")===i});if((r=r?r.get("id").toString():"")&&""!==r||a.get("language")&&""!==a.get("language")?r&&""!==r&&(a.set("language",r,!0),n.language=r):(a.set("language",a.get("default-language"),!0),n.language=a.get("default-language")),a.set("api-key-web",n.apiAuthKey),e.jQuery&&(e.jQuery("body > div:not(#header-container,.shadow-banner), #header, #footer-container").hammer({behavior:{userSelect:!0}}),s.modernizr("fontface")?e.jQuery("body").removeClass("ff-unsupported"):e.jQuery("link#font-awesome").remove()),a.set("device",new s.Device),a._firstRun=!0,n&&n.utils&&n.utils.getCookie&&n.utils.setCookie){var o=s.getCookie("ff"),c=n.utils.modernizr&&s.modernizr("fontface")?1:0;o&&null!==o||s.setCookie("ff",c),window.devicePixelRatio&&s.setCookie("dpr",window.devicePixelRatio);var u=(new Date).getTimezoneOffset()/60;s.setCookie("tz",u)}_.each(window.wattpad.experiments,function(e,t){var s={};s[e.variation]={suffix:n.utils.toPascalCase(e.variation)},a.experiments.set(t,s,{users:1,experimentKey:e.key,status:e.status}),a.experiments.get(t).split()})}},window.mobileApp.config(window,Monaco,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s,l,i){l.add("ReactComponentWrapper",i.View.extend({initialize:function(n,a,s,l){return s=s||{},n?a?e.app.components[n]?(this.componentId=a,this.containerId=("component-"+n+"-"+this.componentId+"-"+e.location.pathname).toLowerCase(),this.container=this.generateContainer(n),this.model=s.model,this.componentName=n,this.listenTo(this.model,"change",t.bind(this.render,this)),this):new Error(n+" is not defined in window.app.components"):new Error("componentId not provided"):new Error("componentName not provided")},generateContainer:function(e){return n("<div class='component-wrapper' id='"+this.containerId+"'></div>")},remove:function(){this.container&&this.container[0]&&ReactDOM.unmountComponentAtNode(this.container[0]),i.View.prototype.remove.apply(this,arguments)},render:function(){if(this.retryCount=this.retryCount||0,!document.getElementById(this.containerId)){if(!(this.retryCount<5))throw new Error(this.containerId+" mounting failed.");return t.defer(t.bind(function(){this.retryCount++,this.render()},this),1e3),"<div class='component-wrapper' id='"+this.containerId+"'></div>"}return this.setElement(document.getElementById(this.containerId)),this.container=n(document.getElementById(this.containerId)),t.defer(t.bind(function(){this.retryCount=0;var t=e.app.components[this.componentName],n=e.app.components.withRedux(t,e.store);ReactDOM.render(React.createElement(n,this.model.toJSON()),document.getElementById(this.containerId))},this)),this}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){"use strict";!function(e,t){t.router.add({comesignup:["retargeting_landing",{}]})}(window,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(583));!function(e,t,n,s,l,i,r){i.add("RetargetingLanding",i.views.Base.extend({template:a.default,id:"retargeting-landing",events:{"tap   .on-signup":"loadSignupModal","click .on-signup":"stopEvent"},render:function(){var e={isMobile:i.get("device").is.mobile,languageId:parseInt(i.get("language"),10)};return this.$el.html(this.template(e)),t.defer(this.afterRender.bind(this)),this},afterRender:function(){i.get("device").is.mobile&&this.initCarousel()},loadSignupModal:function(e){var t=new i.views.SignUpPrompt({model:new i.models.Authsignup,title:s.utils.trans("Join Wattpad"),formType:"navbar_modal",form:"signup"});n("#generic-modal .modal-body").html(t.render().$el),n("#generic-modal").modal("show"),n("#generic-modal").one("shown.bs.modal",function(){n(this).find("[autofocus]").focus()})},initCarousel:function(){var e={nav:!0,navText:['<span class="fa fa-left fa-wp-neutral-2 carousel-left"></span>','<span class="fa fa-right fa-wp-neutral-2 carousel-right"></span>'],autoPlay:5e3,stopOnHover:!1};l.rtlLanguage(parseInt(i.get("language"),10))&&t.extend(e,{rtl:!0}),i.get("device").is.mobile?t.extend(e,{responsive:{0:{items:1},600:{items:2},900:{items:3}}}):t.extend(e,{items:2,autoWidth:!0,margin:30}),this.$(".owl-carousel").one("initialized.owl.carousel",function(){n(this).removeClass("invisible")}),this.$(".owl-carousel.no-loop, .owl-carousel.users").owlCarousel(e),t.extend(e,{loop:!0}),this.$(".owl-carousel:not(.no-loop):not(.users)").owlCarousel(e)}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l;return'        <img class="header-image" src="img/retargeting/mw-stories-img@2x.png" alt="'+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Wattpad Stories",{name:"trans",hash:{},data:s}))?l:"")+'">\n'},3:function(e,t,n,a,s){var l;return'        <img class="header-image" src="img/retargeting/dw-stories-img@2x.png"  alt="'+(null!=(l=(n.trans||t&&t.trans||n.helperMissing).call(null!=t?t:e.nullContext||{},"Wattpad Stories",{name:"trans",hash:{},data:s}))?l:"")+'">\n'},5:function(e,t,n,a,s){return" owl-carousel"},7:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'style="direction:'+(null!=(l=n.if.call(i,(n.rtlLanguage||t&&t.rtlLanguage||n.helperMissing).call(i,null!=t?t.languageId:t,{name:"rtlLanguage",hash:{},data:s}),{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.program(10,s,0),data:s}))?l:"")+'"'},8:function(e,t,n,a,s){return"rtl"},10:function(e,t,n,a,s){return"ltr"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing;return'<div id="retargeting-landing">\n  <div class="container-fluid">\n    <div class="row">\n'+(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(3,s,0),data:s}))?l:"")+'      <div class="container">\n        <div class="row">\n          <div class="retargeting-header">\n            <img class="logo" src="img/retargeting/dw-logo.png" alt="Wattpad Logo">\n            <h1> '+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Come around here often?",{name:"trans",hash:{},data:s}))?l:"")+" 😉</h1>\n            <p>"+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Sign up for Wattpad to get access to so much more",{name:"trans",hash:{},data:s}))?l:"")+'</p>\n          </div>\n        </div>\n        <div class="row">\n          <div class="value-props">\n            <div class="value-props-wrapper'+(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s}))?l:"")+'"\n                 '+(null!=(l=n.if.call(i,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s}))?l:"")+'>\n\n              <div class="col-md-4 col-xs-12 col-sm-12 col-lg-4">\n                <div class="value-prop">\n                  <span class="icon">📚</span>\n                  <h6 class="title">'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Endless Entertainment",{name:"trans",hash:{},data:s}))?l:"")+'</h6>\n                </div>\n              </div>\n              <div class="col-md-4 col-xs-12 col-sm-12 col-lg-4">\n                <div class="value-prop">\n                  <span class="icon">📱</span>\n                  <h6 class="title">'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Read Offline Anywhere, Anytime",{name:"trans",hash:{},data:s}))?l:"")+'</h6>\n                </div>\n              </div>\n              <div class="col-md-4 col-xs-12 col-sm-12 col-lg-4">\n                <div class="value-prop bookmark">\n                  <span class="icon"><img src="img/retargeting/d-bookmark-icon@1x.png" alt="bookmark"></span>\n                  <h6 class="title">'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Save Your Spot",{name:"trans",hash:{},data:s}))?l:"")+'</h6>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n        <button class="btn on-signup" role="button">'+(null!=(l=(n.trans||t&&t.trans||r).call(i,"Sign up",{name:"trans",hash:{},data:s}))?l:"")+"</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n"},useData:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:retargeting_landing",s.router.filter(["getTranslations"],function(){var e=new s.views.RetargetingLanding;s.transitionTo(e,{hasHeader:!1,hasFooter:!1})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({presents:["videos_landing",{}]})}(window,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(587));!function(e,t,n,s,l,i,r){i.add("VideosLanding",i.views.Base.extend({template:a.default,id:"wattpad-presents",events:{},render:function(){var e=[];t.each(this.options.videoModels,function(t){e.push(t.toJSON())});var n={isMobile:i.get("device").is.mobile,videoStoryPairs:e,numVideos:e.length};return this.$el.html(this.template(n)),t.defer(this.afterRender.bind(this)),this},afterRender:function(){var t=this,n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a),e.onYouTubeIframeAPIReady=function(){t.initVideos()}},initVideos:function(){var n=this.options.videoModels;t.each(n,function(t){var a=t.toJSON();new e.YT.Player("player-"+a.videoId,{height:i.get("device").is.mobile||3===n.length?"210":"390",width:"640",videoId:a.videoId})})}}))}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){return'class="ios-webview-padding"'},3:function(e,t,n,a,s){return"          "+e.escapeExpression((n.connectImage||t&&t.connectImage||n.helperMissing).call(null!=t?t:e.nullContext||{},"wattpad-presents/MW-Banner@2x.png","Wattpad Presents",{name:"connectImage",hash:{klass:"logo"},data:s}))+"\n"},5:function(e,t,n,a,s){return"          "+e.escapeExpression((n.connectImage||t&&t.connectImage||n.helperMissing).call(null!=t?t:e.nullContext||{},"wattpad-presents/DW-Banner@2x.png","Wattpad Presents",{name:"connectImage",hash:{klass:"logo"},data:s}))+"\n"},7:function(e,t,n,a,s){return" centre-one"},9:function(e,t,n,a,s,l,i){var r,o,c=null!=t?t:e.nullContext||{},u=n.helperMissing,d="function",h=e.escapeExpression;return'\n              <div class="video-module col-sm-12 col-xs-12'+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=i[1]?i[1].numVideos:i[1],1,{name:"ifequal",hash:{},fn:e.program(10,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"\n                  "+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=i[1]?i[1].numVideos:i[1],2,{name:"ifequal",hash:{},fn:e.program(12,s,0,l,i),inverse:e.noop,data:s}))?r:"")+(null!=(r=(n.ifequal||t&&t.ifequal||u).call(c,null!=i[1]?i[1].numVideos:i[1],3,{name:"ifequal",hash:{},fn:e.program(14,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n                <div class="video-story-meta" id="story-'+h(typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:u)===d?o.call(c,{name:"id",hash:{},data:s}):o)+'">\n                  <div class="story-cover pull-left">\n                    <img src="'+h((n.resizeCover||t&&t.resizeCover||u).call(c,null!=t?t.cover:t,14,{name:"resizeCover",hash:{},data:s}))+'" alt="'+h(typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:u)===d?o.call(c,{name:"title",hash:{},data:s}):o)+" by "+h(e.lambda(null!=(r=null!=t?t.user:t)?r.name:r,t))+'">\n                  </div>\n                  <div class="story-title">'+h((n.simpleShorten||t&&t.simpleShorten||u).call(c,null!=t?t.title:t,45,!1,{name:"simpleShorten",hash:{},data:s}))+'</div>\n                  <span class="genre">'+h(typeof(o=null!=(o=n.category||(null!=t?t.category:t))?o:u)===d?o.call(c,{name:"category",hash:{},data:s}):o)+"</span>\n                  <a class='btn btn-link btn-xxs read-story pull-right' href=\""+h(typeof(o=null!=(o=n.url||(null!=t?t.url:t))?o:u)===d?o.call(c,{name:"url",hash:{},data:s}):o)+'">\n                    <span>Read story</span>\n                  </a>\n                </div>\n                <div id="player-'+h(typeof(o=null!=(o=n.videoId||(null!=t?t.videoId:t))?o:u)===d?o.call(c,{name:"videoId",hash:{},data:s}):o)+'"></div>\n              </div>\n\n'},10:function(e,t,n,a,s){return" col-md-12 col-lg-12"},12:function(e,t,n,a,s){return" col-md-6 col-lg-6"},14:function(e,t,n,a,s){return" col-md-4 col-lg-4"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s,l,i){var r,o=null!=t?t:e.nullContext||{};return'<div id="wattpad-presents" '+(null!=(r=n.if.call(o,null!=t?t.iosWebView:t,{name:"if",hash:{},fn:e.program(1,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'>\n  <div class="container-fluid">\n    <div class="row">\n      <div class="container">\n'+(null!=(r=n.if.call(o,null!=t?t.isMobile:t,{name:"if",hash:{},fn:e.program(3,s,0,l,i),inverse:e.program(5,s,0,l,i),data:s}))?r:"")+'\n        <h1>Short videos based on popular Wattpad stories!</h1>\n\n        <div class="row">\n          <div class="videos'+(null!=(r=(n.ifequal||t&&t.ifequal||n.helperMissing).call(o,null!=t?t.numVideos:t,1,{name:"ifequal",hash:{},fn:e.program(7,s,0,l,i),inverse:e.noop,data:s}))?r:"")+'">\n'+(null!=(r=n.each.call(o,null!=t?t.videoStoryPairs:t,{name:"each",hash:{},fn:e.program(9,s,0,l,i),inverse:e.noop,data:s}))?r:"")+"          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n"},useData:!0,useDepths:!0})},function(e,t,n){"use strict";!function(e,t,n,a,s){s.router.on("route:videos_landing",s.router.filter(["getTranslations","getCategories"],function(){var e=JSON.parse(a.spielbergoData),n=[],l=[];t.each(e,function(e){var t=new s.models.StoryVideoModel({id:e.story,videoId:e.video});l.push(t),n.push(t.fetch())}),Promise.all(n).then(function(e){var t=new s.views.VideosLanding({videoModels:l});s.transitionTo(t,{hasHeader:!1,hasFooter:!1,pageTitle:"Wattpad Presents"})},function(){s.router.trigger("route:error-404","wattpad-presents")})}))}(window,_,jQuery,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a,s){a.add("StoryVideoModel",a.models.BaseModel.extend({defaults:{cover:"",title:""},fields:["id","title","url","cover",{user:["name"]},"categories"],cacheLocal:!0,urlRoot:"/api/v3/stories/",resource:function(){return"wattpad.presents."+parseInt(this.get("id"),10)+".metadata"},fetch:function(e){var t=a.models.BaseModel.prototype.fetch.call(this,e);return Promise.resolve(t).then(function(e){return e})},parse:function(e){if(e.categories&&e.categories.length>1&&(e.categories=[e.categories[0]||e.categories[1]],a.get("categories"))){var t=a.get("categories").get(e.categories[0]);if(t){var n=t.toJSON();e.category=n.name}}return e}}))}(window,_,wattpad,window.app,wattpad.utils)},function(e,t,n){"use strict";!function(e,t){t.router.add({"featured(/:list)":["featured_picks",{regexp:{list:/[0-9]*/}}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.on("route:featured_picks",n.router.filter(["getTranslations","getCategories"],function(t){var a=new n.models.ReadingList({id:t});Promise.all([a.fetch()]).then(function(){var s=new n.views.FeaturedPicks({model:a});n.transitionTo(s,{hasHeader:!0,hasFooter:!0}),e.te.push("event","app","page",null,"view",{page:"featured",reading_listid:t})}).catch(function(e){console.error(e)})}))}(window,wattpad,window.app)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(593));!function(e,t,n,s,l,i,r){i.add("FeaturedPicks",i.views.IncrementalList.extend({template:a.default,itemView:i.views.BrowseStoryItem,containerClass:".featured-picks",events:t.extend({"tap .on-story-preview":"onStoryPreview","click .on-story-preview":"stopEvent","tap .featured-list":"sendDropdownClickTrackingEvent","click .featured-list":"stopEvent","tap .on-story-details":"sendStoryClickTrackingEvent","tap .on-start-reading":"sendStoryClickTrackingEvent"},i.views.IncrementalList.prototype.events),initialize:function(e){e=e||{},this.collection=this.model.stories(),this.pageTitle=this.model.get("name"),Handlebars.registerPartial("core.item_views.browse_story_item",function(){return""}),s.utils.setTitle(this.pageTitle),this.collection.once("sync",this.render,this),this.collection.fetchNextSet(),this.listenTo(i,"app:component:TagMetaItem:click",this.navigateToTagPage),this.listenTo(i,"app:component:TagMetaNumNotShown:click",this.onStoryPreview)},getContainer:function(){return this.$el.find(this.containerClass)},getTemplateData:function(){var e=this.model.toJSON();return{hasStories:this.collection.total>0,readingList:e,title:e.name}},getItemViewOptions:function(){return{id:this.model.get("id")}},onStoryPreview:function(e){var t=n(e.currentTarget).data("story-id"),a=this.collection.get(t),s=new i.views.BrowseStoryPreview({model:a});this.$("#preview-modal").empty().append(s.render().$el),s.openModal(),this.sendStoryClickTrackingEvent(e)},navigateToTagPage:function(e){var t=n(e.currentTarget).text().trim();i.router.navigate("/stories/"+encodeURIComponent(t),{trigger:!0})},sendStoryClickTrackingEvent:function(t){var a=n(t.currentTarget).data("story-id")||this.$("#preview-modal .browse-preview.modal").data("story-id");e.te.push("event","featured","story",null,"click",{reading_listid:n(".current-list").data("list-id"),storyid:a})},sendDropdownClickTrackingEvent:function(t){e.te.push("event","featured","dropdown",null,"click",{reading_listid:n(t.currentTarget).data("list-id")})}})),i.mixin(i.views.FeaturedPicks,"InfiniteScroll")}(window,_,jQuery,wattpad,wattpad.utils,window.app,window.Monaco)},function(e,t,n){var a=n(0);e.exports=(a.default||a).template({1:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{},r=n.helperMissing,o=e.escapeExpression;return'      <div class="featured-picks">\n'+(null!=(l=n.if.call(i,null!=t?t.stories:t,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?l:"")+'        <div class="show-more center-text hidden">\n          <button class="btn btn-grey on-showmore">\n          <span class=\'show-more-message\'>\n            <span>'+o((n.trans||t&&t.trans||r).call(i,"Show more",{name:"trans",hash:{},data:s}))+"</span>\n            <span class=\"fa fa-down-small fa-wp-neutral-2\"></span>\n          </span>\n            <span class='loading-message hidden'>\n            "+(null!=(l=(n.iconifySpin||t&&t.iconifySpin||r).call(i,"fa-loading",16,null!=t?t["user-device"]:t,{name:"iconifySpin",hash:{className:"loading-spinner fa-spin-fix-position"},data:s}))?l:"")+"\n              <span>"+o((n.trans||t&&t.trans||r).call(i,"Loading...",{name:"trans",hash:{},data:s}))+'</span>\n          </span>\n          </button>\n        </div>\n      </div>\n      <div id="preview-modal"></div>\n'},2:function(e,t,n,a,s){var l;return null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.stories:t,{name:"each",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s}))?l:""},3:function(e,t,n,a,s){var l;return'            <div class="browse-story-item">\n'+(null!=(l=e.invokePartial(a["core.item_views.browse_story_item"],t,{name:"core.item_views.browse_story_item",data:s,indent:"              ",helpers:n,partials:a,decorators:e.decorators}))?l:"")+"            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,s){var l,i=null!=t?t:e.nullContext||{};return'<div id="featured-picks-container">\n  <div class="container">\n    '+(null!=(l=(n.reactComponent||t&&t.reactComponent||n.helperMissing).call(i,"CatalogHeader","catalog-header",{name:"reactComponent",hash:{},data:s}))?l:"")+'\n  </div>\n  <div class="container">\n'+(null!=(l=n.if.call(i,null!=t?t.hasStories:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?l:"")+"  </div>\n</div>\n"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";!function(e,t){t.router.add({"settings(/)":["user_settings",{}]})}(window,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("UserSettings",a.models.User.extend({idAttribute:"username",fields:["username","name","email","description","avatar","backgroundUrl","createDate","location","birthdate","gender","genderCode","facebook","twitter","website","bubok","smashwords","lulu","password","verified","verified_email","highlight_colour","html_enabled","ambassador","wattpad_squad","is_staff","isPrivate","isMuted","externalId","beta_enabled","premium","appear_offline","show_name","has_password",{notificationSettings:["alerts","subscribe","alertssub"]}],urlRoot:"/api/v3/users/",resource:function(){return"user."+this.get("username")},_mutedUsers:[],mutedUsers:function(){return this._mutedUsers},fetchIgnoreList:function(){var e=this;return Promise.resolve($.ajax({url:"/apiv2/ignoreuser?id="+this.get("id")+"&action=get_ignored_web",type:"POST"})).then(function(t){return"SUCCESS"===t.result&&(e._mutedUsers=t.list.map(function(e){return new a.models.UserModel({id:e.ID,username:e.NAME,avatar:"https://a.wattpad.com/useravatar/"+e.NAME+".jpg"})})),e._mutedUsers}).catch(function(e){return console.error(e),!1})},updateAvatar:function(e){return Promise.resolve($.ajax({type:"POST",url:"/apiv2/updateuserprofilepic",data:{image:e.parsed}})).then(function(e){return e}).catch(function(e){return e})},updateBackground:function(e){return Promise.resolve($.ajax({type:"POST",url:"/apiv2/updateuserbackground",data:{image:e.parsed}})).then(function(e){return e}).catch(function(e){return e})},updateNotifications:function(e){var t,n=e,a=n[0].elements,s=0;return a.alertssub.checked&&(s|=252),a.alerts.value=a.alerts.checked?1:0,a.alertssub.value=a.alertssub.checked?1:0,a.subscribe.value=a.subscribe.checked?1:0,a.alertssubmask.value=s,t=n.serialize(),Promise.resolve($.ajax({type:"POST",url:"apiv2/usernotifications",data:t,processData:!1})).then(function(e){if("SUCCESS"===e.result)return{alerts:e.alerts,alertssub:e.alertssub,subscribe:e.subscribe}}).catch(function(e){return console.error(e),e})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.on("route:user_settings",n.router.filter(["getTranslations"],function(e){var a=new n.models.UserSettings(t.user);Promise.all([a.fetch(),a.fetchIgnoreList()]).then(function(){var s=new n.views.UserSettings({model:a,mutedUsers:a.mutedUsers(),errorMessage:e&&e.errorMessage});n.transitionTo(s,{hasHeader:!0,hasFooter:!0,pageTitle:t.utils.trans("User Settings")})},function(){n.router.trigger("route:error-404","user-settings")})}))}(window,wattpad,window.app)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n,s,l,i){i.add("UserSettings",i.views.DummyReactView.extend({component:"UserSettings",componentId:"user-settings",constructor:function(e){this.model=e.model,this.componentData=this.getComponentData(),this.mutedUsers=e.mutedUsers,this.errorMessage=e.errorMessage,this.errorMessage&&alert(this.errorMessage),e={componentData:this.componentData,component:this.component,componentId:this.componentId},i.views.DummyReactView.call(this,e)},render:function(){this.componentData=this.getComponentData(),i.views.DummyReactView.prototype.render.apply(this)},getComponentData:function(){var e=t.map(this.mutedUsers,function(e){return e.toJSON()});return{userObj:this.model.toJSON(),mutedUsers:e,app:{deviceType:s.utils.getDeviceType(),language:i.get("language"),languages:i.get("supported-languages").toJSON()},saveAvatarChanges:this.saveAvatarChanges.bind(this),saveBackgroundChanges:this.saveBackgroundChanges.bind(this),onSaveAccountChanges:this.onSaveAccountChanges.bind(this),openUserSettingsModal:this.openUserSettingsModal.bind(this),updateNotifications:this.updateNotifications.bind(this),renderTooltips:this.renderTooltips.bind(this)}},saveAvatarChanges:function(e){var t,n=this;e&&n.getFile(e).catch(function(e){return Promise.reject()}).then(function(e){return t=e,n.model.updateAvatar(e)}).then(function(e){e.success&&(n.model.set("avatar",t.data),n.render())})},saveBackgroundChanges:function(e){var t,n=this;e&&n.getFile(e).catch(function(e){return Promise.reject()}).then(function(e){return t=e,n.model.updateBackground(e)}).then(function(e){e.success&&(n.model.set("backgroundUrl",t.data),n.render())})},getFile:function(e){var t=new FileReader;return new Promise(function(n,a){e?(t.onload=function(e){n({data:e.target.result,parsed:e.target.result.match(/;base64,(.+)$/)[1]})},t.onerror=function(){a({code:1,message:l.trans("Error reading file")})},t.readAsDataURL(e)):a({code:0,message:l.trans("Please select a file to upload")})})},renderTooltips:function(){var e=this.$("#facebook-tooltip .fa-info"),t=this.$("#twitter-tooltip .fa-info"),n=this.$("#beta-tooltip .fa-info"),a=this.$("#wtg-tooltip .fa-info"),s=this.$("#info-tooltip .fa-info"),i=l.trans("Connecting with Facebook makes it really easy to share everything you do on Wattpad with your Facebook friends. It also allows you to login to Wattpad with one click!"),r=l.trans("Connecting with Twitter makes it really easy to tweet about interesting things you find on Wattpad. It also allows you to login to Wattpad with one click!"),o=l.trans("Check out what&#39;s coming next on Wattpad&#39;s website and help give feedback by joining our web beta group"),c=l.trans("Revert to the previous design for the Homepage, Genre pages, Library, Reading Lists and Discover/Browse"),u=l.trans("Request an HTML or JSON file of the personal information you have stored on Wattpad");e.tooltip({trigger:"click hover manual",title:i,container:"body"}),t.tooltip({trigger:"click hover manual",title:r,container:"body"}),n.tooltip({trigger:"click hover manual",title:o,container:"body"}),a.tooltip({trigger:"click hover manual",title:c,container:"body"}),s.tooltip({trigger:"click hover manual",title:u,container:"body"})},onSaveAccountChanges:function(e,s){var r={},o={},c=n(e.currentTarget).serializeArray(),u=this;t.each(c,function(e){var t=e.name,n=e.value,s=u.model.get(t);if(void 0!==s){switch(t){case"birthdate":s=moment(s).format("MM-DD-YYYY"),n=moment(n).format("MM-DD-YYYY");break;case"language":n=parseInt(n,10);break;case"genderCode":s=""===n?null:n}n!==s&&(void 0===(void 0===s?"undefined":a(s))&&"genderCode"!==t||(o[t]=s,r[t]=n))}}),t.each(s,function(e){var t=e.name,n=e.value,a=u.model.get(t);switch(o[t]=a,t){case"show_name":case"appear_offline":r[t]=parseInt(n,10);break;case"beta_enabled":r[t]=!0===n}}),i.local.clear("user."+this.model.get("username")),this.model.set(r),this.model.save(r,{patch:!0,type:"put"}).success(function(e){u.model.set(r),new i.views.ErrorToast({message:l.trans("Your changes were successful!")}).render()}).fail(function(e,t){u.model.set(o),new i.views.ErrorToast({message:l.trans("Something went wrong, your changes were not saved. ")+(e.responseJSON.message||"")}).render()})},openUserSettingsModal:function(e){new i.views.UserSettingsModal({type:e,userId:this.model.get("id")}).showModal()},updateNotifications:function(e){var t=this,a=n(e.currentTarget);s.utils.stopEvent(e),this.model.updateNotifications(a).then(function(e){t.model.set("notificationSettings",{alerts:e.alerts,alertssub:e.alertssub,subscribe:e.subscribe}),new i.views.ErrorToast({message:l.trans("Your changes were successful!")}).render()}).catch(function(e){new i.views.ErrorToast({message:l.trans("Something went wrong, your changes were not saved. ")+e}).render()})}})),i.mixin(i.views.UserSettings,"AuthPromptManagement","FacebookConnect","TwitterConnect")}(window,_,jQuery,wattpad,wattpad.utils,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("UserSettingsModal",a.views.DummyReactView.extend({component:"UserSettingsModal",componentId:"user-settings-modal",constructor:function(e){this.type=e.type,this.userId=e.userId,e={componentData:{type:this.type,userId:this.userId,title:n.utils.trans("Change %s",this.type),onPasswordToggle:this.onPasswordToggle.bind(this),onFormSubmit:this.onFormSubmit.bind(this),hideModal:this.hideModal.bind(this),app:{language:a.get("language"),translatedLanguage:a.get("translatedLanguage")}},component:this.component,componentId:this.componentId},$("body").removeClass("js-app-off"),a.views.DummyReactView.call(this,e)},showModal:function(){var e=$("#generic-modal");e.find(".modal-body").html(this.render().$el),e.modal({backdrop:"static",keyboard:!1})},hideModal:function(){$("#generic-modal").modal("hide")},onPasswordToggle:function(e){var t=$(e.currentTarget).find(".fa-view"),n=$(e.currentTarget).siblings("input"),a=n.attr("type");"password"===a&&(n.attr("type","text").focus(),t.addClass("active")),"text"===a&&(n.attr("type","password").focus(),t.removeClass("active"))},onFormSubmit:function(t){var s=this;$.ajax({type:"POST",url:"apiv2/"+t,data:$(".on-form-submit").serialize(),success:function(t){if(s.hideModal(),"password"===s.type&&t.token){n.utils.setCookie("token",t.token,null,!0),new a.views.ErrorToast({message:n.utils.trans("Your changes were successful!")}).render()}else{e.location.replace("/login?nexturl=/settings").reload()}},error:function(e){s.hideModal(),new a.views.ErrorToast({message:n.utils.trans("Something went wrong, your changes were not saved. ")+(e.responseJSON.message||"")}).render()}})}}))}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n,a){a.add("ImageAppealFlow",a.views.DummyReactView.extend({component:"ImageAppealFlow",componentId:"image-appeal-flow",constructor:function(e){this.componentData={imageUrl:e.imageUrl,onSubmissionError:this.onSubmissionError.bind(this),isIOS:a.get("device").is.ios,isAndroid:a.get("device").is.android};var t={componentData:this.componentData,component:this.component,componentId:this.componentId};a.views.DummyReactView.call(this,t)},onSubmissionError:function(e){console.error(e),new a.views.ErrorToast({message:e}).render()}})),a.mixin(a.views.ImageAppealFlow,"AuthPromptManagement","FacebookConnect","TwitterConnect")}(window,_,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t,n){n.router.on("route:image_appeal",n.router.filter(["getTranslations","requireLogin"],function(e){var a=e.imageUrl||"",s=new n.views.ImageAppealFlow({imageUrl:a?a.trim():""});n.transitionTo(s,{hasHeader:!0,hasFooter:!0,pageTitle:t.utils.trans("Appeal form")})}))}(window,wattpad,window.app)},function(e,t,n){"use strict";!function(e,t){t.router.add({"appeal-flow(/)":["image_appeal",{}]})}(window,window.app)}]);